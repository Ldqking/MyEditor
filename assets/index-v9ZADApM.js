var PI=Object.defineProperty;var kI=(t,e,n)=>e in t?PI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var se=(t,e,n)=>kI(t,typeof e!="symbol"?e+"":e,n);function S1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xv={exports:{}},Ql={},Cv={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function $I(){if(G0)return tn;G0=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=f&&D[f]||D["@@iterator"],typeof D=="function"?D:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function p(D,U,W){this.props=D,this.context=U,this.refs=y,this.updater=W||g}p.prototype.isReactComponent={},p.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},p.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function C(){}C.prototype=p.prototype;function x(D,U,W){this.props=D,this.context=U,this.refs=y,this.updater=W||g}var S=x.prototype=new C;S.constructor=x,m(S,p.prototype),S.isPureReactComponent=!0;var E=Array.isArray,P=Object.prototype.hasOwnProperty,$={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function M(D,U,W){var X,Y={},Q=null,ne=null;if(U!=null)for(X in U.ref!==void 0&&(ne=U.ref),U.key!==void 0&&(Q=""+U.key),U)P.call(U,X)&&!_.hasOwnProperty(X)&&(Y[X]=U[X]);var ie=arguments.length-2;if(ie===1)Y.children=W;else if(1<ie){for(var re=Array(ie),I=0;I<ie;I++)re[I]=arguments[I+2];Y.children=re}if(D&&D.defaultProps)for(X in ie=D.defaultProps,ie)Y[X]===void 0&&(Y[X]=ie[X]);return{$$typeof:t,type:D,key:Q,ref:ne,props:Y,_owner:$.current}}function B(D,U){return{$$typeof:t,type:D.type,key:U,ref:D.ref,props:D.props,_owner:D._owner}}function H(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function k(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return U[W]})}var T=/\/+/g;function O(D,U){return typeof D=="object"&&D!==null&&D.key!=null?k(""+D.key):U.toString(36)}function L(D,U,W,X,Y){var Q=typeof D;(Q==="undefined"||Q==="boolean")&&(D=null);var ne=!1;if(D===null)ne=!0;else switch(Q){case"string":case"number":ne=!0;break;case"object":switch(D.$$typeof){case t:case e:ne=!0}}if(ne)return ne=D,Y=Y(ne),D=X===""?"."+O(ne,0):X,E(Y)?(W="",D!=null&&(W=D.replace(T,"$&/")+"/"),L(Y,U,W,"",function(I){return I})):Y!=null&&(H(Y)&&(Y=B(Y,W+(!Y.key||ne&&ne.key===Y.key?"":(""+Y.key).replace(T,"$&/")+"/")+D)),U.push(Y)),1;if(ne=0,X=X===""?".":X+":",E(D))for(var ie=0;ie<D.length;ie++){Q=D[ie];var re=X+O(Q,ie);ne+=L(Q,U,W,re,Y)}else if(re=v(D),typeof re=="function")for(D=re.call(D),ie=0;!(Q=D.next()).done;)Q=Q.value,re=X+O(Q,ie++),ne+=L(Q,U,W,re,Y);else if(Q==="object")throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ne}function K(D,U,W){if(D==null)return D;var X=[],Y=0;return L(D,X,"","",function(Q){return U.call(W,Q,Y++)}),X}function q(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var J={current:null},V={transition:null},z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:V,ReactCurrentOwner:$};return tn.Children={map:K,forEach:function(D,U,W){K(D,function(){U.apply(this,arguments)},W)},count:function(D){var U=0;return K(D,function(){U++}),U},toArray:function(D){return K(D,function(U){return U})||[]},only:function(D){if(!H(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},tn.Component=p,tn.Fragment=n,tn.Profiler=i,tn.PureComponent=x,tn.StrictMode=r,tn.Suspense=s,tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,tn.cloneElement=function(D,U,W){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var X=m({},D.props),Y=D.key,Q=D.ref,ne=D._owner;if(U!=null){if(U.ref!==void 0&&(Q=U.ref,ne=$.current),U.key!==void 0&&(Y=""+U.key),D.type&&D.type.defaultProps)var ie=D.type.defaultProps;for(re in U)P.call(U,re)&&!_.hasOwnProperty(re)&&(X[re]=U[re]===void 0&&ie!==void 0?ie[re]:U[re])}var re=arguments.length-2;if(re===1)X.children=W;else if(1<re){ie=Array(re);for(var I=0;I<re;I++)ie[I]=arguments[I+2];X.children=ie}return{$$typeof:t,type:D.type,key:Y,ref:Q,props:X,_owner:ne}},tn.createContext=function(D){return D={$$typeof:a,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:o,_context:D},D.Consumer=D},tn.createElement=M,tn.createFactory=function(D){var U=M.bind(null,D);return U.type=D,U},tn.createRef=function(){return{current:null}},tn.forwardRef=function(D){return{$$typeof:l,render:D}},tn.isValidElement=H,tn.lazy=function(D){return{$$typeof:c,_payload:{_status:-1,_result:D},_init:q}},tn.memo=function(D,U){return{$$typeof:u,type:D,compare:U===void 0?null:U}},tn.startTransition=function(D){var U=V.transition;V.transition={};try{D()}finally{V.transition=U}},tn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},tn.useCallback=function(D,U){return J.current.useCallback(D,U)},tn.useContext=function(D){return J.current.useContext(D)},tn.useDebugValue=function(){},tn.useDeferredValue=function(D){return J.current.useDeferredValue(D)},tn.useEffect=function(D,U){return J.current.useEffect(D,U)},tn.useId=function(){return J.current.useId()},tn.useImperativeHandle=function(D,U,W){return J.current.useImperativeHandle(D,U,W)},tn.useInsertionEffect=function(D,U){return J.current.useInsertionEffect(D,U)},tn.useLayoutEffect=function(D,U){return J.current.useLayoutEffect(D,U)},tn.useMemo=function(D,U){return J.current.useMemo(D,U)},tn.useReducer=function(D,U,W){return J.current.useReducer(D,U,W)},tn.useRef=function(D){return J.current.useRef(D)},tn.useState=function(D){return J.current.useState(D)},tn.useSyncExternalStore=function(D,U,W){return J.current.useSyncExternalStore(D,U,W)},tn.useTransition=function(){return J.current.useTransition()},tn.version="18.2.0",tn}var X0;function Nm(){return X0||(X0=1,Cv.exports=$I()),Cv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function TI(){if(Y0)return Ql;Y0=1;var t=Nm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(l,s,u){var c,f={},v=null,g=null;u!==void 0&&(v=""+u),s.key!==void 0&&(v=""+s.key),s.ref!==void 0&&(g=s.ref);for(c in s)r.call(s,c)&&!o.hasOwnProperty(c)&&(f[c]=s[c]);if(l&&l.defaultProps)for(c in s=l.defaultProps,s)f[c]===void 0&&(f[c]=s[c]);return{$$typeof:e,type:l,key:v,ref:g,props:f,_owner:i.current}}return Ql.Fragment=n,Ql.jsx=a,Ql.jsxs=a,Ql}var Q0;function _I(){return Q0||(Q0=1,xv.exports=TI()),xv.exports}var vt=_I(),b=Nm();const ue=Mm(b),gf=S1({__proto__:null,default:ue},[b]);var Zu={},Sv={exports:{}},Xr={},Ev={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function AI(){return J0||(J0=1,function(t){function e(V,z){var D=V.length;V.push(z);e:for(;0<D;){var U=D-1>>>1,W=V[U];if(0<i(W,z))V[U]=z,V[D]=W,D=U;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var z=V[0],D=V.pop();if(D!==z){V[0]=D;e:for(var U=0,W=V.length,X=W>>>1;U<X;){var Y=2*(U+1)-1,Q=V[Y],ne=Y+1,ie=V[ne];if(0>i(Q,D))ne<W&&0>i(ie,Q)?(V[U]=ie,V[ne]=D,U=ne):(V[U]=Q,V[Y]=D,U=Y);else if(ne<W&&0>i(ie,D))V[U]=ie,V[ne]=D,U=ne;else break e}}return z}function i(V,z){var D=V.sortIndex-z.sortIndex;return D!==0?D:V.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var s=[],u=[],c=1,f=null,v=3,g=!1,m=!1,y=!1,p=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(V){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=V)r(u),z.sortIndex=z.expirationTime,e(s,z);else break;z=n(u)}}function E(V){if(y=!1,S(V),!m)if(n(s)!==null)m=!0,q(P);else{var z=n(u);z!==null&&J(E,z.startTime-V)}}function P(V,z){m=!1,y&&(y=!1,C(M),M=-1),g=!0;var D=v;try{for(S(z),f=n(s);f!==null&&(!(f.expirationTime>z)||V&&!k());){var U=f.callback;if(typeof U=="function"){f.callback=null,v=f.priorityLevel;var W=U(f.expirationTime<=z);z=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(s)&&r(s),S(z)}else r(s);f=n(s)}if(f!==null)var X=!0;else{var Y=n(u);Y!==null&&J(E,Y.startTime-z),X=!1}return X}finally{f=null,v=D,g=!1}}var $=!1,_=null,M=-1,B=5,H=-1;function k(){return!(t.unstable_now()-H<B)}function T(){if(_!==null){var V=t.unstable_now();H=V;var z=!0;try{z=_(!0,V)}finally{z?O():($=!1,_=null)}}else $=!1}var O;if(typeof x=="function")O=function(){x(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,K=L.port2;L.port1.onmessage=T,O=function(){K.postMessage(null)}}else O=function(){p(T,0)};function q(V){_=V,$||($=!0,O())}function J(V,z){M=p(function(){V(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,q(P))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var D=v;v=z;try{return V()}finally{v=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var D=v;v=V;try{return z()}finally{v=D}},t.unstable_scheduleCallback=function(V,z,D){var U=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?U+D:U):D=U,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,V={id:c++,callback:z,priorityLevel:V,startTime:D,expirationTime:W,sortIndex:-1},D>U?(V.sortIndex=D,e(u,V),n(s)===null&&V===n(u)&&(y?(C(M),M=-1):y=!0,J(E,D-U))):(V.sortIndex=W,e(s,V),m||g||(m=!0,q(P))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var z=v;return function(){var D=v;v=z;try{return V.apply(this,arguments)}finally{v=D}}}}(Rv)),Rv}var Z0;function OI(){return Z0||(Z0=1,Ev.exports=AI()),Ev.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function MI(){if(eb)return Xr;eb=1;var t=Nm(),e=OI();function n(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(d,h){a(d,h),a(d+"Capture",h)}function a(d,h){for(i[d]=h,d=0;d<h.length;d++)r.add(h[d])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function v(d){return s.call(f,d)?!0:s.call(c,d)?!1:u.test(d)?f[d]=!0:(c[d]=!0,!1)}function g(d,h,w,R){if(w!==null&&w.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return R?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function m(d,h,w,R){if(h===null||typeof h>"u"||g(d,h,w,R))return!0;if(R)return!1;if(w!==null)switch(w.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(d,h,w,R,N,j,Z){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=R,this.attributeNamespace=N,this.mustUseProperty=w,this.propertyName=d,this.type=h,this.sanitizeURL=j,this.removeEmptyString=Z}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){p[d]=new y(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0];p[h]=new y(h,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){p[d]=new y(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){p[d]=new y(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){p[d]=new y(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){p[d]=new y(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){p[d]=new y(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){p[d]=new y(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){p[d]=new y(d,5,!1,d.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function x(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var h=d.replace(C,x);p[h]=new y(h,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var h=d.replace(C,x);p[h]=new y(h,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(C,x);p[h]=new y(h,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){p[d]=new y(d,1,!1,d.toLowerCase(),null,!1,!1)}),p.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){p[d]=new y(d,1,!1,d.toLowerCase(),null,!0,!0)});function S(d,h,w,R){var N=p.hasOwnProperty(h)?p[h]:null;(N!==null?N.type!==0:R||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(m(h,w,N,R)&&(w=null),R||N===null?v(h)&&(w===null?d.removeAttribute(h):d.setAttribute(h,""+w)):N.mustUseProperty?d[N.propertyName]=w===null?N.type===3?!1:"":w:(h=N.attributeName,R=N.attributeNamespace,w===null?d.removeAttribute(h):(N=N.type,w=N===3||N===4&&w===!0?"":""+w,R?d.setAttributeNS(R,h,w):d.setAttribute(h,w))))}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),$=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),V=Symbol.iterator;function z(d){return d===null||typeof d!="object"?null:(d=V&&d[V]||d["@@iterator"],typeof d=="function"?d:null)}var D=Object.assign,U;function W(d){if(U===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);U=h&&h[1]||""}return`
`+U+d}var X=!1;function Y(d,h){if(!d||X)return"";X=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ee){var R=Ee}Reflect.construct(d,[],h)}else{try{h.call()}catch(Ee){R=Ee}d.call(h.prototype)}else{try{throw Error()}catch(Ee){R=Ee}d()}}catch(Ee){if(Ee&&R&&typeof Ee.stack=="string"){for(var N=Ee.stack.split(`
`),j=R.stack.split(`
`),Z=N.length-1,ce=j.length-1;1<=Z&&0<=ce&&N[Z]!==j[ce];)ce--;for(;1<=Z&&0<=ce;Z--,ce--)if(N[Z]!==j[ce]){if(Z!==1||ce!==1)do if(Z--,ce--,0>ce||N[Z]!==j[ce]){var ve=`
`+N[Z].replace(" at new "," at ");return d.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",d.displayName)),ve}while(1<=Z&&0<=ce);break}}}finally{X=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?W(d):""}function Q(d){switch(d.tag){case 5:return W(d.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return d=Y(d.type,!1),d;case 11:return d=Y(d.type.render,!1),d;case 1:return d=Y(d.type,!0),d;default:return""}}function ne(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case _:return"Fragment";case $:return"Portal";case B:return"Profiler";case M:return"StrictMode";case O:return"Suspense";case L:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case k:return(d.displayName||"Context")+".Consumer";case H:return(d._context.displayName||"Context")+".Provider";case T:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case K:return h=d.displayName||null,h!==null?h:ne(d.type)||"Memo";case q:h=d._payload,d=d._init;try{return ne(d(h))}catch{}}return null}function ie(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(h);case 8:return h===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function re(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function I(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function A(d){var h=I(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),R=""+d[h];if(!d.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var N=w.get,j=w.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return N.call(this)},set:function(Z){R=""+Z,j.call(this,Z)}}),Object.defineProperty(d,h,{enumerable:w.enumerable}),{getValue:function(){return R},setValue:function(Z){R=""+Z},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function F(d){d._valueTracker||(d._valueTracker=A(d))}function G(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var w=h.getValue(),R="";return d&&(R=I(d)?d.checked?"true":"false":d.value),d=R,d!==w?(h.setValue(d),!0):!1}function ee(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function te(d,h){var w=h.checked;return D({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function ae(d,h){var w=h.defaultValue==null?"":h.defaultValue,R=h.checked!=null?h.checked:h.defaultChecked;w=re(h.value!=null?h.value:w),d._wrapperState={initialChecked:R,initialValue:w,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function de(d,h){h=h.checked,h!=null&&S(d,"checked",h,!1)}function he(d,h){de(d,h);var w=re(h.value),R=h.type;if(w!=null)R==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(R==="submit"||R==="reset"){d.removeAttribute("value");return}h.hasOwnProperty("value")?we(d,h.type,w):h.hasOwnProperty("defaultValue")&&we(d,h.type,re(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(d.defaultChecked=!!h.defaultChecked)}function pe(d,h,w){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var R=h.type;if(!(R!=="submit"&&R!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+d._wrapperState.initialValue,w||h===d.value||(d.value=h),d.defaultValue=h}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function we(d,h,w){(h!=="number"||ee(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var _e=Array.isArray;function $e(d,h,w,R){if(d=d.options,h){h={};for(var N=0;N<w.length;N++)h["$"+w[N]]=!0;for(w=0;w<d.length;w++)N=h.hasOwnProperty("$"+d[w].value),d[w].selected!==N&&(d[w].selected=N),N&&R&&(d[w].defaultSelected=!0)}else{for(w=""+re(w),h=null,N=0;N<d.length;N++){if(d[N].value===w){d[N].selected=!0,R&&(d[N].defaultSelected=!0);return}h!==null||d[N].disabled||(h=d[N])}h!==null&&(h.selected=!0)}}function Me(d,h){if(h.dangerouslySetInnerHTML!=null)throw Error(n(91));return D({},h,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Re(d,h){var w=h.value;if(w==null){if(w=h.children,h=h.defaultValue,w!=null){if(h!=null)throw Error(n(92));if(_e(w)){if(1<w.length)throw Error(n(93));w=w[0]}h=w}h==null&&(h=""),w=h}d._wrapperState={initialValue:re(w)}}function be(d,h){var w=re(h.value),R=re(h.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),h.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),R!=null&&(d.defaultValue=""+R)}function Le(d){var h=d.textContent;h===d._wrapperState.initialValue&&h!==""&&h!==null&&(d.value=h)}function He(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(d,h){return d==null||d==="http://www.w3.org/1999/xhtml"?He(h):d==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var qe,De=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,w,R,N){MSApp.execUnsafeLocalFunction(function(){return d(h,w,R,N)})}:d}(function(d,h){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=h;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=qe.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;h.firstChild;)d.appendChild(h.firstChild)}});function nt(d,h){if(h){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=h;return}}d.textContent=h}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},st=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(d){st.forEach(function(h){h=h+d.charAt(0).toUpperCase()+d.substring(1),Je[h]=Je[d]})});function Ve(d,h,w){return h==null||typeof h=="boolean"||h===""?"":w||typeof h!="number"||h===0||Je.hasOwnProperty(d)&&Je[d]?(""+h).trim():h+"px"}function Ie(d,h){d=d.style;for(var w in h)if(h.hasOwnProperty(w)){var R=w.indexOf("--")===0,N=Ve(w,h[w],R);w==="float"&&(w="cssFloat"),R?d.setProperty(w,N):d[w]=N}}var Te=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function je(d,h){if(h){if(Te[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(n(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(n(61))}if(h.style!=null&&typeof h.style!="object")throw Error(n(62))}}function ke(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var et=null;function St(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Ht=null,Ft=null,We=null;function tt(d){if(d=Ll(d)){if(typeof Ht!="function")throw Error(n(280));var h=d.stateNode;h&&(h=vu(h),Ht(d.stateNode,d.type,h))}}function gt(d){Ft?We?We.push(d):We=[d]:Ft=d}function Ge(){if(Ft){var d=Ft,h=We;if(We=Ft=null,tt(d),h)for(d=0;d<h.length;d++)tt(h[d])}}function Rt(d,h){return d(h)}function dt(){}var ut=!1;function Ue(d,h,w){if(ut)return d(h,w);ut=!0;try{return Rt(d,h,w)}finally{ut=!1,(Ft!==null||We!==null)&&(dt(),Ge())}}function Ct(d,h){var w=d.stateNode;if(w===null)return null;var R=vu(w);if(R===null)return null;w=R[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(d=d.type,R=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!R;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,h,typeof w));return w}var Lt=!1;if(l)try{var Ke={};Object.defineProperty(Ke,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Ke,Ke),window.removeEventListener("test",Ke,Ke)}catch{Lt=!1}function Xe(d,h,w,R,N,j,Z,ce,ve){var Ee=Array.prototype.slice.call(arguments,3);try{h.apply(w,Ee)}catch(Be){this.onError(Be)}}var ot=!1,at=null,lt=!1,mt=null,Jt={onError:function(d){ot=!0,at=d}};function qt(d,h,w,R,N,j,Z,ce,ve){ot=!1,at=null,Xe.apply(Jt,arguments)}function Yt(d,h,w,R,N,j,Z,ce,ve){if(qt.apply(this,arguments),ot){if(ot){var Ee=at;ot=!1,at=null}else throw Error(n(198));lt||(lt=!0,mt=Ee)}}function zt(d){var h=d,w=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(w=h.return),d=h.return;while(d)}return h.tag===3?w:null}function En(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function wn(d){if(zt(d)!==d)throw Error(n(188))}function xn(d){var h=d.alternate;if(!h){if(h=zt(d),h===null)throw Error(n(188));return h!==d?null:d}for(var w=d,R=h;;){var N=w.return;if(N===null)break;var j=N.alternate;if(j===null){if(R=N.return,R!==null){w=R;continue}break}if(N.child===j.child){for(j=N.child;j;){if(j===w)return wn(N),d;if(j===R)return wn(N),h;j=j.sibling}throw Error(n(188))}if(w.return!==R.return)w=N,R=j;else{for(var Z=!1,ce=N.child;ce;){if(ce===w){Z=!0,w=N,R=j;break}if(ce===R){Z=!0,R=N,w=j;break}ce=ce.sibling}if(!Z){for(ce=j.child;ce;){if(ce===w){Z=!0,w=j,R=N;break}if(ce===R){Z=!0,R=j,w=N;break}ce=ce.sibling}if(!Z)throw Error(n(189))}}if(w.alternate!==R)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:h}function An(d){return d=xn(d),d!==null?nn(d):null}function nn(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=nn(d);if(h!==null)return h;d=d.sibling}return null}var Kt=e.unstable_scheduleCallback,rt=e.unstable_cancelCallback,ct=e.unstable_shouldYield,Oe=e.unstable_requestPaint,Ce=e.unstable_now,Ye=e.unstable_getCurrentPriorityLevel,wt=e.unstable_ImmediatePriority,Dt=e.unstable_UserBlockingPriority,Gt=e.unstable_NormalPriority,Pn=e.unstable_LowPriority,Vt=e.unstable_IdlePriority,Zt=null,rn=null;function Wn(d){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Zt,d,void 0,(d.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:zr,Zn=Math.log,Yn=Math.LN2;function zr(d){return d>>>=0,d===0?32:31-(Zn(d)/Yn|0)|0}var Cr=64,Sr=4194304;function kr(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function sn(d,h){var w=d.pendingLanes;if(w===0)return 0;var R=0,N=d.suspendedLanes,j=d.pingedLanes,Z=w&268435455;if(Z!==0){var ce=Z&~N;ce!==0?R=kr(ce):(j&=Z,j!==0&&(R=kr(j)))}else Z=w&~N,Z!==0?R=kr(Z):j!==0&&(R=kr(j));if(R===0)return 0;if(h!==0&&h!==R&&(h&N)===0&&(N=R&-R,j=h&-h,N>=j||N===16&&(j&4194240)!==0))return h;if((R&4)!==0&&(R|=w&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=R;0<h;)w=31-fn(h),N=1<<w,R|=d[w],h&=~N;return R}function pt(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(d,h){for(var w=d.suspendedLanes,R=d.pingedLanes,N=d.expirationTimes,j=d.pendingLanes;0<j;){var Z=31-fn(j),ce=1<<Z,ve=N[Z];ve===-1?((ce&w)===0||(ce&R)!==0)&&(N[Z]=pt(ce,h)):ve<=h&&(d.expiredLanes|=ce),j&=~ce}}function en(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function ln(){var d=Cr;return Cr<<=1,(Cr&4194240)===0&&(Cr=64),d}function hn(d){for(var h=[],w=0;31>w;w++)h.push(d);return h}function Cn(d,h,w){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-fn(h),d[h]=w}function Er(d,h){var w=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var R=d.eventTimes;for(d=d.expirationTimes;0<w;){var N=31-fn(w),j=1<<N;h[N]=0,R[N]=-1,d[N]=-1,w&=~j}}function er(d,h){var w=d.entangledLanes|=h;for(d=d.entanglements;w;){var R=31-fn(w),N=1<<R;N&h|d[R]&h&&(d[R]|=h),w&=~N}}var jt=0;function cr(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var gr,Hr,mr,Fo,as,ss=!1,mo=[],Un=null,$r=null,Vr=null,ni=new Map,wi=new Map,ri=[],ls="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bt(d,h){switch(d){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":ni.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(h.pointerId)}}function Ot(d,h,w,R,N,j){return d===null||d.nativeEvent!==j?(d={blockedOn:h,domEventName:w,eventSystemFlags:R,nativeEvent:j,targetContainers:[N]},h!==null&&(h=Ll(h),h!==null&&Hr(h)),d):(d.eventSystemFlags|=R,h=d.targetContainers,N!==null&&h.indexOf(N)===-1&&h.push(N),d)}function Nn(d,h,w,R,N){switch(h){case"focusin":return Un=Ot(Un,d,h,w,R,N),!0;case"dragenter":return $r=Ot($r,d,h,w,R,N),!0;case"mouseover":return Vr=Ot(Vr,d,h,w,R,N),!0;case"pointerover":var j=N.pointerId;return ni.set(j,Ot(ni.get(j)||null,d,h,w,R,N)),!0;case"gotpointercapture":return j=N.pointerId,wi.set(j,Ot(wi.get(j)||null,d,h,w,R,N)),!0}return!1}function jn(d){var h=pa(d.target);if(h!==null){var w=zt(h);if(w!==null){if(h=w.tag,h===13){if(h=En(w),h!==null){d.blockedOn=h,as(d.priority,function(){mr(w)});return}}else if(h===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function kn(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var w=Gf(d.domEventName,d.eventSystemFlags,h[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var R=new w.constructor(w.type,w);et=R,w.target.dispatchEvent(R),et=null}else return h=Ll(w),h!==null&&Hr(h),d.blockedOn=w,!1;h.shift()}return!0}function po(d,h,w){kn(d)&&w.delete(h)}function El(){ss=!1,Un!==null&&kn(Un)&&(Un=null),$r!==null&&kn($r)&&($r=null),Vr!==null&&kn(Vr)&&(Vr=null),ni.forEach(po),wi.forEach(po)}function Bo(d,h){d.blockedOn===h&&(d.blockedOn=null,ss||(ss=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,El)))}function no(d){function h(N){return Bo(N,d)}if(0<mo.length){Bo(mo[0],d);for(var w=1;w<mo.length;w++){var R=mo[w];R.blockedOn===d&&(R.blockedOn=null)}}for(Un!==null&&Bo(Un,d),$r!==null&&Bo($r,d),Vr!==null&&Bo(Vr,d),ni.forEach(h),wi.forEach(h),w=0;w<ri.length;w++)R=ri[w],R.blockedOn===d&&(R.blockedOn=null);for(;0<ri.length&&(w=ri[0],w.blockedOn===null);)jn(w),w.blockedOn===null&&ri.shift()}var cs=E.ReactCurrentBatchConfig,tu=!0;function JE(d,h,w,R){var N=jt,j=cs.transition;cs.transition=null;try{jt=1,Kf(d,h,w,R)}finally{jt=N,cs.transition=j}}function ZE(d,h,w,R){var N=jt,j=cs.transition;cs.transition=null;try{jt=4,Kf(d,h,w,R)}finally{jt=N,cs.transition=j}}function Kf(d,h,w,R){if(tu){var N=Gf(d,h,w,R);if(N===null)dh(d,h,R,nu,w),bt(d,R);else if(Nn(N,d,h,w,R))R.stopPropagation();else if(bt(d,R),h&4&&-1<ls.indexOf(d)){for(;N!==null;){var j=Ll(N);if(j!==null&&gr(j),j=Gf(d,h,w,R),j===null&&dh(d,h,R,nu,w),j===N)break;N=j}N!==null&&R.stopPropagation()}else dh(d,h,R,null,w)}}var nu=null;function Gf(d,h,w,R){if(nu=null,d=St(R),d=pa(d),d!==null)if(h=zt(d),h===null)d=null;else if(w=h.tag,w===13){if(d=En(h),d!==null)return d;d=null}else if(w===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null);return nu=d,null}function Op(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case wt:return 1;case Dt:return 4;case Gt:case Pn:return 16;case Vt:return 536870912;default:return 16}default:return 16}}var jo=null,Xf=null,ru=null;function Mp(){if(ru)return ru;var d,h=Xf,w=h.length,R,N="value"in jo?jo.value:jo.textContent,j=N.length;for(d=0;d<w&&h[d]===N[d];d++);var Z=w-d;for(R=1;R<=Z&&h[w-R]===N[j-R];R++);return ru=N.slice(d,1<R?1-R:void 0)}function iu(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function ou(){return!0}function Np(){return!1}function ii(d){function h(w,R,N,j,Z){this._reactName=w,this._targetInst=N,this.type=R,this.nativeEvent=j,this.target=Z,this.currentTarget=null;for(var ce in d)d.hasOwnProperty(ce)&&(w=d[ce],this[ce]=w?w(j):j[ce]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ou:Np,this.isPropagationStopped=Np,this}return D(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),h}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yf=ii(us),Rl=D({},us,{view:0,detail:0}),eR=ii(Rl),Qf,Jf,Il,au=D({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eh,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Il&&(Il&&d.type==="mousemove"?(Qf=d.screenX-Il.screenX,Jf=d.screenY-Il.screenY):Jf=Qf=0,Il=d),Qf)},movementY:function(d){return"movementY"in d?d.movementY:Jf}}),Lp=ii(au),tR=D({},au,{dataTransfer:0}),nR=ii(tR),rR=D({},Rl,{relatedTarget:0}),Zf=ii(rR),iR=D({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),oR=ii(iR),aR=D({},us,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),sR=ii(aR),lR=D({},us,{data:0}),Dp=ii(lR),cR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fR(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=dR[d])?!!h[d]:!1}function eh(){return fR}var hR=D({},Rl,{key:function(d){if(d.key){var h=cR[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=iu(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?uR[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eh,charCode:function(d){return d.type==="keypress"?iu(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?iu(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),vR=ii(hR),gR=D({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fp=ii(gR),mR=D({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eh}),pR=ii(mR),yR=D({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),bR=ii(yR),wR=D({},au,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),xR=ii(wR),CR=[9,13,27,32],th=l&&"CompositionEvent"in window,Pl=null;l&&"documentMode"in document&&(Pl=document.documentMode);var SR=l&&"TextEvent"in window&&!Pl,Bp=l&&(!th||Pl&&8<Pl&&11>=Pl),jp=" ",zp=!1;function Hp(d,h){switch(d){case"keyup":return CR.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var ds=!1;function ER(d,h){switch(d){case"compositionend":return Vp(h);case"keypress":return h.which!==32?null:(zp=!0,jp);case"textInput":return d=h.data,d===jp&&zp?null:d;default:return null}}function RR(d,h){if(ds)return d==="compositionend"||!th&&Hp(d,h)?(d=Mp(),ru=Xf=jo=null,ds=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Bp&&h.locale!=="ko"?null:h.data;default:return null}}var IR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!IR[d.type]:h==="textarea"}function Up(d,h,w,R){gt(R),h=du(h,"onChange"),0<h.length&&(w=new Yf("onChange","change",null,w,R),d.push({event:w,listeners:h}))}var kl=null,$l=null;function PR(d){cy(d,0)}function su(d){var h=ms(d);if(G(h))return d}function kR(d,h){if(d==="change")return h}var qp=!1;if(l){var nh;if(l){var rh="oninput"in document;if(!rh){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),rh=typeof Kp.oninput=="function"}nh=rh}else nh=!1;qp=nh&&(!document.documentMode||9<document.documentMode)}function Gp(){kl&&(kl.detachEvent("onpropertychange",Xp),$l=kl=null)}function Xp(d){if(d.propertyName==="value"&&su($l)){var h=[];Up(h,$l,d,St(d)),Ue(PR,h)}}function $R(d,h,w){d==="focusin"?(Gp(),kl=h,$l=w,kl.attachEvent("onpropertychange",Xp)):d==="focusout"&&Gp()}function TR(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return su($l)}function _R(d,h){if(d==="click")return su(h)}function AR(d,h){if(d==="input"||d==="change")return su(h)}function OR(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var Ni=typeof Object.is=="function"?Object.is:OR;function Tl(d,h){if(Ni(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var w=Object.keys(d),R=Object.keys(h);if(w.length!==R.length)return!1;for(R=0;R<w.length;R++){var N=w[R];if(!s.call(h,N)||!Ni(d[N],h[N]))return!1}return!0}function Yp(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Qp(d,h){var w=Yp(d);d=0;for(var R;w;){if(w.nodeType===3){if(R=d+w.textContent.length,d<=h&&R>=h)return{node:w,offset:h-d};d=R}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Yp(w)}}function Jp(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?Jp(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function Zp(){for(var d=window,h=ee();h instanceof d.HTMLIFrameElement;){try{var w=typeof h.contentWindow.location.href=="string"}catch{w=!1}if(w)d=h.contentWindow;else break;h=ee(d.document)}return h}function ih(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function MR(d){var h=Zp(),w=d.focusedElem,R=d.selectionRange;if(h!==w&&w&&w.ownerDocument&&Jp(w.ownerDocument.documentElement,w)){if(R!==null&&ih(w)){if(h=R.start,d=R.end,d===void 0&&(d=h),"selectionStart"in w)w.selectionStart=h,w.selectionEnd=Math.min(d,w.value.length);else if(d=(h=w.ownerDocument||document)&&h.defaultView||window,d.getSelection){d=d.getSelection();var N=w.textContent.length,j=Math.min(R.start,N);R=R.end===void 0?j:Math.min(R.end,N),!d.extend&&j>R&&(N=R,R=j,j=N),N=Qp(w,j);var Z=Qp(w,R);N&&Z&&(d.rangeCount!==1||d.anchorNode!==N.node||d.anchorOffset!==N.offset||d.focusNode!==Z.node||d.focusOffset!==Z.offset)&&(h=h.createRange(),h.setStart(N.node,N.offset),d.removeAllRanges(),j>R?(d.addRange(h),d.extend(Z.node,Z.offset)):(h.setEnd(Z.node,Z.offset),d.addRange(h)))}}for(h=[],d=w;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<h.length;w++)d=h[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var NR=l&&"documentMode"in document&&11>=document.documentMode,fs=null,oh=null,_l=null,ah=!1;function ey(d,h,w){var R=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ah||fs==null||fs!==ee(R)||(R=fs,"selectionStart"in R&&ih(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),_l&&Tl(_l,R)||(_l=R,R=du(oh,"onSelect"),0<R.length&&(h=new Yf("onSelect","select",null,h,w),d.push({event:h,listeners:R}),h.target=fs)))}function lu(d,h){var w={};return w[d.toLowerCase()]=h.toLowerCase(),w["Webkit"+d]="webkit"+h,w["Moz"+d]="moz"+h,w}var hs={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},sh={},ty={};l&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function cu(d){if(sh[d])return sh[d];if(!hs[d])return d;var h=hs[d],w;for(w in h)if(h.hasOwnProperty(w)&&w in ty)return sh[d]=h[w];return d}var ny=cu("animationend"),ry=cu("animationiteration"),iy=cu("animationstart"),oy=cu("transitionend"),ay=new Map,sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zo(d,h){ay.set(d,h),o(h,[d])}for(var lh=0;lh<sy.length;lh++){var ch=sy[lh],LR=ch.toLowerCase(),DR=ch[0].toUpperCase()+ch.slice(1);zo(LR,"on"+DR)}zo(ny,"onAnimationEnd"),zo(ry,"onAnimationIteration"),zo(iy,"onAnimationStart"),zo("dblclick","onDoubleClick"),zo("focusin","onFocus"),zo("focusout","onBlur"),zo(oy,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function ly(d,h,w){var R=d.type||"unknown-event";d.currentTarget=w,Yt(R,h,void 0,d),d.currentTarget=null}function cy(d,h){h=(h&4)!==0;for(var w=0;w<d.length;w++){var R=d[w],N=R.event;R=R.listeners;e:{var j=void 0;if(h)for(var Z=R.length-1;0<=Z;Z--){var ce=R[Z],ve=ce.instance,Ee=ce.currentTarget;if(ce=ce.listener,ve!==j&&N.isPropagationStopped())break e;ly(N,ce,Ee),j=ve}else for(Z=0;Z<R.length;Z++){if(ce=R[Z],ve=ce.instance,Ee=ce.currentTarget,ce=ce.listener,ve!==j&&N.isPropagationStopped())break e;ly(N,ce,Ee),j=ve}}}if(lt)throw d=mt,lt=!1,mt=null,d}function Fn(d,h){var w=h[ph];w===void 0&&(w=h[ph]=new Set);var R=d+"__bubble";w.has(R)||(uy(h,d,2,!1),w.add(R))}function uh(d,h,w){var R=0;h&&(R|=4),uy(w,d,R,h)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Ol(d){if(!d[uu]){d[uu]=!0,r.forEach(function(w){w!=="selectionchange"&&(FR.has(w)||uh(w,!1,d),uh(w,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[uu]||(h[uu]=!0,uh("selectionchange",!1,h))}}function uy(d,h,w,R){switch(Op(h)){case 1:var N=JE;break;case 4:N=ZE;break;default:N=Kf}w=N.bind(null,h,w,d),N=void 0,!Lt||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(N=!0),R?N!==void 0?d.addEventListener(h,w,{capture:!0,passive:N}):d.addEventListener(h,w,!0):N!==void 0?d.addEventListener(h,w,{passive:N}):d.addEventListener(h,w,!1)}function dh(d,h,w,R,N){var j=R;if((h&1)===0&&(h&2)===0&&R!==null)e:for(;;){if(R===null)return;var Z=R.tag;if(Z===3||Z===4){var ce=R.stateNode.containerInfo;if(ce===N||ce.nodeType===8&&ce.parentNode===N)break;if(Z===4)for(Z=R.return;Z!==null;){var ve=Z.tag;if((ve===3||ve===4)&&(ve=Z.stateNode.containerInfo,ve===N||ve.nodeType===8&&ve.parentNode===N))return;Z=Z.return}for(;ce!==null;){if(Z=pa(ce),Z===null)return;if(ve=Z.tag,ve===5||ve===6){R=j=Z;continue e}ce=ce.parentNode}}R=R.return}Ue(function(){var Ee=j,Be=St(w),ze=[];e:{var Fe=ay.get(d);if(Fe!==void 0){var yt=Yf,Et=d;switch(d){case"keypress":if(iu(w)===0)break e;case"keydown":case"keyup":yt=vR;break;case"focusin":Et="focus",yt=Zf;break;case"focusout":Et="blur",yt=Zf;break;case"beforeblur":case"afterblur":yt=Zf;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=nR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=pR;break;case ny:case ry:case iy:yt=oR;break;case oy:yt=bR;break;case"scroll":yt=eR;break;case"wheel":yt=xR;break;case"copy":case"cut":case"paste":yt=sR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Fp}var It=(h&4)!==0,tr=!It&&d==="scroll",xe=It?Fe!==null?Fe+"Capture":null:Fe;It=[];for(var ge=Ee,Se;ge!==null;){Se=ge;var Qe=Se.stateNode;if(Se.tag===5&&Qe!==null&&(Se=Qe,xe!==null&&(Qe=Ct(ge,xe),Qe!=null&&It.push(Ml(ge,Qe,Se)))),tr)break;ge=ge.return}0<It.length&&(Fe=new yt(Fe,Et,null,w,Be),ze.push({event:Fe,listeners:It}))}}if((h&7)===0){e:{if(Fe=d==="mouseover"||d==="pointerover",yt=d==="mouseout"||d==="pointerout",Fe&&w!==et&&(Et=w.relatedTarget||w.fromElement)&&(pa(Et)||Et[yo]))break e;if((yt||Fe)&&(Fe=Be.window===Be?Be:(Fe=Be.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,yt?(Et=w.relatedTarget||w.toElement,yt=Ee,Et=Et?pa(Et):null,Et!==null&&(tr=zt(Et),Et!==tr||Et.tag!==5&&Et.tag!==6)&&(Et=null)):(yt=null,Et=Ee),yt!==Et)){if(It=Lp,Qe="onMouseLeave",xe="onMouseEnter",ge="mouse",(d==="pointerout"||d==="pointerover")&&(It=Fp,Qe="onPointerLeave",xe="onPointerEnter",ge="pointer"),tr=yt==null?Fe:ms(yt),Se=Et==null?Fe:ms(Et),Fe=new It(Qe,ge+"leave",yt,w,Be),Fe.target=tr,Fe.relatedTarget=Se,Qe=null,pa(Be)===Ee&&(It=new It(xe,ge+"enter",Et,w,Be),It.target=Se,It.relatedTarget=tr,Qe=It),tr=Qe,yt&&Et)t:{for(It=yt,xe=Et,ge=0,Se=It;Se;Se=vs(Se))ge++;for(Se=0,Qe=xe;Qe;Qe=vs(Qe))Se++;for(;0<ge-Se;)It=vs(It),ge--;for(;0<Se-ge;)xe=vs(xe),Se--;for(;ge--;){if(It===xe||xe!==null&&It===xe.alternate)break t;It=vs(It),xe=vs(xe)}It=null}else It=null;yt!==null&&dy(ze,Fe,yt,It,!1),Et!==null&&tr!==null&&dy(ze,tr,Et,It,!0)}}e:{if(Fe=Ee?ms(Ee):window,yt=Fe.nodeName&&Fe.nodeName.toLowerCase(),yt==="select"||yt==="input"&&Fe.type==="file")var $t=kR;else if(Wp(Fe))if(qp)$t=AR;else{$t=TR;var Mt=$R}else(yt=Fe.nodeName)&&yt.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&($t=_R);if($t&&($t=$t(d,Ee))){Up(ze,$t,w,Be);break e}Mt&&Mt(d,Fe,Ee),d==="focusout"&&(Mt=Fe._wrapperState)&&Mt.controlled&&Fe.type==="number"&&we(Fe,"number",Fe.value)}switch(Mt=Ee?ms(Ee):window,d){case"focusin":(Wp(Mt)||Mt.contentEditable==="true")&&(fs=Mt,oh=Ee,_l=null);break;case"focusout":_l=oh=fs=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,ey(ze,w,Be);break;case"selectionchange":if(NR)break;case"keydown":case"keyup":ey(ze,w,Be)}var Nt;if(th)e:{switch(d){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ds?Hp(d,w)&&(Bt="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(Bt="onCompositionStart");Bt&&(Bp&&w.locale!=="ko"&&(ds||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ds&&(Nt=Mp()):(jo=Be,Xf="value"in jo?jo.value:jo.textContent,ds=!0)),Mt=du(Ee,Bt),0<Mt.length&&(Bt=new Dp(Bt,d,null,w,Be),ze.push({event:Bt,listeners:Mt}),Nt?Bt.data=Nt:(Nt=Vp(w),Nt!==null&&(Bt.data=Nt)))),(Nt=SR?ER(d,w):RR(d,w))&&(Ee=du(Ee,"onBeforeInput"),0<Ee.length&&(Be=new Dp("onBeforeInput","beforeinput",null,w,Be),ze.push({event:Be,listeners:Ee}),Be.data=Nt))}cy(ze,h)})}function Ml(d,h,w){return{instance:d,listener:h,currentTarget:w}}function du(d,h){for(var w=h+"Capture",R=[];d!==null;){var N=d,j=N.stateNode;N.tag===5&&j!==null&&(N=j,j=Ct(d,w),j!=null&&R.unshift(Ml(d,j,N)),j=Ct(d,h),j!=null&&R.push(Ml(d,j,N))),d=d.return}return R}function vs(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function dy(d,h,w,R,N){for(var j=h._reactName,Z=[];w!==null&&w!==R;){var ce=w,ve=ce.alternate,Ee=ce.stateNode;if(ve!==null&&ve===R)break;ce.tag===5&&Ee!==null&&(ce=Ee,N?(ve=Ct(w,j),ve!=null&&Z.unshift(Ml(w,ve,ce))):N||(ve=Ct(w,j),ve!=null&&Z.push(Ml(w,ve,ce)))),w=w.return}Z.length!==0&&d.push({event:h,listeners:Z})}var BR=/\r\n?/g,jR=/\u0000|\uFFFD/g;function fy(d){return(typeof d=="string"?d:""+d).replace(BR,`
`).replace(jR,"")}function fu(d,h,w){if(h=fy(h),fy(d)!==h&&w)throw Error(n(425))}function hu(){}var fh=null,hh=null;function vh(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var gh=typeof setTimeout=="function"?setTimeout:void 0,zR=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,HR=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(d){return hy.resolve(null).then(d).catch(VR)}:gh;function VR(d){setTimeout(function(){throw d})}function mh(d,h){var w=h,R=0;do{var N=w.nextSibling;if(d.removeChild(w),N&&N.nodeType===8)if(w=N.data,w==="/$"){if(R===0){d.removeChild(N),no(h);return}R--}else w!=="$"&&w!=="$?"&&w!=="$!"||R++;w=N}while(w);no(h)}function Ho(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return d}function vy(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(h===0)return d;h--}else w==="/$"&&h++}d=d.previousSibling}return null}var gs=Math.random().toString(36).slice(2),ro="__reactFiber$"+gs,Nl="__reactProps$"+gs,yo="__reactContainer$"+gs,ph="__reactEvents$"+gs,WR="__reactListeners$"+gs,UR="__reactHandles$"+gs;function pa(d){var h=d[ro];if(h)return h;for(var w=d.parentNode;w;){if(h=w[yo]||w[ro]){if(w=h.alternate,h.child!==null||w!==null&&w.child!==null)for(d=vy(d);d!==null;){if(w=d[ro])return w;d=vy(d)}return h}d=w,w=d.parentNode}return null}function Ll(d){return d=d[ro]||d[yo],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function ms(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function vu(d){return d[Nl]||null}var yh=[],ps=-1;function Vo(d){return{current:d}}function Bn(d){0>ps||(d.current=yh[ps],yh[ps]=null,ps--)}function Ln(d,h){ps++,yh[ps]=d.current,d.current=h}var Wo={},Tr=Vo(Wo),Wr=Vo(!1),ya=Wo;function ys(d,h){var w=d.type.contextTypes;if(!w)return Wo;var R=d.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===h)return R.__reactInternalMemoizedMaskedChildContext;var N={},j;for(j in w)N[j]=h[j];return R&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=N),N}function Ur(d){return d=d.childContextTypes,d!=null}function gu(){Bn(Wr),Bn(Tr)}function gy(d,h,w){if(Tr.current!==Wo)throw Error(n(168));Ln(Tr,h),Ln(Wr,w)}function my(d,h,w){var R=d.stateNode;if(h=h.childContextTypes,typeof R.getChildContext!="function")return w;R=R.getChildContext();for(var N in R)if(!(N in h))throw Error(n(108,ie(d)||"Unknown",N));return D({},w,R)}function mu(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Wo,ya=Tr.current,Ln(Tr,d),Ln(Wr,Wr.current),!0}function py(d,h,w){var R=d.stateNode;if(!R)throw Error(n(169));w?(d=my(d,h,ya),R.__reactInternalMemoizedMergedChildContext=d,Bn(Wr),Bn(Tr),Ln(Tr,d)):Bn(Wr),Ln(Wr,w)}var bo=null,pu=!1,bh=!1;function yy(d){bo===null?bo=[d]:bo.push(d)}function qR(d){pu=!0,yy(d)}function Uo(){if(!bh&&bo!==null){bh=!0;var d=0,h=jt;try{var w=bo;for(jt=1;d<w.length;d++){var R=w[d];do R=R(!0);while(R!==null)}bo=null,pu=!1}catch(N){throw bo!==null&&(bo=bo.slice(d+1)),Kt(wt,Uo),N}finally{jt=h,bh=!1}}return null}var bs=[],ws=0,yu=null,bu=0,xi=[],Ci=0,ba=null,wo=1,xo="";function wa(d,h){bs[ws++]=bu,bs[ws++]=yu,yu=d,bu=h}function by(d,h,w){xi[Ci++]=wo,xi[Ci++]=xo,xi[Ci++]=ba,ba=d;var R=wo;d=xo;var N=32-fn(R)-1;R&=~(1<<N),w+=1;var j=32-fn(h)+N;if(30<j){var Z=N-N%5;j=(R&(1<<Z)-1).toString(32),R>>=Z,N-=Z,wo=1<<32-fn(h)+N|w<<N|R,xo=j+d}else wo=1<<j|w<<N|R,xo=d}function wh(d){d.return!==null&&(wa(d,1),by(d,1,0))}function xh(d){for(;d===yu;)yu=bs[--ws],bs[ws]=null,bu=bs[--ws],bs[ws]=null;for(;d===ba;)ba=xi[--Ci],xi[Ci]=null,xo=xi[--Ci],xi[Ci]=null,wo=xi[--Ci],xi[Ci]=null}var oi=null,ai=null,zn=!1,Li=null;function wy(d,h){var w=Ii(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=d,h=d.deletions,h===null?(d.deletions=[w],d.flags|=16):h.push(w)}function xy(d,h){switch(d.tag){case 5:var w=d.type;return h=h.nodeType!==1||w.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(d.stateNode=h,oi=d,ai=Ho(h.firstChild),!0):!1;case 6:return h=d.pendingProps===""||h.nodeType!==3?null:h,h!==null?(d.stateNode=h,oi=d,ai=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(w=ba!==null?{id:wo,overflow:xo}:null,d.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=Ii(18,null,null,0),w.stateNode=h,w.return=d,d.child=w,oi=d,ai=null,!0):!1;default:return!1}}function Ch(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Sh(d){if(zn){var h=ai;if(h){var w=h;if(!xy(d,h)){if(Ch(d))throw Error(n(418));h=Ho(w.nextSibling);var R=oi;h&&xy(d,h)?wy(R,w):(d.flags=d.flags&-4097|2,zn=!1,oi=d)}}else{if(Ch(d))throw Error(n(418));d.flags=d.flags&-4097|2,zn=!1,oi=d}}}function Cy(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;oi=d}function wu(d){if(d!==oi)return!1;if(!zn)return Cy(d),zn=!0,!1;var h;if((h=d.tag!==3)&&!(h=d.tag!==5)&&(h=d.type,h=h!=="head"&&h!=="body"&&!vh(d.type,d.memoizedProps)),h&&(h=ai)){if(Ch(d))throw Sy(),Error(n(418));for(;h;)wy(d,h),h=Ho(h.nextSibling)}if(Cy(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(h===0){ai=Ho(d.nextSibling);break e}h--}else w!=="$"&&w!=="$!"&&w!=="$?"||h++}d=d.nextSibling}ai=null}}else ai=oi?Ho(d.stateNode.nextSibling):null;return!0}function Sy(){for(var d=ai;d;)d=Ho(d.nextSibling)}function xs(){ai=oi=null,zn=!1}function Eh(d){Li===null?Li=[d]:Li.push(d)}var KR=E.ReactCurrentBatchConfig;function Di(d,h){if(d&&d.defaultProps){h=D({},h),d=d.defaultProps;for(var w in d)h[w]===void 0&&(h[w]=d[w]);return h}return h}var xu=Vo(null),Cu=null,Cs=null,Rh=null;function Ih(){Rh=Cs=Cu=null}function Ph(d){var h=xu.current;Bn(xu),d._currentValue=h}function kh(d,h,w){for(;d!==null;){var R=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,R!==null&&(R.childLanes|=h)):R!==null&&(R.childLanes&h)!==h&&(R.childLanes|=h),d===w)break;d=d.return}}function Ss(d,h){Cu=d,Rh=Cs=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&h)!==0&&(qr=!0),d.firstContext=null)}function Si(d){var h=d._currentValue;if(Rh!==d)if(d={context:d,memoizedValue:h,next:null},Cs===null){if(Cu===null)throw Error(n(308));Cs=d,Cu.dependencies={lanes:0,firstContext:d}}else Cs=Cs.next=d;return h}var xa=null;function $h(d){xa===null?xa=[d]:xa.push(d)}function Ey(d,h,w,R){var N=h.interleaved;return N===null?(w.next=w,$h(h)):(w.next=N.next,N.next=w),h.interleaved=w,Co(d,R)}function Co(d,h){d.lanes|=h;var w=d.alternate;for(w!==null&&(w.lanes|=h),w=d,d=d.return;d!==null;)d.childLanes|=h,w=d.alternate,w!==null&&(w.childLanes|=h),w=d,d=d.return;return w.tag===3?w.stateNode:null}var qo=!1;function Th(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function So(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function Ko(d,h,w){var R=d.updateQueue;if(R===null)return null;if(R=R.shared,(dn&2)!==0){var N=R.pending;return N===null?h.next=h:(h.next=N.next,N.next=h),R.pending=h,Co(d,w)}return N=R.interleaved,N===null?(h.next=h,$h(R)):(h.next=N.next,N.next=h),R.interleaved=h,Co(d,w)}function Su(d,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var R=h.lanes;R&=d.pendingLanes,w|=R,h.lanes=w,er(d,w)}}function Iy(d,h){var w=d.updateQueue,R=d.alternate;if(R!==null&&(R=R.updateQueue,w===R)){var N=null,j=null;if(w=w.firstBaseUpdate,w!==null){do{var Z={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};j===null?N=j=Z:j=j.next=Z,w=w.next}while(w!==null);j===null?N=j=h:j=j.next=h}else N=j=h;w={baseState:R.baseState,firstBaseUpdate:N,lastBaseUpdate:j,shared:R.shared,effects:R.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=h:d.next=h,w.lastBaseUpdate=h}function Eu(d,h,w,R){var N=d.updateQueue;qo=!1;var j=N.firstBaseUpdate,Z=N.lastBaseUpdate,ce=N.shared.pending;if(ce!==null){N.shared.pending=null;var ve=ce,Ee=ve.next;ve.next=null,Z===null?j=Ee:Z.next=Ee,Z=ve;var Be=d.alternate;Be!==null&&(Be=Be.updateQueue,ce=Be.lastBaseUpdate,ce!==Z&&(ce===null?Be.firstBaseUpdate=Ee:ce.next=Ee,Be.lastBaseUpdate=ve))}if(j!==null){var ze=N.baseState;Z=0,Be=Ee=ve=null,ce=j;do{var Fe=ce.lane,yt=ce.eventTime;if((R&Fe)===Fe){Be!==null&&(Be=Be.next={eventTime:yt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Et=d,It=ce;switch(Fe=h,yt=w,It.tag){case 1:if(Et=It.payload,typeof Et=="function"){ze=Et.call(yt,ze,Fe);break e}ze=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=It.payload,Fe=typeof Et=="function"?Et.call(yt,ze,Fe):Et,Fe==null)break e;ze=D({},ze,Fe);break e;case 2:qo=!0}}ce.callback!==null&&ce.lane!==0&&(d.flags|=64,Fe=N.effects,Fe===null?N.effects=[ce]:Fe.push(ce))}else yt={eventTime:yt,lane:Fe,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Be===null?(Ee=Be=yt,ve=ze):Be=Be.next=yt,Z|=Fe;if(ce=ce.next,ce===null){if(ce=N.shared.pending,ce===null)break;Fe=ce,ce=Fe.next,Fe.next=null,N.lastBaseUpdate=Fe,N.shared.pending=null}}while(!0);if(Be===null&&(ve=ze),N.baseState=ve,N.firstBaseUpdate=Ee,N.lastBaseUpdate=Be,h=N.shared.interleaved,h!==null){N=h;do Z|=N.lane,N=N.next;while(N!==h)}else j===null&&(N.shared.lanes=0);Ea|=Z,d.lanes=Z,d.memoizedState=ze}}function Py(d,h,w){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var R=d[h],N=R.callback;if(N!==null){if(R.callback=null,R=w,typeof N!="function")throw Error(n(191,N));N.call(R)}}}var ky=new t.Component().refs;function _h(d,h,w,R){h=d.memoizedState,w=w(R,h),w=w==null?h:D({},h,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var Ru={isMounted:function(d){return(d=d._reactInternals)?zt(d)===d:!1},enqueueSetState:function(d,h,w){d=d._reactInternals;var R=Fr(),N=Qo(d),j=So(R,N);j.payload=h,w!=null&&(j.callback=w),h=Ko(d,j,N),h!==null&&(ji(h,d,N,R),Su(h,d,N))},enqueueReplaceState:function(d,h,w){d=d._reactInternals;var R=Fr(),N=Qo(d),j=So(R,N);j.tag=1,j.payload=h,w!=null&&(j.callback=w),h=Ko(d,j,N),h!==null&&(ji(h,d,N,R),Su(h,d,N))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var w=Fr(),R=Qo(d),N=So(w,R);N.tag=2,h!=null&&(N.callback=h),h=Ko(d,N,R),h!==null&&(ji(h,d,R,w),Su(h,d,R))}};function $y(d,h,w,R,N,j,Z){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(R,j,Z):h.prototype&&h.prototype.isPureReactComponent?!Tl(w,R)||!Tl(N,j):!0}function Ty(d,h,w){var R=!1,N=Wo,j=h.contextType;return typeof j=="object"&&j!==null?j=Si(j):(N=Ur(h)?ya:Tr.current,R=h.contextTypes,j=(R=R!=null)?ys(d,N):Wo),h=new h(w,j),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Ru,d.stateNode=h,h._reactInternals=d,R&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=N,d.__reactInternalMemoizedMaskedChildContext=j),h}function _y(d,h,w,R){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,R),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,R),h.state!==d&&Ru.enqueueReplaceState(h,h.state,null)}function Ah(d,h,w,R){var N=d.stateNode;N.props=w,N.state=d.memoizedState,N.refs=ky,Th(d);var j=h.contextType;typeof j=="object"&&j!==null?N.context=Si(j):(j=Ur(h)?ya:Tr.current,N.context=ys(d,j)),N.state=d.memoizedState,j=h.getDerivedStateFromProps,typeof j=="function"&&(_h(d,h,j,w),N.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(h=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),h!==N.state&&Ru.enqueueReplaceState(N,N.state,null),Eu(d,w,N,R),N.state=d.memoizedState),typeof N.componentDidMount=="function"&&(d.flags|=4194308)}function Dl(d,h,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var R=w.stateNode}if(!R)throw Error(n(147,d));var N=R,j=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===j?h.ref:(h=function(Z){var ce=N.refs;ce===ky&&(ce=N.refs={}),Z===null?delete ce[j]:ce[j]=Z},h._stringRef=j,h)}if(typeof d!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,d))}return d}function Iu(d,h){throw d=Object.prototype.toString.call(h),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function Ay(d){var h=d._init;return h(d._payload)}function Oy(d){function h(xe,ge){if(d){var Se=xe.deletions;Se===null?(xe.deletions=[ge],xe.flags|=16):Se.push(ge)}}function w(xe,ge){if(!d)return null;for(;ge!==null;)h(xe,ge),ge=ge.sibling;return null}function R(xe,ge){for(xe=new Map;ge!==null;)ge.key!==null?xe.set(ge.key,ge):xe.set(ge.index,ge),ge=ge.sibling;return xe}function N(xe,ge){return xe=Zo(xe,ge),xe.index=0,xe.sibling=null,xe}function j(xe,ge,Se){return xe.index=Se,d?(Se=xe.alternate,Se!==null?(Se=Se.index,Se<ge?(xe.flags|=2,ge):Se):(xe.flags|=2,ge)):(xe.flags|=1048576,ge)}function Z(xe){return d&&xe.alternate===null&&(xe.flags|=2),xe}function ce(xe,ge,Se,Qe){return ge===null||ge.tag!==6?(ge=gv(Se,xe.mode,Qe),ge.return=xe,ge):(ge=N(ge,Se),ge.return=xe,ge)}function ve(xe,ge,Se,Qe){var $t=Se.type;return $t===_?Be(xe,ge,Se.props.children,Qe,Se.key):ge!==null&&(ge.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===q&&Ay($t)===ge.type)?(Qe=N(ge,Se.props),Qe.ref=Dl(xe,ge,Se),Qe.return=xe,Qe):(Qe=Uu(Se.type,Se.key,Se.props,null,xe.mode,Qe),Qe.ref=Dl(xe,ge,Se),Qe.return=xe,Qe)}function Ee(xe,ge,Se,Qe){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Se.containerInfo||ge.stateNode.implementation!==Se.implementation?(ge=mv(Se,xe.mode,Qe),ge.return=xe,ge):(ge=N(ge,Se.children||[]),ge.return=xe,ge)}function Be(xe,ge,Se,Qe,$t){return ge===null||ge.tag!==7?(ge=ka(Se,xe.mode,Qe,$t),ge.return=xe,ge):(ge=N(ge,Se),ge.return=xe,ge)}function ze(xe,ge,Se){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=gv(""+ge,xe.mode,Se),ge.return=xe,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:return Se=Uu(ge.type,ge.key,ge.props,null,xe.mode,Se),Se.ref=Dl(xe,null,ge),Se.return=xe,Se;case $:return ge=mv(ge,xe.mode,Se),ge.return=xe,ge;case q:var Qe=ge._init;return ze(xe,Qe(ge._payload),Se)}if(_e(ge)||z(ge))return ge=ka(ge,xe.mode,Se,null),ge.return=xe,ge;Iu(xe,ge)}return null}function Fe(xe,ge,Se,Qe){var $t=ge!==null?ge.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return $t!==null?null:ce(xe,ge,""+Se,Qe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case P:return Se.key===$t?ve(xe,ge,Se,Qe):null;case $:return Se.key===$t?Ee(xe,ge,Se,Qe):null;case q:return $t=Se._init,Fe(xe,ge,$t(Se._payload),Qe)}if(_e(Se)||z(Se))return $t!==null?null:Be(xe,ge,Se,Qe,null);Iu(xe,Se)}return null}function yt(xe,ge,Se,Qe,$t){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return xe=xe.get(Se)||null,ce(ge,xe,""+Qe,$t);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case P:return xe=xe.get(Qe.key===null?Se:Qe.key)||null,ve(ge,xe,Qe,$t);case $:return xe=xe.get(Qe.key===null?Se:Qe.key)||null,Ee(ge,xe,Qe,$t);case q:var Mt=Qe._init;return yt(xe,ge,Se,Mt(Qe._payload),$t)}if(_e(Qe)||z(Qe))return xe=xe.get(Se)||null,Be(ge,xe,Qe,$t,null);Iu(ge,Qe)}return null}function Et(xe,ge,Se,Qe){for(var $t=null,Mt=null,Nt=ge,Bt=ge=0,br=null;Nt!==null&&Bt<Se.length;Bt++){Nt.index>Bt?(br=Nt,Nt=null):br=Nt.sibling;var vn=Fe(xe,Nt,Se[Bt],Qe);if(vn===null){Nt===null&&(Nt=br);break}d&&Nt&&vn.alternate===null&&h(xe,Nt),ge=j(vn,ge,Bt),Mt===null?$t=vn:Mt.sibling=vn,Mt=vn,Nt=br}if(Bt===Se.length)return w(xe,Nt),zn&&wa(xe,Bt),$t;if(Nt===null){for(;Bt<Se.length;Bt++)Nt=ze(xe,Se[Bt],Qe),Nt!==null&&(ge=j(Nt,ge,Bt),Mt===null?$t=Nt:Mt.sibling=Nt,Mt=Nt);return zn&&wa(xe,Bt),$t}for(Nt=R(xe,Nt);Bt<Se.length;Bt++)br=yt(Nt,xe,Bt,Se[Bt],Qe),br!==null&&(d&&br.alternate!==null&&Nt.delete(br.key===null?Bt:br.key),ge=j(br,ge,Bt),Mt===null?$t=br:Mt.sibling=br,Mt=br);return d&&Nt.forEach(function(ea){return h(xe,ea)}),zn&&wa(xe,Bt),$t}function It(xe,ge,Se,Qe){var $t=z(Se);if(typeof $t!="function")throw Error(n(150));if(Se=$t.call(Se),Se==null)throw Error(n(151));for(var Mt=$t=null,Nt=ge,Bt=ge=0,br=null,vn=Se.next();Nt!==null&&!vn.done;Bt++,vn=Se.next()){Nt.index>Bt?(br=Nt,Nt=null):br=Nt.sibling;var ea=Fe(xe,Nt,vn.value,Qe);if(ea===null){Nt===null&&(Nt=br);break}d&&Nt&&ea.alternate===null&&h(xe,Nt),ge=j(ea,ge,Bt),Mt===null?$t=ea:Mt.sibling=ea,Mt=ea,Nt=br}if(vn.done)return w(xe,Nt),zn&&wa(xe,Bt),$t;if(Nt===null){for(;!vn.done;Bt++,vn=Se.next())vn=ze(xe,vn.value,Qe),vn!==null&&(ge=j(vn,ge,Bt),Mt===null?$t=vn:Mt.sibling=vn,Mt=vn);return zn&&wa(xe,Bt),$t}for(Nt=R(xe,Nt);!vn.done;Bt++,vn=Se.next())vn=yt(Nt,xe,Bt,vn.value,Qe),vn!==null&&(d&&vn.alternate!==null&&Nt.delete(vn.key===null?Bt:vn.key),ge=j(vn,ge,Bt),Mt===null?$t=vn:Mt.sibling=vn,Mt=vn);return d&&Nt.forEach(function(II){return h(xe,II)}),zn&&wa(xe,Bt),$t}function tr(xe,ge,Se,Qe){if(typeof Se=="object"&&Se!==null&&Se.type===_&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case P:e:{for(var $t=Se.key,Mt=ge;Mt!==null;){if(Mt.key===$t){if($t=Se.type,$t===_){if(Mt.tag===7){w(xe,Mt.sibling),ge=N(Mt,Se.props.children),ge.return=xe,xe=ge;break e}}else if(Mt.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===q&&Ay($t)===Mt.type){w(xe,Mt.sibling),ge=N(Mt,Se.props),ge.ref=Dl(xe,Mt,Se),ge.return=xe,xe=ge;break e}w(xe,Mt);break}else h(xe,Mt);Mt=Mt.sibling}Se.type===_?(ge=ka(Se.props.children,xe.mode,Qe,Se.key),ge.return=xe,xe=ge):(Qe=Uu(Se.type,Se.key,Se.props,null,xe.mode,Qe),Qe.ref=Dl(xe,ge,Se),Qe.return=xe,xe=Qe)}return Z(xe);case $:e:{for(Mt=Se.key;ge!==null;){if(ge.key===Mt)if(ge.tag===4&&ge.stateNode.containerInfo===Se.containerInfo&&ge.stateNode.implementation===Se.implementation){w(xe,ge.sibling),ge=N(ge,Se.children||[]),ge.return=xe,xe=ge;break e}else{w(xe,ge);break}else h(xe,ge);ge=ge.sibling}ge=mv(Se,xe.mode,Qe),ge.return=xe,xe=ge}return Z(xe);case q:return Mt=Se._init,tr(xe,ge,Mt(Se._payload),Qe)}if(_e(Se))return Et(xe,ge,Se,Qe);if(z(Se))return It(xe,ge,Se,Qe);Iu(xe,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,ge!==null&&ge.tag===6?(w(xe,ge.sibling),ge=N(ge,Se),ge.return=xe,xe=ge):(w(xe,ge),ge=gv(Se,xe.mode,Qe),ge.return=xe,xe=ge),Z(xe)):w(xe,ge)}return tr}var Es=Oy(!0),My=Oy(!1),Fl={},io=Vo(Fl),Bl=Vo(Fl),jl=Vo(Fl);function Ca(d){if(d===Fl)throw Error(n(174));return d}function Oh(d,h){switch(Ln(jl,h),Ln(Bl,d),Ln(io,Fl),d=h.nodeType,d){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:it(null,"");break;default:d=d===8?h.parentNode:h,h=d.namespaceURI||null,d=d.tagName,h=it(h,d)}Bn(io),Ln(io,h)}function Rs(){Bn(io),Bn(Bl),Bn(jl)}function Ny(d){Ca(jl.current);var h=Ca(io.current),w=it(h,d.type);h!==w&&(Ln(Bl,d),Ln(io,w))}function Mh(d){Bl.current===d&&(Bn(io),Bn(Bl))}var qn=Vo(0);function Pu(d){for(var h=d;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Nh=[];function Lh(){for(var d=0;d<Nh.length;d++)Nh[d]._workInProgressVersionPrimary=null;Nh.length=0}var ku=E.ReactCurrentDispatcher,Dh=E.ReactCurrentBatchConfig,Sa=0,Kn=null,ur=null,pr=null,$u=!1,zl=!1,Hl=0,GR=0;function _r(){throw Error(n(321))}function Fh(d,h){if(h===null)return!1;for(var w=0;w<h.length&&w<d.length;w++)if(!Ni(d[w],h[w]))return!1;return!0}function Bh(d,h,w,R,N,j){if(Sa=j,Kn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,ku.current=d===null||d.memoizedState===null?JR:ZR,d=w(R,N),zl){j=0;do{if(zl=!1,Hl=0,25<=j)throw Error(n(301));j+=1,pr=ur=null,h.updateQueue=null,ku.current=eI,d=w(R,N)}while(zl)}if(ku.current=Au,h=ur!==null&&ur.next!==null,Sa=0,pr=ur=Kn=null,$u=!1,h)throw Error(n(300));return d}function jh(){var d=Hl!==0;return Hl=0,d}function oo(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Kn.memoizedState=pr=d:pr=pr.next=d,pr}function Ei(){if(ur===null){var d=Kn.alternate;d=d!==null?d.memoizedState:null}else d=ur.next;var h=pr===null?Kn.memoizedState:pr.next;if(h!==null)pr=h,ur=d;else{if(d===null)throw Error(n(310));ur=d,d={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},pr===null?Kn.memoizedState=pr=d:pr=pr.next=d}return pr}function Vl(d,h){return typeof h=="function"?h(d):h}function zh(d){var h=Ei(),w=h.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var R=ur,N=R.baseQueue,j=w.pending;if(j!==null){if(N!==null){var Z=N.next;N.next=j.next,j.next=Z}R.baseQueue=N=j,w.pending=null}if(N!==null){j=N.next,R=R.baseState;var ce=Z=null,ve=null,Ee=j;do{var Be=Ee.lane;if((Sa&Be)===Be)ve!==null&&(ve=ve.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),R=Ee.hasEagerState?Ee.eagerState:d(R,Ee.action);else{var ze={lane:Be,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ve===null?(ce=ve=ze,Z=R):ve=ve.next=ze,Kn.lanes|=Be,Ea|=Be}Ee=Ee.next}while(Ee!==null&&Ee!==j);ve===null?Z=R:ve.next=ce,Ni(R,h.memoizedState)||(qr=!0),h.memoizedState=R,h.baseState=Z,h.baseQueue=ve,w.lastRenderedState=R}if(d=w.interleaved,d!==null){N=d;do j=N.lane,Kn.lanes|=j,Ea|=j,N=N.next;while(N!==d)}else N===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function Hh(d){var h=Ei(),w=h.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var R=w.dispatch,N=w.pending,j=h.memoizedState;if(N!==null){w.pending=null;var Z=N=N.next;do j=d(j,Z.action),Z=Z.next;while(Z!==N);Ni(j,h.memoizedState)||(qr=!0),h.memoizedState=j,h.baseQueue===null&&(h.baseState=j),w.lastRenderedState=j}return[j,R]}function Ly(){}function Dy(d,h){var w=Kn,R=Ei(),N=h(),j=!Ni(R.memoizedState,N);if(j&&(R.memoizedState=N,qr=!0),R=R.queue,Vh(jy.bind(null,w,R,d),[d]),R.getSnapshot!==h||j||pr!==null&&pr.memoizedState.tag&1){if(w.flags|=2048,Wl(9,By.bind(null,w,R,N,h),void 0,null),yr===null)throw Error(n(349));(Sa&30)!==0||Fy(w,h,N)}return N}function Fy(d,h,w){d.flags|=16384,d={getSnapshot:h,value:w},h=Kn.updateQueue,h===null?(h={lastEffect:null,stores:null},Kn.updateQueue=h,h.stores=[d]):(w=h.stores,w===null?h.stores=[d]:w.push(d))}function By(d,h,w,R){h.value=w,h.getSnapshot=R,zy(h)&&Hy(d)}function jy(d,h,w){return w(function(){zy(h)&&Hy(d)})}function zy(d){var h=d.getSnapshot;d=d.value;try{var w=h();return!Ni(d,w)}catch{return!0}}function Hy(d){var h=Co(d,1);h!==null&&ji(h,d,1,-1)}function Vy(d){var h=oo();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:d},h.queue=d,d=d.dispatch=QR.bind(null,Kn,d),[h.memoizedState,d]}function Wl(d,h,w,R){return d={tag:d,create:h,destroy:w,deps:R,next:null},h=Kn.updateQueue,h===null?(h={lastEffect:null,stores:null},Kn.updateQueue=h,h.lastEffect=d.next=d):(w=h.lastEffect,w===null?h.lastEffect=d.next=d:(R=w.next,w.next=d,d.next=R,h.lastEffect=d)),d}function Wy(){return Ei().memoizedState}function Tu(d,h,w,R){var N=oo();Kn.flags|=d,N.memoizedState=Wl(1|h,w,void 0,R===void 0?null:R)}function _u(d,h,w,R){var N=Ei();R=R===void 0?null:R;var j=void 0;if(ur!==null){var Z=ur.memoizedState;if(j=Z.destroy,R!==null&&Fh(R,Z.deps)){N.memoizedState=Wl(h,w,j,R);return}}Kn.flags|=d,N.memoizedState=Wl(1|h,w,j,R)}function Uy(d,h){return Tu(8390656,8,d,h)}function Vh(d,h){return _u(2048,8,d,h)}function qy(d,h){return _u(4,2,d,h)}function Ky(d,h){return _u(4,4,d,h)}function Gy(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Xy(d,h,w){return w=w!=null?w.concat([d]):null,_u(4,4,Gy.bind(null,h,d),w)}function Wh(){}function Yy(d,h){var w=Ei();h=h===void 0?null:h;var R=w.memoizedState;return R!==null&&h!==null&&Fh(h,R[1])?R[0]:(w.memoizedState=[d,h],d)}function Qy(d,h){var w=Ei();h=h===void 0?null:h;var R=w.memoizedState;return R!==null&&h!==null&&Fh(h,R[1])?R[0]:(d=d(),w.memoizedState=[d,h],d)}function Jy(d,h,w){return(Sa&21)===0?(d.baseState&&(d.baseState=!1,qr=!0),d.memoizedState=w):(Ni(w,h)||(w=ln(),Kn.lanes|=w,Ea|=w,d.baseState=!0),h)}function XR(d,h){var w=jt;jt=w!==0&&4>w?w:4,d(!0);var R=Dh.transition;Dh.transition={};try{d(!1),h()}finally{jt=w,Dh.transition=R}}function Zy(){return Ei().memoizedState}function YR(d,h,w){var R=Qo(d);if(w={lane:R,action:w,hasEagerState:!1,eagerState:null,next:null},e0(d))t0(h,w);else if(w=Ey(d,h,w,R),w!==null){var N=Fr();ji(w,d,R,N),n0(w,h,R)}}function QR(d,h,w){var R=Qo(d),N={lane:R,action:w,hasEagerState:!1,eagerState:null,next:null};if(e0(d))t0(h,N);else{var j=d.alternate;if(d.lanes===0&&(j===null||j.lanes===0)&&(j=h.lastRenderedReducer,j!==null))try{var Z=h.lastRenderedState,ce=j(Z,w);if(N.hasEagerState=!0,N.eagerState=ce,Ni(ce,Z)){var ve=h.interleaved;ve===null?(N.next=N,$h(h)):(N.next=ve.next,ve.next=N),h.interleaved=N;return}}catch{}finally{}w=Ey(d,h,N,R),w!==null&&(N=Fr(),ji(w,d,R,N),n0(w,h,R))}}function e0(d){var h=d.alternate;return d===Kn||h!==null&&h===Kn}function t0(d,h){zl=$u=!0;var w=d.pending;w===null?h.next=h:(h.next=w.next,w.next=h),d.pending=h}function n0(d,h,w){if((w&4194240)!==0){var R=h.lanes;R&=d.pendingLanes,w|=R,h.lanes=w,er(d,w)}}var Au={readContext:Si,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},JR={readContext:Si,useCallback:function(d,h){return oo().memoizedState=[d,h===void 0?null:h],d},useContext:Si,useEffect:Uy,useImperativeHandle:function(d,h,w){return w=w!=null?w.concat([d]):null,Tu(4194308,4,Gy.bind(null,h,d),w)},useLayoutEffect:function(d,h){return Tu(4194308,4,d,h)},useInsertionEffect:function(d,h){return Tu(4,2,d,h)},useMemo:function(d,h){var w=oo();return h=h===void 0?null:h,d=d(),w.memoizedState=[d,h],d},useReducer:function(d,h,w){var R=oo();return h=w!==void 0?w(h):h,R.memoizedState=R.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},R.queue=d,d=d.dispatch=YR.bind(null,Kn,d),[R.memoizedState,d]},useRef:function(d){var h=oo();return d={current:d},h.memoizedState=d},useState:Vy,useDebugValue:Wh,useDeferredValue:function(d){return oo().memoizedState=d},useTransition:function(){var d=Vy(!1),h=d[0];return d=XR.bind(null,d[1]),oo().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,w){var R=Kn,N=oo();if(zn){if(w===void 0)throw Error(n(407));w=w()}else{if(w=h(),yr===null)throw Error(n(349));(Sa&30)!==0||Fy(R,h,w)}N.memoizedState=w;var j={value:w,getSnapshot:h};return N.queue=j,Uy(jy.bind(null,R,j,d),[d]),R.flags|=2048,Wl(9,By.bind(null,R,j,w,h),void 0,null),w},useId:function(){var d=oo(),h=yr.identifierPrefix;if(zn){var w=xo,R=wo;w=(R&~(1<<32-fn(R)-1)).toString(32)+w,h=":"+h+"R"+w,w=Hl++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=GR++,h=":"+h+"r"+w.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},ZR={readContext:Si,useCallback:Yy,useContext:Si,useEffect:Vh,useImperativeHandle:Xy,useInsertionEffect:qy,useLayoutEffect:Ky,useMemo:Qy,useReducer:zh,useRef:Wy,useState:function(){return zh(Vl)},useDebugValue:Wh,useDeferredValue:function(d){var h=Ei();return Jy(h,ur.memoizedState,d)},useTransition:function(){var d=zh(Vl)[0],h=Ei().memoizedState;return[d,h]},useMutableSource:Ly,useSyncExternalStore:Dy,useId:Zy,unstable_isNewReconciler:!1},eI={readContext:Si,useCallback:Yy,useContext:Si,useEffect:Vh,useImperativeHandle:Xy,useInsertionEffect:qy,useLayoutEffect:Ky,useMemo:Qy,useReducer:Hh,useRef:Wy,useState:function(){return Hh(Vl)},useDebugValue:Wh,useDeferredValue:function(d){var h=Ei();return ur===null?h.memoizedState=d:Jy(h,ur.memoizedState,d)},useTransition:function(){var d=Hh(Vl)[0],h=Ei().memoizedState;return[d,h]},useMutableSource:Ly,useSyncExternalStore:Dy,useId:Zy,unstable_isNewReconciler:!1};function Is(d,h){try{var w="",R=h;do w+=Q(R),R=R.return;while(R);var N=w}catch(j){N=`
Error generating stack: `+j.message+`
`+j.stack}return{value:d,source:h,stack:N,digest:null}}function Uh(d,h,w){return{value:d,source:null,stack:w??null,digest:h??null}}function qh(d,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var tI=typeof WeakMap=="function"?WeakMap:Map;function r0(d,h,w){w=So(-1,w),w.tag=3,w.payload={element:null};var R=h.value;return w.callback=function(){Bu||(Bu=!0,sv=R),qh(d,h)},w}function i0(d,h,w){w=So(-1,w),w.tag=3;var R=d.type.getDerivedStateFromError;if(typeof R=="function"){var N=h.value;w.payload=function(){return R(N)},w.callback=function(){qh(d,h)}}var j=d.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(w.callback=function(){qh(d,h),typeof R!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})}),w}function o0(d,h,w){var R=d.pingCache;if(R===null){R=d.pingCache=new tI;var N=new Set;R.set(h,N)}else N=R.get(h),N===void 0&&(N=new Set,R.set(h,N));N.has(w)||(N.add(w),d=gI.bind(null,d,h,w),h.then(d,d))}function a0(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function s0(d,h,w,R,N){return(d.mode&1)===0?(d===h?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=So(-1,1),h.tag=2,Ko(w,h,1))),w.lanes|=1),d):(d.flags|=65536,d.lanes=N,d)}var nI=E.ReactCurrentOwner,qr=!1;function Dr(d,h,w,R){h.child=d===null?My(h,null,w,R):Es(h,d.child,w,R)}function l0(d,h,w,R,N){w=w.render;var j=h.ref;return Ss(h,N),R=Bh(d,h,w,R,j,N),w=jh(),d!==null&&!qr?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~N,Eo(d,h,N)):(zn&&w&&wh(h),h.flags|=1,Dr(d,h,R,N),h.child)}function c0(d,h,w,R,N){if(d===null){var j=w.type;return typeof j=="function"&&!vv(j)&&j.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=j,u0(d,h,j,R,N)):(d=Uu(w.type,null,R,h,h.mode,N),d.ref=h.ref,d.return=h,h.child=d)}if(j=d.child,(d.lanes&N)===0){var Z=j.memoizedProps;if(w=w.compare,w=w!==null?w:Tl,w(Z,R)&&d.ref===h.ref)return Eo(d,h,N)}return h.flags|=1,d=Zo(j,R),d.ref=h.ref,d.return=h,h.child=d}function u0(d,h,w,R,N){if(d!==null){var j=d.memoizedProps;if(Tl(j,R)&&d.ref===h.ref)if(qr=!1,h.pendingProps=R=j,(d.lanes&N)!==0)(d.flags&131072)!==0&&(qr=!0);else return h.lanes=d.lanes,Eo(d,h,N)}return Kh(d,h,w,R,N)}function d0(d,h,w){var R=h.pendingProps,N=R.children,j=d!==null?d.memoizedState:null;if(R.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(ks,si),si|=w;else{if((w&1073741824)===0)return d=j!==null?j.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null,transitions:null},h.updateQueue=null,Ln(ks,si),si|=d,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=j!==null?j.baseLanes:w,Ln(ks,si),si|=R}else j!==null?(R=j.baseLanes|w,h.memoizedState=null):R=w,Ln(ks,si),si|=R;return Dr(d,h,N,w),h.child}function f0(d,h){var w=h.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function Kh(d,h,w,R,N){var j=Ur(w)?ya:Tr.current;return j=ys(h,j),Ss(h,N),w=Bh(d,h,w,R,j,N),R=jh(),d!==null&&!qr?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~N,Eo(d,h,N)):(zn&&R&&wh(h),h.flags|=1,Dr(d,h,w,N),h.child)}function h0(d,h,w,R,N){if(Ur(w)){var j=!0;mu(h)}else j=!1;if(Ss(h,N),h.stateNode===null)Mu(d,h),Ty(h,w,R),Ah(h,w,R,N),R=!0;else if(d===null){var Z=h.stateNode,ce=h.memoizedProps;Z.props=ce;var ve=Z.context,Ee=w.contextType;typeof Ee=="object"&&Ee!==null?Ee=Si(Ee):(Ee=Ur(w)?ya:Tr.current,Ee=ys(h,Ee));var Be=w.getDerivedStateFromProps,ze=typeof Be=="function"||typeof Z.getSnapshotBeforeUpdate=="function";ze||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ce!==R||ve!==Ee)&&_y(h,Z,R,Ee),qo=!1;var Fe=h.memoizedState;Z.state=Fe,Eu(h,R,Z,N),ve=h.memoizedState,ce!==R||Fe!==ve||Wr.current||qo?(typeof Be=="function"&&(_h(h,w,Be,R),ve=h.memoizedState),(ce=qo||$y(h,w,ce,R,Fe,ve,Ee))?(ze||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=R,h.memoizedState=ve),Z.props=R,Z.state=ve,Z.context=Ee,R=ce):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),R=!1)}else{Z=h.stateNode,Ry(d,h),ce=h.memoizedProps,Ee=h.type===h.elementType?ce:Di(h.type,ce),Z.props=Ee,ze=h.pendingProps,Fe=Z.context,ve=w.contextType,typeof ve=="object"&&ve!==null?ve=Si(ve):(ve=Ur(w)?ya:Tr.current,ve=ys(h,ve));var yt=w.getDerivedStateFromProps;(Be=typeof yt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ce!==ze||Fe!==ve)&&_y(h,Z,R,ve),qo=!1,Fe=h.memoizedState,Z.state=Fe,Eu(h,R,Z,N);var Et=h.memoizedState;ce!==ze||Fe!==Et||Wr.current||qo?(typeof yt=="function"&&(_h(h,w,yt,R),Et=h.memoizedState),(Ee=qo||$y(h,w,Ee,R,Fe,Et,ve)||!1)?(Be||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(R,Et,ve),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(R,Et,ve)),typeof Z.componentDidUpdate=="function"&&(h.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ce===d.memoizedProps&&Fe===d.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&Fe===d.memoizedState||(h.flags|=1024),h.memoizedProps=R,h.memoizedState=Et),Z.props=R,Z.state=Et,Z.context=ve,R=Ee):(typeof Z.componentDidUpdate!="function"||ce===d.memoizedProps&&Fe===d.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&Fe===d.memoizedState||(h.flags|=1024),R=!1)}return Gh(d,h,w,R,j,N)}function Gh(d,h,w,R,N,j){f0(d,h);var Z=(h.flags&128)!==0;if(!R&&!Z)return N&&py(h,w,!1),Eo(d,h,j);R=h.stateNode,nI.current=h;var ce=Z&&typeof w.getDerivedStateFromError!="function"?null:R.render();return h.flags|=1,d!==null&&Z?(h.child=Es(h,d.child,null,j),h.child=Es(h,null,ce,j)):Dr(d,h,ce,j),h.memoizedState=R.state,N&&py(h,w,!0),h.child}function v0(d){var h=d.stateNode;h.pendingContext?gy(d,h.pendingContext,h.pendingContext!==h.context):h.context&&gy(d,h.context,!1),Oh(d,h.containerInfo)}function g0(d,h,w,R,N){return xs(),Eh(N),h.flags|=256,Dr(d,h,w,R),h.child}var Xh={dehydrated:null,treeContext:null,retryLane:0};function Yh(d){return{baseLanes:d,cachePool:null,transitions:null}}function m0(d,h,w){var R=h.pendingProps,N=qn.current,j=!1,Z=(h.flags&128)!==0,ce;if((ce=Z)||(ce=d!==null&&d.memoizedState===null?!1:(N&2)!==0),ce?(j=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(N|=1),Ln(qn,N&1),d===null)return Sh(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((h.mode&1)===0?h.lanes=1:d.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(Z=R.children,d=R.fallback,j?(R=h.mode,j=h.child,Z={mode:"hidden",children:Z},(R&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=Z):j=qu(Z,R,0,null),d=ka(d,R,w,null),j.return=h,d.return=h,j.sibling=d,h.child=j,h.child.memoizedState=Yh(w),h.memoizedState=Xh,d):Qh(h,Z));if(N=d.memoizedState,N!==null&&(ce=N.dehydrated,ce!==null))return rI(d,h,Z,R,ce,N,w);if(j){j=R.fallback,Z=h.mode,N=d.child,ce=N.sibling;var ve={mode:"hidden",children:R.children};return(Z&1)===0&&h.child!==N?(R=h.child,R.childLanes=0,R.pendingProps=ve,h.deletions=null):(R=Zo(N,ve),R.subtreeFlags=N.subtreeFlags&14680064),ce!==null?j=Zo(ce,j):(j=ka(j,Z,w,null),j.flags|=2),j.return=h,R.return=h,R.sibling=j,h.child=R,R=j,j=h.child,Z=d.child.memoizedState,Z=Z===null?Yh(w):{baseLanes:Z.baseLanes|w,cachePool:null,transitions:Z.transitions},j.memoizedState=Z,j.childLanes=d.childLanes&~w,h.memoizedState=Xh,R}return j=d.child,d=j.sibling,R=Zo(j,{mode:"visible",children:R.children}),(h.mode&1)===0&&(R.lanes=w),R.return=h,R.sibling=null,d!==null&&(w=h.deletions,w===null?(h.deletions=[d],h.flags|=16):w.push(d)),h.child=R,h.memoizedState=null,R}function Qh(d,h){return h=qu({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function Ou(d,h,w,R){return R!==null&&Eh(R),Es(h,d.child,null,w),d=Qh(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function rI(d,h,w,R,N,j,Z){if(w)return h.flags&256?(h.flags&=-257,R=Uh(Error(n(422))),Ou(d,h,Z,R)):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(j=R.fallback,N=h.mode,R=qu({mode:"visible",children:R.children},N,0,null),j=ka(j,N,Z,null),j.flags|=2,R.return=h,j.return=h,R.sibling=j,h.child=R,(h.mode&1)!==0&&Es(h,d.child,null,Z),h.child.memoizedState=Yh(Z),h.memoizedState=Xh,j);if((h.mode&1)===0)return Ou(d,h,Z,null);if(N.data==="$!"){if(R=N.nextSibling&&N.nextSibling.dataset,R)var ce=R.dgst;return R=ce,j=Error(n(419)),R=Uh(j,R,void 0),Ou(d,h,Z,R)}if(ce=(Z&d.childLanes)!==0,qr||ce){if(R=yr,R!==null){switch(Z&-Z){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(R.suspendedLanes|Z))!==0?0:N,N!==0&&N!==j.retryLane&&(j.retryLane=N,Co(d,N),ji(R,d,N,-1))}return hv(),R=Uh(Error(n(421))),Ou(d,h,Z,R)}return N.data==="$?"?(h.flags|=128,h.child=d.child,h=mI.bind(null,d),N._reactRetry=h,null):(d=j.treeContext,ai=Ho(N.nextSibling),oi=h,zn=!0,Li=null,d!==null&&(xi[Ci++]=wo,xi[Ci++]=xo,xi[Ci++]=ba,wo=d.id,xo=d.overflow,ba=h),h=Qh(h,R.children),h.flags|=4096,h)}function p0(d,h,w){d.lanes|=h;var R=d.alternate;R!==null&&(R.lanes|=h),kh(d.return,h,w)}function Jh(d,h,w,R,N){var j=d.memoizedState;j===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:R,tail:w,tailMode:N}:(j.isBackwards=h,j.rendering=null,j.renderingStartTime=0,j.last=R,j.tail=w,j.tailMode=N)}function y0(d,h,w){var R=h.pendingProps,N=R.revealOrder,j=R.tail;if(Dr(d,h,R.children,w),R=qn.current,(R&2)!==0)R=R&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&p0(d,w,h);else if(d.tag===19)p0(d,w,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}R&=1}if(Ln(qn,R),(h.mode&1)===0)h.memoizedState=null;else switch(N){case"forwards":for(w=h.child,N=null;w!==null;)d=w.alternate,d!==null&&Pu(d)===null&&(N=w),w=w.sibling;w=N,w===null?(N=h.child,h.child=null):(N=w.sibling,w.sibling=null),Jh(h,!1,N,w,j);break;case"backwards":for(w=null,N=h.child,h.child=null;N!==null;){if(d=N.alternate,d!==null&&Pu(d)===null){h.child=N;break}d=N.sibling,N.sibling=w,w=N,N=d}Jh(h,!0,w,null,j);break;case"together":Jh(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Mu(d,h){(h.mode&1)===0&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2)}function Eo(d,h,w){if(d!==null&&(h.dependencies=d.dependencies),Ea|=h.lanes,(w&h.childLanes)===0)return null;if(d!==null&&h.child!==d.child)throw Error(n(153));if(h.child!==null){for(d=h.child,w=Zo(d,d.pendingProps),h.child=w,w.return=h;d.sibling!==null;)d=d.sibling,w=w.sibling=Zo(d,d.pendingProps),w.return=h;w.sibling=null}return h.child}function iI(d,h,w){switch(h.tag){case 3:v0(h),xs();break;case 5:Ny(h);break;case 1:Ur(h.type)&&mu(h);break;case 4:Oh(h,h.stateNode.containerInfo);break;case 10:var R=h.type._context,N=h.memoizedProps.value;Ln(xu,R._currentValue),R._currentValue=N;break;case 13:if(R=h.memoizedState,R!==null)return R.dehydrated!==null?(Ln(qn,qn.current&1),h.flags|=128,null):(w&h.child.childLanes)!==0?m0(d,h,w):(Ln(qn,qn.current&1),d=Eo(d,h,w),d!==null?d.sibling:null);Ln(qn,qn.current&1);break;case 19:if(R=(w&h.childLanes)!==0,(d.flags&128)!==0){if(R)return y0(d,h,w);h.flags|=128}if(N=h.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Ln(qn,qn.current),R)break;return null;case 22:case 23:return h.lanes=0,d0(d,h,w)}return Eo(d,h,w)}var b0,Zh,w0,x0;b0=function(d,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Zh=function(){},w0=function(d,h,w,R){var N=d.memoizedProps;if(N!==R){d=h.stateNode,Ca(io.current);var j=null;switch(w){case"input":N=te(d,N),R=te(d,R),j=[];break;case"select":N=D({},N,{value:void 0}),R=D({},R,{value:void 0}),j=[];break;case"textarea":N=Me(d,N),R=Me(d,R),j=[];break;default:typeof N.onClick!="function"&&typeof R.onClick=="function"&&(d.onclick=hu)}je(w,R);var Z;w=null;for(Ee in N)if(!R.hasOwnProperty(Ee)&&N.hasOwnProperty(Ee)&&N[Ee]!=null)if(Ee==="style"){var ce=N[Ee];for(Z in ce)ce.hasOwnProperty(Z)&&(w||(w={}),w[Z]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(i.hasOwnProperty(Ee)?j||(j=[]):(j=j||[]).push(Ee,null));for(Ee in R){var ve=R[Ee];if(ce=N!=null?N[Ee]:void 0,R.hasOwnProperty(Ee)&&ve!==ce&&(ve!=null||ce!=null))if(Ee==="style")if(ce){for(Z in ce)!ce.hasOwnProperty(Z)||ve&&ve.hasOwnProperty(Z)||(w||(w={}),w[Z]="");for(Z in ve)ve.hasOwnProperty(Z)&&ce[Z]!==ve[Z]&&(w||(w={}),w[Z]=ve[Z])}else w||(j||(j=[]),j.push(Ee,w)),w=ve;else Ee==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ce=ce?ce.__html:void 0,ve!=null&&ce!==ve&&(j=j||[]).push(Ee,ve)):Ee==="children"?typeof ve!="string"&&typeof ve!="number"||(j=j||[]).push(Ee,""+ve):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ee)?(ve!=null&&Ee==="onScroll"&&Fn("scroll",d),j||ce===ve||(j=[])):(j=j||[]).push(Ee,ve))}w&&(j=j||[]).push("style",w);var Ee=j;(h.updateQueue=Ee)&&(h.flags|=4)}},x0=function(d,h,w,R){w!==R&&(h.flags|=4)};function Ul(d,h){if(!zn)switch(d.tailMode){case"hidden":h=d.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var R=null;w!==null;)w.alternate!==null&&(R=w),w=w.sibling;R===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:R.sibling=null}}function Ar(d){var h=d.alternate!==null&&d.alternate.child===d.child,w=0,R=0;if(h)for(var N=d.child;N!==null;)w|=N.lanes|N.childLanes,R|=N.subtreeFlags&14680064,R|=N.flags&14680064,N.return=d,N=N.sibling;else for(N=d.child;N!==null;)w|=N.lanes|N.childLanes,R|=N.subtreeFlags,R|=N.flags,N.return=d,N=N.sibling;return d.subtreeFlags|=R,d.childLanes=w,h}function oI(d,h,w){var R=h.pendingProps;switch(xh(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(h),null;case 1:return Ur(h.type)&&gu(),Ar(h),null;case 3:return R=h.stateNode,Rs(),Bn(Wr),Bn(Tr),Lh(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(d===null||d.child===null)&&(wu(h)?h.flags|=4:d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Li!==null&&(uv(Li),Li=null))),Zh(d,h),Ar(h),null;case 5:Mh(h);var N=Ca(jl.current);if(w=h.type,d!==null&&h.stateNode!=null)w0(d,h,w,R,N),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!R){if(h.stateNode===null)throw Error(n(166));return Ar(h),null}if(d=Ca(io.current),wu(h)){R=h.stateNode,w=h.type;var j=h.memoizedProps;switch(R[ro]=h,R[Nl]=j,d=(h.mode&1)!==0,w){case"dialog":Fn("cancel",R),Fn("close",R);break;case"iframe":case"object":case"embed":Fn("load",R);break;case"video":case"audio":for(N=0;N<Al.length;N++)Fn(Al[N],R);break;case"source":Fn("error",R);break;case"img":case"image":case"link":Fn("error",R),Fn("load",R);break;case"details":Fn("toggle",R);break;case"input":ae(R,j),Fn("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!j.multiple},Fn("invalid",R);break;case"textarea":Re(R,j),Fn("invalid",R)}je(w,j),N=null;for(var Z in j)if(j.hasOwnProperty(Z)){var ce=j[Z];Z==="children"?typeof ce=="string"?R.textContent!==ce&&(j.suppressHydrationWarning!==!0&&fu(R.textContent,ce,d),N=["children",ce]):typeof ce=="number"&&R.textContent!==""+ce&&(j.suppressHydrationWarning!==!0&&fu(R.textContent,ce,d),N=["children",""+ce]):i.hasOwnProperty(Z)&&ce!=null&&Z==="onScroll"&&Fn("scroll",R)}switch(w){case"input":F(R),pe(R,j,!0);break;case"textarea":F(R),Le(R);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(R.onclick=hu)}R=N,h.updateQueue=R,R!==null&&(h.flags|=4)}else{Z=N.nodeType===9?N:N.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=He(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=Z.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof R.is=="string"?d=Z.createElement(w,{is:R.is}):(d=Z.createElement(w),w==="select"&&(Z=d,R.multiple?Z.multiple=!0:R.size&&(Z.size=R.size))):d=Z.createElementNS(d,w),d[ro]=h,d[Nl]=R,b0(d,h,!1,!1),h.stateNode=d;e:{switch(Z=ke(w,R),w){case"dialog":Fn("cancel",d),Fn("close",d),N=R;break;case"iframe":case"object":case"embed":Fn("load",d),N=R;break;case"video":case"audio":for(N=0;N<Al.length;N++)Fn(Al[N],d);N=R;break;case"source":Fn("error",d),N=R;break;case"img":case"image":case"link":Fn("error",d),Fn("load",d),N=R;break;case"details":Fn("toggle",d),N=R;break;case"input":ae(d,R),N=te(d,R),Fn("invalid",d);break;case"option":N=R;break;case"select":d._wrapperState={wasMultiple:!!R.multiple},N=D({},R,{value:void 0}),Fn("invalid",d);break;case"textarea":Re(d,R),N=Me(d,R),Fn("invalid",d);break;default:N=R}je(w,N),ce=N;for(j in ce)if(ce.hasOwnProperty(j)){var ve=ce[j];j==="style"?Ie(d,ve):j==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&De(d,ve)):j==="children"?typeof ve=="string"?(w!=="textarea"||ve!=="")&&nt(d,ve):typeof ve=="number"&&nt(d,""+ve):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?ve!=null&&j==="onScroll"&&Fn("scroll",d):ve!=null&&S(d,j,ve,Z))}switch(w){case"input":F(d),pe(d,R,!1);break;case"textarea":F(d),Le(d);break;case"option":R.value!=null&&d.setAttribute("value",""+re(R.value));break;case"select":d.multiple=!!R.multiple,j=R.value,j!=null?$e(d,!!R.multiple,j,!1):R.defaultValue!=null&&$e(d,!!R.multiple,R.defaultValue,!0);break;default:typeof N.onClick=="function"&&(d.onclick=hu)}switch(w){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ar(h),null;case 6:if(d&&h.stateNode!=null)x0(d,h,d.memoizedProps,R);else{if(typeof R!="string"&&h.stateNode===null)throw Error(n(166));if(w=Ca(jl.current),Ca(io.current),wu(h)){if(R=h.stateNode,w=h.memoizedProps,R[ro]=h,(j=R.nodeValue!==w)&&(d=oi,d!==null))switch(d.tag){case 3:fu(R.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&fu(R.nodeValue,w,(d.mode&1)!==0)}j&&(h.flags|=4)}else R=(w.nodeType===9?w:w.ownerDocument).createTextNode(R),R[ro]=h,h.stateNode=R}return Ar(h),null;case 13:if(Bn(qn),R=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(zn&&ai!==null&&(h.mode&1)!==0&&(h.flags&128)===0)Sy(),xs(),h.flags|=98560,j=!1;else if(j=wu(h),R!==null&&R.dehydrated!==null){if(d===null){if(!j)throw Error(n(318));if(j=h.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[ro]=h}else xs(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ar(h),j=!1}else Li!==null&&(uv(Li),Li=null),j=!0;if(!j)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=w,h):(R=R!==null,R!==(d!==null&&d.memoizedState!==null)&&R&&(h.child.flags|=8192,(h.mode&1)!==0&&(d===null||(qn.current&1)!==0?dr===0&&(dr=3):hv())),h.updateQueue!==null&&(h.flags|=4),Ar(h),null);case 4:return Rs(),Zh(d,h),d===null&&Ol(h.stateNode.containerInfo),Ar(h),null;case 10:return Ph(h.type._context),Ar(h),null;case 17:return Ur(h.type)&&gu(),Ar(h),null;case 19:if(Bn(qn),j=h.memoizedState,j===null)return Ar(h),null;if(R=(h.flags&128)!==0,Z=j.rendering,Z===null)if(R)Ul(j,!1);else{if(dr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(Z=Pu(d),Z!==null){for(h.flags|=128,Ul(j,!1),R=Z.updateQueue,R!==null&&(h.updateQueue=R,h.flags|=4),h.subtreeFlags=0,R=w,w=h.child;w!==null;)j=w,d=R,j.flags&=14680066,Z=j.alternate,Z===null?(j.childLanes=0,j.lanes=d,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=Z.childLanes,j.lanes=Z.lanes,j.child=Z.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=Z.memoizedProps,j.memoizedState=Z.memoizedState,j.updateQueue=Z.updateQueue,j.type=Z.type,d=Z.dependencies,j.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return Ln(qn,qn.current&1|2),h.child}d=d.sibling}j.tail!==null&&Ce()>$s&&(h.flags|=128,R=!0,Ul(j,!1),h.lanes=4194304)}else{if(!R)if(d=Pu(Z),d!==null){if(h.flags|=128,R=!0,w=d.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),Ul(j,!0),j.tail===null&&j.tailMode==="hidden"&&!Z.alternate&&!zn)return Ar(h),null}else 2*Ce()-j.renderingStartTime>$s&&w!==1073741824&&(h.flags|=128,R=!0,Ul(j,!1),h.lanes=4194304);j.isBackwards?(Z.sibling=h.child,h.child=Z):(w=j.last,w!==null?w.sibling=Z:h.child=Z,j.last=Z)}return j.tail!==null?(h=j.tail,j.rendering=h,j.tail=h.sibling,j.renderingStartTime=Ce(),h.sibling=null,w=qn.current,Ln(qn,R?w&1|2:w&1),h):(Ar(h),null);case 22:case 23:return fv(),R=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==R&&(h.flags|=8192),R&&(h.mode&1)!==0?(si&1073741824)!==0&&(Ar(h),h.subtreeFlags&6&&(h.flags|=8192)):Ar(h),null;case 24:return null;case 25:return null}throw Error(n(156,h.tag))}function aI(d,h){switch(xh(h),h.tag){case 1:return Ur(h.type)&&gu(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return Rs(),Bn(Wr),Bn(Tr),Lh(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 5:return Mh(h),null;case 13:if(Bn(qn),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(n(340));xs()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return Bn(qn),null;case 4:return Rs(),null;case 10:return Ph(h.type._context),null;case 22:case 23:return fv(),null;case 24:return null;default:return null}}var Nu=!1,Or=!1,sI=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Ps(d,h){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(R){Qn(d,h,R)}else w.current=null}function ev(d,h,w){try{w()}catch(R){Qn(d,h,R)}}var C0=!1;function lI(d,h){if(fh=tu,d=Zp(),ih(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var R=w.getSelection&&w.getSelection();if(R&&R.rangeCount!==0){w=R.anchorNode;var N=R.anchorOffset,j=R.focusNode;R=R.focusOffset;try{w.nodeType,j.nodeType}catch{w=null;break e}var Z=0,ce=-1,ve=-1,Ee=0,Be=0,ze=d,Fe=null;t:for(;;){for(var yt;ze!==w||N!==0&&ze.nodeType!==3||(ce=Z+N),ze!==j||R!==0&&ze.nodeType!==3||(ve=Z+R),ze.nodeType===3&&(Z+=ze.nodeValue.length),(yt=ze.firstChild)!==null;)Fe=ze,ze=yt;for(;;){if(ze===d)break t;if(Fe===w&&++Ee===N&&(ce=Z),Fe===j&&++Be===R&&(ve=Z),(yt=ze.nextSibling)!==null)break;ze=Fe,Fe=ze.parentNode}ze=yt}w=ce===-1||ve===-1?null:{start:ce,end:ve}}else w=null}w=w||{start:0,end:0}}else w=null;for(hh={focusedElem:d,selectionRange:w},tu=!1,xt=h;xt!==null;)if(h=xt,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,xt=d;else for(;xt!==null;){h=xt;try{var Et=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Et!==null){var It=Et.memoizedProps,tr=Et.memoizedState,xe=h.stateNode,ge=xe.getSnapshotBeforeUpdate(h.elementType===h.type?It:Di(h.type,It),tr);xe.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var Se=h.stateNode.containerInfo;Se.nodeType===1?Se.textContent="":Se.nodeType===9&&Se.documentElement&&Se.removeChild(Se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Qe){Qn(h,h.return,Qe)}if(d=h.sibling,d!==null){d.return=h.return,xt=d;break}xt=h.return}return Et=C0,C0=!1,Et}function ql(d,h,w){var R=h.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var N=R=R.next;do{if((N.tag&d)===d){var j=N.destroy;N.destroy=void 0,j!==void 0&&ev(h,w,j)}N=N.next}while(N!==R)}}function Lu(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&d)===d){var R=w.create;w.destroy=R()}w=w.next}while(w!==h)}}function tv(d){var h=d.ref;if(h!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof h=="function"?h(d):h.current=d}}function S0(d){var h=d.alternate;h!==null&&(d.alternate=null,S0(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&(delete h[ro],delete h[Nl],delete h[ph],delete h[WR],delete h[UR])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function E0(d){return d.tag===5||d.tag===3||d.tag===4}function R0(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||E0(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function nv(d,h,w){var R=d.tag;if(R===5||R===6)d=d.stateNode,h?w.nodeType===8?w.parentNode.insertBefore(d,h):w.insertBefore(d,h):(w.nodeType===8?(h=w.parentNode,h.insertBefore(d,w)):(h=w,h.appendChild(d)),w=w._reactRootContainer,w!=null||h.onclick!==null||(h.onclick=hu));else if(R!==4&&(d=d.child,d!==null))for(nv(d,h,w),d=d.sibling;d!==null;)nv(d,h,w),d=d.sibling}function rv(d,h,w){var R=d.tag;if(R===5||R===6)d=d.stateNode,h?w.insertBefore(d,h):w.appendChild(d);else if(R!==4&&(d=d.child,d!==null))for(rv(d,h,w),d=d.sibling;d!==null;)rv(d,h,w),d=d.sibling}var Rr=null,Fi=!1;function Go(d,h,w){for(w=w.child;w!==null;)I0(d,h,w),w=w.sibling}function I0(d,h,w){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Zt,w)}catch{}switch(w.tag){case 5:Or||Ps(w,h);case 6:var R=Rr,N=Fi;Rr=null,Go(d,h,w),Rr=R,Fi=N,Rr!==null&&(Fi?(d=Rr,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):Rr.removeChild(w.stateNode));break;case 18:Rr!==null&&(Fi?(d=Rr,w=w.stateNode,d.nodeType===8?mh(d.parentNode,w):d.nodeType===1&&mh(d,w),no(d)):mh(Rr,w.stateNode));break;case 4:R=Rr,N=Fi,Rr=w.stateNode.containerInfo,Fi=!0,Go(d,h,w),Rr=R,Fi=N;break;case 0:case 11:case 14:case 15:if(!Or&&(R=w.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){N=R=R.next;do{var j=N,Z=j.destroy;j=j.tag,Z!==void 0&&((j&2)!==0||(j&4)!==0)&&ev(w,h,Z),N=N.next}while(N!==R)}Go(d,h,w);break;case 1:if(!Or&&(Ps(w,h),R=w.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=w.memoizedProps,R.state=w.memoizedState,R.componentWillUnmount()}catch(ce){Qn(w,h,ce)}Go(d,h,w);break;case 21:Go(d,h,w);break;case 22:w.mode&1?(Or=(R=Or)||w.memoizedState!==null,Go(d,h,w),Or=R):Go(d,h,w);break;default:Go(d,h,w)}}function P0(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new sI),h.forEach(function(R){var N=pI.bind(null,d,R);w.has(R)||(w.add(R),R.then(N,N))})}}function Bi(d,h){var w=h.deletions;if(w!==null)for(var R=0;R<w.length;R++){var N=w[R];try{var j=d,Z=h,ce=Z;e:for(;ce!==null;){switch(ce.tag){case 5:Rr=ce.stateNode,Fi=!1;break e;case 3:Rr=ce.stateNode.containerInfo,Fi=!0;break e;case 4:Rr=ce.stateNode.containerInfo,Fi=!0;break e}ce=ce.return}if(Rr===null)throw Error(n(160));I0(j,Z,N),Rr=null,Fi=!1;var ve=N.alternate;ve!==null&&(ve.return=null),N.return=null}catch(Ee){Qn(N,h,Ee)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)k0(h,d),h=h.sibling}function k0(d,h){var w=d.alternate,R=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Bi(h,d),ao(d),R&4){try{ql(3,d,d.return),Lu(3,d)}catch(It){Qn(d,d.return,It)}try{ql(5,d,d.return)}catch(It){Qn(d,d.return,It)}}break;case 1:Bi(h,d),ao(d),R&512&&w!==null&&Ps(w,w.return);break;case 5:if(Bi(h,d),ao(d),R&512&&w!==null&&Ps(w,w.return),d.flags&32){var N=d.stateNode;try{nt(N,"")}catch(It){Qn(d,d.return,It)}}if(R&4&&(N=d.stateNode,N!=null)){var j=d.memoizedProps,Z=w!==null?w.memoizedProps:j,ce=d.type,ve=d.updateQueue;if(d.updateQueue=null,ve!==null)try{ce==="input"&&j.type==="radio"&&j.name!=null&&de(N,j),ke(ce,Z);var Ee=ke(ce,j);for(Z=0;Z<ve.length;Z+=2){var Be=ve[Z],ze=ve[Z+1];Be==="style"?Ie(N,ze):Be==="dangerouslySetInnerHTML"?De(N,ze):Be==="children"?nt(N,ze):S(N,Be,ze,Ee)}switch(ce){case"input":he(N,j);break;case"textarea":be(N,j);break;case"select":var Fe=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!j.multiple;var yt=j.value;yt!=null?$e(N,!!j.multiple,yt,!1):Fe!==!!j.multiple&&(j.defaultValue!=null?$e(N,!!j.multiple,j.defaultValue,!0):$e(N,!!j.multiple,j.multiple?[]:"",!1))}N[Nl]=j}catch(It){Qn(d,d.return,It)}}break;case 6:if(Bi(h,d),ao(d),R&4){if(d.stateNode===null)throw Error(n(162));N=d.stateNode,j=d.memoizedProps;try{N.nodeValue=j}catch(It){Qn(d,d.return,It)}}break;case 3:if(Bi(h,d),ao(d),R&4&&w!==null&&w.memoizedState.isDehydrated)try{no(h.containerInfo)}catch(It){Qn(d,d.return,It)}break;case 4:Bi(h,d),ao(d);break;case 13:Bi(h,d),ao(d),N=d.child,N.flags&8192&&(j=N.memoizedState!==null,N.stateNode.isHidden=j,!j||N.alternate!==null&&N.alternate.memoizedState!==null||(av=Ce())),R&4&&P0(d);break;case 22:if(Be=w!==null&&w.memoizedState!==null,d.mode&1?(Or=(Ee=Or)||Be,Bi(h,d),Or=Ee):Bi(h,d),ao(d),R&8192){if(Ee=d.memoizedState!==null,(d.stateNode.isHidden=Ee)&&!Be&&(d.mode&1)!==0)for(xt=d,Be=d.child;Be!==null;){for(ze=xt=Be;xt!==null;){switch(Fe=xt,yt=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:ql(4,Fe,Fe.return);break;case 1:Ps(Fe,Fe.return);var Et=Fe.stateNode;if(typeof Et.componentWillUnmount=="function"){R=Fe,w=Fe.return;try{h=R,Et.props=h.memoizedProps,Et.state=h.memoizedState,Et.componentWillUnmount()}catch(It){Qn(R,w,It)}}break;case 5:Ps(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){_0(ze);continue}}yt!==null?(yt.return=Fe,xt=yt):_0(ze)}Be=Be.sibling}e:for(Be=null,ze=d;;){if(ze.tag===5){if(Be===null){Be=ze;try{N=ze.stateNode,Ee?(j=N.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(ce=ze.stateNode,ve=ze.memoizedProps.style,Z=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,ce.style.display=Ve("display",Z))}catch(It){Qn(d,d.return,It)}}}else if(ze.tag===6){if(Be===null)try{ze.stateNode.nodeValue=Ee?"":ze.memoizedProps}catch(It){Qn(d,d.return,It)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===d)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===d)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===d)break e;Be===ze&&(Be=null),ze=ze.return}Be===ze&&(Be=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:Bi(h,d),ao(d),R&4&&P0(d);break;case 21:break;default:Bi(h,d),ao(d)}}function ao(d){var h=d.flags;if(h&2){try{e:{for(var w=d.return;w!==null;){if(E0(w)){var R=w;break e}w=w.return}throw Error(n(160))}switch(R.tag){case 5:var N=R.stateNode;R.flags&32&&(nt(N,""),R.flags&=-33);var j=R0(d);rv(d,j,N);break;case 3:case 4:var Z=R.stateNode.containerInfo,ce=R0(d);nv(d,ce,Z);break;default:throw Error(n(161))}}catch(ve){Qn(d,d.return,ve)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function cI(d,h,w){xt=d,$0(d)}function $0(d,h,w){for(var R=(d.mode&1)!==0;xt!==null;){var N=xt,j=N.child;if(N.tag===22&&R){var Z=N.memoizedState!==null||Nu;if(!Z){var ce=N.alternate,ve=ce!==null&&ce.memoizedState!==null||Or;ce=Nu;var Ee=Or;if(Nu=Z,(Or=ve)&&!Ee)for(xt=N;xt!==null;)Z=xt,ve=Z.child,Z.tag===22&&Z.memoizedState!==null?A0(N):ve!==null?(ve.return=Z,xt=ve):A0(N);for(;j!==null;)xt=j,$0(j),j=j.sibling;xt=N,Nu=ce,Or=Ee}T0(d)}else(N.subtreeFlags&8772)!==0&&j!==null?(j.return=N,xt=j):T0(d)}}function T0(d){for(;xt!==null;){var h=xt;if((h.flags&8772)!==0){var w=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Or||Lu(5,h);break;case 1:var R=h.stateNode;if(h.flags&4&&!Or)if(w===null)R.componentDidMount();else{var N=h.elementType===h.type?w.memoizedProps:Di(h.type,w.memoizedProps);R.componentDidUpdate(N,w.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var j=h.updateQueue;j!==null&&Py(h,j,R);break;case 3:var Z=h.updateQueue;if(Z!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=h.child.stateNode;break;case 1:w=h.child.stateNode}Py(h,Z,w)}break;case 5:var ce=h.stateNode;if(w===null&&h.flags&4){w=ce;var ve=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&w.focus();break;case"img":ve.src&&(w.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Ee=h.alternate;if(Ee!==null){var Be=Ee.memoizedState;if(Be!==null){var ze=Be.dehydrated;ze!==null&&no(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Or||h.flags&512&&tv(h)}catch(Fe){Qn(h,h.return,Fe)}}if(h===d){xt=null;break}if(w=h.sibling,w!==null){w.return=h.return,xt=w;break}xt=h.return}}function _0(d){for(;xt!==null;){var h=xt;if(h===d){xt=null;break}var w=h.sibling;if(w!==null){w.return=h.return,xt=w;break}xt=h.return}}function A0(d){for(;xt!==null;){var h=xt;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{Lu(4,h)}catch(ve){Qn(h,w,ve)}break;case 1:var R=h.stateNode;if(typeof R.componentDidMount=="function"){var N=h.return;try{R.componentDidMount()}catch(ve){Qn(h,N,ve)}}var j=h.return;try{tv(h)}catch(ve){Qn(h,j,ve)}break;case 5:var Z=h.return;try{tv(h)}catch(ve){Qn(h,Z,ve)}}}catch(ve){Qn(h,h.return,ve)}if(h===d){xt=null;break}var ce=h.sibling;if(ce!==null){ce.return=h.return,xt=ce;break}xt=h.return}}var uI=Math.ceil,Du=E.ReactCurrentDispatcher,iv=E.ReactCurrentOwner,Ri=E.ReactCurrentBatchConfig,dn=0,yr=null,ir=null,Ir=0,si=0,ks=Vo(0),dr=0,Kl=null,Ea=0,Fu=0,ov=0,Gl=null,Kr=null,av=0,$s=1/0,Ro=null,Bu=!1,sv=null,Xo=null,ju=!1,Yo=null,zu=0,Xl=0,lv=null,Hu=-1,Vu=0;function Fr(){return(dn&6)!==0?Ce():Hu!==-1?Hu:Hu=Ce()}function Qo(d){return(d.mode&1)===0?1:(dn&2)!==0&&Ir!==0?Ir&-Ir:KR.transition!==null?(Vu===0&&(Vu=ln()),Vu):(d=jt,d!==0||(d=window.event,d=d===void 0?16:Op(d.type)),d)}function ji(d,h,w,R){if(50<Xl)throw Xl=0,lv=null,Error(n(185));Cn(d,w,R),((dn&2)===0||d!==yr)&&(d===yr&&((dn&2)===0&&(Fu|=w),dr===4&&Jo(d,Ir)),Gr(d,R),w===1&&dn===0&&(h.mode&1)===0&&($s=Ce()+500,pu&&Uo()))}function Gr(d,h){var w=d.callbackNode;ft(d,h);var R=sn(d,d===yr?Ir:0);if(R===0)w!==null&&rt(w),d.callbackNode=null,d.callbackPriority=0;else if(h=R&-R,d.callbackPriority!==h){if(w!=null&&rt(w),h===1)d.tag===0?qR(M0.bind(null,d)):yy(M0.bind(null,d)),HR(function(){(dn&6)===0&&Uo()}),w=null;else{switch(cr(R)){case 1:w=wt;break;case 4:w=Dt;break;case 16:w=Gt;break;case 536870912:w=Vt;break;default:w=Gt}w=H0(w,O0.bind(null,d))}d.callbackPriority=h,d.callbackNode=w}}function O0(d,h){if(Hu=-1,Vu=0,(dn&6)!==0)throw Error(n(327));var w=d.callbackNode;if(Ts()&&d.callbackNode!==w)return null;var R=sn(d,d===yr?Ir:0);if(R===0)return null;if((R&30)!==0||(R&d.expiredLanes)!==0||h)h=Wu(d,R);else{h=R;var N=dn;dn|=2;var j=L0();(yr!==d||Ir!==h)&&(Ro=null,$s=Ce()+500,Ia(d,h));do try{hI();break}catch(ce){N0(d,ce)}while(!0);Ih(),Du.current=j,dn=N,ir!==null?h=0:(yr=null,Ir=0,h=dr)}if(h!==0){if(h===2&&(N=en(d),N!==0&&(R=N,h=cv(d,N))),h===1)throw w=Kl,Ia(d,0),Jo(d,R),Gr(d,Ce()),w;if(h===6)Jo(d,R);else{if(N=d.current.alternate,(R&30)===0&&!dI(N)&&(h=Wu(d,R),h===2&&(j=en(d),j!==0&&(R=j,h=cv(d,j))),h===1))throw w=Kl,Ia(d,0),Jo(d,R),Gr(d,Ce()),w;switch(d.finishedWork=N,d.finishedLanes=R,h){case 0:case 1:throw Error(n(345));case 2:Pa(d,Kr,Ro);break;case 3:if(Jo(d,R),(R&130023424)===R&&(h=av+500-Ce(),10<h)){if(sn(d,0)!==0)break;if(N=d.suspendedLanes,(N&R)!==R){Fr(),d.pingedLanes|=d.suspendedLanes&N;break}d.timeoutHandle=gh(Pa.bind(null,d,Kr,Ro),h);break}Pa(d,Kr,Ro);break;case 4:if(Jo(d,R),(R&4194240)===R)break;for(h=d.eventTimes,N=-1;0<R;){var Z=31-fn(R);j=1<<Z,Z=h[Z],Z>N&&(N=Z),R&=~j}if(R=N,R=Ce()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*uI(R/1960))-R,10<R){d.timeoutHandle=gh(Pa.bind(null,d,Kr,Ro),R);break}Pa(d,Kr,Ro);break;case 5:Pa(d,Kr,Ro);break;default:throw Error(n(329))}}}return Gr(d,Ce()),d.callbackNode===w?O0.bind(null,d):null}function cv(d,h){var w=Gl;return d.current.memoizedState.isDehydrated&&(Ia(d,h).flags|=256),d=Wu(d,h),d!==2&&(h=Kr,Kr=w,h!==null&&uv(h)),d}function uv(d){Kr===null?Kr=d:Kr.push.apply(Kr,d)}function dI(d){for(var h=d;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var R=0;R<w.length;R++){var N=w[R],j=N.getSnapshot;N=N.value;try{if(!Ni(j(),N))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Jo(d,h){for(h&=~ov,h&=~Fu,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var w=31-fn(h),R=1<<w;d[w]=-1,h&=~R}}function M0(d){if((dn&6)!==0)throw Error(n(327));Ts();var h=sn(d,0);if((h&1)===0)return Gr(d,Ce()),null;var w=Wu(d,h);if(d.tag!==0&&w===2){var R=en(d);R!==0&&(h=R,w=cv(d,R))}if(w===1)throw w=Kl,Ia(d,0),Jo(d,h),Gr(d,Ce()),w;if(w===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,Pa(d,Kr,Ro),Gr(d,Ce()),null}function dv(d,h){var w=dn;dn|=1;try{return d(h)}finally{dn=w,dn===0&&($s=Ce()+500,pu&&Uo())}}function Ra(d){Yo!==null&&Yo.tag===0&&(dn&6)===0&&Ts();var h=dn;dn|=1;var w=Ri.transition,R=jt;try{if(Ri.transition=null,jt=1,d)return d()}finally{jt=R,Ri.transition=w,dn=h,(dn&6)===0&&Uo()}}function fv(){si=ks.current,Bn(ks)}function Ia(d,h){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,zR(w)),ir!==null)for(w=ir.return;w!==null;){var R=w;switch(xh(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&gu();break;case 3:Rs(),Bn(Wr),Bn(Tr),Lh();break;case 5:Mh(R);break;case 4:Rs();break;case 13:Bn(qn);break;case 19:Bn(qn);break;case 10:Ph(R.type._context);break;case 22:case 23:fv()}w=w.return}if(yr=d,ir=d=Zo(d.current,null),Ir=si=h,dr=0,Kl=null,ov=Fu=Ea=0,Kr=Gl=null,xa!==null){for(h=0;h<xa.length;h++)if(w=xa[h],R=w.interleaved,R!==null){w.interleaved=null;var N=R.next,j=w.pending;if(j!==null){var Z=j.next;j.next=N,R.next=Z}w.pending=R}xa=null}return d}function N0(d,h){do{var w=ir;try{if(Ih(),ku.current=Au,$u){for(var R=Kn.memoizedState;R!==null;){var N=R.queue;N!==null&&(N.pending=null),R=R.next}$u=!1}if(Sa=0,pr=ur=Kn=null,zl=!1,Hl=0,iv.current=null,w===null||w.return===null){dr=1,Kl=h,ir=null;break}e:{var j=d,Z=w.return,ce=w,ve=h;if(h=Ir,ce.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ee=ve,Be=ce,ze=Be.tag;if((Be.mode&1)===0&&(ze===0||ze===11||ze===15)){var Fe=Be.alternate;Fe?(Be.updateQueue=Fe.updateQueue,Be.memoizedState=Fe.memoizedState,Be.lanes=Fe.lanes):(Be.updateQueue=null,Be.memoizedState=null)}var yt=a0(Z);if(yt!==null){yt.flags&=-257,s0(yt,Z,ce,j,h),yt.mode&1&&o0(j,Ee,h),h=yt,ve=Ee;var Et=h.updateQueue;if(Et===null){var It=new Set;It.add(ve),h.updateQueue=It}else Et.add(ve);break e}else{if((h&1)===0){o0(j,Ee,h),hv();break e}ve=Error(n(426))}}else if(zn&&ce.mode&1){var tr=a0(Z);if(tr!==null){(tr.flags&65536)===0&&(tr.flags|=256),s0(tr,Z,ce,j,h),Eh(Is(ve,ce));break e}}j=ve=Is(ve,ce),dr!==4&&(dr=2),Gl===null?Gl=[j]:Gl.push(j),j=Z;do{switch(j.tag){case 3:j.flags|=65536,h&=-h,j.lanes|=h;var xe=r0(j,ve,h);Iy(j,xe);break e;case 1:ce=ve;var ge=j.type,Se=j.stateNode;if((j.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(Xo===null||!Xo.has(Se)))){j.flags|=65536,h&=-h,j.lanes|=h;var Qe=i0(j,ce,h);Iy(j,Qe);break e}}j=j.return}while(j!==null)}F0(w)}catch($t){h=$t,ir===w&&w!==null&&(ir=w=w.return);continue}break}while(!0)}function L0(){var d=Du.current;return Du.current=Au,d===null?Au:d}function hv(){(dr===0||dr===3||dr===2)&&(dr=4),yr===null||(Ea&268435455)===0&&(Fu&268435455)===0||Jo(yr,Ir)}function Wu(d,h){var w=dn;dn|=2;var R=L0();(yr!==d||Ir!==h)&&(Ro=null,Ia(d,h));do try{fI();break}catch(N){N0(d,N)}while(!0);if(Ih(),dn=w,Du.current=R,ir!==null)throw Error(n(261));return yr=null,Ir=0,dr}function fI(){for(;ir!==null;)D0(ir)}function hI(){for(;ir!==null&&!ct();)D0(ir)}function D0(d){var h=z0(d.alternate,d,si);d.memoizedProps=d.pendingProps,h===null?F0(d):ir=h,iv.current=null}function F0(d){var h=d;do{var w=h.alternate;if(d=h.return,(h.flags&32768)===0){if(w=oI(w,h,si),w!==null){ir=w;return}}else{if(w=aI(w,h),w!==null){w.flags&=32767,ir=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{dr=6,ir=null;return}}if(h=h.sibling,h!==null){ir=h;return}ir=h=d}while(h!==null);dr===0&&(dr=5)}function Pa(d,h,w){var R=jt,N=Ri.transition;try{Ri.transition=null,jt=1,vI(d,h,w,R)}finally{Ri.transition=N,jt=R}return null}function vI(d,h,w,R){do Ts();while(Yo!==null);if((dn&6)!==0)throw Error(n(327));w=d.finishedWork;var N=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var j=w.lanes|w.childLanes;if(Er(d,j),d===yr&&(ir=yr=null,Ir=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||ju||(ju=!0,H0(Gt,function(){return Ts(),null})),j=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||j){j=Ri.transition,Ri.transition=null;var Z=jt;jt=1;var ce=dn;dn|=4,iv.current=null,lI(d,w),k0(w,d),MR(hh),tu=!!fh,hh=fh=null,d.current=w,cI(w),Oe(),dn=ce,jt=Z,Ri.transition=j}else d.current=w;if(ju&&(ju=!1,Yo=d,zu=N),j=d.pendingLanes,j===0&&(Xo=null),Wn(w.stateNode),Gr(d,Ce()),h!==null)for(R=d.onRecoverableError,w=0;w<h.length;w++)N=h[w],R(N.value,{componentStack:N.stack,digest:N.digest});if(Bu)throw Bu=!1,d=sv,sv=null,d;return(zu&1)!==0&&d.tag!==0&&Ts(),j=d.pendingLanes,(j&1)!==0?d===lv?Xl++:(Xl=0,lv=d):Xl=0,Uo(),null}function Ts(){if(Yo!==null){var d=cr(zu),h=Ri.transition,w=jt;try{if(Ri.transition=null,jt=16>d?16:d,Yo===null)var R=!1;else{if(d=Yo,Yo=null,zu=0,(dn&6)!==0)throw Error(n(331));var N=dn;for(dn|=4,xt=d.current;xt!==null;){var j=xt,Z=j.child;if((xt.flags&16)!==0){var ce=j.deletions;if(ce!==null){for(var ve=0;ve<ce.length;ve++){var Ee=ce[ve];for(xt=Ee;xt!==null;){var Be=xt;switch(Be.tag){case 0:case 11:case 15:ql(8,Be,j)}var ze=Be.child;if(ze!==null)ze.return=Be,xt=ze;else for(;xt!==null;){Be=xt;var Fe=Be.sibling,yt=Be.return;if(S0(Be),Be===Ee){xt=null;break}if(Fe!==null){Fe.return=yt,xt=Fe;break}xt=yt}}}var Et=j.alternate;if(Et!==null){var It=Et.child;if(It!==null){Et.child=null;do{var tr=It.sibling;It.sibling=null,It=tr}while(It!==null)}}xt=j}}if((j.subtreeFlags&2064)!==0&&Z!==null)Z.return=j,xt=Z;else e:for(;xt!==null;){if(j=xt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:ql(9,j,j.return)}var xe=j.sibling;if(xe!==null){xe.return=j.return,xt=xe;break e}xt=j.return}}var ge=d.current;for(xt=ge;xt!==null;){Z=xt;var Se=Z.child;if((Z.subtreeFlags&2064)!==0&&Se!==null)Se.return=Z,xt=Se;else e:for(Z=ge;xt!==null;){if(ce=xt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:Lu(9,ce)}}catch($t){Qn(ce,ce.return,$t)}if(ce===Z){xt=null;break e}var Qe=ce.sibling;if(Qe!==null){Qe.return=ce.return,xt=Qe;break e}xt=ce.return}}if(dn=N,Uo(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Zt,d)}catch{}R=!0}return R}finally{jt=w,Ri.transition=h}}return!1}function B0(d,h,w){h=Is(w,h),h=r0(d,h,1),d=Ko(d,h,1),h=Fr(),d!==null&&(Cn(d,1,h),Gr(d,h))}function Qn(d,h,w){if(d.tag===3)B0(d,d,w);else for(;h!==null;){if(h.tag===3){B0(h,d,w);break}else if(h.tag===1){var R=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Xo===null||!Xo.has(R))){d=Is(w,d),d=i0(h,d,1),h=Ko(h,d,1),d=Fr(),h!==null&&(Cn(h,1,d),Gr(h,d));break}}h=h.return}}function gI(d,h,w){var R=d.pingCache;R!==null&&R.delete(h),h=Fr(),d.pingedLanes|=d.suspendedLanes&w,yr===d&&(Ir&w)===w&&(dr===4||dr===3&&(Ir&130023424)===Ir&&500>Ce()-av?Ia(d,0):ov|=w),Gr(d,h)}function j0(d,h){h===0&&((d.mode&1)===0?h=1:(h=Sr,Sr<<=1,(Sr&130023424)===0&&(Sr=4194304)));var w=Fr();d=Co(d,h),d!==null&&(Cn(d,h,w),Gr(d,w))}function mI(d){var h=d.memoizedState,w=0;h!==null&&(w=h.retryLane),j0(d,w)}function pI(d,h){var w=0;switch(d.tag){case 13:var R=d.stateNode,N=d.memoizedState;N!==null&&(w=N.retryLane);break;case 19:R=d.stateNode;break;default:throw Error(n(314))}R!==null&&R.delete(h),j0(d,w)}var z0;z0=function(d,h,w){if(d!==null)if(d.memoizedProps!==h.pendingProps||Wr.current)qr=!0;else{if((d.lanes&w)===0&&(h.flags&128)===0)return qr=!1,iI(d,h,w);qr=(d.flags&131072)!==0}else qr=!1,zn&&(h.flags&1048576)!==0&&by(h,bu,h.index);switch(h.lanes=0,h.tag){case 2:var R=h.type;Mu(d,h),d=h.pendingProps;var N=ys(h,Tr.current);Ss(h,w),N=Bh(null,h,R,d,N,w);var j=jh();return h.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ur(R)?(j=!0,mu(h)):j=!1,h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Th(h),N.updater=Ru,h.stateNode=N,N._reactInternals=h,Ah(h,R,d,w),h=Gh(null,h,R,!0,j,w)):(h.tag=0,zn&&j&&wh(h),Dr(null,h,N,w),h=h.child),h;case 16:R=h.elementType;e:{switch(Mu(d,h),d=h.pendingProps,N=R._init,R=N(R._payload),h.type=R,N=h.tag=bI(R),d=Di(R,d),N){case 0:h=Kh(null,h,R,d,w);break e;case 1:h=h0(null,h,R,d,w);break e;case 11:h=l0(null,h,R,d,w);break e;case 14:h=c0(null,h,R,Di(R.type,d),w);break e}throw Error(n(306,R,""))}return h;case 0:return R=h.type,N=h.pendingProps,N=h.elementType===R?N:Di(R,N),Kh(d,h,R,N,w);case 1:return R=h.type,N=h.pendingProps,N=h.elementType===R?N:Di(R,N),h0(d,h,R,N,w);case 3:e:{if(v0(h),d===null)throw Error(n(387));R=h.pendingProps,j=h.memoizedState,N=j.element,Ry(d,h),Eu(h,R,null,w);var Z=h.memoizedState;if(R=Z.element,j.isDehydrated)if(j={element:R,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},h.updateQueue.baseState=j,h.memoizedState=j,h.flags&256){N=Is(Error(n(423)),h),h=g0(d,h,R,w,N);break e}else if(R!==N){N=Is(Error(n(424)),h),h=g0(d,h,R,w,N);break e}else for(ai=Ho(h.stateNode.containerInfo.firstChild),oi=h,zn=!0,Li=null,w=My(h,null,R,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(xs(),R===N){h=Eo(d,h,w);break e}Dr(d,h,R,w)}h=h.child}return h;case 5:return Ny(h),d===null&&Sh(h),R=h.type,N=h.pendingProps,j=d!==null?d.memoizedProps:null,Z=N.children,vh(R,N)?Z=null:j!==null&&vh(R,j)&&(h.flags|=32),f0(d,h),Dr(d,h,Z,w),h.child;case 6:return d===null&&Sh(h),null;case 13:return m0(d,h,w);case 4:return Oh(h,h.stateNode.containerInfo),R=h.pendingProps,d===null?h.child=Es(h,null,R,w):Dr(d,h,R,w),h.child;case 11:return R=h.type,N=h.pendingProps,N=h.elementType===R?N:Di(R,N),l0(d,h,R,N,w);case 7:return Dr(d,h,h.pendingProps,w),h.child;case 8:return Dr(d,h,h.pendingProps.children,w),h.child;case 12:return Dr(d,h,h.pendingProps.children,w),h.child;case 10:e:{if(R=h.type._context,N=h.pendingProps,j=h.memoizedProps,Z=N.value,Ln(xu,R._currentValue),R._currentValue=Z,j!==null)if(Ni(j.value,Z)){if(j.children===N.children&&!Wr.current){h=Eo(d,h,w);break e}}else for(j=h.child,j!==null&&(j.return=h);j!==null;){var ce=j.dependencies;if(ce!==null){Z=j.child;for(var ve=ce.firstContext;ve!==null;){if(ve.context===R){if(j.tag===1){ve=So(-1,w&-w),ve.tag=2;var Ee=j.updateQueue;if(Ee!==null){Ee=Ee.shared;var Be=Ee.pending;Be===null?ve.next=ve:(ve.next=Be.next,Be.next=ve),Ee.pending=ve}}j.lanes|=w,ve=j.alternate,ve!==null&&(ve.lanes|=w),kh(j.return,w,h),ce.lanes|=w;break}ve=ve.next}}else if(j.tag===10)Z=j.type===h.type?null:j.child;else if(j.tag===18){if(Z=j.return,Z===null)throw Error(n(341));Z.lanes|=w,ce=Z.alternate,ce!==null&&(ce.lanes|=w),kh(Z,w,h),Z=j.sibling}else Z=j.child;if(Z!==null)Z.return=j;else for(Z=j;Z!==null;){if(Z===h){Z=null;break}if(j=Z.sibling,j!==null){j.return=Z.return,Z=j;break}Z=Z.return}j=Z}Dr(d,h,N.children,w),h=h.child}return h;case 9:return N=h.type,R=h.pendingProps.children,Ss(h,w),N=Si(N),R=R(N),h.flags|=1,Dr(d,h,R,w),h.child;case 14:return R=h.type,N=Di(R,h.pendingProps),N=Di(R.type,N),c0(d,h,R,N,w);case 15:return u0(d,h,h.type,h.pendingProps,w);case 17:return R=h.type,N=h.pendingProps,N=h.elementType===R?N:Di(R,N),Mu(d,h),h.tag=1,Ur(R)?(d=!0,mu(h)):d=!1,Ss(h,w),Ty(h,R,N),Ah(h,R,N,w),Gh(null,h,R,!0,d,w);case 19:return y0(d,h,w);case 22:return d0(d,h,w)}throw Error(n(156,h.tag))};function H0(d,h){return Kt(d,h)}function yI(d,h,w,R){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(d,h,w,R){return new yI(d,h,w,R)}function vv(d){return d=d.prototype,!(!d||!d.isReactComponent)}function bI(d){if(typeof d=="function")return vv(d)?1:0;if(d!=null){if(d=d.$$typeof,d===T)return 11;if(d===K)return 14}return 2}function Zo(d,h){var w=d.alternate;return w===null?(w=Ii(d.tag,h,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=h,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,h=d.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function Uu(d,h,w,R,N,j){var Z=2;if(R=d,typeof d=="function")vv(d)&&(Z=1);else if(typeof d=="string")Z=5;else e:switch(d){case _:return ka(w.children,N,j,h);case M:Z=8,N|=8;break;case B:return d=Ii(12,w,h,N|2),d.elementType=B,d.lanes=j,d;case O:return d=Ii(13,w,h,N),d.elementType=O,d.lanes=j,d;case L:return d=Ii(19,w,h,N),d.elementType=L,d.lanes=j,d;case J:return qu(w,N,j,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case H:Z=10;break e;case k:Z=9;break e;case T:Z=11;break e;case K:Z=14;break e;case q:Z=16,R=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return h=Ii(Z,w,h,N),h.elementType=d,h.type=R,h.lanes=j,h}function ka(d,h,w,R){return d=Ii(7,d,R,h),d.lanes=w,d}function qu(d,h,w,R){return d=Ii(22,d,R,h),d.elementType=J,d.lanes=w,d.stateNode={isHidden:!1},d}function gv(d,h,w){return d=Ii(6,d,null,h),d.lanes=w,d}function mv(d,h,w){return h=Ii(4,d.children!==null?d.children:[],d.key,h),h.lanes=w,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function wI(d,h,w,R,N){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hn(0),this.expirationTimes=hn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.identifierPrefix=R,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function pv(d,h,w,R,N,j,Z,ce,ve){return d=new wI(d,h,w,ce,ve),h===1?(h=1,j===!0&&(h|=8)):h=0,j=Ii(3,null,null,h),d.current=j,j.stateNode=d,j.memoizedState={element:R,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(j),d}function xI(d,h,w){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:R==null?null:""+R,children:d,containerInfo:h,implementation:w}}function V0(d){if(!d)return Wo;d=d._reactInternals;e:{if(zt(d)!==d||d.tag!==1)throw Error(n(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ur(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(n(171))}if(d.tag===1){var w=d.type;if(Ur(w))return my(d,w,h)}return h}function W0(d,h,w,R,N,j,Z,ce,ve){return d=pv(w,R,!0,d,N,j,Z,ce,ve),d.context=V0(null),w=d.current,R=Fr(),N=Qo(w),j=So(R,N),j.callback=h??null,Ko(w,j,N),d.current.lanes=N,Cn(d,N,R),Gr(d,R),d}function Ku(d,h,w,R){var N=h.current,j=Fr(),Z=Qo(N);return w=V0(w),h.context===null?h.context=w:h.pendingContext=w,h=So(j,Z),h.payload={element:d},R=R===void 0?null:R,R!==null&&(h.callback=R),d=Ko(N,h,Z),d!==null&&(ji(d,N,Z,j),Su(d,N,Z)),Z}function Gu(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function U0(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<h?w:h}}function yv(d,h){U0(d,h),(d=d.alternate)&&U0(d,h)}function CI(){return null}var q0=typeof reportError=="function"?reportError:function(d){console.error(d)};function bv(d){this._internalRoot=d}Xu.prototype.render=bv.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(n(409));Ku(d,h,null,null)},Xu.prototype.unmount=bv.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Ra(function(){Ku(null,d,null,null)}),h[yo]=null}};function Xu(d){this._internalRoot=d}Xu.prototype.unstable_scheduleHydration=function(d){if(d){var h=Fo();d={blockedOn:null,target:d,priority:h};for(var w=0;w<ri.length&&h!==0&&h<ri[w].priority;w++);ri.splice(w,0,d),w===0&&jn(d)}};function wv(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function Yu(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function K0(){}function SI(d,h,w,R,N){if(N){if(typeof R=="function"){var j=R;R=function(){var Ee=Gu(Z);j.call(Ee)}}var Z=W0(h,R,d,0,null,!1,!1,"",K0);return d._reactRootContainer=Z,d[yo]=Z.current,Ol(d.nodeType===8?d.parentNode:d),Ra(),Z}for(;N=d.lastChild;)d.removeChild(N);if(typeof R=="function"){var ce=R;R=function(){var Ee=Gu(ve);ce.call(Ee)}}var ve=pv(d,0,!1,null,null,!1,!1,"",K0);return d._reactRootContainer=ve,d[yo]=ve.current,Ol(d.nodeType===8?d.parentNode:d),Ra(function(){Ku(h,ve,w,R)}),ve}function Qu(d,h,w,R,N){var j=w._reactRootContainer;if(j){var Z=j;if(typeof N=="function"){var ce=N;N=function(){var ve=Gu(Z);ce.call(ve)}}Ku(h,Z,d,N)}else Z=SI(w,h,d,N,R);return Gu(Z)}gr=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var w=kr(h.pendingLanes);w!==0&&(er(h,w|1),Gr(h,Ce()),(dn&6)===0&&($s=Ce()+500,Uo()))}break;case 13:Ra(function(){var R=Co(d,1);if(R!==null){var N=Fr();ji(R,d,1,N)}}),yv(d,1)}},Hr=function(d){if(d.tag===13){var h=Co(d,134217728);if(h!==null){var w=Fr();ji(h,d,134217728,w)}yv(d,134217728)}},mr=function(d){if(d.tag===13){var h=Qo(d),w=Co(d,h);if(w!==null){var R=Fr();ji(w,d,h,R)}yv(d,h)}},Fo=function(){return jt},as=function(d,h){var w=jt;try{return jt=d,h()}finally{jt=w}},Ht=function(d,h,w){switch(h){case"input":if(he(d,w),h=w.name,w.type==="radio"&&h!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<w.length;h++){var R=w[h];if(R!==d&&R.form===d.form){var N=vu(R);if(!N)throw Error(n(90));G(R),he(R,N)}}}break;case"textarea":be(d,w);break;case"select":h=w.value,h!=null&&$e(d,!!w.multiple,h,!1)}},Rt=dv,dt=Ra;var EI={usingClientEntryPoint:!1,Events:[Ll,ms,vu,gt,Ge,dv]},Yl={findFiberByHostInstance:pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},RI={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=An(d),d===null?null:d.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||CI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Zt=Ju.inject(RI),rn=Ju}catch{}}return Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EI,Xr.createPortal=function(d,h){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(h))throw Error(n(200));return xI(d,h,null,w)},Xr.createRoot=function(d,h){if(!wv(d))throw Error(n(299));var w=!1,R="",N=q0;return h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(R=h.identifierPrefix),h.onRecoverableError!==void 0&&(N=h.onRecoverableError)),h=pv(d,1,!1,null,null,w,!1,R,N),d[yo]=h.current,Ol(d.nodeType===8?d.parentNode:d),new bv(h)},Xr.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=An(h),d=d===null?null:d.stateNode,d},Xr.flushSync=function(d){return Ra(d)},Xr.hydrate=function(d,h,w){if(!Yu(h))throw Error(n(200));return Qu(null,d,h,!0,w)},Xr.hydrateRoot=function(d,h,w){if(!wv(d))throw Error(n(405));var R=w!=null&&w.hydratedSources||null,N=!1,j="",Z=q0;if(w!=null&&(w.unstable_strictMode===!0&&(N=!0),w.identifierPrefix!==void 0&&(j=w.identifierPrefix),w.onRecoverableError!==void 0&&(Z=w.onRecoverableError)),h=W0(h,null,d,1,w??null,N,!1,j,Z),d[yo]=h.current,Ol(d),R)for(d=0;d<R.length;d++)w=R[d],N=w._getVersion,N=N(w._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[w,N]:h.mutableSourceEagerHydrationData.push(w,N);return new Xu(h)},Xr.render=function(d,h,w){if(!Yu(h))throw Error(n(200));return Qu(null,d,h,!1,w)},Xr.unmountComponentAtNode=function(d){if(!Yu(d))throw Error(n(40));return d._reactRootContainer?(Ra(function(){Qu(null,null,d,!1,function(){d._reactRootContainer=null,d[yo]=null})}),!0):!1},Xr.unstable_batchedUpdates=dv,Xr.unstable_renderSubtreeIntoContainer=function(d,h,w,R){if(!Yu(w))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return Qu(d,h,w,!1,R)},Xr.version="18.2.0-next-9e3b772b8-20220608",Xr}var tb;function E1(){if(tb)return Sv.exports;tb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sv.exports=MI(),Sv.exports}var nb;function NI(){if(nb)return Zu;nb=1;var t=E1();return Zu.createRoot=t.createRoot,Zu.hydrateRoot=t.hydrateRoot,Zu}var LI=NI();function gc(t,e){const n=e||new Path2D;if(t.name==="combine"&&!t.draw)return n instanceof Path2D?n:void 0;t.setTheme||(t.setTheme=DI);let r=t.calculative.borderRadius||0,i=r;const{x:o,y:a,width:l,height:s,ex:u,ey:c}=t.calculative.worldRect;r<1&&(r=l*r,i=s*i);let f=r<i?r:i;if(l<2*f&&(f=l/2),s<2*f&&(f=s/2),n.moveTo(o+f,a),n.arcTo(u,a,u,c,f),n.arcTo(u,c,o,c,f),n.arcTo(o,c,o,a,f),n.arcTo(o,a,u,a,f),n.closePath(),n instanceof Path2D)return n}function DI(t,e){if(t.affectByTheme){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];t.hasOwnProperty(n)&&(t[n]=r),t.calculative.hasOwnProperty(n)&&(t.calculative[n]=r)}t.hoverTextColor=e.textPrimaryColor,t.iconColor=e.buttonBg,t.calculative.iconColor=e.buttonBg,t.hoverBackground=e.formBg,t.activeBackground=e.activeBg,t.color=e.borderColor,t.calculative.color=e.borderColor,t.textColor=e["textColor-9"],t.calculative.textColor=e["textColor-9"]}}const FI=gc;function BI(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.ellipse(r+o/2,i+a/2,o/2,a/2,0,0,Math.PI*2),n instanceof Path2D)return n}var mn;(function(t){t[t.Node=0]="Node",t[t.Line=1]="Line"})(mn||(mn={}));var Xt;(function(t){t[t.None=0]="None",t[t.DisableEdit=1]="DisableEdit",t[t.DisableMove=2]="DisableMove",t[t.DisableScale=3]="DisableScale",t[t.DisableMoveScale=4]="DisableMoveScale",t[t.Disable=10]="Disable"})(Xt||(Xt={}));var rb;(function(t){t[t.Default=0]="Default",t[t.In=1]="In",t[t.Out=2]="Out"})(rb||(rb={}));var sl;(function(t){t[t.None=0]="None",t[t.Linear=1]="Linear",t[t.Radial=2]="Radial"})(sl||(sl={}));var on;(function(t){t[t.CanvasTemplate=1]="CanvasTemplate",t[t.CanvasImageBottom=2]="CanvasImageBottom",t[t.CanvasMain=3]="CanvasMain",t[t.CanvasImage=4]="CanvasImage"})(on||(on={}));const jI=["text","textWidth","textHeight","textLeft","textTop","fontFamily","fontSize","lineHeight","fontStyle","fontWeight","textAlign","textBaseline","whiteSpace","ellipsis","keepDecimal"],zI=["x","y","width","height","flipX","flipY"],HI=["paddingTop","paddingRight","paddingBottom","paddingLeft","flipX","flipY","visible","showChild"],VI=["iconLeft","iconTop","iconRotate"],R1=["globalAlpha","flipY","flipX","x","y","width","height","iconWidth","iconHeight","imageRatio","iconLeft","iconTop","iconAlign","rotate","visible"];var Qr;(function(t){t[t.Normal=0]="Normal",t[t.Beads=1]="Beads",t[t.Dot=2]="Dot",t[t.Arrow=3]="Arrow",t[t.WaterDrop=4]="WaterDrop",t[t.Custom=5]="Custom"})(Qr||(Qr={}));var qs;(function(t){t[t.Image=0]="Image",t[t.Icon=1]="Icon",t[t.Pen=2]="Pen",t[t.Element=3]="Element"})(qs||(qs={}));const I1=["gif","iframe","video","echarts","highcharts","lightningCharts","vue"],Iv=["radio","checkbox","button","inputDom","slider","echarts"],Jl=new Set(["borderRadius","paddingLeft","paddingRight","paddingTop","paddingBottom","progress","progressColor","verticalProgress","reverseProgress","flipX","flipY","input","lineDash","lineCap","lineJoin","strokeType","lineGradientFromColor","lineGradientToColor","lineGradientAngle","color","hoverColor","activeColor","lineWidth","bkType","gradientFromColor","gradientToColor","gradientAngle","gradientRadius","hoverBackground","activeBackground","globalAlpha","anchorColor","anchorRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textHasShadow","fontFamily","fontSize","textColor","hoverTextColor","activeTextColor","textBackground","fontStyle","fontWeight","textAlign","textBaseline","lineHeight","whiteSpace","textWidth","textHeight","textLeft","textTop","ellipsis","hiddenText","keepDecimal","borderWidth","borderColor","animateLineWidth","lineAnimateType","frames","animateColor","animateType","animateReverse","background","gradientColors","lineGradientColors","animateLineWidth","gradientSmooth","lineSmooth","animations"]);function WI(t){t.onAdd=void 0,t.onValue=void 0,t.onBeforeValue=void 0,t.onDestroy=void 0,t.onMove=void 0,t.onResize=void 0,t.onRotate=void 0,t.onClick=void 0,t.onMouseEnter=void 0,t.onMouseLeave=void 0,t.onMouseDown=void 0,t.onMouseMove=void 0,t.onMouseUp=void 0,t.onShowInput=void 0,t.onInput=void 0,t.onChangeId=void 0,t.onBinds=void 0,t.onStartVideo=void 0,t.onPauseVideo=void 0,t.onStopVideo=void 0,t.onRenderPenRaw=void 0,t.onKeyDown=void 0,t.onContextmenu=void 0,t.onScale=void 0,t.onWheel=void 0,t.onConnectLine=void 0}var kt;(function(t){t[t.None=0]="None",t[t.LineAnchor=1]="LineAnchor",t[t.NodeAnchor=2]="NodeAnchor",t[t.Line=3]="Line",t[t.Node=4]="Node",t[t.Resize=5]="Resize",t[t.Rotate=6]="Rotate",t[t.LineAnchorPrev=7]="LineAnchorPrev",t[t.LineAnchorNext=8]="LineAnchorNext"})(kt||(kt={}));var Sn;(function(t){t[t.None=0]="None",t[t.Translate=1]="Translate",t[t.Select=2]="Select",t[t.Resize=3]="Resize",t[t.AddAnchor=4]="AddAnchor"})(Sn||(Sn={}));var Po;(function(t){t[t.None=0]="None",t[t.Down=1]="Down",t[t.Translate=2]="Translate"})(Po||(Po={}));var Ut;(function(t){t[t.None=-1]="None",t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left"})(Ut||(Ut={}));const ib=["nw-resize","ne-resize","se-resize","sw-resize"],ob=["n-resize","e-resize","s-resize","w-resize"],UI=["curve","polyline","line"],P1=["dash","lineWidth","lineCap","lineJoin","strokeType","color","lineGradientFromColor","lineGradientToColor","lineGradientAngle","globalAlpha","bkType","background","gradientFromColor","gradientToColor","gradientAngle","gradientRadius","fontFamily","fontSize","textColor","hoverTextColor","activeTextColor","textBackground","fontStyle","fontWeight","textAlign","textBaseline","lineHeight","whiteSpace","textLeft","textTop","flipX","flipY","lineDash","visible","iconColor"];var ja;(function(t){t[t.Mirror=0]="Mirror",t[t.Bilateral=1]="Bilateral",t[t.Free=2]="Free"})(ja||(ja={}));var Pr;(function(t){t[t.Default=0]="Default",t[t.In=1]="In",t[t.Out=2]="Out",t[t.DisableConnected=3]="DisableConnected",t[t.DisableConnectTo=4]="DisableConnectTo",t[t.Disable=10]="Disable"})(Pr||(Pr={}));var ko;(function(t){t[t.Default=0]="Default",t[t.Line=1]="Line"})(ko||(ko={}));function _n(t,e,n){if(!e||e%360===0)return;const r=e*Math.PI/180,i=(t.x-n.x)*Math.cos(r)-(t.y-n.y)*Math.sin(r)+n.x,o=(t.x-n.x)*Math.sin(r)+(t.y-n.y)*Math.cos(r)+n.y;t.x=i,t.y=o,t.prev&&_n(t.prev,e,n),t.next&&_n(t.next,e,n)}function Ws(t,e,n=5,r){if(e.type===ko.Line){let i=r.rotate;r.flipX&&(i*=-1),r.flipY&&(i*=-1);let o=e.rotate+i;return r.flipX&&(o*=-1),r.flipY&&(o*=-1),Io(t,{x:e.x-e.length*r.calculative.canvas.store.data.scale/2,y:e.y-n,width:e.length*r.calculative.canvas.store.data.scale,height:n*2,rotate:o})}else return t.x>e.x-n&&t.x<e.x+n&&t.y>e.y-n&&t.y<e.y+n}function Wd(t,e,n){t.x=n.x-(n.x-t.x)*e,t.y=n.y-(n.y-t.y)*e}function Ai(t,e){if(t.x===e.x)return t.y<=e.y?0:180;if(t.y===e.y)return t.x<e.x?270:90;const n=t.x-e.x,r=t.y-e.y;let i=Math.atan(Math.abs(n/r))/(2*Math.PI)*360;return n>0&&r>0?i=180-i:n<0&&r>0?i+=180:n<0&&r<0&&(i=360-i),i}function mf(t,e){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function qI(t,e){let n=Ut.None;if(!e)return n;const r=t.x-e.x,i=t.y-e.y;return Math.abs(r)>Math.abs(i)?r>0?n=Ut.Right:n=Ut.Left:i>0?n=Ut.Bottom:n=Ut.Up,n}function mc(t,e,n){t&&(t.x+=e,t.y+=n,t.next&&(t.next.x+=e,t.next.y+=n),t.prev&&(t.prev.x+=e,t.prev.y+=n))}function ab(t,e){return t.anchorId===e.anchorId&&t.connectTo===e.connectTo}function ed(t,e,n){let r=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))/n.data.scale;e.rotate===0?t.x<e.x?n.pens[e.penId].flipX||(r*=-1):n.pens[e.penId].flipX&&(r*=-1):t.y<e.y?n.pens[e.penId].flipY||(r*=-1):n.pens[e.penId].flipY&&(r*=-1),t.distance=r}const KI="1.0.85",k1={version:KI},Tt={version:k1.version,path2dDraws:{},canvasDraws:{},anchors:{},lineAnimateDraws:{},htmlElements:{}};function GI(t){Object.assign(Tt.path2dDraws,t)}function XI(t){Object.assign(Tt.canvasDraws,t)}function YI(t){Object.assign(Tt.anchors,t)}function QI(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r&&r.push(n)||t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&r.splice(r.indexOf(n)>>>0,1)},emit:function(e,n){(t.get(e)||[]).slice().map(function(r){r(n)}),(t.get("*")||[]).slice().map(function(r){r(e,n)})}}}var Na;(function(t){t[t.None=-1]="None",t[t.Document=0]="Document",t[t.Canvas=1]="Canvas"})(Na||(Na={}));const JI={fontFamily:'"Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial',fontSize:12,lineHeight:1.5,textAlign:"center",textBaseline:"middle",color:"#222222",activeColor:"#278df8",hoverColor:"rgba(39,141,248,0.50)",anchorColor:"#278DF8",hoverAnchorColor:"#FF4101",anchorRadius:4,anchorBackground:"#fff",dockColor:"rgba(39,141,248,0.50)",dockPenColor:"#1890FF",dragColor:"#1890ff",rotateCursor:"rotate.cur",rightCursor:"right.cur",downCursor:"down.cur",hoverCursor:"pointer",minScale:.1,maxScale:10,keydown:Na.Document,gridSize:20,gridColor:"#e2e2e2",ruleColor:"#888888",drawingLineName:"curve",interval:30,animateInterval:30,autoPolyline:!0,autoAnchor:!0,autoAlignGrid:!1,animateColor:"#30EEDC",ruleLineColor:"#FF4101",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:64,shadowColor:"#00000014",globalAlpha:1,defaultAnchors:[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}],measureTextWidth:!0,moveConnectedLine:!0,mouseRightActive:!0,disableClipboard:!1,drawingLineLength:0,disableTouchPadScale:!1,cdn:"",polylineSpace:10,domShapes:[],containerShapes:["tablePlus"],textFlip:!0,textRotate:!0,unavailableKeys:[],diagramOptions:{},svgPathStroke:!0,reconnetTimes:10},ZI=["color","hoverColor","activeColor","disabledColor","background","activeBackground","hoverBackground","disabledBackground","anchorColor","hoverAnchorColor","anchorBackground","animateColor","textColor","ruleColor","ruleLineColor","gridColor","lineColor","penBackground","dockPenColor"],eP={dark:{color:"#bdc7db",background:"#1e2430",parentBackground:"#080b0f",ruleColor:"#222E47",ruleOptions:{background:"#121924",textColor:"#6E7B91"}},light:{color:"#222222",background:"#FFFFFF",parentBackground:"#F0F1F2",ruleColor:"#C8D0E1",ruleOptions:{background:"#F7F8FA",textColor:"#C8D0E1"}}},sc={cssRuleSelector:":root",style_prefix:"le5le_",vendor_css_prefix:"--le-",dark:["textColor-9: rgba(255,255,255,0.90)","textColor-6: rgba(255,255,255,0.60)","textColor-1: rgba(255,255,255,1)","textColor-4: rgba(255,255,255,0.40)","textPrimaryColor: #7f838c","textSecondColor: rgba(255,255,255,0.90)","textDisabledColor: rgba(255,255,255,0.40)","textActiveColor: #0052d9","buttonBg: #4583ff","buttonDisabledBg: #0057CC","buttonDisabledColor: #FFFFFF26","buttonGradient: linear-gradient(360deg,#4583ff, #33ccff)","containerBg: rgba(21,24,28,0.95)","tabBg: #303746","tabActiveBg: #4583ff","tabDisabledBg: #282e3b","tabDisabledColor: rgba(255,255,255,0.26)","tabActiveColor: rgba(255,255,255,0.90)","formBg: #2a2f36","datePickerCellActiveRangeBg: #2c4475","componentDisabledBg: #282e3b","dataPickerCellActiveBg: #001b52","activeBg: #25375b","popContentBg: #252b37","disabledBg: #7f838c","disabledBg-2: #282E3B","tableStripeColor: rgba(150,192,255,0.10)","tableMenuBg: #303746","tableMenuDividerBg: rgb(76 81 94)","tableMenuHandleBg: #454f64","tableMenuColor: #bdc7db","tableMenuBorderColor: transparent","tableColRowBg: #303746","tableColRowActiveBg: #4A5263","tableColRowColor: rgba(255,255,255,0.6)","paginationColor: rgba(255,255,255,0.6)","paginationActiveColor: #4583ff","paginationActiveBg: rgba(69,131,255,0.20)","sliderBg: #303746","sliderBtnBg: #000000","notificationBorderColor: transparent","notificationBg: #282e3b","borderColor: #424b61","borderOutsideColor: #4583ff","formBorderColor: #424b61","borderInsideColor: rgba(255,255,255,0.40)","shadow: 0px 1px 10px 0px rgba(0,0,0,0.05), 0px 4px 5px 0px rgba(0,0,0,0.08), 0px 2px 4px -1px rgba(0,0,0,0.12)","radius: 4px"],light:["textColor-9: rgba(0,0,0,0.90)","textColor-6: rgba(0,0,0,0.60)","textColor-1: rgba(0,0,0,1)","textColor-4: rgba(0,0,0,0.40)","textPrimaryColor: #7f838c","textSecondColor: #171B27","textDisabledColor: rgba(0, 0, 0, 0.6)","textActiveColor: #0052d9","buttonBg: #4583ff","buttonDisabledBg: #b5c7ff","buttonDisabledColor: #FFFFFF","buttonGradient: linear-gradient(360deg,#4583ff, #33ccff)","containerBg: #ffffff","tabBg: #f1f2f5","tabActiveBg: #4583ff","tabDisabledBg: #e2e6ea","tabDisabledColor: rgba(0,0,0,0.26)","tabActiveColor: #ffffff","formBg: #EFF1F4","datePickerCellActiveRangeBg: #f2f3ff","componentDisabledBg: #eee","dataPickerCellActiveBg: #edefff","activeBg: #f2f3ff","popContentBg: #ffffff","disabledBg: #7f838c","disabledBg-2: #E2E6EA","tableStripeColor: #f1f2f5","tableMenuBg: #ffffff","tableMenuDividerBg: #e2e6ea","tableMenuHandleBg: #ebedf1","tableMenuColor: rgba(0,0,0,0.60)","tableMenuBorderColor: #e2e6ea","tableColRowBg: #ebedf1","tableColRowActiveBg: #bcc4d0","tableColRowColor: rgba(0,0,0,0.4)","paginationColor: rgba(0,0,0,0.6)","paginationActiveColor: #ffffff","paginationActiveBg: #4583ff","sliderBg: #e2e6ea","sliderBtnBg: #ffffff","notificationBorderColor: transparent","notificationBg: #ffffff","borderColor: #d6dbe3","borderOutsideColor: #d6dbe3","formBorderColor: #d4d6d9","borderInsideColor: #e7e7e7","shadow: 0px 2px 4px 0px rgba(107,113,121,0.25)","radius: 4px"],camelCaseToHyphenated(t){return t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())},_addVendorCssPrefix(t){return t.map(e=>{const[n,r]=e.split(":");return`${this.vendor_css_prefix}${this.camelCaseToHyphenated(n.trim())}:${r.trim()}`})},createThemeSheet(t,e){const n=document.createElement("style");n.type="text/css",n.id=this.style_prefix+e,document.head.appendChild(n);const r=t||"dark",i=this.getTheme(r),o=`${this.cssRuleSelector} { ${i.join(";")} }`;n.innerHTML=o},destroyThemeSheet(t){const e=this.findStyleSheet(this.style_prefix+t);e&&document.head.removeChild(e.ownerNode)},addTheme(t,e){Object.assign(this,{[t]:e})},getTheme(t){return this._addVendorCssPrefix(this[t]||this.light)},getThemeObj(t="dark"){const e=":";return this[t].reduce((r,i)=>{const[o,a]=i.split(e);return r[o]=a,r},{})},findStyleSheet(t){const e=document.styleSheets;for(let n=0;n<e.length;n++){const r=e[n];if(r.ownerNode&&r.ownerNode.id===t)return r}return null},updateCssRule(t,e){const r=this.getTheme(e),i=this.findStyleSheet(this.style_prefix+t);if(!i)return;let o=!1;for(let a=0;a<i.cssRules.length;a++)if(i.cssRules[a].selectorText===this.cssRuleSelector){o=!0;break}if(o)for(let a=0;a<i.cssRules.length;a++){const l=i.cssRules[a];if(l.selectorText===this.cssRuleSelector)if(i.insertRule){i.deleteRule(a);const s=`${this.cssRuleSelector} { ${r.join(";")} }`;i.insertRule(s,a)}else i.addRule&&(l.style.cssText=r.join(";"))}else if(i.insertRule){const a=`${this.cssRuleSelector} { ${r.join(";")} }`;i.insertRule(a,i.cssRules.length)}else if(i.addRule){const a=i.cssRules.find(l=>l.selectorText===this.cssRuleSelector);if(a){const l=r.join(";");a.style.cssText+=`; ${l}`}else i.addRule(this.cssRuleSelector,r.join(";"))}}};var Pt;(function(t){t[t.Add=0]="Add",t[t.Update=1]="Update",t[t.Delete=2]="Delete",t[t.Replace=3]="Replace"})(Pt||(Pt={}));const tP=()=>({data:{x:0,y:0,scale:1,pens:[],origin:{x:0,y:0},center:{x:0,y:0},paths:{}},histories:[],pens:{},path2dMap:new WeakMap,animateMap:new WeakMap,active:[],animates:new Set,options:{...JI},theme:{...eP},emitter:QI(),bindDatas:{},bind:{},pensNetwork:{},cacheDatas:[],messageEvents:{},templatePens:{},globalTriggers:{}}),nP=(t="default")=>(Tt[t]||(Tt[t]=tP(),Tt[t].id=t),Tt[t]),rP=(t,e)=>{const n=t.data.template===e;if(n)for(const r of t.data.pens)r.canvasLayer===on.CanvasTemplate&&(t.templatePens[r.id]=r);t.lastScale=t.data.scale,t.data={x:0,y:0,scale:1,pens:[],origin:{x:0,y:0},center:{x:0,y:0},paths:{},template:n?e:null,lineAnimateDraws:{}},t.sameTemplate=n,t.pens={},t.histories=[],t.historyIndex=null,t.path2dMap=new WeakMap,t.animateMap=new WeakMap,t.bindDatas={},t.bind={},t.pensNetwork={},t.active=[],t.hover=void 0,t.lastHover=void 0,t.animates.clear()};function ca(t){const{paddingTop:e,paddingBottom:n,paddingLeft:r,paddingRight:i,worldRect:o,canvas:a}=t.calculative;let{textLeft:l,textTop:s,textWidth:u,textHeight:c}=t.calculative,f=r,v=e;const g=o.width-r-i,m=o.height-e-n;u&&u<1&&(u*=o.width),c&&c<1&&(c*=o.height),u<t.calculative.fontSize&&(u=t.calculative.fontSize),f+=(l||0)+o.x,v+=(s||0)+o.y;const y=t.textAlign||a.store.options.textAlign,p=t.textBaseline||a.store.options.textBaseline;switch(y){case"center":f+=(g-(u||g))/2;break;case"right":f+=g-(u||g);break}switch(p){case"middle":v+=(m-(c||m))/2;break;case"bottom":v+=m-(c||m);break}const C={x:f,y:v,width:u||g,height:c||m};hr(C),t.calculative.worldTextRect=C,pf(t),t.calculative.textDrawRect=void 0}function $1(t,e){const n=e.calculative.fontSize*e.calculative.lineHeight,r=e.calculative.textLines.length*n,i=iP(t,e),o=e.calculative.worldTextRect;let a=o.x+(o.width-i)/2,l=o.y+(o.height-r)/2;const s=e.calculative.canvas.store.options;switch(e.textAlign||s.textAlign){case"left":a=o.x;break;case"right":a=o.x+o.width-i;break}switch(e.textBaseline||s.textBaseline){case"top":l=o.y;break;case"bottom":l=o.ey-r;break}e.calculative.textDrawRect={x:a,y:l,width:i,height:r},hr(e.calculative.textDrawRect)}function pf(t,e=t.calculative.text){if(e==null){t.calculative.textLines=[];return}e=e.toString();const n=t.calculative.keepDecimal;if(n!=null){const s=Number(e);isNaN(s)||(e=s.toFixed(n))}let r=[];const i=t.calculative.fontSize*t.calculative.lineHeight,o=t.calculative.worldTextRect.height,a=Math.floor(o/i),l=a>1?a:1;switch(t.whiteSpace){case"nowrap":if(t.ellipsis!==!1){const c=sb(e.split(""),t);c[0]&&(r.push(c[0]),c.length>1&&Pv(r))}else r.push(e);break;case"pre-line":r=e.split(/[\n]/g),t.ellipsis!==!1&&r.length>l&&(r=r.slice(0,l),Pv(r));break;case"break-all":default:const s=e.split(/[\n]/g);let u=0;e:for(const c of s){const f=t.whiteSpace==="break-all"?c.split(""):T1(c);let v=sb(f,t);if(v.length===0&&(v=[""]),t.ellipsis!=!1)for(const g of v)if(u++,u>l){Pv(r);break e}else r.push(g);else r.push(...v)}break}return t.calculative.textLines=r,r}function T1(t=""){const e=[];let n="";for(let r=0;r<t.length;++r){const i=t.charCodeAt(r);i<33||i>126?(n&&(e.push(n),n=""),e.push(t[r])):n+=t[r]}return n&&e.push(n),e}function sb(t,e){const n=e.calculative.canvas,r=n.offscreen.getContext("2d"),{fontStyle:i,fontWeight:o,fontSize:a,fontFamily:l,lineHeight:s}=e.calculative;r.save();const u=[];let c=t[0]||"";for(let f=1;f<t.length;++f){const v=t[f]||"",g=c+v;let m=0;if(n.store.options.measureTextWidth)r.font=Ka({fontStyle:i,fontWeight:o,fontFamily:l||n.store.options.fontFamily,fontSize:a,lineHeight:s}),m=r.measureText(g).width;else{const p=g.match(/[^\x00-\xff]/g)||"",C=p.length*a,x=g.match(/\s/g)||"",S=x.length*a*.3,E=(g.length-p.length-x.length)*a*.6;m=C+S+E}const y=e.calculative.worldTextRect.width;m<=y+.1?c+=v:(c.length&&u.push(c),c=v)}return c.length&&u.push(c),r.restore(),u}function iP(t,e){let n=0;return e.calculative.textLineWidths=[],e.calculative.textLines.forEach(r=>{const i=t.measureText(r).width;e.calculative.textLineWidths.push(i),n<i&&(n=i)}),n}function Pv(t){t[t.length-1]=t[t.length-1].slice(0,-3)+"..."}function oP(t){let e=t.text.split(`
`);const n=t.calculative.canvas,r=n.offscreen.getContext("2d"),{fontStyle:i,fontWeight:o,fontSize:a,fontFamily:l,lineHeight:s}=t.calculative;let u=0,c=0;r.save();for(let v=0;v<e.length;v++){if(n.store.options.measureTextWidth)r.font=Ka({fontStyle:i,fontWeight:o,fontFamily:l||n.store.options.fontFamily,fontSize:a,lineHeight:s}),c=r.measureText(e[v]).width;else{const g=e[v].match(/[^\x00-\xff]/g)||"",m=g.length*a,y=e[v].match(/\s/g)||"",p=y.length*a*.3,C=(e[v].length-g.length-y.length)*a*.6;c=m+p+C}c>u&&(u=c)}r.restore();let f=e.length*a*s;t.textAlign==="left"||(t.textAlign==="right"?t.x=t.x-(u-t.width):t.x=t.x-(u-t.width)/2),t.textBaseline==="top"||(t.textBaseline==="bottom"?t.y=t.y-(f-t.height):t.y=t.y-(f-t.height)/2),t.height=f+5,t.width=u+5,t.calculative.canvas.updatePenRect(t),t.calculative.canvas.calcActiveRect()}function Pe(t,e=!1){if(Array.isArray(t)){const n=[];return t.forEach(r=>{n.push(Pe(r,e))}),n}else if(typeof t=="object"){if(t===null)return null;if(t.constructor===RegExp)return t;const n={};for(const r in t)if(!(["canvas","lastFrame","socketFn"].includes(r)||t[r]instanceof HTMLImageElement||t[r]instanceof HTMLMediaElement)){{if(r==="calculative"&&!e)continue;if(r==="singleton"){e?n[r]={}:n[r]=t[r];continue}}n[r]=Pe(t[r],e)}return n}return t}const ei={};function _1(t,e,n){if(!ei[e.fromArrow])return;const r=Gn(e),{x:i,y:o}=r,a={x:i,y:o};if(a.step=(e.fromArrowSize||10)*n.data.scale,r.next)a.rotate=Ai(r.next,r)+90;else{const s=e.calculative.worldAnchors[1];if(!s)return;s.prev?a.rotate=Ai(s.prev,r)+90:a.rotate=Ai(s,r)+90}t.save(),t.beginPath(),t.setLineDash([]);const l=e.fromArrowColor||e.calculative.color;l&&(t.strokeStyle=l),ei[e.fromArrow](t,e,n,a),t.restore()}function A1(t,e,n){if(!ei[e.toArrow]||e.calculative.worldAnchors.length<2)return;t.save();const r=gn(e),{x:i,y:o}=r,a={x:i,y:o};if(a.step=(e.toArrowSize||10)*n.data.scale,r.prev)a.rotate=Ai(r.prev,r)+90;else{const s=e.calculative.worldAnchors[e.calculative.worldAnchors.length-2];s.next?a.rotate=Ai(s.next,r)+90:a.rotate=Ai(s,r)+90}t.beginPath(),t.setLineDash([]);const l=e.toArrowColor||e.calculative.color;l&&(t.strokeStyle=l),ei[e.toArrow](t,e,n,a),t.restore()}ei.triangleSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step;t.moveTo(i,r.y-r.step/4),t.lineTo(r.x,r.y),t.lineTo(i,r.y+r.step/4),t.closePath(),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()};ei.reTriangleSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step/2;t.moveTo(r.x,r.y-r.step/2),t.lineTo(i,r.y),t.lineTo(r.x,r.y+r.step/2),t.closePath(),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()};ei.triangle=(t,e,n,r)=>{t.save(),t.lineWidth<2&&(t.lineWidth=2),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step;t.moveTo(i,r.y-r.step/4),t.lineTo(r.x,r.y),t.lineTo(i,r.y+r.step/4),t.closePath(),t.stroke(),t.fillStyle=n.data.background||"#ffffff",t.fill(),t.restore()};ei.circleSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.step/2;t.arc(r.x-i,r.y,i,0,2*Math.PI),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()};ei.circle=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.step/2;t.arc(r.x-i,r.y,i,0,2*Math.PI),t.stroke(),t.fillStyle=n.data.background||"#ffffff",t.fill(),t.restore()};ei.diamondSolid=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step,o=r.step/2;t.moveTo(i,r.y),t.lineTo(i+o,r.y-o/2),t.lineTo(r.x,r.y),t.lineTo(i+o,r.y+o/2),t.closePath(),t.stroke(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()};ei.diamond=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step,o=r.step/2;t.moveTo(i,r.y),t.lineTo(i+o,r.y-o/2),t.lineTo(r.x,r.y),t.lineTo(i+o,r.y+o/2),t.closePath(),t.stroke(),t.fillStyle=n.data.background||"#ffffff",t.fill(),t.restore()};ei.line=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step;t.moveTo(i,r.y-r.step/3),t.lineTo(r.x,r.y),t.lineTo(i,r.y+r.step/3),t.stroke(),t.restore()};ei.lineUp=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step;t.moveTo(i,r.y-r.step/3),t.lineTo(r.x,r.y),t.stroke(),t.restore()};ei.lineDown=(t,e,n,r)=>{t.save(),t.translate(r.x,r.y),t.rotate(r.rotate*Math.PI/180),t.translate(-r.x,-r.y);const i=r.x-r.step;t.moveTo(i,r.y+r.step/3),t.lineTo(r.x,r.y),t.stroke(),t.restore()};function bg(t){const e=parseInt,n=Math.round;let r=t.length,i={};if(r>9){const[o,a,l,s]=t=t.split(",");if(r=t.length,r<3||r>4)return null;i.r=e(o[3]=="a"?o.slice(5):o.slice(4)),i.g=e(a),i.b=e(l),i.a=s?parseFloat(s):-1}else{if(r==8||r==6||r<4)return null;r<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(r>4?t[4]+t[4]:"")),t=e(t.slice(1),16),r==9||r==5?(i.r=t>>24&255,i.g=t>>16&255,i.b=t>>8&255,i.a=n((t&255)/.255)/1e3):(i.r=t>>16,i.g=t>>8&255,i.b=t&255,i.a=-1)}return i}function Ks(t,e,n,r){let i,o,a,l,s,u,c,f=Math.round,v=typeof n=="string";return typeof t!="number"||t<-1||t>1||typeof e!="string"||e[0]!="r"&&e[0]!="#"||n&&!v||(c=e.length>9,c=v?n.length>9?!0:n=="c"?!c:!1:c,s=bg(e),l=t<0,u=n&&n!="c"?bg(n):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},t=l?t*-1:t,l=1-t,!s||!u)?null:(r?(i=f(l*s.r+t*u.r),o=f(l*s.g+t*u.g),a=f(l*s.b+t*u.b)):(i=f((l*s.r**2+t*u.r**2)**.5),o=f((l*s.g**2+t*u.g**2)**.5),a=f((l*s.b**2+t*u.b**2)**.5)),v=s.a,u=u.a,s=v>=0||u>=0,v=s?v<0?u:u<0?v:v*l+u*t:0,c?"rgb"+(s?"a(":"(")+i+","+o+","+a+(s?","+f(v*1e3)/1e3:"")+")":"#"+(4294967296+i*16777216+o*65536+a*256+(s?f(v*255):0)).toString(16).slice(1,s?void 0:-2))}globalThis.pSBC=Ks;function Ud(t,e){const n=bg(t)||{r:0,g:0,b:0};return n.a<0?`rgba(${n.r},${n.g},${n.b},${e})`:`rgba(${n.r},${n.g},${n.b},${e+n.a})`}function _s(t,e){if(isNaN(t)){console.warn("realValue not number");return}if(typeof e!="string"){console.warn("collection must be string");return}const[n,r]=[e[0],e[e.length-1]];if(!["[","("].includes(n)){console.warn('collection must start with "[" or "("');return}if(!["]",")"].includes(r)){console.warn('collection must end with "]" or ")"');return}const i=e.substring(1,e.length-1).split(",");if(i.length!==2){console.warn("collection must have 2 numbers");return}const[o,a]=[+i[0],+i[1]];if(o>=a){console.warn("startNum must less than endNum");return}return t>o||n==="["&&t===o?t<a||r==="]"&&t===a:!1}function As(t,e){if(typeof e!="string"){console.warn("collection must be string");return}const[n,r]=[e[0],e[e.length-1]];if(n!=="["||r!=="]"){console.warn('collection must start with "[" and end with "]"');return}const i=e.substring(1,e.length-1).split(",");for(const o of i)if(o.includes("..")){const[a,l]=o.split(".."),[s,u]=[+a,+l];if(s>=u){console.warn("startNum must less than endNum");return}if(t>=s&&t<=u)return!0}else if(t==o)return!0;return!1}function aP(t,e,n){const r=1-t;return 3*r*r*t*e+3*r*t*t*n+t*t*t}function Wt(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}const $o=t=>{let e=0,n=0,r=0,i=0;return typeof t=="number"?e=n=r=i=t:typeof t=="string"?e=n=r=i=parseInt(t,10):Array.isArray(t)&&(e=t[0],r=kv(t[1])?t[0]:t[1],i=kv(t[2])?t[0]:t[2],n=kv(t[3])?r:t[3]),[e,r,i,n]};function kv(t){return t==null}async function sP(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=i=>{e(i.target.result)},r.onerror=i=>{n(i)},r.readAsDataURL(t)})}async function lP(t,e,n,r){const i=new FormData;if(i.append("file",t),n)for(const a in n)n.hasOwnProperty(a)&&i.append(a,n[a]);return(await(await fetch(e,{method:"POST",headers:r,body:i})).json()).url}function cP(t,e,n){var r=document.createElement("link");r.href=t,r.rel="stylesheet",e&&(r.onload=e),document.head.appendChild(r)}function Gs(t){let e=t||window.location.search.split("?")[1];const n=new URLSearchParams(e);return Object.fromEntries(n.entries())}function Cc(t){let e;const n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?decodeURIComponent(e[2]):""}var qd;(function(t){t[t.None=0]="None",t[t.LocalStorage=1]="LocalStorage",t[t.Cookie=2]="Cookie"})(qd||(qd={}));const uP=location.host.indexOf("le5le.com")!==-1;function Rd(){const t=globalThis.le5leTokenName??"token";switch(globalThis.le5leTokenType){case qd.LocalStorage:return localStorage.getItem(t);case qd.Cookie:return Cc(t);default:return uP?Cc(t):localStorage.getItem(t)}}async function O1(t,e){var s,u;if(globalThis.getMeta2dData)return await globalThis.getMeta2dData(e);const n=t.options.navigatorNetWork;let i=`/api/data/${location.href.includes("2d.")||location.href.includes("/2d")?"2d":"v"}/get`,o=((s=Gs())==null?void 0:s.id)||i.includes("${id}");if(!o&&((u=Gs())==null?void 0:u.data)){i=`./projects/${e}`;const f=new URL(window.location);f.searchParams.set("data",e),history.pushState({},"",f)}n!=null&&n.url&&(n.url.includes("${id}")?i=n.url.replace("${id}",e):i=n.url+((n==null?void 0:n.method)==="GET"?`?id=${e}`:""));let a=(n==null?void 0:n.method)||"POST";o||(a="GET");const l=await fetch(i,{headers:{Authorization:`Bearer ${Rd()}`},method:a,body:a==="GET"?void 0:JSON.stringify({id:e})});if(l.ok){let c=await l.text();return c.constructor===Object||c.constructor===Array?c=JSON.parse(JSON.stringify(c)):typeof c=="string"&&(c=JSON.parse(c)),c.data&&(c=c.data),c}else t.emitter.emit("error",{type:"http",error:l})}function $v(t,e){if(e==null)return t;const n=e.split(".");for(;n.length&&(t=t[n.shift()]););return t}function dP(t,e,n){e!=null&&e.split(".").reduce((r,i,o)=>r[i]=e.split(".").length===++o?n:r[i]||{},t)}function fP(t,e){if(!t||!e)return!1;let n=hi(t);for(;n;){if(n.id===e.id)return!0;n=hi(n)}return!1}function hi(t,e){if(!t||!t.parentId||!t.calculative)return;const r=t.calculative.canvas.store.pens[t.parentId];return e&&hi(r,e)||r}function fi(t,e){if(!t||!t.children)return[];const n=[];return t.children.forEach(r=>{const i=e.pens[r];i&&(n.push(i),n.push(...fi(i,e)))}),n}function Lm(t,e){if(!t||!t.followers)return[];const n=[];return t.followers.forEach(r=>{const i=e.pens[r];i&&!i.parentId&&(n.push(i),n.push(...Lm(i,e)))}),n}function hP(t,e){const{worldRect:n,gradientFromColor:r,gradientToColor:i,gradientAngle:o}=e.calculative;return N1(t,n,r,i,o)}function vP(t,e){const{worldRect:n,gradientFromColor:r,gradientToColor:i,gradientRadius:o}=e.calculative;if(!r||!i)return;const{width:a,height:l,center:s}=n,{x:u,y:c}=s;let f=a;f<l&&(f=l),f*=.5;const v=t.createRadialGradient(u,c,f*(o||0),u,c,f);return v.addColorStop(0,r),v.addColorStop(1,i),v}function gP(t,e,n,r,i){let o=0;o=Math.PI/2-Math.atan2(r-e,n-t);const a=(t+n)/2,l=(e+r)/2,s=a+i*Math.sin(90*Math.PI/180-o),u=l+i*-Math.cos(90*Math.PI/180-o),c=a+i*Math.sin(270*Math.PI/180-o),f=l+i*-Math.cos(270*Math.PI/180-o);return[s,u,c,f]}function mP(t,e){const{worldRect:n,gradientColors:r,gradientRadius:i}=e.calculative;if(!r)return;let o=e.calculative.gradientColors;e.calculative.checked&&(o=e.calculative.onGradientColors);const{width:a,height:l,center:s}=n,{x:u,y:c}=s;let f=a;f<l&&(f=l),f*=.5;const{colors:v}=Za(o),g=t.createRadialGradient(u,c,f*(i||0),u,c,f);return v.forEach(m=>{g.addColorStop(m.i,m.color)}),g}function pP(t,e){const{x:n,y:r,ex:i,width:o,height:a,center:l}=e.calculative.worldRect;let s=[{x:i,y:r+a/2},{x:n,y:r+a/2}],u=e.calculative.gradientColors;e.calculative.checked&&(u=e.calculative.onGradientColors);const{angle:c,colors:f}=Za(u);let v=Dm(c,o,a);return s.forEach(g=>{_n(g,c,l)}),yf(t,s,f,v)}function yP(t,e){const{worldRect:n,textGradientColors:r}=e.calculative;if(!r)return;const{width:i,height:o,center:a}=n,{x:l,y:s}=a;let u=i;u<o&&(u=o),u*=.5;const{colors:c}=Za(r),f=t.createRadialGradient(l,s,0,l,s,u);return c.forEach(v=>{f.addColorStop(v.i,v.color)}),f}function bP(t,e){const{x:n,y:r,ex:i,width:o,height:a,center:l}=e.calculative.worldRect;let s=[{x:i,y:r+a/2},{x:n,y:r+a/2}];const{angle:u,colors:c}=Za(e.calculative.textGradientColors);let f=Dm(u,o,a);return s.forEach(v=>{_n(v,u,l)}),yf(t,s,c,f)}function Dm(t,e,n){const r=Math.atan(n/e)/Math.PI*180;let i=(t-90)%360,o=0;return i>r&&i<180-r||i>180+r&&i<360-r||i<0?(i>270?i=360-i:i>180?i=i-180:i>90&&(i=180-i),o=Math.abs(n/Math.sin(i/180*Math.PI)/2)):(i>270?i=360-i:i>180?i=i-180:i>90&&(i=180-i),o=Math.abs(e/Math.cos(i/180*Math.PI)/2)),o}function Za(t){if(typeof t=="string"&&t.startsWith("linear-gradient")){let e=t.slice(16,-2).split("deg,");if(e.length>1){let n=e[1].split("%,");const r=[];return n.forEach(i=>{if(/rgba?/.test(i)){let o=i.split(") ");r.push({color:wP(o[0]+")"),i:parseFloat(o[1])/100})}else{let o=i.split(" ");o.length>2?r.push({color:o[1],i:parseFloat(o[2])/100}):r.push({color:o[0],i:parseFloat(o[1])/100})}}),{angle:parseFloat(e[0]),colors:r}}else return{angle:parseFloat(e[0]),colors:[]}}else return{angle:0,colors:[]}}function wP(t){if(/rgba?/.test(t)){let e=t.split(",");if(e.length<3)return"";t="#";for(let n=0,r;r=e[n++];)if(n<4)r=parseInt(r.replace(/[^\d]/gi,""),10).toString(16),t+=r.length==1?"0"+r:r;else{r=r.replace(")","");let o=parseInt(r*255+"").toString(16);o=o.length===2?o:"0"+o,t+=o}t=t.toUpperCase()}return t}function xP(t,e){const{x:n,y:r,ex:i,width:o,height:a,center:l}=e.calculative.worldRect;let s=[{x:i,y:r+a/2},{x:n,y:r+a/2}];const{angle:u,colors:c}=Za(e.calculative.lineGradientColors);let f=Dm(u,o,a);return s.forEach(v=>{_n(v,u,l)}),yf(t,s,c,f)}function yf(t,e,n,r){let i=gP(e[0].x,e[0].y,e[1].x,e[1].y,r),o=t.createLinearGradient(i[0],i[1],i[2],i[3]);return n.forEach(a=>{o.addColorStop(a.i,a.color)}),o}function ia(t,e,n){let r=[];e.calculative.gradientColorStop?r=e.calculative.gradientColorStop:(r=Za(e.calculative.lineGradientColors).colors,e.calculative.gradientColorStop=r),t.strokeStyle=yf(t,n,r,e.calculative.lineWidth/2),t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.stroke()}function M1(t,e){const n=e.calculative.worldAnchors;let r=e.calculative.lineWidth*(e.calculative.gradientSmooth||e.calculative.lineSmooth||0);for(let i=0;i<n.length-1;i++)if((e.lineName==="curve"||e.lineName==="mind")&&n[i].curvePoints){if(i>0){let l=n[i-1].curvePoints;l?td(t,e,r,l[l.length-1],n[i],n[i].curvePoints[0]):td(t,e,r,n[i-1],n[i],n[i].curvePoints[0]);let s=_o(r,n[i],n[i].curvePoints[0]);ia(t,e,[s,n[i].curvePoints[1]])}else ia(t,e,[n[i],n[i].curvePoints[0]]),ia(t,e,[n[i].curvePoints[0],n[i].curvePoints[1]]);let o=n[i].curvePoints.length-1;for(let l=1;l<o;l++)ia(t,e,[n[i].curvePoints[l],n[i].curvePoints[l+1]]);let a=_o(r,n[i+1],n[i].curvePoints[o]);ia(t,e,[n[i].curvePoints[o],a])}else{let o=n[i],a=n[i+1];if(i>0&&i<n.length-1){let s=n[i-1].curvePoints;s?td(t,e,r,s[s.length-1],n[i],n[i+1]):td(t,e,r,n[i-1],n[i],n[i+1])}i>0&&i<n.length-1&&(o=_o(r,n[i],n[i+1])),i<n.length-2&&(a=_o(r,n[i+1],n[i]));let l=!1;if(i===0&&e.fromLineCap&&e.fromLineCap!=="butt"&&(t.save(),l=!0,t.lineCap=e.fromLineCap),i!==0&&i===n.length-2&&e.toLineCap&&e.toLineCap!=="butt"&&(t.save(),l=!0,t.lineCap=e.toLineCap),ia(t,e,[o,a]),l&&t.restore(),n.length===2&&i===0){t.save(),l=!0,t.lineCap=e.toLineCap;let s=.1,u=.1;o.x-a.x===0?u=0:s=(o.y-a.y)/(o.x-a.x)*.1,ia(t,e,[{x:a.x-u,y:a.y-s},a]),t.restore()}}}function _o(t,e,n){let r=Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));return r===0?{x:e.x,y:e.y}:t<r?{x:e.x+(n.x-e.x)*t/r,y:e.y+(n.y-e.y)*t/r}:{x:e.x+(n.x-e.x)/r/2,y:e.y+(n.y-e.y)/r/2}}function td(t,e,n,r,i,o){let a=_o(n,i,r),l=_o(n,i,o),s={x:i.x,y:i.y},u=CP(e.calculative.canvas.store.data.smoothNum||20,a,s,l);for(let c=0;c<u.length-1;c++)ia(t,e,[{x:u[c].x,y:u[c].y},{x:u[c+1].x,y:u[c+1].y}])}function lb(t,e,n,r){let i=_o(e,n,r),o={x:n.x,y:n.y};t.quadraticCurveTo(o.x,o.y,i.x,i.y)}function Fm(t){const e=t.calculative.worldAnchors;let n=t.calculative.lineWidth*(t.calculative.gradientSmooth||t.calculative.lineSmooth||0);const r=new Path2D;for(let i=0;i<e.length-1;i++){e[i];let o=e[i+1];if(i==0&&r.moveTo(e[i].x,e[i].y),i>0&&i<e.length-1){let a=e[i-1].curvePoints;lb(r,n,e[i],e[i+1])}i>0&&i<e.length-1&&_o(n,e[i],e[i+1]),i<e.length-2&&(o=_o(n,e[i+1],e[i])),r.lineTo(o.x,o.y)}return r}function CP(t=100,e,n,r,i){let o=null;const a=[];!r&&!i?o=SP:r&&!i&&(o=EP);for(let l=0;l<t;l++)a.push(o(l/t,e,n,r,i));return r&&a.push(r),a}function SP(t,e,n){const{x:r,y:i}=e,{x:o,y:a}=n;let l=r+(o-r)*t,s=i+(a-i)*t;return{x:l,y:s}}function EP(t,e,n,r){const{x:i,y:o}=e,{x:a,y:l}=n,{x:s,y:u}=r;let c=(1-t)*(1-t)*i+2*t*(1-t)*a+t*t*s,f=(1-t)*(1-t)*o+2*t*(1-t)*l+t*t*u;return{x:c,y:f}}function RP(t,e){const{worldRect:n,lineGradientFromColor:r,lineGradientToColor:i,lineGradientAngle:o}=e.calculative;return N1(t,n,r,i,o)}function N1(t,e,n,r,i){if(!n||!r)return;const{x:o,y:a,center:l,ex:s,ey:u}=e,c={x:o,y:l.y},f={x:s,y:l.y};i%90===0&&i%180?(c.x=l.x,f.x=l.x,i%270?(c.y=a,f.y=u):(c.y=u,f.y=a)):i&&(_n(c,i,e.center),_n(f,i,e.center));const v=t.createLinearGradient(c.x,c.y,f.x,f.y);return v.addColorStop(0,n),v.addColorStop(1,r),v}function IP(t){const{worldIconRect:e,iconWidth:n,iconHeight:r,imgNaturalWidth:i,imgNaturalHeight:o}=t.calculative;let{x:a,y:l,width:s,height:u}=e;if(n&&(s=n),r&&(u=r),i&&o&&t.imageRatio){const c=e.width/i,f=e.height/o,v=Math.min(c,f),g=i/o;n?u=n/g:r?s=r*g:(s=v*i,u=v*o)}switch(a+=(e.width-s)/2,l+=(e.height-u)/2,t.iconAlign){case"top":l=e.y;break;case"bottom":l=e.ey-u;break;case"left":a=e.x;break;case"right":a=e.ex-s;break;case"left-top":a=e.x,l=e.y;break;case"right-top":a=e.ex-s,l=e.y;break;case"left-bottom":a=e.x,l=e.ey-u;break;case"right-bottom":a=e.ex-s,l=e.ey-u;break}return{x:a,y:l,width:s,height:u}}function el(t,e){const{x:n,y:r,width:i,height:o}=IP(e),{worldIconRect:a,iconRotate:l,img:s}=e.calculative;if(t.filter=e.filter,l){const{x:u,y:c}=a.center;t.translate(u,c),t.rotate(l*Math.PI/180),t.translate(-u,-c)}if(e.imageRadius){t.save();let u=e.calculative.imageRadius||0,c=u;const{x:f,y:v,width:g,height:m,ex:y,ey:p}=e.calculative.worldRect;u<1&&(u=g*u,c=m*c);let C=u<c?u:c;g<2*C&&(C=g/2),m<2*C&&(C=m/2),t.beginPath(),t.moveTo(f+C,v),t.arcTo(y,v,y,p,C),t.arcTo(y,p,f,p,C),t.arcTo(f,p,f,v,C),t.arcTo(f,v,y,v,C),t.clip(),t.drawImage(s,n,r,i,o),t.restore()}else{let u=r,c=0;if(e.thumbImg){let f=s.naturalWidth,v=s.naturalHeight;c=(o/i*f-v)/2,u=r+c}t.drawImage(s,n,u,i,o-2*c)}}function ll(t,e){const{textColor:n,color:r}=t.calculative,{styles:i}=e;return n||r||i.textColor||i.color}function L1(t,e){const{fontStyle:n,fontWeight:r,fontSize:i,fontFamily:o,lineHeight:a,text:l,hiddenText:s,canvas:u,textHasShadow:c,textBackground:f,textType:v}=e.calculative;if(e.input&&!e.text&&e.calculative.canvas.inputDiv.dataset.penId!==e.id){t.save(),t.font=Ka({fontStyle:n,fontWeight:r,fontFamily:o,fontSize:i,lineHeight:a}),t.fillStyle=e.placeholderColor||"#c0c0c0";const _=e.calculative.worldTextRect;t.fillText(e.placeholder||"请输入",_.x,_.y+_.height/2),t.restore()}if(l==null||s)return;const g=u.store;t.save(),c||(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0);let m;e.calculative.disabled?m=e.disabledTextColor||e.disabledColor||Ks(.4,ll(e,g)):e.calculative.hover?m=e.hoverTextColor||e.hoverColor||g.styles.hoverColor:e.calculative.active&&(m=e.activeTextColor||e.activeColor||g.styles.activeColor);let y;v===sl.Linear?y=bP(t,e):v===sl.Radial&&(y=yP(t,e)),t.fillStyle=m||y||ll(e,g),t.font=Ka({fontStyle:n,fontWeight:r,fontFamily:o||g.options.fontFamily,fontSize:i,lineHeight:a}),!e.calculative.textDrawRect&&$1(t,e);const{x:p,y:C,width:x,height:S}=e.calculative.textDrawRect;f&&(t.save(),t.fillStyle=f,t.fillRect(p,C,x,S),t.restore());const E=.55,P=e.textAlign||g.options.textAlign,$=i*a;e.calculative.textLines.forEach((_,M)=>{const B=e.calculative.textLineWidths[M];let H=0;P==="center"?H=(x-B)/2:P==="right"&&(H=x-B),t.fillText(_,p+H,C+(M+E)*$);const{textDecorationColor:k,textDecorationDash:T,textDecoration:O}=e;O&&PP(t,{x:p+H,y:C+(M+E)*$,width:B},{textDecorationColor:k,textDecorationDash:T,fontSize:i});const{textStrickoutColor:L,textStrickoutDash:K,textStrickout:q}=e;q&&kP(t,{x:p+H,y:C+(M+E)*$,width:B},{textStrickoutColor:L,textStrickoutDash:K,fontSize:i})}),t.restore()}function PP(t,e,n){const{textDecorationColor:r,textDecorationDash:i,fontSize:o}=n;let{x:a,y:l,width:s}=e;switch(t.textBaseline){case"top":l+=o;break;case"middle":l+=o/2;break}t.save(),t.beginPath(),t.strokeStyle=r||t.fillStyle,t.lineWidth=1,t.moveTo(a,l),t.setLineDash(i||[]),t.lineTo(a+s,l),t.stroke(),t.restore()}function kP(t,e,n){const{textStrickoutColor:r,textStrickoutDash:i,fontSize:o}=n;let{x:a,y:l,width:s}=e;switch(t.textBaseline){case"top":l+=o/2;break;case"bottom":l-=o/2;break}t.save(),t.beginPath(),t.strokeStyle=r||t.fillStyle,t.lineWidth=1,t.moveTo(a,l),t.setLineDash(i||[]),t.lineTo(a+s,l),t.stroke(),t.restore()}function D1(t,e,n){if(n==null)return;const{fontStyle:r,fontWeight:i,fontSize:o,fontFamily:a,lineHeight:l,canvas:s}=e.calculative,u=s.store;t.save();let c;e.calculative.hover?c=e.hoverTextColor||e.hoverColor||u.styles.hoverColor:e.calculative.active&&(c=e.activeTextColor||e.activeColor||u.styles.activeColor),t.fillStyle=c||ll(e,u),t.font=Ka({fontStyle:r,fontWeight:i,fontFamily:a||u.options.fontFamily,fontSize:o,lineHeight:l});const f=t.measureText(n).width;let v,g;for(const m of e.calculative.worldAnchors){if(!g){g=m;continue}const y=mf(g,m),p=Math.floor(y/f);v="";for(let x=0;x<p;x++)v+=n;const C=Ai(g,m)-270;if(t.save(),C%360!==0){const{x,y:S}=g;t.translate(x,S);let E=C*Math.PI/180;t.rotate(E),t.translate(-x,-S)}t.fillText(v,g.x,g.y+l/2),t.restore(),g=m}t.restore()}function F1(t,e){const n=e.calculative.canvas.store;t.save(),t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.textAlign="center",t.textBaseline="middle";const r=e.calculative.worldIconRect;let i=r.x+r.width/2,o=r.y+r.height/2;switch(e.iconAlign){case"top":o=r.y,t.textBaseline="top";break;case"bottom":o=r.ey,t.textBaseline="bottom";break;case"left":i=r.x,t.textAlign="left";break;case"right":i=r.ex,t.textAlign="right";break;case"left-top":i=r.x,o=r.y,t.textAlign="left",t.textBaseline="top";break;case"right-top":i=r.ex,o=r.y,t.textAlign="right",t.textBaseline="top";break;case"left-bottom":i=r.x,o=r.ey,t.textAlign="left",t.textBaseline="bottom";break;case"right-bottom":i=r.ex,o=r.ey,t.textAlign="right",t.textBaseline="bottom";break}const a=e.calculative.iconWeight;let l;const s=e.calculative.iconFamily;e.calculative.iconSize>0?l=e.calculative.iconSize:r.width>r.height?l=r.height:l=r.width,t.font=Ka({fontSize:l,fontWeight:a,fontFamily:s}),t.fillStyle=e.calculative.iconColor||ll(e,n),e.calculative.iconRotate&&(t.translate(r.center.x,r.center.y),t.rotate(e.calculative.iconRotate*Math.PI/180),t.translate(-r.center.x,-r.center.y)),t.beginPath(),t.fillText(e.calculative.icon,i,o),t.restore()}function B1(t,e){if(!e.input)return;const n=e.calculative.canvas.store.data.scale,r=e.calculative.canvas.inputDiv.dataset.penId,{x:i,y:o,width:a,height:l}=e.calculative.worldRect;t.save(),t.beginPath(),e.id===r?(t.moveTo(i+a-20*n,o+l/2+2*n),t.lineTo(i+a-14*n,o+l/2-4*n),t.lineTo(i+a-8*n,o+l/2+2*n)):(t.moveTo(i+a-20*n,o+l/2-4*n),t.lineTo(i+a-14*n,o+l/2+2*n),t.lineTo(i+a-8*n,o+l/2-4*n)),t.stroke(),t.restore()}function Ka({fontStyle:t="normal",textDecoration:e="normal",fontWeight:n="normal",fontSize:r=12,fontFamily:i="Arial",lineHeight:o=1}={}){return`${t} ${e} ${n} ${r}px/${o} ${i}`}function za(t,e){const{x:n,ex:r,y:i,ey:o}=e.calculative.worldRect||{};e.calculative.flipX&&(t.translate(n+r,0),t.scale(-1,1)),e.calculative.flipY&&(t.translate(0,i+o),t.scale(1,-1))}function Oo(t,e,n=!1){const{x:r,y:i}=e.calculative.worldRect.pivot||e.calculative.worldRect.center;t.translate(r,i);let o=e.calculative.rotate*Math.PI/180;n||(e.calculative.flipX&&(o*=-1),e.calculative.flipY&&(o*=-1)),t.rotate(o),t.translate(-r,-i)}function Ta(t,e,n){t.save(),t.translate(.5,.5),t.beginPath(),YP(t,e);const r=e.calculative.canvas.store,i=e.textFlip||r.options.textFlip,o=e.textRotate||r.options.textRotate;(!i||!o)&&t.save(),za(t,e),e.calculative.rotate&&e.name!=="line"&&Oo(t,e),(e.calculative.lineWidth>1||n)&&(t.lineWidth=e.calculative.lineWidth),WP(t,r,e);let a,l=!1,s;e.calculative.disabled?(s=e.disabledColor||r.styles.disabledColor||Ks(.4,e.calculative.color||r.styles.color),a=e.disabledBackground||r.styles.disabledBackground||Ks(.4,e.calculative.background||r.styles.penBackground)):e.mouseDownValid&&e.calculative.mouseDown?(s=e.mouseDownColor||Ks(-.4,e.calculative.color||r.styles.color),a=e.mouseDownBackground||Ks(-.4,e.calculative.background||r.styles.penBackground)):e.switch&&e.calculative.checked?e.calculative.bkType||(a=e.onBackground):e.calculative.hover?(s=e.hoverColor||r.styles.hoverColor,a=e.hoverBackground||r.styles.hoverBackground):e.calculative.active?(s=e.activeColor||r.styles.activeColor,a=e.activeBackground||r.styles.activeBackground):e.calculative.isDock&&(e.type===mn.Line?s=r.styles.dockPenColor:a=Ud(r.styles.dockPenColor,.2));const u=e.calculative.strokeImg;if(e.calculative.strokeImage&&u)t.strokeStyle=s||t.createPattern(u,"repeat");else{let f;e.calculative.strokeType?e.calculative.lineGradientColors?e.name==="line"?l=!0:e.calculative.lineGradient?f=e.calculative.lineGradient:(f=xP(t,e),e.calculative.lineGradient=f):f=RP(t,e):f=e.calculative.color||(e.type?r.data.lineColor:"")||r.styles.color,t.strokeStyle=s||f}const c=e.calculative.backgroundImg;if(e.calculative.backgroundImage&&c)t.fillStyle=a||t.createPattern(c,"repeat"),a=!0;else{let f;e.calculative.bkType===sl.Linear?e.calculative.gradientColors?e.calculative.gradient?f=e.calculative.gradient:(f=pP(t,e),e.calculative.gradient=f):f=hP(t,e):e.calculative.bkType===sl.Radial?e.calculative.gradientColors?e.calculative.radialGradient?f=e.calculative.radialGradient:(f=mP(t,e),e.calculative.radialGradient=f):f=vP(t,e):f=e.calculative.background||r.styles.penBackground,t.fillStyle=a||f,a=!!f}if(j1(t,e),z1(t,e),Ha(t,e),e.calculative.lineDash&&t.setLineDash(e.calculative.lineDash.map(f=>f*e.calculative.canvas.store.data.scale)),e.calculative.lineDashOffset&&(t.lineDashOffset=e.calculative.lineDashOffset),e.calculative.shadowColor&&(t.shadowColor=e.calculative.shadowColor,t.shadowOffsetX=e.calculative.shadowOffsetX,t.shadowOffsetY=e.calculative.shadowOffsetY,t.shadowBlur=e.calculative.shadowBlur),l?(M1(t,e),V1(!0,t,e,r)):(H1(!0,t,e,r,a),Y1(t,e)),!(e.image&&e.calculative.img)&&e.calculative.icon&&F1(t,e),e.dropdownList&&B1(t,e),(!i||!o)&&t.restore(),i&&!o&&za(t,e),!i&&o&&e.calculative.rotate&&e.name!=="line"&&Oo(t,e,!0),L1(t,e),e.type===mn.Line&&e.fillTexts)for(const f of e.fillTexts)D1(t,e,f);t.restore()}function j1(t,e){const n=e.lineCap||(e.type?"round":"square");n?t.lineCap=n:e.type&&(t.lineCap="round")}function z1(t,e){const n=e.lineJoin;n?t.lineJoin=n:e.type&&(t.lineJoin="round")}function Kd(t,e,n,r){var u;t.save(),n&&t.translate(-n.x,-n.y),(u=t.setAttrs)==null||u.call(t,e);let i=!1;const o=e.calculative.canvas.store,a=e.textFlip||o.options.textFlip,l=e.textRotate||o.options.textRotate;t.beginPath(),(!a||!l)&&t.save(),e.calculative.flipX&&(t.translate(e.calculative.worldRect.x+e.calculative.worldRect.ex,0),t.scale(-1,1)),e.calculative.flipY&&(t.translate(0,e.calculative.worldRect.y+e.calculative.worldRect.ey),t.scale(1,-1)),e.calculative.rotate&&e.name!=="line"&&Oo(t,e),(e.calculative.lineWidth>1||r)&&(t.lineWidth=e.calculative.lineWidth);let s;if(e.calculative.hover)t.strokeStyle=e.hoverColor||o.styles.hoverColor,t.fillStyle=e.hoverBackground||o.styles.hoverBackground,s=e.hoverBackground||o.styles.hoverBackground;else if(e.calculative.active)t.strokeStyle=e.activeColor||o.styles.activeColor,t.fillStyle=e.activeBackground||o.styles.activeBackground,s=e.activeBackground||o.styles.activeBackground;else{if(e.strokeImage)e.calculative.strokeImg&&(t.strokeStyle=t.createPattern(e.calculative.strokeImg,"repeat"),s=!0);else{let c;e.calculative.strokeType&&e.calculative.lineGradientColors&&e.name==="line"?i=!0:c=e.calculative.color||o.styles.color,t.strokeStyle=c}e.backgroundImage?e.calculative.backgroundImg&&(t.fillStyle=t.createPattern(e.calculative.backgroundImg,"repeat"),s=!0):(t.fillStyle=e.background,s=!!e.background)}if(j1(t,e),z1(t,e),Ha(t,e),e.calculative.lineDash&&t.setLineDash(e.calculative.lineDash),e.calculative.lineDashOffset&&(t.lineDashOffset=e.calculative.lineDashOffset),e.calculative.shadowColor&&(t.shadowColor=e.calculative.shadowColor,t.shadowOffsetX=e.calculative.shadowOffsetX,t.shadowOffsetY=e.calculative.shadowOffsetY,t.shadowBlur=e.calculative.shadowBlur),i?(M1(t,e),V1(!0,t,e,o)):(H1(!1,t,e,o,s),Y1(t,e)),e.calculative.img?(t.save(),t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,el(t,e),t.restore()):e.calculative.icon&&F1(t,e),e.dropdownList&&B1(t,e),(!a||!l)&&t.restore(),a&&!l&&(e.calculative.flipX&&(t.translate(e.calculative.worldRect.x+e.calculative.worldRect.ex,0),t.scale(-1,1)),e.calculative.flipY&&(t.translate(0,e.calculative.worldRect.y+e.calculative.worldRect.ey),t.scale(1,-1))),!a&&l&&e.calculative.rotate&&e.name!=="line"&&Oo(t,e,!0),L1(t,e),e.type===mn.Line&&e.fillTexts)for(const c of e.fillTexts)D1(t,e,c);t.restore()}function H1(t=!0,e,n,r,i){if(n.name==="drawCommand")return;const o=t?r.path2dMap.get(n):Tt.path2dDraws[n.name];let a=null,l=null;if(n.type===mn.Line&&(n.fromLineCap&&n.fromLineCap!=="butt"&&(e.lineCap="butt",a=new Path2D,a.moveTo(n.calculative.worldAnchors[0].x,n.calculative.worldAnchors[0].y),a.lineTo(n.calculative.worldAnchors[0].x,n.calculative.worldAnchors[0].y)),n.toLineCap&&n.toLineCap!=="butt"&&(e.lineCap="butt",l=new Path2D,l.moveTo(n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].x,n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].y),l.lineTo(n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].x,n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].y))),o){if(n.type===mn.Line&&n.borderWidth){e.save(),e.beginPath();const u=n.calculative.lineWidth+n.calculative.borderWidth;e.lineWidth=u,e.strokeStyle=n.borderColor,a&&(e.save(),e.lineCap=n.fromLineCap,e.stroke(a),e.restore()),o instanceof Path2D?(i&&e.fill(o),u&&e.stroke(o)):(o(n,e),i&&e.fill(),u&&e.stroke()),l&&(e.save(),e.lineCap=n.toLineCap,e.stroke(l),e.restore()),e.restore()}o instanceof Path2D?n.type?n.close&&i&&e.fill(o):i&&e.fill(o):(e.save(),o(n,e),i&&e.fill(),e.restore());const s=n.calculative.progress;if(s!=null){e.save();const{ex:u,x:c,y:f,width:v,height:g,ey:m}=n.calculative.worldRect;let y=null;if(n.calculative.verticalProgress?y=n.reverseProgress?e.createLinearGradient(c,f,c,f+g*s):e.createLinearGradient(c,m,c,f+g*(1-s)):y=n.reverseProgress?e.createLinearGradient(u,f,c+v*(1-s),f):e.createLinearGradient(c,f,c+v*s,f),n.calculative.progressGradientColors){const{colors:p}=Za(n.calculative.progressGradientColors);p.forEach(C=>{y.addColorStop(C.i,C.color)})}else{const p=n.calculative.progressColor||n.calculative.color||r.options.activeColor||r.data.color;y.addColorStop(0,p),y.addColorStop(1,p)}y.addColorStop(1,"transparent"),e.fillStyle=y,o instanceof Path2D?e.fill(o):(o(n,e),e.fill()),e.restore()}if(n.calculative.lineWidth&&(o instanceof Path2D?(r.options.svgPathStroke||n.name!=="svgPath")&&(a&&(e.save(),e.lineCap=n.fromLineCap,e.stroke(a),e.restore()),e.stroke(o),l&&(e.save(),e.lineCap=n.toLineCap,e.stroke(l),e.restore())):(o(n,e),e.stroke())),n.type){if(n.calculative.animatePos){if(e.save(),W1(e,n,r),n.lineAnimateType===Qr.Arrow||n.lineAnimateType===Qr.WaterDrop){let u=rC(n,e);u instanceof Path2D?(e.stroke(u),e.fill(u)):(e.stroke(),e.fill())}else o instanceof Path2D?(a&&!n.lineAnimateType&&(e.save(),e.lineCap=n.fromLineCap,e.stroke(a),e.restore()),e.lineCap=n.lineCap,e.stroke(o)):(o(n,e),e.stroke());e.restore()}n.fromArrow&&_1(e,n,r),n.toArrow&&A1(e,n,r),n.calculative.active&&!n.calculative.pencil&&!r.options.disableAnchor&&!r.data.locked&&U1(e,n)}}}function V1(t=!0,e,n,r){const i=t?r.path2dMap.get(n):Tt.path2dDraws[n.name];if(i&&n.type){if(n.calculative.animatePos){if(e.save(),W1(e,n,r),e.beginPath(),i instanceof Path2D)if(n.lineName==="polyline"||n.lineName==="line")if(n.lineAnimateType===Qr.Arrow||n.lineAnimateType===Qr.WaterDrop){const o=rC(n);e.stroke(o),e.fill(o)}else n.calculative.gradientSmooth||n.calculative.lineSmooth?(n.calculative.gradientAnimatePath||(n.calculative.gradientAnimatePath=Fm(n)),n.calculative.gradientAnimatePath instanceof Path2D&&e.stroke(n.calculative.gradientAnimatePath)):e.stroke(i);else e.stroke(i);else i(n,e),e.stroke();e.restore()}n.fromArrow&&_1(e,n,r),n.toArrow&&A1(e,n,r),n.calculative.active&&!n.calculative.pencil&&!r.options.disableAnchor&&!r.data.locked&&U1(e,n)}}function W1(t,e,n){t.strokeStyle=e.animateColor||n.styles.animateColor,e.animateShadow&&(t.shadowBlur=e.animateShadowBlur||e.animateLineWidth||6,t.shadowColor=e.animateShadowColor||e.animateColor||n.styles.animateColor),e.calculative.animateLineWidth&&(t.lineWidth=e.calculative.animateLineWidth*n.data.scale);let r=0;switch(e.lineAnimateType){case Qr.Beads:e.animateReverse?t.lineDashOffset=e.calculative.animatePos:t.lineDashOffset=e.length-e.calculative.animatePos,r=e.calculative.lineWidth||5,r<5&&(r=5);const i=e.animateLineDash&&e.animateLineDash.map(o=>o*r/5);t.setLineDash(i||[r,r*2]);break;case Qr.Dot:e.animateReverse?t.lineDashOffset=e.calculative.animatePos:t.lineDashOffset=e.length-e.calculative.animatePos,r=e.calculative.animateDotSize||e.calculative.lineWidth*2||6,r<6&&(r=6),r>40&&(r=40),t.lineWidth=(e.calculative.animateLineWidth||r)*n.data.scale,t.setLineDash([.1,e.length]);break;case Qr.Arrow:t.fillStyle=e.animateColor||n.styles.animateColor,t.lineWidth=1;break;case Qr.WaterDrop:t.fillStyle=e.animateColor||n.styles.animateColor,t.lineWidth=1;break;case Qr.Custom:switch(e.lineAnimateTargetType){case qs.Image:if(e.lineAnimateImages??(e.lineAnimateImages=[]),e.lineAnimateImages.length>0){const l=e.lineAnimateImages.map((s,u)=>{const c=Tt.htmlElements[s];if(!c)e.calculative.canvas.__loadImage(s);else return c});nd(t,e,"image",l)}break;case qs.Icon:const o=e.lineAnimateIcon;nd(t,e,"icon",o);break;case qs.Pen:e.lineAnimatePens&&nd(t,e,"pen",e.lineAnimatePens);break;case qs.Element:const a=e.lineAnimateElement;nd(t,e,"element",a)}break;default:e.animateReverse?(t.lineDashOffset=Number.EPSILON,t.setLineDash([0,e.length-e.calculative.animatePos+1,e.calculative.animatePos])):t.setLineDash([e.calculative.animatePos,e.length+.01-e.calculative.animatePos]);break}}function nd(t,e,n,r){let i=null;switch(n){case"image":i=$P(r);break;case"icon":i=_P(r);break;case"pen":let o=e.calculative.canvas.find(r);e.lineAnimateElementCount=o.length,i=TP(o);break;case"element":if(i=Tt.lineAnimateDraws[r],!i)return;break}AP(t,e,i)}function $P(t){return function(e,n,r,i){const o=n.calculative.canvas.store.data.scale,a=n.lineAnimateElementWidth||10,l=n.lineAnimateElementHeight||10,s=t[i%t.length];s&&(e.beginPath(),e.translate(r.x+a/2*o,r.y+l/2*o),e.rotate(r.rotate*Math.PI/180),e.scale(o,o),e.translate(-(a/2*o),-(l/2*o)),e.drawImage(s,0,0,a,l))}}function TP(t){return function(e,n,r,i){const o=t[i%t.length];if(!o)return;const a=n.calculative.canvas.store.data.scale,l=n.calculative.canvas.store.data.origin,s=n.calculative.canvas.parent,u=o.width,c=o.height,f=r.x-u/2,v=r.y-c/2,g=(f-l.x)/a,m=(v-l.y)/a,y=u/a,p=c/a,C={x:g,y:m,width:y,height:p,rotate:r.rotate};s.setValue({id:o.id,...C})}}function _P(t){return function(e,n,r,i){const o=n.calculative.canvas.store.data.scale,a=n.lineAnimateElementWidth||10,l=n.lineAnimateElementHeight||10;e.beginPath(),e.translate(r.x+a/2*o,r.y+l/2*o),e.rotate(r.rotate*Math.PI/180),e.scale(o,o),e.translate(-(a/2*o),-(l/2*o));const s=n.calculative.iconWeight;let u;const c=n.calculative.iconFamily;u=n.calculative.iconSize||Math.max(n.lineAnimateElementWidth||0,n.lineAnimateElementHeight||0)||10,e.font=Ka({fontSize:u,fontWeight:s,fontFamily:c}),e.fillStyle=n.calculative.iconColor||ll(n,n.calculative.canvas.parent.store),n.calculative.iconRotate&&e.rotate(n.calculative.iconRotate*Math.PI/180),e.beginPath(),e.fillText(t,0,0)}}function AP(t,e,n){var l;const r=Array.isArray(e.lineAnimateDash)?e.lineAnimateDash:((l=e.lineAnimateDash)==null?void 0:l.split(",").map(s=>Number(s)))||[10,20],i=e.calculative.canvas.store.data.scale,o=Yd(e)/i;OP(o,r,e.lineAnimateDashOffset,e.lineAnimateElementCount).forEach((s,u)=>{const c=MP(e,s.start);if(c)try{t.save(),n(t,e,c,u),t.restore()}catch(f){t.restore(),console.warn(f)}})}function OP(t,e,n=0,r,i=0){const o=[];if(!e||e.length===0)return o.push({start:0,end:t,isDash:!0}),o;const a=e.reduce((c,f)=>c+f,0);let l=(-n+i)%a;l<0&&(l+=a);let s=0,u=0;for(r||(r=1/0);u<t&&s<r;)for(let c=0;c<e.length;c++){const f=e[c],v=c%2===0;let g=u,m=u+f-l;if(m>t&&(m=t),v&&m>g){const y=(g+i)%t,p=(m+i)%t;o.push({start:y,end:p,isDash:!0}),s+=1}if(u=m,l=0,u>=t||s>=r)break}return o}function MP(t,e=0){let n,r=null;if(t.calculative.worldAnchors.forEach(a=>{r&&(n=Ib(n,r,r.next,a.prev,a)),r=a}),t.close){let a=t.calculative.worldAnchors[0];n=Ib(n,r,r.next,a.prev,a)}let i=0;return t.animateReverse?i=t.length-t.calculative.animatePos-e*t.calculative.canvas.store.data.scale:i=t.calculative.animatePos-e*t.calculative.canvas.store.data.scale,Vk(n,i)}function U1(t,e){const n=e.calculative.canvas.store;t.save(),t.lineWidth=1,t.fillStyle=e.activeColor||n.styles.activeColor,e.calculative.worldAnchors.forEach(r=>{!r.hidden&&!r.isTemp&&NP(t,r,e)}),t.restore()}function NP(t,e,n){if(!e)return;const r=n.calculative.canvas.store.activeAnchor===n.calculative.activeAnchor&&n.calculative.activeAnchor===e;let i=3;n.calculative.lineWidth>3&&(i=n.calculative.lineWidth),n.anchorRadius&&(i=n.anchorRadius),e.radius&&(i=e.radius),r?(e.prev&&(t.save(),t.strokeStyle="#4dffff",t.beginPath(),t.moveTo(e.prev.x,e.prev.y),t.lineTo(e.x,e.y),t.stroke(),t.restore(),t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.prev.x,e.prev.y,i,0,Math.PI*2),t.fill(),t.stroke(),t.restore()),e.next&&(t.save(),t.strokeStyle="#4dffff",t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.next.x,e.next.y),t.stroke(),t.restore(),t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.next.x,e.next.y,i,0,Math.PI*2),t.fill(),t.stroke(),t.restore(),t.beginPath(),t.arc(e.x,e.y,i,0,Math.PI*2),t.fill(),t.stroke()),t.beginPath(),t.arc(e.x,e.y,i,0,Math.PI*2),t.fill(),t.stroke()):(t.save(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.x,e.y,i,0,Math.PI*2),t.fill(),t.stroke(),t.restore())}function q1(t){const e=t.calculative.canvas.store;let n={x:t.x,y:t.y};if(!t.parentId||t.parentId&&!e.pens[t.parentId])t.parentId=void 0,n.width=t.width,n.height=t.height,n.rotate=t.rotate,hr(n),Dn(n),t.pivot&&xg(n,t.pivot);else{const r=e.pens[t.parentId];let i=r.calculative.worldRect;i||(i=q1(r)),n.x=i.x+i.width*t.x,n.y=i.y+i.height*t.y,n.width=i.width*t.width,n.height=i.height*t.height,r.flipX&&(n.x=i.width-(n.x-i.x+n.width)+i.x),r.flipY&&(n.y=i.height-(n.y-i.y+n.height)+i.y),hr(n),n.rotate=i.rotate+t.rotate,Dn(n),t.pivot&&xg(n,t.pivot)}return t.calculative.worldRect=n,Bm(t,n),n}function Bm(t,e){!t.paddingTop&&(t.calculative.paddingTop=0),!t.paddingBottom&&(t.calculative.paddingBottom=0),!t.paddingLeft&&(t.calculative.paddingLeft=0),!t.paddingRight&&(t.calculative.paddingRight=0),Math.abs(t.calculative.paddingTop)<1&&(t.calculative.paddingTop*=e.height),Math.abs(t.calculative.paddingBottom)<1&&(t.calculative.paddingBottom*=e.height),Math.abs(t.calculative.paddingLeft)<1&&(t.calculative.paddingLeft*=e.width),Math.abs(t.calculative.paddingRight)<1&&(t.calculative.paddingRight*=e.width)}function Id(t){const e=Pe(t.calculative.worldRect);if(delete e.pivot,!t.parentId){Object.assign(t,e);return}const r=t.calculative.canvas.store.pens[t.parentId].calculative.worldRect;Object.assign(t,oa(e,r))}function tl(t){const e=t.calculative.canvas.store;let n=[];if(t.anchors){let r=Pe(t.anchors);t.flipX&&r.forEach(i=>{i.x=.5-(i.x-.5)}),t.flipY&&r.forEach(i=>{i.y=.5-(i.y-.5)}),r.forEach(i=>{n.push(LP(t,i))})}if(!n.length&&!t.type&&!t.calculative.canvas.parent.isCombine(t)){const{x:r,y:i,width:o,height:a}=t.calculative.worldRect;n=e.options.defaultAnchors.map((l,s)=>({id:`${s}`,penId:t.id,x:r+o*l.x,y:i+a*l.y}))}t.calculative.rotate&&t.name!=="line"&&n.forEach(r=>{_n(r,t.calculative.rotate,t.calculative.worldRect.pivot||t.calculative.worldRect.center)}),(!t.type||t.anchors)&&(t.calculative.worldAnchors=n),t.calculative.activeAnchor&&n.length&&(t.calculative.activeAnchor=n.find(r=>{r.id,t.calculative.activeAnchor.id})),t.calculative.gradientAnimatePath=void 0}function K1(t){var e;if((e=t.children)!=null&&e.length){let n=t.calculative.worldRect;t.children.forEach(r=>{const i=t.calculative.canvas.store.pens[r];i.calculative.initRect&&i.calculative.initRelativeRect&&(i.calculative.initRect.x=n.x+n.width*i.calculative.initRelativeRect.x,i.calculative.initRect.y=n.y+n.height*i.calculative.initRelativeRect.y,i.calculative.initRect.ex=i.calculative.initRect.x+n.width*i.calculative.initRelativeRect.width,i.calculative.initRect.ey=i.calculative.initRect.y+n.height+i.calculative.initRelativeRect.height,Dn(i.calculative.initRect)),K1(i)})}}function LP(t,e){const n={...e},{x:r,y:i,width:o,height:a}=t.calculative.worldRect;return n.x=r+o*e.x,n.y=i+a*e.y,e.prev&&(n.prev={penId:t.id,connectTo:e.prev.connectTo,x:r+o*e.prev.x,y:i+a*e.prev.y}),e.next&&(n.next={penId:t.id,connectTo:e.next.connectTo,x:r+o*e.next.x,y:i+a*e.next.y}),n}function cb(t,e){const{paddingTop:n,paddingBottom:r,paddingLeft:i,paddingRight:o}=e.calculative;let a=i,l=n,s=e.calculative.worldRect.width-i-o,u=e.calculative.worldRect.height-n-r,c=e.calculative.iconLeft,f=e.calculative.iconTop;c&&Math.abs(c)<1&&(c=e.calculative.worldRect.width*c),f&&Math.abs(f)<1&&(f=e.calculative.worldRect.height*f),a+=c||0,l+=f||0,s-=c||0,u-=f||0;let v=e.calculative.iconRotate||0;if(e.parentId){const g=t[e.parentId].calculative;g&&(v+=g.rotate,v%=360)}a=e.calculative.worldRect.x+a,l=e.calculative.worldRect.y+l,e.calculative.worldIconRect={x:a,y:l,width:s,height:u,rotate:v},hr(e.calculative.worldIconRect),Dn(e.calculative.worldIconRect)}function Os(t,e,n){Sc(t.calculative.worldRect,e,n,t.pivot),t.calculative.initRect&&Sc(t.calculative.initRect,e,n,t.pivot),G1(t,e,n),t.calculative.x&&Wd(t.calculative,e,n),t.type&&tl(t)}function G1(t,e,n){var r;t&&(r=t.children)!=null&&r.length&&t.children.forEach(i=>{const o=t.calculative.canvas.store.pens[i];o&&(o.calculative.initRect&&Sc(o.calculative.initRect,e,n),G1(o,e,n))})}function DP(t,e){t.anchors||(t.anchors=[]),t.calculative.worldAnchors||(t.calculative.worldAnchors=[]);const n={id:e.id,penId:t.id,x:e.x,y:e.y};if(t.calculative.worldAnchors.push(n),t.calculative.worldRect){t.rotate%360&&_n(e,-t.rotate,t.calculative.worldRect.center);const r={id:e.id,penId:t.id,x:(e.x-t.calculative.worldRect.x)/t.calculative.worldRect.width,y:(e.y-t.calculative.worldRect.y)/t.calculative.worldRect.height};t.anchors.push(r)}return n}function FP(t,e,n){t.anchors||(t.anchors=[]),t.calculative.worldAnchors||(t.calculative.worldAnchors=[]);const r=Lk(t,e,n);return t.calculative.worldAnchors.splice(n+1,0,r),t.anchors.splice(n+1,0,pc(r,t.calculative.worldRect)),t.calculative.activeAnchor=r,r}function BP(t,e){if(!t||!t.calculative.worldAnchors)return;let n=t.calculative.worldAnchors.findIndex(r=>r.id===e.id);n>-1&&t.calculative.worldAnchors.splice(n,1),n=t.anchors.findIndex(r=>r.id===e.id),n>-1&&t.anchors.splice(n,1)}function cl(t,e){if(!e||!e.calculative||!e.calculative.worldRect.center)return Ut.None;if(t.anchorId){let n=e.anchors.filter(r=>r.id===t.anchorId);if(n.length&&n[0].direction>-1)return n[0].direction}return qI(t,e.calculative.worldRect.center)}function Xs(t,e){let n=1/0,r;return t.calculative.worldAnchors.forEach(i=>{const o=mf(e,i);n>o&&(n=o,r=i)}),r}function ub(t,e,n){t.x+=e,t.y+=n,t.anchors&&t.anchors.forEach(r=>{mc(r,e,n)}),t.calculative.worldAnchors&&t.calculative.worldAnchors.forEach(r=>{mc(r,e,n)})}function jm(t){if(t&&t.calculative&&t.calculative.worldAnchors.length){let e=gn(t);if(!t.anchors||!t.anchors.length)for(;t.calculative.worldAnchors.length&&e!==t.calculative.activeAnchor;)t.calculative.worldAnchors.pop(),e=gn(t);else e===t.calculative.activeAnchor?t.calculative.worldAnchors=[t.calculative.worldAnchors[0]]:t.calculative.worldAnchors[0]===t.calculative.activeAnchor&&(t.calculative.worldAnchors=[t.calculative.worldAnchors[t.calculative.worldAnchors.length-1]])}}function xr(t,e,n,r){var l,s,u,c,f,v;if(!t||!e||!n||!r||e.twoWay===Pr.DisableConnected||e.twoWay===Pr.Disable||r.twoWay===Pr.DisableConnectTo||r.twoWay===Pr.Disable)return;if(e.twoWay===Pr.In){if(n.calculative.worldAnchors.length===1)return;const g=gn(n);if(r.id!==g.id)return}if(e.twoWay===Pr.Out){const g=Gn(n);if(r.id!==g.id)return}if(r.connectTo===t.id&&r.anchorId===e.id)return;if(r.connectTo){const g=t.calculative.canvas.store.pens[r.connectTo];Ys(g,_a(g,r.anchorId),n,r)}t.connectedLines||(t.connectedLines=[]),t.connectedLines.findIndex(g=>g.lineId===n.id&&g.lineAnchor===r.id&&g.anchor===e.id)<0&&t.connectedLines.push({lineId:n.id,lineAnchor:r.id,anchor:e.id}),r.connectTo=t.id,r.anchorId=e.id,t.type&&xr(n,r,t,e),t.calculative.canvas.store.emitter.emit("connectLine",{line:n,lineAnchor:r,pen:t,anchor:e});let o=((l=n.calculative.worldAnchors)==null?void 0:l.length)>=2?(s=n.calculative.worldAnchors)==null?void 0:s[0].connectTo:void 0,a=((u=n.calculative.worldAnchors)==null?void 0:u.length)>=2?(f=n.calculative.canvas.store.pens[(c=n.calculative.worldAnchors)==null?void 0:c[0].connectTo])==null?void 0:f.anchors.find(g=>{var m;return g.id===((m=n.calculative.worldAnchors)==null?void 0:m[0].anchorId)}):void 0;return(v=t.onConnectLine)==null||v.call(t,t,{line:n,lineAnchor:r,pen:t,anchor:e,fromPen:o,fromAnchor:a}),!0}function Ys(t,e,n,r){if(!(!t||!e||!n||!r)&&!(!t.connectedLines||!t.connectedLines.length))return n.lastConnected||(n.lastConnected={}),n.lastConnected[t.id]||(n.lastConnected[t.id]=Pe(t.connectedLines)),t.connectedLines.forEach((i,o,a)=>{(i.lineId===n.id||i.lineId===n.id)&&i.lineAnchor===r.id&&i.anchor===e.id&&a.splice(o,1)}),r.connectTo=void 0,r.anchorId=void 0,t.type&&e.connectTo===n.id&&e.anchorId===r.id&&Ys(n,r,t,e),t.calculative.canvas.store.emitter.emit("disconnectLine",{line:n,lineAnchor:r,pen:t,anchor:e}),!0}function _a(t,e){var n;if(!(!t||!e))return(n=t.calculative.worldAnchors)==null?void 0:n.find(r=>r.id===e)}function Gn(t){if(!(!t||!t.calculative.worldAnchors))return t.calculative.worldAnchors[0]}function gn(t){if(!(!t||!t.calculative.worldAnchors))return t.calculative.worldAnchors[t.calculative.worldAnchors.length-1]}function jP(t,e){var r,i;if(t.calculative.start===0||!t.frames||!t.frames.length)return t.calculative.start=void 0,0;if(!t.calculative.duration){t.calculative.duration=0;for(const o of t.frames){t.calculative.duration+=o.duration;for(const a in o)a!=="duration"&&!t[a]&&a==="scale"&&(t[a]=1)}}if(t.animateCycle||(t.animateCycle=1/0),t.calculative.start){let o=0;const a=Math.ceil((e-t.calculative.start)/t.calculative.duration);if(a>t.animateCycle)return t.currentAnimation=void 0,t.calculative.start=void 0,fb(t,1),0;const l=(e-t.calculative.start)%t.calculative.duration||t.calculative.duration;let s=0;for(const f of t.frames)if(s+=f.duration,l>s)++o;else break;if(!t.frames[o])return!0;let u=!1;o!==t.calculative.frameIndex&&(u=!0,t.calculative.frameIndex=o,t.calculative.frameDuration=t.frames[o].duration,o>0&&(t.calculative.frameStart+=t.frames[o-1].duration),t.calculative.frameEnd=t.calculative.frameStart+t.calculative.frameDuration);let c=!1;if(a>t.calculative.cycleIndex&&(t.calculative.cycleIndex=a,t.calculative.frameStart=t.calculative.start+t.calculative.duration*(a-1),c=!0),u||c)if(t.calculative.x=t.calculative.initRect.x,t.calculative.y=t.calculative.initRect.y,(i=t.children)!=null&&i.length&&!t.parentId?t.calculative.canvas.rotatePen(t,(t.calculative.initRect.rotate||0)-(t.calculative.rotate||0),t.calculative.initRect):t.calculative.rotate=t.calculative.initRect.rotate||0,o>0){t.prevFrame={};const f=t.frames[o-1];for(const v in f)t.prevFrame[v]=f[v];Object.assign(t.prevFrame,{rotate:f.rotate||0,x:f.x||0,y:f.y||0,scale:f.scale||1})}else db(t)}else{if(t.calculative.start=e,t.calculative.frameIndex=0,t.calculative.frameStart=t.calculative.start,t.calculative.frameDuration=t.frames[0].duration,t.calculative.frameEnd=t.calculative.frameStart+t.calculative.frameDuration,t.calculative.cycleIndex=1,t.calculative.x=t.calculative.worldRect.x,t.calculative.y=t.calculative.worldRect.y,t.calculative.initRect=Pe(t.calculative.worldRect),t.parentId&&(t.calculative.initRelativeRect={x:t.x,y:t.y,width:t.width,height:t.height}),(r=t.children)!=null&&r.length){const o=t.calculative.canvas.store;t.calculative.childrenVisible={},t.children.forEach(a=>{t.calculative.childrenVisible[a]=o.pens[a].visible})}t.calculative.initRect.rotate=t.calculative.rotate||0,db(t)}const n=(e-t.calculative.frameStart)/t.calculative.frameDuration%1;return n>0&&fb(t,n),!0}function db(t){t.prevFrame={};for(const e in t)(typeof t[e]!="object"||e==="lineDash")&&(t.prevFrame[e]=t[e]);t.prevFrame.rotate=0,t.prevFrame.x=0,t.prevFrame.y=0,t.prevFrame.scale=1}function fb(t,e){var i,o,a,l,s,u;if(e<0)return;e>1&&(e=1);const n=t.frames[t.calculative.frameIndex],r=t.calculative.canvas.store.data.scale;for(const c in n)if(c!=="duration"){if(c==="scale"){t.calculative.worldRect=Pe(t.calculative.initRect),Sc(t.calculative.worldRect,t.prevFrame.scale,t.calculative.worldRect.center);const f=t.prevFrame.scale+(n[c]-t.prevFrame.scale)*e;Sc(t.calculative.worldRect,f/t.prevFrame.scale,t.calculative.worldRect.center),t.calculative.patchFlags=!0}else if(c==="x"){const f=Zl(t,c,t.calculative.frameIndex)*r;t.calculative.worldRect.x=t.calculative.initRect.x+f,t.calculative.worldRect.ex=t.calculative.initRect.ex+f,t.calculative.worldRect.center.x=t.calculative.initRect.center.x+f,(i=t.calculative.worldRect.pivot)!=null&&i.x&&(t.calculative.worldRect.pivot.x=((o=t.calculative.initRect.pivot)==null?void 0:o.x)+f),La(t.calculative.worldRect,n[c]*e*r,0),t.calculative.patchFlags=!0}else if(c==="y"){const f=Zl(t,c,t.calculative.frameIndex)*r;t.calculative.worldRect.y=t.calculative.initRect.y+f,t.calculative.worldRect.ey=t.calculative.initRect.ey+f,t.calculative.worldRect.center.y=t.calculative.initRect.center.y+f,(a=t.calculative.worldRect.pivot)!=null&&a.x&&(t.calculative.worldRect.pivot.y=((l=t.calculative.initRect.pivot)==null?void 0:l.y)+f),La(t.calculative.worldRect,0,n[c]*e*r),t.calculative.patchFlags=!0}else if(c==="width"){const f=Zl(t,c,t.calculative.frameIndex)*r;t.calculative.worldRect.width=t.calculative.initRect.width+f,t.calculative.worldRect.ex=t.calculative.initRect.ex+f,t.calculative.worldRect.center.x=t.calculative.initRect.center.x+f;let v=n[c]*e*r;t.calculative.worldRect.width+=v,t.calculative.worldRect.ex+=v,t.calculative.worldRect.center.x+=v,t.calculative.patchFlags=!0}else if(c==="height"){const f=Zl(t,c,t.calculative.frameIndex)*r;t.calculative.worldRect.height=t.calculative.initRect.height+f,t.calculative.worldRect.ey=t.calculative.initRect.ey+f,t.calculative.worldRect.center.y=t.calculative.initRect.center.y+f;let v=n[c]*e*r;t.calculative.worldRect.height+=v,t.calculative.worldRect.ey+=v,t.calculative.worldRect.center.y+=v,t.calculative.patchFlags=!0}else if(c==="rotate"){t.prevFrame[c]>=360&&(t.prevFrame[c]%=360);const f=Zl(t,c,t.calculative.frameIndex),v=(t.calculative.initRect.rotate+f+n[c]*e)%360-(t.calculative.rotate||0);(s=t.children)!=null&&s.length?t.calculative.canvas.rotatePen(t,v,t.calculative.initRect):t.calculative.rotate=(t.calculative.initRect.rotate+f+n[c]*e)%360,t.calculative.patchFlags=!0}else if(c==="image")t.image=n.image,t.calculative.image=void 0,t.calculative.canvas.loadImage(t),t.canvasLayer===on.CanvasImageBottom?t.calculative.canvas.canvasImageBottom.init():t.canvasLayer===on.CanvasImage&&t.calculative.canvas.canvasImage.init();else if(zP(n[c],c,t)){t.prevFrame[c]==null&&(c==="globalAlpha"?t.prevFrame[c]=1:t.prevFrame[c]=0);const f=t.prevFrame[c]+(n[c]-t.prevFrame[c])*e;t.calculative[c]=Math.round(f*100)/100}else{if(c==="visible"&&!t.calculative.image){if((u=t.children)!=null&&u.length){const v=fi(t,t.calculative.canvas.store);t.calculative.canvas.initImageCanvas(v)}}t.calculative[c]=n[c];const f={};f[c]=n[c],zm(t,f)}c==="text"&&pf(t)}}function zP(t,e,n){const r=["strokeType","bkType","showChild"];return typeof t=="number"&&n.linear!==!1&&!r.includes(e)}function HP(t,e){if(t.calculative.start===0)return t.calculative.start=void 0,t.calculative.cycleStart=void 0,0;t.animateCycle||(t.animateCycle=1/0),t.animateSpan||(t.animateSpan=1);const n=(e-t.calculative.cycleStart)/1e3;if(t.curveAnimate){let r=[];t.animateTimingFunction?r=Array.isArray(t.animateTimingFunction)?t.animateTimingFunction:t.animateTimingFunction.split(","):r=[.25,.25,.75,.75];const i=t.duration||5,o=n/i,a=aP(o,r[1],r[3]);t.calculative.animatePos=a*t.length}else t.calculative.animatePos+=t.animateSpan*(t.calculative.canvas.store.data.scale||1);if(t.calculative.cycleStart||(t.calculative.cycleStart=e),!t.calculative.start)t.calculative.start=Date.now(),t.calculative.animatePos=t.animateSpan*(t.calculative.canvas.store.data.scale||1),t.calculative.cycleIndex=1;else if(t.calculative.animatePos>t.length||t.curveAnimate&&n>t.duration){if(++t.calculative.cycleIndex,t.calculative.cycleIndex>t.animateCycle)return t.currentAnimation=void 0,t.calculative.start=void 0,t.calculative.cycleStart=void 0,0;t.calculative.cycleStart=void 0,t.calculative.animatePos=t.animateSpan}return!0}function Us(t,e=!0){if(!t.children||t.childActive===!1)return;const n=t.calculative.canvas.store;t.children.forEach(r=>{const i=n.pens[r];i&&(i.calculative.active=e,Us(i,e))})}function lc(t,e=!0){if(!t)return;const n=t.calculative.canvas.store;t.calculative.hover=e,t.childHover!==!1&&t.children&&t.children.forEach(r=>{var i,o;((i=n.pens[r])==null?void 0:i.hoverColor)==null&&((o=n.pens[r])==null?void 0:o.hoverBackground)==null&&lc(n.pens[r],e)})}function mi(t,e){if(!e)return;const n=t.calculative.canvas.store,r=t.calculative.worldRect;if(e.style.opacity=t.globalAlpha+"",e.style.position="absolute",e.style.outline="none",e.style.left=r.x+n.data.x+"px",e.style.top=r.y+n.data.y+"px",e.style.width=r.width+"px",e.style.height=r.height+"px",e.style.display=t.calculative.inView!=!1?t.calculative.cssDisplay||"inline":"none",!t.calculative.rotate&&(t.calculative.rotate=0),e.style.transform=`rotate(${t.calculative.rotate}deg)`,t.calculative.rotate||(t.calculative.flipX&&(e.style.transform="rotateY(180deg)"),t.calculative.flipY&&(e.style.transform="rotateX(180deg)"),t.calculative.flipX&&t.calculative.flipY&&(e.style.transform="rotateZ(180deg)")),e.style.zIndex=t.calculative.zIndex!==void 0?t.calculative.zIndex+"":"5",t.calculative.zIndex>t.calculative.canvas.maxZindex&&(t.calculative.canvas.maxZindex=t.calculative.zIndex),t.locked===Xt.DisableEdit||t.locked===Xt.DisableMove||n.data.locked?(e.style.userSelect="initial",e.style.pointerEvents="initial",t.name==="gif"&&(e.style.userSelect="none",e.style.pointerEvents="none")):(e.style.userSelect="none",e.style.pointerEvents="none"),t.className&&(e.className=t.className),t.styles)for(let i in t.styles)e.style[i]=t.styles[i]}function Tv(t){return t.every(e=>e.locked)}function hb(t){return t.every(e=>e.disableRotate)}function X1(t,e,n){var r;t.type?(t.calculative.worldAnchors.forEach(i=>{_n(i,e,n.center)}),VP(t),Id(t)):(t.calculative.rotate?t.calculative.rotate+=e:t.calculative.rotate=e,_n(t.calculative.worldRect.center,e,n.center),t.parentId&&(t.calculative.worldRect.x=t.calculative.worldRect.center.x-t.calculative.worldRect.width/2,t.calculative.worldRect.y=t.calculative.worldRect.center.y-t.calculative.worldRect.height/2,t.x=(t.calculative.worldRect.x-n.x)/n.width,t.y=(t.calculative.worldRect.y-n.y)/n.height)),(r=t.children)==null||r.forEach(i=>{const o=t.calculative.canvas.store.pens[i];X1(o,e,n)})}function VP(t){var i;if(!((i=t.calculative.worldAnchors)!=null&&i.length)||!isFinite(t.x)||!isFinite(t.x)||t.x==null||t.y==null)return;const e=Eg(t);t.parentId||Object.assign(t,e);const{fontSize:n,lineHeight:r}=t.calculative.canvas.store.options;t.fontSize?t.fontSize<0&&(t.fontSize=0,t.calculative.fontSize=0):(t.fontSize=n>=0?n:12,t.calculative.fontSize=t.fontSize*t.calculative.canvas.store.data.scale),t.lineHeight||(t.lineHeight=r,t.calculative.lineHeight=t.lineHeight),Dn(e),t.calculative.worldRect=e,Bm(t,e),ca(t),t.calculative.worldAnchors&&(t.anchors=t.calculative.worldAnchors.map(o=>pc(o,t.calculative.worldRect)))}function vb(t){return t.every(e=>e.disableSize||e.pivot)}function Zl(t,e,n){if(!t.frames||!e)return 0;let r=0;for(let i=0;i<n;i++)t.frames[i]&&(r+=t.frames[i][e]||0);return r}function Gd(t,e){var r;let n=t;for(;n&&n.parentId;){const i=n;n=e.pens[n.parentId];const o=(r=n==null?void 0:n.calculative)==null?void 0:r.showChild;if(o!=null&&n.children[o]!==i.id)return!1}return!0}function To(t,e=!1){var i,o,a;const{store:n,canvasRect:r}=t.calculative.canvas;if(e&&((i=t.children)==null||i.forEach(l=>{const s=n.pens[l];s&&To(s,!0)})),t.calculative.inView=!0,Gd(t,n)?(t.visible==!1||t.calculative.visible==!1)&&(t.calculative.inView=!1,(t.canvasLayer===on.CanvasImageBottom||t.canvasLayer===on.CanvasImage)&&((o=t.frames)!=null&&o.length)&&(t.calculative.inView=t.frames.some(l=>l.hasOwnProperty("visible")))):t.calculative.inView=!1,t.calculative.inView){const{x:l,y:s,width:u,height:c,rotate:f}=t.calculative.worldRect,v={x:l+n.data.x,y:s+n.data.y,width:u,height:c,rotate:f};hr(v),Ao(v,r)||(t.calculative.inView=!1)}(a=t.calculative.singleton)!=null&&a.div&&mi(t,t.calculative.singleton.div)}function WP(t,e,n){if(e.fillWorldTextRect){t.save(),t.fillStyle="#c3deb7";const{x:r,y:i,width:o,height:a}=n.calculative.worldTextRect;t.fillRect(r,i,o,a),t.restore()}}function Ha(t,e){const n=e.calculative.globalAlpha;typeof n=="number"&&n<1&&!isNaN(n)&&(t.globalAlpha=n)}function Y1(t,e){const n=UP(t,e)||Tt.canvasDraws[e.name];n&&(t.save(),n(t,e),t.restore())}function UP(t,e){const n=e.drawCommand;if(!(!n||e.name==="line"))return(r,i)=>{n.forEach(o=>{try{o.steps=o.steps.flat(1/0),o.steps.reduce((a,l)=>{const s=qP(l,i,a.x,a.y);try{if(s.c){if(s.c.startsWith("_")){const c=s.c.split("_")[1];return typeof s.v.value=="number"&&(s.v.value*=i.calculative.canvas.store.data.scale),(s.p||r)[c]=s.v.value,{x:a.x,y:a.y}}let u=[];for(const c in s.v)u.push(s.v[c]);return(s.p||r)[s.c](...u),{x:s.startX||s.v.x,y:s.startY||s.v.y}}return{x:a.x,y:a.y}}catch{}},{})}catch{}}),r.stroke()}}function qP(t,e,n,r){var o;const i={visio:XP,dxf:KP,canvas:GP};return((o=i[e.parseType])==null?void 0:o.call(i,t,e,n,r))||t}function KP(t,e,n,r){const{x:i,y:o,width:a,height:l}=e.calculative.worldRect,{originWidth:s,originHeight:u}=e.dxfOrigin;switch(t.c){case"beginPath":return{c:"beginPath",v:{}};case"closePath":return{c:"closePath",v:{}};case"moveTo":return{c:"moveTo",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o}};case"lineTo":return{c:"lineTo",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o}};case"arc":return{c:"ellipse",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o,rx:t.v.xr*(a/s),ry:t.v.yr*(l/u),rotation:t.v.rotation||0,startAngle:t.v.startAngle,endAngle:t.v.endAngle,a:t.v.aclockwise??!0}};case"ellipse":return{c:"ellipse",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o,rx:t.v.xr*(a/s),ry:t.v.yr*(l/u),rotation:t.v.rotation||0,startAngle:t.v.startAngle,endAngle:t.v.endAngle,a:t.v.aclockwise??!0}};case"_font":return{c:"_font",v:{value:t.v.fontSize*e.calculative.canvas.store.data.scale+"px "+(t.v.fontFamily||e.calculative.canvas.store.options.fontFamily)}};case"_fillStyle":return{c:"_fillStyle",v:{value:e.color||t.v.value}};default:const c={c:t.c,v:{...t.v}};return c.v.x!==void 0&&(c.v.x=t.v.x*(a/s)+i),c.v.y!==void 0&&(c.v.y=t.v.y*(l/u)+o),c}}function GP(t,e,n,r){const{x:i,y:o,width:a,height:l}=e.calculative.worldRect,{originWidth:s,originHeight:u}=e.origin;switch(t.c){case"beginPath":return{c:"beginPath",v:{}};case"closePath":return{c:"closePath",v:{}};case"moveTo":return{c:"moveTo",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o}};case"lineTo":return{c:"lineTo",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o}};case"arc":return{c:"ellipse",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o,rx:t.v.xr*(a/s),ry:t.v.yr*(l/u),rotation:t.v.rotation||0,startAngle:t.v.startAngle,endAngle:t.v.endAngle,a:t.v.aclockwise??!0}};case"ellipse":return{c:"ellipse",v:{x:t.v.x*(a/s)+i,y:t.v.y*(l/u)+o,rx:t.v.xr*(a/s),ry:t.v.yr*(l/u),rotation:t.v.rotation||0,startAngle:t.v.startAngle,endAngle:t.v.endAngle,a:t.v.aclockwise??!0}};case"_font":return{c:"_font",v:{value:t.v.fontSize*e.calculative.canvas.store.data.scale+"px "+(t.v.fontFamily||e.calculative.canvas.store.options.fontFamily)}};default:const c={c:t.c,v:{...t.v}};return c.v.x!==void 0&&(c.v.x=t.v.x*(a/s)+i),c.v.y!==void 0&&(c.v.y=t.v.y*(l/u)+o),c}}function XP(t,e,n,r){const{x:i,y:o,width:a,height:l}=e.calculative.worldRect,{width:s,height:u}=e.origin;switch(t.c){case"MoveTo":return{c:"moveTo",v:{x:+t.v.X*100*(a/s)+i,y:+t.v.Y*100*(l/u)+o}};case"RelMoveTo":return{c:"moveTo",v:{x:+t.v.X*s*(a/s)+i,y:+t.v.Y*u*(l/u)+o}};case"LineTo":return{c:"lineTo",v:{x:+t.v.X*100*(a/s)+i,y:+t.v.Y*100*(l/u)+o}};case"RelLineTo":return{c:"lineTo",v:{x:+t.v.X*s*(a/s)+i,y:+t.v.Y*u*(l/u)+o}};case"Ellipse":let c=t.v.X,f=t.v.Y,v=Math.abs(t.v.A-t.v.C),g=Math.abs(t.v.B-t.v.D);return{c:"ellipse",v:{x:c*100*(a/s)+i,y:f*100*(l/u)+o,radiuX:v*100*(a/s),radiuY:g*100*(l/u),rotation:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!0}};case"EllipticalArcTo":const m=t.v.X*100*(a/s)+i,y=t.v.Y*100*(l/u)+o,p=t.v.A*100*(a/s)+i,C=t.v.B*100*(l/u)+o;t.v.C;const x=t.v.D*(a/l)*(u/s),S=(m-n)*(C-r)-(y-r)*(p-n)>0,E=gb(n,r,m,y,p,C,x);return!t.orign&&(t.orign={}),!t.orign.startA&&(t.orign.startA=rd(E.x0,E.y0,n,r)),!t.orign.endA&&(t.orign.endA=rd(E.x0,E.y0,m,y)),{c:"ellipse",v:{centerX:E.x0,centerY:E.y0,radiuX:E.a,radiuY:E.b,rotation:0,startAngle:t.orign.startA,endAngle:t.orign.endA,anticlockwise:S},startX:m,startY:y};case"RelEllipticalArcTo":const P=t.v.X*s*(a/s)+i,$=t.v.Y*u*(l/u)+o,_=t.v.A*s*(a/s)+i,M=t.v.B*u*(l/u)+o;t.v.C;const B=t.v.D*(a/l)*(u/s),H=(P-n)*(M-r)-($-r)*(_-n)>0,k=gb(n,r,P,$,_,M,B);return!t.orign&&(t.orign={}),!t.orign.startA&&(t.orign.startA=rd(k.x0,k.y0,n,r)),!t.orign.endA&&(t.orign.endA=rd(k.x0,k.y0,P,$)),{c:"ellipse",v:{centerX:k.x0,centerY:k.y0,radiuX:k.a,radiuY:k.b,rotation:0,startAngle:t.orign.startA,endAngle:t.orign.endA,anticlockwise:H},startX:P,startY:$};case"ArcTo":let T=t.v.X*100*a/s+i,O=t.v.Y*100*l/u+o,L=t.v.A*100*(a/l)*(u/s),K=(n+T)/2,q=(r+O)/2,J=Math.sqrt((T-n)**2+(O-r)**2),V=J**2/(8*L)+L/2,z=-(O-r)/J,D=(T-n)/J,U=K+z*V,W=q+D*V,X=U,Y=W,Q=Math.atan2(r-Y,n-X),ne=Math.atan2(O-Y,T-X);return{c:"arc",v:{x:X,y:Y,radius:V,startAngle:Q,endAngle:ne,aclockwise:!0}};default:const ie=Pe(t);return Object.entries(ie.v).forEach(([re,I])=>{var A,F;(A=re.endsWith)!=null&&A.call(re,"_x")?typeof I=="number"&&(ie.v[re]=I*(a/s)+i):(F=re.endsWith)!=null&&F.call(re,"_y")?typeof I=="number"&&(ie.v[re]=I*(l/u)+o):typeof I=="number"&&(ie.v[re]=I)}),ie}}function YP(t,e){t.filter=e.filter}function zm(t,e){for(const n in e)P1.includes(n)&&(n=="fontSize"&&e[n]<0&&(e[n]=0),t[n]=e[n],["fontSize","lineWidth"].includes(n)?(t.calculative[n]=e[n]*t.calculative.canvas.store.data.scale,ca(t)):t.calculative[n]=e[n]),t.image&&t.name!=="gif"&&R1.includes(n)&&(t.calculative.canvas.store.patchFlagsTop=!0,t.calculative.canvas.store.patchFlagsBackground=!0,t.calculative.imageDrawed=!1);if(t.calculative.canvas.parent.isCombine(t)){const n=t.children;n==null||n.forEach(r=>{let i=Pe(e);t.calculative.childrenVisible&&t.calculative.childrenVisible[r]===!1&&delete i.visible;const o=t.calculative.canvas.store.pens[r];o&&zm(o,i)})}}function gb(t,e,n,r,i,o,a){let l=(t-n)*(t+n)*(r-o)-(n-i)*(n+i)*(e-r)+a*a*(e-r)*(r-o)*(e-o),s=2*((t-n)*(r-o)-(n-i)*(e-r)),u=l/s,c=(t-n)*(n-i)*(t-i)+a*a*((n-i)*(e-r)*(e+r)-(t-n)*(r-o)*(r+o)),f=2*a*a*((n-i)*(e-r)-(t-n)*(r-o)),v=c/f,g=Math.sqrt(Math.pow(t-u,2)+Math.pow(a*(e-v),2)),m=g/a;return{x0:u,y0:v,a:g,b:m}}function rd(t,e,n,r){let i=n-t,o=r-e,a=Math.atan2(o,i);return a<0&&(a+=2*Math.PI),a}function mb(t,e,n){let r,i,o=1/0,a=1/0;const l=8;for(const s of t.data.pens){if(s.calculative.inView===!1)continue;Hm(s).forEach(c=>{if(c===e||c===n)return;let f=(s.calculative.worldRect.center.x-e.x)*(s.calculative.worldRect.center.x-e.x)+(s.calculative.worldRect.center.y-e.y)*(s.calculative.worldRect.center.y-e.y);const v=Math.abs(c.x-e.x);v>0&&v<l&&f<o&&(r={x:Math.round(c.x)+.5,y:Math.round(c.y)+.5,prev:{x:Math.round(e.x)+.5,y:Math.round(e.y)+.5},step:c.x-e.x},o=f);const g=Math.abs(c.y-e.y);g>0&&g<l&&f<a&&(i={x:Math.round(c.x)+.5,y:Math.round(c.y)+.5,prev:{x:Math.round(e.x)+.5,y:Math.round(e.y)+.5},step:c.y-e.y},a=f)})}return{xDock:r,yDock:i}}function QP(t,e,n,r){let i=[];return n.length===1?(i=Pe(Hm(n[0])),i.forEach(o=>{o.x+=r.x,o.y+=r.y})):(Dn(e),i=[e.center,...Mo(e)]),Q1(t,i,e,!0)}function Hm(t){if(t.type){if(t.type===mn.Line)return t.calculative.worldAnchors}else{const e=Mo(t.calculative.worldRect);return Dn(t.calculative.worldRect),[...t.calculative.worldAnchors,...e,t.calculative.worldRect.center]}}function JP(t,e,n,r){const i=Mo(e);return Q1(t,i,e)}function Q1(t,e,n,r=!1){let i,o,a=1/0,l=1/0;const s=10,u=ik(n,s);return t.data.pens.forEach(c=>{const{inView:f,worldRect:v,active:g}=c.calculative;if(f===!1||!r&&g||rk(u,v)||c.type&&t.active.some(y=>J1(t,y,c)))return;const m=Hm(c);if(m)for(const y of m)for(const p of e){const C=y.x-p.x,x=y.y-p.y,S=Math.abs(C),E=Math.abs(x);n.center||(n.center={x:n.x+n.width/2,y:n.y+n.height/2}),S<s&&S<a&&(i={x:Math.round(y.x)+.5,y:Math.round(y.y)+.5,step:C,prev:{x:Math.round(p.x)+.5,y:Math.round(p.y)+.5},penId:c.id,anchorId:p.id,dockAnchorId:y.id},a=S),E<s&&E<l&&(o={x:Math.round(y.x)+.5,y:Math.round(y.y)+.5,step:x,prev:{x:Math.round(p.x)+.5,y:Math.round(p.y)+.5},penId:c.id,anchorId:p.id,dockAnchorId:y.id},l=E)}}),{xDock:i,yDock:o}}function J1(t,e,n){if(!n.type)return!1;if(Array.isArray(e==null?void 0:e.connectedLines)){for(const r of e==null?void 0:e.connectedLines)if(r.lineId===n.id)return!0}if(Array.isArray(e==null?void 0:e.children))for(const r of e.children){const i=t.pens[r];if(J1(t,i,n))return!0}return!1}function wg(t,e){return t.toFixed(12)==e}function pb(t){if(t.id=Wt(),Array.isArray(t.anchors))for(const e of t.anchors)t.type&&(e.id=Wt()),e.penId=t.id,e.prev&&(t.type&&(e.prev.id=Wt()),e.prev.penId=t.id),e.next&&(t.type&&(e.next.id=Wt()),e.next.penId=t.id)}function ZP(){let t=null,e=new Map;return(n,r,i,o=!1)=>{if(e.has(n)&&e.get(n)?t=e.get(n):e.set(n,t=new Map),typeof i!="function")return()=>{console.warn("[rewritePenLifeCycle] warn: not a function ")};let a=new Set,l=new Map;t.has(r)&&t.get(r)?a=t.get(r):(l.set(r,n[r]),t.set(r,a)),o?a.delete(i):a.add(i);let s=l.get(r),u=(...c)=>{s==null||s(...c),a.forEach(f=>{f(...c)})};n[r]=u}}let ek=ZP();function tk(t){return!t.name&&!t.install?(console.error("installPenPlugin Error: Validation Failed"),!1):!0}function Io(t,e){if(!e)return;if(e.ex==null&&hr(e),!e.rotate||e.rotate%360===0)return t.x>e.x&&t.x<e.ex&&t.y>e.y&&t.y<e.ey;e.center||Dn(e);const n=[{x:e.x,y:e.y},{x:e.ex,y:e.y},{x:e.ex,y:e.ey},{x:e.x,y:e.ey}];return n.forEach(r=>{_n(r,e.rotate,e.pivot||e.center)}),nk(t,n)}function Va(t,e,n=0){const{x:r,y:i,ex:o,ey:a}=e;return t.x>=r-n&&t.x<=o+n&&t.y>=i-n&&t.y<=a+n}function Dn(t){t.center||(t.center={}),t.center.x=t.x+t.width/2,t.center.y=t.y+t.height/2}function hr(t){t.ex=t.x+t.width,t.ey=t.y+t.height}function xg(t,e){t.pivot||(t.pivot={}),t.pivot.x=t.x+t.width*e.x,t.pivot.y=t.y+t.height*e.y}function nk(t,e){if(e.length<3)return!1;let n=!1,r=e[e.length-1];for(const i of e)r.y>t.y!=i.y>t.y&&i.x+(t.y-i.y)*(r.x-i.x)/(r.y-i.y)>t.x&&(n=!n),r=i;return n}function Wi(t){const e=[];t.forEach(r=>{if(r.isRuleLine)return;const i=r.calculative.worldRect;if(i){const o=Mo(i);e.push(...o)}});const n=jc(e);return Dn(n),n}function Mo(t){const e=[{x:t.x,y:t.y},{x:t.ex,y:t.y},{x:t.ex,y:t.ey},{x:t.x,y:t.ey}];return t.rotate&&(t.center||Dn(t),e.forEach(n=>{_n(n,t.rotate,t.pivot||t.center)})),e}function jc(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;return t==null||t.forEach(o=>{!isFinite(o.x)||!isFinite(o.y)||(e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y))}),{x:e,y:n,ex:r,ey:i,width:r-e,height:i-n}}function Ao(t,e,n){return t.rotate&&(t=jc(Mo(t))),n?t.x>e.x&&t.ex<e.ex&&t.y>e.y&&t.ey<e.ey:!(t.x>e.ex||t.ex<e.x||t.ey<e.y||t.y>e.ey)}function rk(t,e){return(e.x>t.ex||e.ex<t.x)&&(e.y>t.ey||e.ey<t.y)}function ik(t,e){const n=$o(e),r={x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2]};return hr(r),r}function La(t,e,n){t.x+=e,t.y+=n,t.ex+=e,t.ey+=n,t.center&&(t.center.x+=e,t.center.y+=n),t.pivot&&(t.pivot.x+=e,t.pivot.y+=n)}function ok(t,e){const n=(t.to.y-t.from.y)/(t.to.x-t.from.x),r=(e.to.y-e.from.y)/(e.to.x-e.from.x);return Cg({k:n,point:t.from},{k:r,point:e.from})}function Cg(t,e){if(wg(t.k,0))return{x:e.point.x,y:t.point.y};if(wg(e.k,0))return{x:t.point.x,y:e.point.y};const n=t.point.y-t.k*t.point.x,i=(e.point.y-e.k*e.point.x-n)/(t.k-e.k),o=t.k*i+n;return{x:i,y:o}}function ak(t,e){const n=ok({from:t[0],to:t[2]},{from:t[1],to:t[3]});for(const r of t)_n(r,-e,n);return jc(t)}function yb(t,e,n,r){let i=t.rotate?t.rotate%360:0;if(i){const o=Mo(t),a=(o[0].y-o[1].y)/(o[0].x-o[1].x),l=(o[1].y-o[2].y)/(o[1].x-o[2].x);if(r<4){if(o[r].x+=e,t.ratio)if(r===0||r===2){let c=e*Math.tan((90-(360-i)-Math.atan(t.width/t.height)/Math.PI*180)/180*Math.PI);o[r].y+=c}else{let c=e*Math.tan((90-(360-i)+Math.atan(t.width/t.height)/Math.PI*180)/180*Math.PI);o[r].y+=c}else o[r].y+=n;const u=o[(r+2)%4];o[(r+1)%4]=Cg({k:r%2?l:a,point:o[r]},{k:r%2?a:l,point:u}),o[(r+4-1)%4]=Cg({k:r%2?a:l,point:o[r]},{k:r%2?l:a,point:u})}else{const u=[4,6].includes(r)?l:a;wg(u,0)?(o[r%4].x+=e,o[(r+1)%4].x+=e):(o[r%4].y+=n,o[r%4].x+=n/u,o[(r+1)%4].y+=n,o[(r+1)%4].x+=n/u)}if((o[0].x-o[1].x)**2+(o[0].y-o[1].y)**2<25||(o[1].x-o[2].x)**2+(o[1].y-o[2].y)**2<25)return;const s=ak(o,t.rotate);Dn(s),Object.assign(t,s);return}switch(r){case 0:if(t.width-e<5||t.height-n<5)break;t.x+=e,t.y+=n,t.width-=e,t.height-=n;break;case 1:if(t.width+e<5||t.height-n<5)break;t.ex+=e,t.y+=n,t.width+=e,t.height-=n;break;case 2:if(t.width+e<5||t.height+n<5)break;t.ex+=e,t.ey+=n,t.width+=e,t.height+=n;break;case 3:if(t.width-e<5||t.height+n<5)break;t.x+=e,t.ey+=n,t.width-=e,t.height+=n;break;case 4:if(t.height-n<5)break;t.y+=n,t.height-=n;break;case 5:if(t.width+e<5)break;t.ex+=e,t.width+=e;break;case 6:if(t.height+n<5)break;t.ey+=n,t.height+=n;break;case 7:if(t.width-e<5)break;t.x+=e,t.width-=e;break}}function Sc(t,e,n,r){t&&(t.width*=e,t.height*=e,Wd(t,e,n),hr(t),Dn(t),r&&xg(t,r))}function oa(t,e){const n={x:(t.x-e.x)/e.width,y:(t.y-e.y)/e.height,width:t.width/e.width,height:t.height/e.height};return hr(n),n}function pc(t,e){const{x:n,y:r,width:i,height:o}=e,{penId:a,connectTo:l}=t,s=Object.assign({},t,{x:i?(t.x-n)/i:0,y:o?(t.y-r)/o:0});return t.prev&&(s.prev={penId:a,connectTo:l,x:i?(t.prev.x-n)/i:0,y:o?(t.prev.y-r)/o:0}),t.next&&(s.next={penId:a,connectTo:l,x:i?(t.next.x-n)/i:0,y:o?(t.next.y-r)/o:0}),s}function sk(t,e){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){let o=e[r].x,a=e[r].y,l=e[i].x,s=e[i].y;a>t.y!=s>t.y&&t.x<(l-o)*(t.y-a)/(s-a)+o&&(n=!n)}return n}const lk=/^[\t\n\f\r ]*([MLHVZCSQTAmlhvzcsqta])[\t\n\f\r ]*/,bb=/^[01]/,On=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ck=/^(([\t\n\f\r ]+,?[\t\n\f\r ]*)|(,[\t\n\f\r ]*))/,uk={M:[On,On],L:[On,On],H:[On],V:[On],Z:[],C:[On,On,On,On,On,On],S:[On,On,On,On],Q:[On,On,On,On],T:[On,On],A:[On,On,On,bb,bb,On,On]};function dk(t){let e=0;const n=[];for(;e<t.length;){const r=t.slice(e).match(lk);if(r!==null){const i=r[1];e+=r[0].length;const o=gk(i,t,e);e=o.cursor,n.push(...o.commands)}else throw new Error("malformed path (first error at "+e+")")}return{commands:n}}function wb(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;return pk(t),t.commands.forEach(o=>{o.worldPoints.forEach((a,l)=>{l%2===0?(a<e&&(e=a),a>r&&(r=a)):(a<n&&(n=a),a>i&&(i=a))})}),{x:e,y:n,ex:r,ey:i,width:r-e+1,height:i-n+1}}function fk(t,e,n){n==null&&(n=e),t.commands.forEach((r,i)=>{if(!(r.relative&&i))switch(r.key){case"A":case"a":r.values[5]+=e,r.values[6]+=n;break;case"V":case"v":r.values[0]+=n;break;default:r.values.forEach((o,a)=>{r.values[a]=o+(a%2===0?e:n)});break}})}function hk(t,e,n){n==null&&(n=e),t.commands.forEach(r=>{switch(r.key){case"A":case"a":const i=r.values[0],o=r.values[1],a=Math.PI*r.values[2]/180,l=Math.cos(a),s=Math.sin(a),u=o*o*n*n*l*l+i*i*n*n*s*s,c=2*e*n*l*s*(o*o-i*i),f=i*i*e*e*l*l+o*o*e*e*s*s,v=-(i*i*o*o*e*e*n*n),g=c*c-4*u*f,m=Math.sqrt((u-f)*(u-f)+c*c);r.values[2]=c!==0?Math.atan((f-u-m)/c)*180/Math.PI:u<f?0:90,r.values[0]=-Math.sqrt(2*g*v*(u+f+m))/g,r.values[1]=-Math.sqrt(2*g*v*(u+f-m))/g,r.values[5]*=e,r.values[6]*=n,r.values[4]=e*n>=0?r.values[4]:1-r.values[4];break;case"V":case"v":r.values[0]*=n;break;default:r.values.forEach((y,p)=>{r.values[p]=y*(p%2===0?e:n)});break}})}function vk(t){let e="";return t.commands.forEach(n=>{e+=n.key+" ",n.values.forEach(r=>{e+=r+" "})}),e}function gk(t,e,n){const r=uk[t.toUpperCase()],i=[];for(;n<=e.length;){const o={key:t,values:[]};for(const a of r){const l=e.slice(n).match(a);if(l!==null){o.values.push(+l[0]),n+=l[0].length;const s=e.slice(n).match(ck);s!==null&&(n+=s[0].length)}else{if(o.values.length===0)return{cursor:n,commands:i};throw new Error("malformed path (first error at "+n+")")}}if(o.relative=o.key.toUpperCase()!==o.key,i.push(o),r.length===0)return{cursor:n,commands:i};t==="m"&&(t="l"),t==="M"&&(t="L")}throw new Error("malformed path (first error at "+n+")")}function mk(t,e){const n=[];let r=t.relative&&e?{x:e.worldPoints[e.worldPoints.length-2],y:e.worldPoints[e.worldPoints.length-1]}:{x:0,y:0};for(let i=0;i<t.values.length-1;i+=2)n.push(r.x+t.values[i]),n.push(r.y+t.values[i+1]);t.worldPoints=n}function pk(t){let e,n=0,r=0;t.commands.forEach(i=>{switch(i.key){case"Z":case"z":i.worldPoints=[n,r];break;case"H":i.worldPoints=[i.values[0],e.worldPoints[e.worldPoints.length-1]];break;case"h":i.worldPoints=[i.values[0]+e.worldPoints[e.worldPoints.length-2],e.worldPoints[e.worldPoints.length-1]];break;case"V":i.worldPoints=[e.worldPoints[e.worldPoints.length-2],i.values[0]];break;case"v":i.worldPoints=[e.worldPoints[e.worldPoints.length-2],i.values[0]+e.worldPoints[e.worldPoints.length-1]];break;case"A":i.worldPoints=[e.worldPoints[e.worldPoints.length-2],i.values[0]+e.worldPoints[e.worldPoints.length-1]];break;default:mk(i,e);break}(i.key==="M"||i.key==="m"||i.key==="Z"||i.key==="z")&&(n=i.worldPoints[i.worldPoints.length-2],r=i.worldPoints[i.worldPoints.length-1]),e=i})}function yk(t,e){var s;const r=t.calculative.canvas.store.data.paths[t.pathId];if(!r)return new Path2D;const i=dk(r);t.calculative.svgRect=wb(i),Dn(t.calculative.svgRect),(t.calculative.svgRect.width!==t.calculative.worldRect.width||t.calculative.svgRect.height!==t.calculative.worldRect.height)&&hk(i,t.calculative.worldRect.width/t.calculative.svgRect.width,t.calculative.worldRect.height/t.calculative.svgRect.height);const o=wb(i);Dn(o),fk(i,t.calculative.worldRect.x-o.x,t.calculative.worldRect.y-o.y);const a=vk(i);if(e){(s=e.svgPath)==null||s.call(e,a);return}return new Path2D(a)}function bk(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r+o/2,i),n.lineTo(r+o,i+a/2),n.lineTo(r+o/2,i+a),n.lineTo(r,i+a/2),n.lineTo(r+o/2,i),n.closePath(),n instanceof Path2D)return n}function wk(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r+o/2,i),n.lineTo(r+o,i+a),n.lineTo(r,i+a),n.lineTo(r+o/2,i),n.closePath(),n instanceof Path2D)return n}function xk(t){const e=[{x:.5,y:0},{x:.75,y:.5},{x:.5,y:1},{x:.25,y:.5}];t.anchors=e.map(({x:n,y:r},i)=>({id:`${i}`,penId:t.id,x:n,y:r}))}function Ck(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r+o/2,i),n.lineTo(r+o,i+a*2/5),n.lineTo(r+o*4/5,i+a),n.lineTo(r+o/5,i+a),n.lineTo(r,i+a*2/5),n.closePath(),n instanceof Path2D)return n}function Sk(t){const e=[{x:.5,y:0},{x:1,y:.4},{x:.8,y:1},{x:.2,y:1},{x:0,y:.4}];t.anchors=e.map(({x:n,y:r},i)=>({id:`${i}`,penId:t.id,x:n,y:r}))}function Ek(t,e){t.onResize||(t.onResize=Rk);const n=e||new Path2D,{width:r,height:i,center:o}=t.calculative.worldRect,a=r>i?i:r,l=o.x,s=o.y,u=s-a/2,c=s-a/4,f=-(c-s)*Math.sin(Math.PI/180*324)+l,v=(c-s)*Math.cos(Math.PI/180*324)+s;n.moveTo(f,v);for(let g=0;g<5;++g)n.lineTo(-(u-s)*Math.sin(Math.PI/180*72*g)+l,(u-s)*Math.cos(Math.PI/180*72*g)+s),n.lineTo((f-l)*Math.cos(Math.PI/180*72*(g+1))-(v-s)*Math.sin(Math.PI/180*72*(g+1))+l,(f-l)*Math.sin(Math.PI/180*72*(g+1))+(v-s)*Math.cos(Math.PI/180*72*(g+1))+s);if(n.closePath(),n instanceof Path2D)return n}function Z1(t){const{width:e,height:n}=t,r=e>n?n:e,i=[];for(let o=0;o<5;++o)i.push({flag:1,id:String(o),penId:t.id,x:.5+r/2*Math.sin(Math.PI/180*72*o)/e,y:-r/2*Math.cos(Math.PI/180*72*o)/n+.5});t.anchors=i}function Rk(t){const e=t.anchors.filter(n=>n.flag!==1);Z1(t),t.anchors=t.anchors.concat(...e)}function Ik(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r+o/4,i),n.lineTo(r+o*3/4,i),n.lineTo(r+o,i+a/2),n.lineTo(r+o*3/4,i+a),n.lineTo(r+o*1/4,i+a),n.lineTo(r,i+a/2),n.lineTo(r+o/4,i),n.closePath(),n instanceof Path2D)return n}function Pk(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r,i+a/2),n.lineTo(r+a/2,i),n.lineTo(r+a/2,i+a/3),n.lineTo(r+o,i+a/3),n.lineTo(r+o,i+a*2/3),n.lineTo(r+a/2,i+a*2/3),n.lineTo(r+a/2,i+a*2/3),n.lineTo(r+a/2,i+a),n.closePath(),n instanceof Path2D)return n}function kk(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r,i+a/3),n.lineTo(r+(o-a/2),i+a/3),n.lineTo(r+(o-a/2),i),n.lineTo(r+o,i+a/2),n.lineTo(r+(o-a/2),i+a),n.lineTo(r+(o-a/2),i+a*2/3),n.lineTo(r,i+a*2/3),n.closePath(),n instanceof Path2D)return n}function $k(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r,i+a/2),n.lineTo(r+a/2,i),n.lineTo(r+a/2,i+a/3),n.lineTo(r+(o-a/2),i+a/3),n.lineTo(r+(o-a/2),i),n.lineTo(r+o,i+a/2),n.lineTo(r+(o-a/2),i+a),n.lineTo(r+(o-a/2),i+a*2/3),n.lineTo(r+a/2,i+a*2/3),n.lineTo(r+a/2,i+a),n.closePath(),n instanceof Path2D)return n}function Tk(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a,ey:l}=t.calculative.worldRect;if(n.moveTo(r,i),n.lineTo(r+o,i),n.lineTo(r+o,i+a*3/4),n.lineTo(r+o*8/16,i+a*3/4),n.lineTo(r+o/4,l),n.lineTo(r+o*5/16,i+a*3/4),n.lineTo(r,i+a*3/4),n.closePath(),n instanceof Path2D)return n}function _k(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r+o/5,i+a*13/16),n.bezierCurveTo(r-o/15,i+a*13/16,r-o/15,i+a*7/16,r+o/5,i+a*7/16),n.bezierCurveTo(r+o/5,i,r+o*4/5,i,r+o*4/5,i+a*7/16),n.bezierCurveTo(r+o*16/15,i+a*7/16,r+o*16/15,i+a*13/16,r+o*4/5,i+a*13/16),n.closePath(),n instanceof Path2D)return n}function Ak(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ex:a,ey:l}=t.calculative.worldRect,s=o/6;if(n.moveTo(r,i),n.lineTo(a-s,i),n.lineTo(a,i+s),n.lineTo(a,l),n.lineTo(r,l),n.closePath(),n.moveTo(a-s,i),n.lineTo(a-s,i+s),n.lineTo(a,i+s),n.closePath(),n instanceof Path2D)return n}function Ok(t,e){const{x:n,y:r,width:i,ex:o,ey:a}=e.calculative.worldRect;let l=i*.25;const s=e.z;s>1?l=s*e.calculative.canvas.store.data.scale:s>0&&(l=i*s);const u={x:n,y:r+l},c={x:o-l,y:r+l},f={x:o-l,y:a};_v(t,[u,c,f,{x:n,y:a}],e.backgroundFront||e.background,e.color),_v(t,[u,{x:n+l,y:r},{x:o,y:r},c],e.backgroundUp||e.background,e.color),_v(t,[c,{x:o,y:r},{x:o,y:a-l},f],e.backgroundRight||e.background,e.color)}function _v(t,e,n="",r=""){t.save(),n&&(t.fillStyle=n),r&&(t.strokeStyle=r),t.beginPath();for(let i=0;i<e.length;++i)i?t.lineTo(e[i].x,e[i].y):t.moveTo(e[i].x,e[i].y);t.closePath(),n&&t.fill(),t.stroke(),t.restore()}function Mk(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ex:a,ey:l}=t.calculative.worldRect,s=o/4,u=r+o/2;if(n.arc(u,i+s,s,0,Math.PI*2),n.moveTo(r,i+s*3),n.lineTo(a,i+s*3),n.moveTo(u,i+s*2),n.lineTo(u,i+s*4),n.moveTo(u,i+s*4),n.lineTo(r,l),n.moveTo(u,i+s*4),n.lineTo(a,l),n.closePath(),n instanceof Path2D)return n}function Nk(t,e,n){if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),n)e.calculative.activeAnchor&&(e.calculative.activeAnchor.next={penId:e.id,x:n.x,y:n.y},mf(e.calculative.activeAnchor.next,e.calculative.activeAnchor)<5?e.calculative.activeAnchor.next=void 0:(e.calculative.activeAnchor.prev={...e.calculative.activeAnchor.next},_n(e.calculative.activeAnchor.prev,180,e.calculative.activeAnchor)));else{const r=e.calculative.worldAnchors[0];if(!r.next){const o=cl(r,t.pens[r.connectTo]);xb(r,o,50),r.prev=void 0}const i=e.calculative.worldAnchors[e.calculative.worldAnchors.length-1];if(i&&i!==r&&!i.prev){const o=cl(i,t.pens[i.connectTo]);xb(i,o,-50),i.next=void 0}}}function xb(t,e,n){switch(e){case Ut.Up:t.prev={penId:t.penId,x:t.x,y:t.y+n},t.next={penId:t.penId,x:t.x,y:t.y-n};break;case Ut.Right:t.prev={penId:t.penId,x:t.x-n,y:t.y},t.next={penId:t.penId,x:t.x+n,y:t.y};break;case Ut.Bottom:t.prev={penId:t.penId,x:t.x,y:t.y-n},t.next={penId:t.penId,x:t.x,y:t.y+n};break;case Ut.Left:t.prev={penId:t.penId,x:t.x+n,y:t.y},t.next={penId:t.penId,x:t.x-n,y:t.y};break}}function Sg(t,e,n,r){const i=1-t,o=i*i*e.x+2*i*t*n.x+t*t*r.x,a=i*i*e.y+2*i*t*n.y+t*t*r.y;return{x:o,y:a,step:t}}function eC(t,e,n,r,i){const{x:o,y:a}=e,{x:l,y:s}=i,{x:u,y:c}=n,{x:f,y:v}=r,g=1-t,m=o*g*g*g+3*u*t*g*g+3*f*t*t*g+l*t*t*t,y=a*g*g*g+3*c*t*g*g+3*v*t*t*g+s*t*t*t;return{x:m,y,step:t}}function ta(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Lk(t,e,n){let r=t.calculative.worldAnchors[n],i=t.calculative.worldAnchors[n+1];!i&&t.close&&(i=t.calculative.worldAnchors[0]);const o=e.step;let a;if(r.next&&i.prev){const l=r,s=r.next,u=i.prev,c=i,f=ta(l,s,o),v=ta(s,u,o),g=ta(u,c,o),m=ta(f,v,o),y=ta(v,g,o);a=ta(m,y,o),m.penId=t.id,a.prev=m,y.penId=t.id,a.next=y,r.next.x=f.x,r.next.y=f.y,i.prev.x=g.x,i.prev.y=g.y}else if(r.next||i.prev){const l=r,s=r.next||i.prev,u=i,c=ta(l,s,o),f=ta(s,u,o);a=e,c.penId=t.id,f.penId=t.id,a.prev=c,a.next=f,r.next=void 0,i.prev=void 0}else a=e;return a.penId=t.id,a.id=Wt(),a.prevNextType=ja.Bilateral,a}function Dk(t,e,n){if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),e.calculative.worldAnchors.length<2)return;let r=e.calculative.activeAnchor,i=n||gn(e);if(!r||!i)return;const o=20,a=t.pens[r.connectTo];let l=cl(r,a);switch(l===Ut.None&&(i.x>r.x?l=Ut.Right:l=Ut.Left),r.next={id:Wt(),penId:e.id,x:r.x,y:r.y,prevNextType:2},i.prev={id:Wt(),penId:e.id,x:i.x,y:i.y,prevNextType:2},l){case Ut.Up:r.next.y-=o,i.prev.y=r.y;break;case Ut.Bottom:r.next.y+=o,i.prev.y=r.y;break;case Ut.Left:r.next.x-=o,i.prev.x=r.x;break;default:r.next.x+=o,i.prev.x=r.x;break}}function Fk(t,e){const n=e||new Path2D;if((t.lineName==="line"||t.lineName==="polyline")&&t.calculative.lineSmooth){let i=Fm(t);if(n instanceof Path2D&&n.addPath(i),n instanceof Path2D)return n}const r=t.calculative.worldAnchors;if(r.length>1){let i;r.forEach(o=>{i?Cb(n,i,o):o.start=!0,i=o}),t.close&&(t.lineName==="curve"?Cb(n,i,r[0]):n.closePath())}if(n instanceof Path2D)return n}function Bk(t,e,n){var o;if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),e.calculative.worldAnchors.length<2||((o=e.anchors)==null?void 0:o.length)>1)return;const r=Gn(e),i=gn(e);!r||!i||!i.id||r===i||(r.next=void 0,jm(e),i.prev=void 0,e.calculative.worldAnchors.push(i))}function Cb(t,e,n){!n||n.isTemp||(e.start&&t.moveTo(e.x,e.y),e.next?n.prev?t.bezierCurveTo(e.next.x,e.next.y,n.prev.x,n.prev.y,n.x,n.y):t.quadraticCurveTo(e.next.x,e.next.y,n.x,n.y):n.prev?t.quadraticCurveTo(n.prev.x,n.prev.y,n.x,n.y):t.lineTo(n.x,n.y))}function Eg(t){return Yd(t),jc(tC(t))}function tC(t){const e=[];let n;return t.calculative.worldAnchors.forEach(r=>{e.push(r),n&&e.push(...Sb(n,r,t)),n=r}),t.close&&t.calculative.worldAnchors.length>1&&e.push(...Sb(n,t.calculative.worldAnchors[0],t)),e}function Xd(t){return t!=null&&t.lineWidth?t.lineWidth/2+4:4}function Sb(t,e,n){const r=[];if(!e)return r;let i=.02;if(t.lineLength&&!n.parentId&&(i=Xd(n)/t.lineLength),t.next)if(e.prev)for(let o=i;o<1;o+=i)r.push(eC(o,t,t.next,e.prev,e));else for(let o=i;o<1;o+=i)r.push(Sg(o,t,t.next,e));else if(e.prev)for(let o=i;o<1;o+=i)r.push(Sg(o,t,e.prev,e));else r.push({x:e.x,y:e.y});return r.length>1&&(t.curvePoints=r),r}function jk(t,e){const n=Xd(e);let r=0,i,o;for(const a of e.calculative.worldAnchors){if(i){if(o=Eb(t,i,a,n),o)return{i:r,point:o};++r}i=a}if(e.close&&e.calculative.worldAnchors.length>1&&(o=Eb(t,i,e.calculative.worldAnchors[0],n)))return{i:r,point:o}}function Eb(t,e,n,r=4){if(!e.next&&!n.prev){const{x:i,y:o}=e,{x:a,y:l}=n,s=Math.min(i,a),u=Math.max(i,a),c=Math.min(o,l),f=Math.max(o,l);return t.x>=s-r&&t.x<=u+r&&t.y>=c-r&&t.y<=f+r?zk(t,e,n,r):void 0}else if(e.curvePoints){for(const i of e.curvePoints)if(Ws(t,i,r))return i}}function zk(t,e,n,r=4){if(e.x===n.x){if(Math.abs(t.x-e.x)<=r)return{x:e.x,y:t.y}}else{const i=(e.y-n.y)/(e.x-n.x),o=e.y-i*e.x;if(Math.abs((i*t.x+o-t.y)/Math.sqrt(i*i+1))<=r){const s=(t.x+i*t.y-i*o)/(i*i+1);return{x:s,y:i*s+o}}}}function Rb(t,e,n,r){if(!e&&!n)return Math.sqrt(Math.pow(Math.abs(t.x-r.x),2)+Math.pow(Math.abs(t.y-r.y),2))||0;const i=document.createElementNS("http://www.w3.org/2000/svg","path");return e&&n?i.setAttribute("d",`M${t.x} ${t.y} C${e.x} ${e.y} ${n.x} ${n.y} ${r.x} ${r.y}`):e?i.setAttribute("d",`M${t.x} ${t.y} Q${e.x} ${e.y} ${r.x} ${r.y}`):i.setAttribute("d",`M${t.x} ${t.y} Q${n.x} ${n.y} ${r.x} ${r.y}`),i.getTotalLength()||0}function Yd(t){if(t.calculative.worldAnchors.length<2)return 0;let e=0,n;if(t.calculative.worldAnchors.forEach(r=>{n&&(n.lineLength=Rb(n,n.next,r.prev,r),e+=n.lineLength),n=r}),t.close){const r=Gn(t);n.lineLength=Rb(n,n.next,r.prev,r),e+=n.lineLength}return t.calculative.animatePos&&(t.calculative.animatePos=e/t.length*t.calculative.animatePos),t.length=e,e}function Av(t,e){const n=t.calculative.worldAnchors;for(let r=0;r<n.length-1;r++){const i=n[r],o=n[r+1];if(!i.next&&!o.prev){if(nC(i,o,e))return!0}else if(Hk(i,o,e))return!0}return!1}function nC(t,e,n){if(Va(t,n)||Va(e,n))return!0;const r=t.x,i=t.y,o=e.x,a=e.y;let l=n.x,s=n.y,u=n.ex,c=n.ey;const f=i-a,v=o-r,g=r*a-o*i;if(f*l+v*s+g>=0&&f*u+v*c+g<=0||f*l+v*s+g<=0&&f*u+v*c+g>=0||f*l+v*c+g>=0&&f*u+v*s+g<=0||f*l+v*c+g<=0&&f*u+v*s+g>=0){if(l>u){const m=l;l=u,u=m}if(s<c){const m=s;s=c,c=m}return!(r<l&&o<l||r>u&&o>u||i>s&&a>s||i<c&&a<c)}else return!1}function Hk(t,e,n){if(!t.next&&!e.prev)return nC(t,e,n);if(t.next&&e.prev)for(let i=.02;i<1;i+=.02){const o=eC(i,t,t.next,e.prev,e);if(Va(o,n))return!0}else if(t.next||e.prev)for(let i=.02;i<1;i+=.02){const o=Sg(i,t,t.next||e.prev,e);if(Va(o,n))return!0}return!1}function Ib(t,e,n,r,i){let o="";return t||(o+=`M${e.x} ${e.y} `,t=document.createElementNS("http://www.w3.org/2000/svg","path"),t.setAttribute("d",o)),o=t.getAttribute("d")||"",n&&r?o+=`C${n.x} ${n.y} ${r.x} ${r.y} ${i.x} ${i.y}`:n?o+=`Q${n.x} ${n.y} ${i.x} ${i.y}`:o+=`Q${(r==null?void 0:r.x)||e.x} ${(r==null?void 0:r.y)||e.y} ${i.x} ${i.y}`,t.setAttribute("d",o),t}function Vk(t,e){const n=t.getTotalLength();if(e<0||e>n)return null;const r=.01,i=t.getPointAtLength(e),o=t.getPointAtLength(e-r),a=Math.atan2(i.y-o.y,i.x-o.x);return{x:i.x,y:i.y,rotate:a/Math.PI*180,progress:e/n}}let Jr=10;function Wk(t,e,n){var y;if(e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),Jr=t.options.polylineSpace||10,e.calculative.worldAnchors.length<2)return;let r=Gn(e),i=gn(e);if(!r||!i)return;let o;if((y=e.anchors)!=null&&y.length&&r===e.calculative.activeAnchor?(o=!0,r=i,i=Gn(e)):(!e.anchors||!e.anchors.length)&&r!==e.calculative.activeAnchor&&(r=e.calculative.activeAnchor),!r||!i)return;r.next=void 0,i.prev=void 0;const a=i.connectTo;jm(e);const l=[],s=t.pens[r.connectTo],u=t.pens[i.connectTo],c=cl(r,s),f=cl(i,u);let v=Pb(r,c,Jr);v&&(r=v,l.push(v)),v=Pb(i,f,Jr);const g=i;let m;if(v&&(i=v,g.connectTo&&(v.y>g.y&&r.y<g.y||v.y<g.y&&r.y>g.y))){m=v;let p=Jr;r.x<v.x&&(p=-p),Math.abs(r.x-v.x)<p&&(p=-p),i={x:v.x+p,y:v.y,id:Wt()}}switch(c){case Ut.Up:l.push(...Uk(r,i,f));break;case Ut.Right:l.push(...qk(r,i,f));break;case Ut.Bottom:l.push(...Kk(r,i,f));break;case Ut.Left:l.push(...Gk(r,i,f));break;default:l.push(...Xk(e,r,i));break}if(l.forEach(p=>{p.id=Wt(),p.penId=e.id,e.calculative.worldAnchors.push(p)}),e.calculative.worldAnchors.push(i),m&&e.calculative.worldAnchors.push(m),v&&e.calculative.worldAnchors.push(g),o&&e.calculative.worldAnchors.reverse(),a){const p=e.calculative.worldAnchors.length-2;e.calculative.worldAnchors[p].isTemp=!1,e.calculative.worldAnchors[1].isTemp=!1}}function Pb(t,e,n){const r={x:t.x,y:t.y,id:Wt()};switch(e){case Ut.Up:r.y-=n;break;case Ut.Right:r.x+=n;break;case Ut.Bottom:r.y+=n;break;case Ut.Left:r.x-=n;break;default:return}return r}function Uk(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let i,o;switch(n){case Ut.Up:t.y<e.y?(i=e.x,o=t.y):(i=t.x,o=e.y),r.push({x:i,y:o});break;case Ut.Bottom:if(i=e.x,o=t.y,e.y>t.y)i=t.x+(e.x-t.x)/2,r.push({x:i,y:t.y},{x:i,y:e.y});else{const a=(t.y+e.y)/2;r.push({x:t.x,y:a},{x:e.x,y:a})}break;case Ut.Right:i=e.x,o=t.y,e.x<t.x&&e.y<t.y&&(i=t.x,o=e.y),r.push({x:i,y:o});break;case Ut.Left:i=e.x,o=t.y,e.x>t.x&&e.y<t.y&&(i=t.x,o=e.y),r.push({x:i,y:o});break;default:if(e.y>t.y-Jr)i=t.x+(e.x-t.x)/2,r.push({x:i,y:t.y},{x:i,y:e.y});else{const a=(t.y+e.y+Jr)/2;r.push({x:t.x,y:a},{x:e.x,y:a})}break}return r}function qk(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let i,o;switch(n){case Ut.Up:i=t.x,o=e.y,e.x>t.x&&e.y>t.y&&(i=e.x,o=t.y),r.push({x:i,y:o});break;case Ut.Bottom:i=t.x,o=e.y,e.x>t.x&&e.y<t.y&&(i=e.x,o=t.y),r.push({x:i,y:o});break;case Ut.Left:if(i=e.x,o=t.y,e.x<t.x)o=t.y+(e.y-t.y)/2,r.push({x:t.x,y:o},{x:e.x,y:o});else{const a=(t.x+e.x)/2;r.push({x:a,y:o},{x:a,y:e.y})}break;case Ut.Right:e.x<t.x?r.push({x:t.x,y:e.y}):r.push({x:e.x,y:t.y});break;default:if(i=e.x,o=e.y,e.x<t.x+Jr)r.push({x:t.x,y:o});else{const a=(t.x+e.x-Jr)/2;r.push({x:a,y:t.y},{x:a,y:o})}break}return r}function Kk(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let i,o;switch(n){case Ut.Up:if(i=t.x,o=e.y,e.y<t.y)i=t.x+(e.x-t.x)/2,r.push({x:i,y:t.y},{x:i,y:e.y});else{const a=(t.y+e.y)/2;r.push({x:i,y:a},{x:e.x,y:a})}break;case Ut.Right:i=e.x,o=t.y,e.x<t.x&&e.y>t.y&&(i=t.x,o=e.y),r.push({x:i,y:o});break;case Ut.Bottom:t.y>e.y?(i=e.x,o=t.y):(i=t.x,o=e.y),r.push({x:i,y:o});break;case Ut.Left:i=e.x,o=t.y,e.x>t.x&&e.y>t.y&&(i=t.x,o=e.y),r.push({x:i,y:o});break;default:if(i=t.x,e.y<t.y+Jr)i=t.x+(e.x-t.x)/2,r.push({x:i,y:t.y},{x:i,y:e.y});else{const a=(t.y+e.y-Jr)/2;r.push({x:i,y:a},{x:e.x,y:a})}break}return r}function Gk(t,e,n){if(t.x===e.x||t.y===e.y)return[];const r=[];let i,o;switch(n){case Ut.Up:i=t.x,o=e.y,e.x<t.x&&e.y>t.y&&(i=e.x,o=t.y),r.push({x:i,y:o});break;case Ut.Bottom:i=t.x,o=e.y,e.x<t.x&&e.y<t.y&&(i=e.x,o=t.y),r.push({x:i,y:o});break;case Ut.Right:if(i=t.x,o=e.y,e.x>t.x)i=e.x,o=t.y+(e.y-t.y)/2,r.push({x:t.x,y:o},{x:e.x,y:o});else{const a=(t.x+e.x)/2;r.push({x:a,y:t.y},{x:a,y:e.y})}break;case Ut.Left:e.x>t.x?r.push({x:t.x,y:e.y}):r.push({x:e.x,y:t.y});break;default:if(i=t.x,o=e.y,e.x<t.x-Jr){const a=(t.x+e.x+Jr)/2;r.push({x:a,y:t.y},{x:a,y:o})}else r.push({x:t.x,y:o});break}return r}function Xk(t,e,n){const r=[];t.calculative.drawlineH==null&&(t.calculative.drawlineH=Math.abs(n.x-e.x)>Math.abs(n.y-e.y));let i=t.calculative.worldAnchors.findIndex(o=>o.id==e.id);if(i>1){let o=t.calculative.worldAnchors[i-1];if(o.x===e.x&&o.y!==e.y)return r.push({x:n.x,y:e.y}),r;if(o.y===e.y&&o.x!==e.x)return r.push({x:e.x,y:n.y}),r}return t.calculative.worldAnchors.length&&(n.isTemp=void 0,t.calculative.drawlineH?(r.push({x:n.x,y:e.y}),Math.abs(n.y-e.y)<Jr&&(n.isTemp=!0)):(r.push({x:e.x,y:n.y}),Math.abs(n.x-e.x)<Jr&&(n.isTemp=!0))),r}function id(t,e,n=!0){var i,o;let r=t.calculative.worldAnchors;n||(r=[],t.calculative.worldAnchors.forEach(a=>{r.unshift(a)}));for(let a=0;a<r.length&&r[a].id!==e.id;a++)if(r[a].y!==e.y||r[a].x===((i=r[a+1])==null?void 0:i.x)&&r[a].y!==((o=r[a+1])==null?void 0:o.y))return!1;return!0}function od(t,e,n=!0){var i,o;let r=t.calculative.worldAnchors;n||(r=[],t.calculative.worldAnchors.forEach(a=>{r.unshift(a)}));for(let a=0;a<r.length&&r[a].id!==e.id;a++)if(r[a].x!==e.x||r[a].y===((i=r[a+1])==null?void 0:i.y)&&r[a].x!==((o=r[a+1])==null?void 0:o.x))return!1;return!0}function Yk(t,e,n){if(!t.calculative.worldAnchors)return;const r=t.calculative.worldAnchors.findIndex(s=>s.id===e.id),i=Gn(t),o=gn(t);let a=t.calculative.worldAnchors[r-1],l=t.calculative.worldAnchors[r+1];if(t.calculative.h==null&&(i.connectTo&&(id(t,e,!0)?t.calculative.h=!0:od(t,e,!0)&&(t.calculative.h=!1)),t.calculative.h==null&&o.connectTo&&(id(t,e,!1)?t.calculative.h=!0:od(t,e,!1)&&(t.calculative.h=!1)),t.calculative.h==null&&(a?t.calculative.h=a.y===e.y:l&&(t.calculative.h=l.y===e.y))),t.calculative.h){if(e.x=n.x,i.connectTo&&id(t,e,!0)){l&&l.y!==e.y&&(l.x=e.x);return}if(o.connectTo&&id(t,e,!1)){a&&a.y!==e.y&&(a.x=e.x);return}const s=t.anchors[r];let u;for(let c=r-1;c>-1;c--)if(a=t.anchors[c],u==null&&(u=a.y===s.y),u===!0)if(a.y===s.y)t.calculative.worldAnchors[c].y=n.y;else break;else if(a.x===s.x)t.calculative.worldAnchors[c].x=n.x;else break;u=void 0;for(let c=r+1;c<t.calculative.worldAnchors.length&&(l=t.anchors[c],l);c++)if(u==null&&(u=l.y===s.y),u===!0)if(l.y===s.y)t.calculative.worldAnchors[c].y=n.y;else break;else if(l.x===s.x)t.calculative.worldAnchors[c].x=n.x;else break;e.y=n.y}else{if(e.y=n.y,i.connectTo&&od(t,e,!0)){l&&l.x!==e.x&&(l.y=e.y);return}if(o.connectTo&&od(t,e,!1)){a&&a.x!==e.x&&(a.y=e.y);return}const s=t.anchors[r];let u;for(let c=r-1;c>-1;c--)if(a=t.anchors[c],u==null&&(u=a.x===s.x),u===!0)if(a.x===s.x)t.calculative.worldAnchors[c].x=n.x;else break;else if(a.y===s.y)t.calculative.worldAnchors[c].y=n.y;else break;u=void 0;for(let c=r+1;c<t.calculative.worldAnchors.length&&(l=t.anchors[c],l);c++)if(u==null&&(u=l.x===s.x),u===!0)if(l.x===s.x)t.calculative.worldAnchors[c].x=n.x;else break;else if(l.y===s.y)t.calculative.worldAnchors[c].y=n.y;else break;e.x=n.x}}function Rg(t,e,n,r){const i=[];let o,a,l,s,u,c,f,v,g,m,y,p,C,x;g=t[n],m=t[r],l=g.x,s=g.y,f=m.x-l,v=m.y-s,x=f*f+v*v,o=e;for(let S=n+1;S<r;S++)y=t[S],f!==0||v!==0?(p=((y.x-l)*f+(y.y-s)*v)/x,p>1?(u=y.x-m.x,c=y.y-m.y):p>0?(u=y.x-(l+f*p),c=y.y-(s+v*p)):(u=y.x-l,c=y.y-s)):(u=y.x-l,c=y.y-s),C=u*u+c*c,C>o&&(a=S,o=C);return o>e&&(a-n>1&&i.push(...Rg(t,e,n,a)),i.push({id:t[a].id,penId:t[a].penId,x:t[a].x,y:t[a].y}),r-a>1&&i.push(...Rg(t,e,a,r))),i}function Qk(t,e=.8,n=!1){if(t.length<3)return t;let r,i,o,a,l,s,u,c,f,v,g,m,y,p,C;const x=(S,E,P,$)=>(a=Math.sqrt(S*S+E*E),a>0?(m=S/a,p=E/a):(m=1,p=0),l=Math.sqrt(P*P+$*$),l>0?(y=P/l,C=$/l):(y=1,C=0),Math.acos(m*y+p*C));v=[],g=t.length,r=t[0],t[g-1],v.push({...t[0]});for(let S=0;S<g-1;S++){if(i=t[S],o=t[S+1],f=Math.abs(x(i.x-r.x,i.y-r.y,o.x-i.x,o.y-i.y)),a)if(f<e*3.14)if(n&&(a=Math.min(a,l),l=a),s=(m+y)/2,u=(p+C)/2,c=Math.sqrt(s*s+u*u),c===0)v.push({...i});else{s/=c,u/=c;const E={...i};E.prevNextType=ja.Bilateral,E.prev={penId:E.penId,x:i.x-s*a*.25,y:i.y-u*a*.25},E.next={penId:E.penId,x:i.x+s*l*.25,y:i.y+u*l*.25},v.push(E)}else v.push({...i});r=i}return v.push({...t[t.length-1]}),v}function rC(t,e){const n=e||new Path2D,r=t.calculative.worldAnchors;let i=t.calculative.canvas.store.data.scale,o=(t.calculative.animateLineWidth||6)*i,a=(t.animateLineWidth*2||12)*i;t.lineAnimateType===Qr.WaterDrop&&(a=(t.animateLineWidth*4||24)*i);let l=(t.animateInterval||100)*i,s=t.calculative.lineWidth*(t.calculative.lineSmooth||0),u=(t.calculative.animateLineWidth/2||3)*i;if(t.animateReverse&&(a=-a,o=-o),r.length>1){let c,f=0;for(let v=0;v<r.length;v++){let g=r[v];if(c){let m=Jk(c,g),y={x:c.x+(t.calculative.animatePos-f)%l*Math.cos(m*Math.PI/180),y:c.y-(t.calculative.animatePos-f)%l*Math.sin(m*Math.PI/180)};t.animateReverse&&(y={x:c.x+(t.length-(t.calculative.animatePos+f))%l*Math.cos(m*Math.PI/180),y:c.y-(t.length-(t.calculative.animatePos+f))%l*Math.sin(m*Math.PI/180)});let p=Math.sqrt((y.x-c.x)**2+(y.y-c.y)**2),C=Math.sqrt((g.x-c.x)**2+(g.y-c.y)**2);for(;p<C;)(t.animateReverse&&p-a<C||!t.animateReverse&&p>a)&&p>s+a&&C-p>s&&(t.lineAnimateType===Qr.Arrow?Zk(n,y,o,m,u,a):t.lineAnimateType===Qr.WaterDrop&&e$(n,y,t.animateReverse,m,u,a)),y.x+=l*Math.cos(m*Math.PI/180),y.y-=l*Math.sin(m*Math.PI/180),p=Math.sqrt((y.x-c.x)**2+(y.y-c.y)**2)}c=g}}if(n instanceof Path2D)return n}function Jk(t,e){let n=e.x-t.x,r=e.y-t.y,i=Math.atan(r/n)*180/Math.PI;return e.x>=t.x?i=-i:i=180-i,i}function la(t,e,n){let r=(180-n)*Math.PI/180;return{x:(t.x-e.x)*Math.cos(r)-(t.y-e.y)*Math.sin(r)+e.x,y:(t.x-e.x)*Math.sin(r)+(t.y-e.y)*Math.cos(r)+e.y}}function Zk(t,e,n,r,i,o){let a=la({x:e.x+n,y:e.y+.57*n},{x:e.x,y:e.y},r),l=la({x:e.x+n,y:e.y-.57*n},{x:e.x,y:e.y},r),s=la({x:e.x+n,y:e.y+i/2},{x:e.x,y:e.y},r),u=la({x:e.x+o,y:e.y+i/2},{x:e.x,y:e.y},r),c=la({x:e.x+n,y:e.y-i/2},{x:e.x,y:e.y},r),f=la({x:e.x+o,y:e.y-i/2},{x:e.x,y:e.y},r);t.moveTo(a.x,a.y),t.lineTo(e.x,e.y),t.lineTo(l.x,l.y),t.lineTo(c.x,c.y),t.lineTo(f.x,f.y),t.lineTo(u.x,u.y),t.lineTo(s.x,s.y),t.lineTo(a.x,a.y)}function e$(t,e,n,r,i,o){let a=i/2;n&&(a=-i/2);let l=la({x:e.x,y:e.y+a},{x:e.x,y:e.y},r),s=la({x:e.x+o,y:e.y},{x:e.x,y:e.y},r),u=Math.PI/2;n&&(u=-Math.PI/2),t.moveTo(e.x,e.y),t.arc(e.x,e.y,i/2,-u-r/180*Math.PI,u-r/180*Math.PI,!1),t.lineTo(s.x,s.y),t.lineTo(l.x,l.y)}function t$(t){var n;t.onDestroy||(t.onDestroy=n$,t.onMove=ad,t.onResize=ad,t.onRotate=ad,t.onValue=ad,t.onMouseMove=i$,t.onBeforeValue=r$,t.onRenderPenRaw=o$),t.calculative.singleton||(t.calculative.singleton={});const e=t.calculative.worldRect;if(!t.calculative.singleton.div){const r=document.createElement("div");r.style.position="absolute",r.style.outline="none",r.style.left="-9999px",r.style.top="-9999px",r.style.width=e.width+"px",r.style.height=e.height+"px",document.body.appendChild(r),(n=t.calculative.canvas.externalElements)==null||n.parentElement.appendChild(r),mi(t,r),t.calculative.singleton.div=r;const i=document.createElement("iframe");i.style.width="100%",i.style.height="100%",i.scrolling=t.scrolling||"no",i.frameBorder="0",i.style.border="none",i.src=t.iframe,t.calculative.iframe=t.iframe,r.appendChild(i),oC(t),i.onload=()=>{i.setAttribute("document.domain","")}}return t.calculative.patchFlags&&mi(t,t.calculative.singleton.div),t.onRenderPenRaw(t),new Path2D}function n$(t){aC(t),t.calculative.singleton&&t.calculative.singleton.div&&(t.calculative.singleton.div.remove(),delete t.calculative.singleton.div)}function ad(t){t.calculative.singleton.div&&mi(t,t.calculative.singleton.div)}function r$(t,e){if(e.iframe&&t.calculative.singleton.div&&(t.calculative.singleton.div.children[0].src=e.iframe,t.calculative.iframe=e.iframe),e.operationalRect||e["operationalRect.x"]!==void 0||e["operationalRect.y"]!==void 0||e["operationalRect.width"]!==void 0||e["operationalRect.height"]!==void 0){t.operationalRect||(t.operationalRect={});let n=Pe(e);n.operationalRect||(n.operationalRect={}),n["operationalRect.x"]!==void 0&&(n.operationalRect.x=n["operationalRect.x"]),n["operationalRect.y"]!==void 0&&(n.operationalRect.y=n["operationalRect.y"]),n["operationalRect.width"]!==void 0&&(n.operationalRect.width=n["operationalRect.width"]),n["operationalRect.height"]!==void 0&&(n.operationalRect.height=n["operationalRect.height"]),Object.assign(t.operationalRect,n.operationalRect),t.calculative.singleton.div&&(t.calculative.singleton.div.children.length===1?oC(t):(t.calculative.singleton.div.children[1].style.height=t.operationalRect.y*100+"%",t.calculative.singleton.div.children[1].style.left=t.operationalRect.x*100+"%",t.calculative.singleton.div.children[1].style.width=t.operationalRect.width*100+"%",t.calculative.singleton.div.children[2].style.width=(1-t.operationalRect.x-t.operationalRect.width)*100+"%",t.calculative.singleton.div.children[3].style.height=(1-t.operationalRect.y-t.operationalRect.height)*100+"%",t.calculative.singleton.div.children[3].style.left=t.operationalRect.x*100+"%",t.calculative.singleton.div.children[3].style.width=t.operationalRect.width*100+"%",t.calculative.singleton.div.children[4].style.width=t.operationalRect.x*100+"%"))}if(e.blur!==void 0)for(let n=1;n<5;n++)t.calculative.singleton.div.children[n].style["backdrop-filter"]=`blur(${e.blur||2}px)`;if(e.blurBackground!==void 0)for(let n=1;n<5;n++)t.calculative.singleton.div.children[n].style.backgroundColor=e.blurBackground;return e}function i$(t,e){if(!(!t.calculative.canvas.store.data.locked&&!t.locked)&&iC(t.operationalRect)&&t.calculative.zIndex<5&&e.x>t.x+t.width*t.operationalRect.x&&e.x<t.x+t.width*(t.operationalRect.x+t.operationalRect.width)&&e.y>t.y+t.height*t.operationalRect.y&&e.y<t.y+t.height*(t.operationalRect.y+t.operationalRect.height)&&t.calculative.singleton.div){let n=t.calculative.singleton.div.parentNode.children;for(let r=0;r<6;r++)n[r].style.pointerEvents="none"}}function iC(t){return t?!t.width||!t.height?!1:(t.x===void 0&&(t.x=(1-t.width)/2),t.y===void 0&&(t.y=(1-t.height)/2),!0):!1}function oC(t){if(!iC(t.operationalRect))return;const e=t.calculative.singleton.div;if(!e)return;const n=document.createElement("div");n.style.position="absolute",n.style.left=t.operationalRect.x*100+"%",n.style.top="0px",n.style.width=t.operationalRect.width*100+"%",n.style.height=t.operationalRect.y*100+"%",n.style["backdrop-filter"]=`blur(${t.blur||2}px)`,n.style.backgroundColor=t.blurBackground,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.right="0px",r.style.top="0px",r.style.width=(1-t.operationalRect.x-t.operationalRect.width)*100+"%",r.style.height="100%",r.style["backdrop-filter"]=`blur(${t.blur||2}px)`,r.style.backgroundColor=t.blurBackground,e.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.left=t.operationalRect.x*100+"%",i.style.bottom="0px",i.style.width=t.operationalRect.width*100+"%",i.style.height=(1-t.operationalRect.y-t.operationalRect.height)*100+"%",i.style["backdrop-filter"]=`blur(${t.blur||2}px)`,i.style.backgroundColor=t.blurBackground,e.appendChild(i);const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.width=t.operationalRect.x*100+"%",o.style.height="100%",o.style["backdrop-filter"]=`blur(${t.blur||2}px)`,o.style.backgroundColor=t.blurBackground,e.appendChild(o);let a=()=>{aC(t)};n.onmouseenter=a,i.onmouseenter=a,r.onmouseenter=a,o.onmouseenter=a,e.onmouseleave=a}function aC(t){if(!(!t.calculative.canvas.store.data.locked&&!t.locked)&&t.calculative.zIndex<5){let e=t.calculative.singleton.div.parentNode.children;for(let n=1;n<6;n++)e[n].style.pointerEvents="initial"}}function o$(t){if(t.thumbImg&&!t.calculative.img){const e=new Image;e.crossOrigin=t.crossOrigin==="undefined"?void 0:t.crossOrigin||"anonymous",t.calculative.canvas.store.options.cdn&&!(t.thumbImg.startsWith("http")||t.thumbImg.startsWith("//")||t.thumbImg.startsWith("data:image"))?e.src=t.calculative.canvas.store.options.cdn+t.thumbImg:e.src=t.thumbImg,e.onerror=n=>{e.remove(),t.calculative.img=void 0},t.calculative.img=e}}const Zr={},Pd=['<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M473.088 125.44L256 256H52.224C23.552 256 0 279.552 0 308.224V716.8c0 28.16 23.04 51.2 51.2 51.2h204.8l217.088 130.56c16.896 10.24 38.912-2.048 38.912-22.016V147.456c0-19.968-21.504-32.256-38.912-22.016zM699.904 320.512c-20.992-18.944-53.248-17.408-72.192 3.584-18.944 20.992-17.408 53.248 3.584 72.192 0.512 0.512 58.368 54.784 58.368 121.344 0 37.888-19.456 74.752-58.368 110.08-20.992 18.944-22.528 51.2-3.584 72.192 10.24 11.264 24.064 16.896 37.888 16.896 12.288 0 24.576-4.608 34.304-13.312 61.44-55.296 92.16-117.76 92.16-185.856 0-112.64-88.576-193.536-92.16-197.12z" fill="" p-id="2434"></path><path d="M853.504 166.4c-20.992-18.944-53.248-16.896-72.192 4.096-18.944 20.992-16.896 53.248 4.096 72.192 1.536 1.024 135.68 122.88 135.68 280.576 0 90.624-45.568 177.152-135.68 257.536-20.992 18.944-23.04 51.2-4.096 72.192 10.24 11.264 24.064 16.896 38.4 16.896 12.288 0 24.576-4.096 34.304-12.8 112.64-100.864 169.984-212.992 169.984-333.824-1.024-202.752-163.84-350.208-170.496-356.864z"></path></svg>','<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" ><path d="M256 768H51.2c-28.16 0-51.2-23.04-51.2-51.2V308.224C0 279.552 23.552 256 52.224 256H256v512zM512 147.456v728.576c0 19.968-21.504 32.256-38.912 22.016L256 768V256l217.088-130.56c17.408-10.24 38.912 2.048 38.912 22.016zM623.104 656.896c-19.968-19.968-19.968-52.224 0-72.192l217.088-217.088c19.968-19.968 52.224-19.968 72.192 0 19.968 19.968 19.968 52.224 0 72.192l-217.088 217.088c-19.456 19.968-52.224 19.968-72.192 0z" fill="" p-id="2582"></path><path d="M623.104 367.104c19.968-19.968 52.224-19.968 72.192 0l217.088 217.088c19.968 19.968 19.968 52.224 0 72.192-19.968 19.968-52.224 19.968-72.192 0l-217.088-217.088c-19.968-19.456-19.968-52.224 0-72.192z"></path></svg>'];function a$(t){var e;if(t.onDestroy||(t.onDestroy=s$,t.onMove=Ov,t.onResize=Ov,t.onRotate=Ov,t.onClick=kb,t.onValue=c$,t.onChangeId=l$),Zr[t.id])t.video&&t.calculative.media&&t.video!==t.calculative.video?(console.warn("video 更改, 此处是否执行？"),t.calculative.media.src=t.video,t.autoPlay&&(t.calculative.media.muted=!0,t.calculative.media.autoplay=!0),t.calculative.media.loop=t.playLoop,t.calculative.video=t.video):t.audio&&t.calculative.media&&t.audio!==t.calculative.audio&&(t.calculative.media.src=t.audio,t.autoPlay&&(t.calculative.media.muted=!0,t.calculative.media.autoplay=!0),t.calculative.media.loop=t.playLoop,t.calculative.audio=t.audio);else{const n=document.createElement("div"),r=document.createElement("div");r.style.position="absolute",r.style.outline="none",r.style.left="0",r.style.bottom="0",r.style.width="0",r.style.height="2px",r.style.background="#52c41a",r.style.zIndex="1",t.hideProgress&&(r.style.display="none");const i=document.createElement("div");i.innerHTML=Pd[1],i.style.position="absolute",i.style.right="0",i.style.bottom="0",i.style.width="20px",i.style.height="20px",i.style.fill="hsla(0, 0%, 100%, .8)",i.style.zIndex="1",i.style.display="none",n.appendChild(r),n.appendChild(i),i.onclick=a=>{a.stopPropagation(),t.calculative.media.muted?(i.innerHTML=Pd[0],t.calculative.media.muted=!1):(i.innerHTML=Pd[1],t.calculative.media.muted=!0)},t.calculative.singleton||(t.calculative.singleton={}),t.calculative.singleton.muted=i,n.onmouseenter=a=>{t.hideMuted||(i.style.display="block")},n.onmouseleave=a=>{i.style.display="none"},n.onclick=a=>{a.stopPropagation(),kb(t)};let o;t.audio?(o=document.createElement("audio"),o.controls=t.controls,o.src=t.audio):(o=document.createElement("video"),o.src=t.video),o.loop=t.playLoop,o.ontimeupdate=()=>{sC(r,o,t.calculative.worldRect.width)},o.onended=()=>{t.calculative.onended&&t.calculative.onended(t)},t.calculative.media=o,o.style.position="absolute",o.style.outline="none",o.style.left="0",o.style.top="0",o.style.width="100%",o.style.height="100%",o.style.objectFit=t.objectFit||"contain",n.appendChild(o),Zr[t.id]=n,(e=t.calculative.canvas.externalElements)==null||e.parentElement.appendChild(n),mi(t,n),t.autoPlay&&(o.autoplay=!0,o.muted=!0)}return t.calculative.patchFlags&&mi(t,Zr[t.id]),new Path2D}function s$(t){Zr[t.id].onclick=null,Zr[t.id].remove(),Zr[t.id]=void 0}function Ov(t){mi(t,Zr[t.id]);const e=Zr[t.id].children[0],n=Zr[t.id].children[1];sC(e,n,t.calculative.worldRect.width)}function kb(t){t.calculative.media&&(t.calculative.media.muted=!1,t.calculative.singleton.muted.innerHTML=Pd[0],t.calculative.media.paused?t.calculative.media.play():t.calculative.media.pause())}function sC(t,e,n){t.style.width=e.currentTime/e.duration*n+"px"}function l$(t,e,n){Zr[e]&&(Zr[n]=Zr[e],delete Zr[e])}function c$(t){const e=Zr[t.id];if(!e)return;mi(t,e),t.calculative.media||(t.calculative.media=e.querySelector("video"));const n=t.calculative.media.getAttribute("src");t.video?n!==t.video&&(t.calculative.media.src=t.video):t.audio&&n!==t.audio&&(t.calculative.media.src=t.audio),t.autoPlay&&(t.calculative.media.muted=!0,t.calculative.media.autoplay=!0),t.calculative.media.loop=t.playLoop}function uo(){try{const t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.arc?t:document.createElement("canvas")}catch{return document.createElement("canvas")}}let u$=class kd{constructor(e,n){se(this,"parentElement");se(this,"store");se(this,"box");se(this,"text");se(this,"arrowUp");se(this,"arrowDown");se(this,"x");se(this,"y");se(this,"currentPen");this.parentElement=e,this.store=n,this.box=document.createElement("div"),this.text=document.createElement("div"),this.arrowUp=document.createElement("div"),this.arrowDown=document.createElement("div"),this.box.className="meta2d-tooltip",this.text.className="text",this.arrowUp.className="arrow",this.arrowDown.className="arrow down",this.box.appendChild(this.text),this.box.appendChild(this.arrowUp),this.box.appendChild(this.arrowDown),e.appendChild(this.box),this.box.onmouseleave=()=>{this.hide(),this.store.lastHover=void 0};let r;for(let i=0;i<document.styleSheets.length;i++)document.styleSheets[i].title==="le5le.com/tooltip"&&(r=document.styleSheets[i]);if(!r){let i=document.createElement("style");i.type="text/css",i.title="le5le.com/tooltip",document.head.appendChild(i),i=document.createElement("style"),i.type="text/css",document.head.appendChild(i),r=i.sheet,r.insertRule(".meta2d-tooltip{position:absolute;padding:8px 0;z-index:10;left: -9999px;top: -9999px;}"),r.insertRule(".meta2d-tooltip .text{max-width:320px;min-height:30px;max-height:400px;outline:none;padding:8px 16px;border-radius:4px;background:#777777;color:#ffffff;line-height:1.8;overflow-y:auto;}"),r.insertRule(".meta2d-tooltip .arrow{position:absolute;border:10px solid transparent;background:transparent;top:-5px;left:50%;transform:translateX(-50%)}"),r.insertRule(".meta2d-tooltip .arrow.down{top:initial;bottom: -1px;}")}}static getTitle(e){if(e.titleFnJs&&!e.titleFn)try{e.titleFn=new Function("pen",e.titleFnJs)}catch(n){console.log("titleFnJs",n)}return e.titleFn?e.titleFn(e):String(e.title)}setText(e){const n=this.box.getBoundingClientRect();let r=globalThis.marked;const i=kd.getTitle(e);if(r){this.text.innerHTML=r(i);const o=this.text.getElementsByTagName("A");for(let a=0;a<o.length;++a)o[a].setAttribute("target","_blank")}else this.text.innerHTML=i;return n}updateText(e){var i;if(((i=this.currentPen)==null?void 0:i.id)!==e.id||kd.titleEmpty(e))return;const n=this.setText(e),r=this.box.getBoundingClientRect();this.changePositionByText(n,r)}changePositionByText(e,n){this.x-=(n.width-e.width)/2,this.y-=n.height-e.height,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px"}static titleEmpty(e){return!e.title&&!e.titleFn&&!e.titleFnJs}show(e,n){if(this.currentPen=e,kd.titleEmpty(e)){let l=hi(e,!0);l&&this.show(l,n);return}this.setText(e);const r=this.box.getBoundingClientRect(),i=e.calculative.worldRect;let o=e.calculative.canvas.store.data.x+n.x-r.width/2,a=e.calculative.canvas.store.data.y+n.y-r.height;e.type||(o=e.calculative.canvas.store.data.x+i.x-(r.width-i.width)/2,a=e.calculative.canvas.store.data.y+i.ey-r.height-i.height),a>0?(this.arrowUp.style.borderBottomColor="transparent",this.arrowDown.style.borderTopColor="#777777"):(a+=r.height+i.height+5,this.arrowUp.style.borderBottomColor="#777777",this.arrowDown.style.borderTopColor="transparent"),this.x=o,this.y=a,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px"}hide(){this.currentPen=null,this.x=-9999,this.box.style.left="-9999px"}translate(e,n){this.x<-1e3||(this.x+=e,this.y+=n,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px")}destroy(){this.box.onmouseleave=null}};class lC{constructor(e){se(this,"parent");se(this,"h");se(this,"v");se(this,"isDownH");se(this,"isDownV");se(this,"x");se(this,"y");se(this,"hSize");se(this,"vSize");se(this,"scrollX");se(this,"scrollY");se(this,"lastScrollX");se(this,"lastScrollY");se(this,"rect");se(this,"isShow");se(this,"pageMode");se(this,"onMouseDownH",e=>{e.preventDefault(),e.stopPropagation(),this.isDownH=e.x,this.x=this.parent.store.data.x||0,this.lastScrollX=this.scrollX});se(this,"onMouseDownV",e=>{e.preventDefault(),e.stopPropagation(),this.isDownV=e.y,this.y=this.parent.store.data.y||0,this.lastScrollY=this.scrollY});se(this,"onMouseMove",e=>{if(this.isDownH){const n=e.x-this.isDownH;this.scrollX=this.lastScrollX+n,this.h.style.left=`${this.scrollX}px`,this.parent.store.data.x=this.x-n*this.rect.width/this.parent.parentElement.clientWidth}if(this.isDownV){const n=e.y-this.isDownV;if(this.pageMode&&this.canMouseMove(n))return;this.scrollY=this.lastScrollY+n,this.v.style.top=`${this.scrollY}px`,this.parent.store.data.y=this.y-n*this.rect.height/this.parent.parentElement.clientHeight}(this.isDownH||this.isDownV)&&(this.parent.onMovePens(),this.parent.canvasTemplate.init(),this.parent.canvasImage.init(),this.parent.canvasImageBottom.init(),this.parent.render())});se(this,"onMouseUp",e=>{!this.isDownH&&!this.isDownV||(this.isDownH=void 0,this.isDownV=void 0,this.scrollX<20?(this.scrollX=20,this.h.style.left=`${this.scrollX}px`):this.scrollX>this.parent.parentElement.clientWidth-this.hSize-20&&(this.scrollX=this.parent.parentElement.clientWidth-this.hSize-20,this.h.style.left=`${this.scrollX}px`),this.scrollY<20?(this.scrollY=20,this.v.style.top=`${this.scrollY}px`):this.scrollY>this.parent.parentElement.clientHeight-this.vSize-20&&(this.scrollY=this.parent.parentElement.clientHeight-this.vSize-20,this.v.style.top=`${this.scrollY}px`),this.resize())});this.parent=e,this.h=document.createElement("div"),this.v=document.createElement("div"),this.parent.externalElements.appendChild(this.h),this.parent.externalElements.appendChild(this.v),this.h.className="meta2d-scroll h",this.h.onmousedown=this.onMouseDownH,this.v.className="meta2d-scroll v",this.v.onmousedown=this.onMouseDownV,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp);let n;for(let r=0;r<document.styleSheets.length;r++)document.styleSheets[r].title==="le5le/scroll"&&(n=document.styleSheets[r]);if(!n){let r=document.createElement("style");r.type="text/css",r.title="le5le.com/scroll",document.head.appendChild(r),r=document.createElement("style"),r.type="text/css",document.head.appendChild(r),n=r.sheet,n.insertRule(".meta2d-scroll{position:absolute;width:8px;height:200px;background:#dddddd;border-radius:10px;z-index:20;cursor:default;}"),n.insertRule(".meta2d-scroll:hover{background:#cccccc;cursor:pointer}"),n.insertRule(".meta2d-scroll.v{right:0;top:calc(50% - 100px);}"),n.insertRule(".meta2d-scroll.h{bottom:2px;left:calc(50% - 100px);width:200px;height:8px;}")}this.init()}init(){this.isShow=!0,this.resize(),this.initPos()}canMouseMove(e){const n=this.parent.parent.getRect();return e<0&&n.y+this.parent.store.data.y>=0||e>0&&n.ey-this.parent.height+this.parent.store.data.y<=0}changeMode(){this.pageMode=!0,this.h.style.display="none",this.parent.parent.getRect().height<this.parent.height&&(this.v.style.display="none")}initPos(){this.scrollX=(this.parent.parentElement.clientWidth-this.hSize)/2,this.scrollY=(this.parent.parentElement.clientHeight-this.vSize)/2,this.h.style.left=`${this.scrollX}px`,this.v.style.top=`${this.scrollY}px`}resize(){this.rect=Wi(this.parent.store.data.pens),this.rect.width<1400&&(this.rect.width=1400),this.rect.height<900&&(this.rect.height=900),this.parent.store.data.x>0?this.rect.width+=this.parent.store.data.x+(this.rect.x>0?0:this.rect.x):this.rect.width-=this.parent.store.data.x+(this.rect.x>0?0:this.rect.x),this.parent.store.data.y>0?this.rect.height+=this.parent.store.data.y+(this.rect.y>0?0:this.rect.y):this.rect.height-=this.parent.store.data.y+(this.rect.y>0?0:this.rect.y),this.rect.width<1400&&(this.rect.width=1400),this.rect.height<900&&(this.rect.height=900),this.hSize=1e3*this.parent.parentElement.clientWidth/this.rect.width/3,this.vSize=1e3*this.parent.parentElement.clientHeight/this.rect.height/3,this.h.style.width=this.hSize+"px",this.v.style.height=this.vSize+"px"}show(){this.isShow=!0,this.h.style.display="block",this.v.style.display="block",document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}hide(){this.isShow=!1,this.h.style.display="none",this.v.style.display="none",this.destroy()}translate(e,n){e&&(this.scrollX-=e*this.parent.parentElement.clientWidth/this.rect.width,this.h.style.left=`${this.scrollX}px`),n&&(this.scrollY-=n*this.parent.parentElement.clientHeight/this.rect.height,this.v.style.top=`${this.scrollY}px`)}wheel(e){let n=10;e&&(n=-10),!(this.pageMode&&this.canMouseMove(n))&&(this.scrollY+=n,this.v.style.top=`${this.scrollY}px`,this.parent.store.data.y-=n*this.rect.height/this.parent.parentElement.clientHeight,this.parent.onMovePens(),this.parent.canvasTemplate.init(),this.parent.canvasImage.init(),this.parent.canvasImageBottom.init(),this.parent.render())}destroy(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}}class $b{constructor(e,n,r){se(this,"parentElement");se(this,"store");se(this,"isBottom");se(this,"canvas",document.createElement("canvas"));se(this,"otherOffsreen",uo());se(this,"offscreen",uo());se(this,"animateOffsScreen",uo());se(this,"fitOffscreen",uo());se(this,"fitFlag",!1);se(this,"currentFit");se(this,"activeFit");this.parentElement=e,this.store=n,this.isBottom=r,e.appendChild(this.canvas),this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0"}resize(e,n){this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.otherOffsreen.width=e,this.otherOffsreen.height=n,this.offscreen.width=e,this.offscreen.height=n,this.animateOffsScreen.width=e,this.animateOffsScreen.height=n,this.fitOffscreen.width=e,this.fitOffscreen.height=n,this.otherOffsreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.otherOffsreen.getContext("2d").textBaseline="middle",this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle",this.animateOffsScreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.animateOffsScreen.getContext("2d").textBaseline="middle",this.fitOffscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.fitOffscreen.getContext("2d").textBaseline="middle",this.init()}init(){this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.animateOffsScreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.fitOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height);for(const e of this.store.data.pens)this.hasImage(e)&&(e.calculative.imageDrawed=!1);this.isBottom?this.store.patchFlagsBackground=!0:this.store.patchFlagsTop=!0}clear(){this.otherOffsreen.getContext("2d").clearRect(0,0,this.otherOffsreen.width,this.otherOffsreen.height),this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.animateOffsScreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.fitOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)}hasImage(e){return e.calculative.hasImage=e.calculative&&e.calculative.inView&&(this.isBottom&&e.canvasLayer===on.CanvasImageBottom||!this.isBottom&&e.canvasLayer===on.CanvasImage)&&e.image&&e.calculative.img&&e.name!=="gif",e.calculative.hasImage}render(){var a;let e=!1,n=!1;for(const l of this.store.data.pens)this.hasImage(l)&&(this.store.animates.has(l)?n=!0:l.calculative.imageDrawed||(e=!0),l.parentId&&this.store.animates.has(hi(l,!0))&&(n=!0));const r=this.store.patchFlagsBackground,i=this.store.patchFlagsTop;if(i&&!this.isBottom){const l=this.otherOffsreen.getContext("2d");l.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderRule(l)}if(this.store.patchFlagsLast&&this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),e){const l=this.offscreen.getContext("2d");l.save(),l.clearRect(0,0,this.canvas.width,this.canvas.height),l.translate(this.store.data.x,this.store.data.y);for(const s of this.store.data.pens)!s.calculative.hasImage||this.store.animates.has(s)||this.store.animates.has(hi(s,!0))||s.canvasLayer!==on.CanvasTemplate&&(s.calculative.imageDrawed=!0,l.save(),za(l,s),s.calculative.rotate&&Oo(l,s),Ha(l,s),el(l,s),l.restore());l.restore()}if(n){const l=this.animateOffsScreen.getContext("2d");l.save(),l.clearRect(0,0,this.canvas.width,this.canvas.height),l.translate(this.store.data.x,this.store.data.y);for(const s of this.store.animates)s.calculative.hasImage&&s.canvasLayer!==on.CanvasTemplate&&(s.visible===!1||s.calculative.visible===!1||(s.calculative.imageDrawed=!0,l.save(),za(l,s),s.calculative.rotate&&Oo(l,s),Ha(l,s),el(l,s),l.restore()));for(const s of this.store.data.pens)!s.calculative.hasImage||!s.parentId||s.canvasLayer!==on.CanvasTemplate&&(s.visible===!1||s.calculative.visible===!1||this.store.animates.has(hi(s,!0))&&(s.calculative.imageDrawed=!0,l.save(),za(l,s),s.calculative.rotate&&Oo(l,s),Ha(l,s),el(l,s),l.restore()));l.restore()}if(!this.isBottom&&!this.store.data.locked&&this.fitFlag){const l=(this.store.data.width||this.store.options.width)*this.store.data.scale,s=(this.store.data.height||this.store.options.height)*this.store.data.scale,u=this.store.data.origin.x+this.store.data.x||this.store.options.x||0,c=this.store.data.origin.y+this.store.data.y||this.store.options.y||0,f=this.fitOffscreen.getContext("2d");f.save(),f.clearRect(0,0,this.canvas.width,this.canvas.height),f.fillStyle="#ffffff66",f.strokeStyle=this.store.styles.activeColor,(a=this.store.data.fits)==null||a.forEach((v,g)=>{f.fillRect(u+l*v.x,c+s*v.y,l*v.width,s*v.height),v.active&&f.strokeRect(u+l*v.x,c+s*v.y,l*v.width,s*v.height)}),f.restore()}if(e||n||r&&this.isBottom||i&&!this.isBottom){const l=this.canvas.getContext("2d");l.clearRect(0,0,this.canvas.width,this.canvas.height),this.isBottom&&(this.store.patchFlagsBackground=!1),l.drawImage(this.offscreen,0,0,this.canvas.width,this.canvas.height),l.drawImage(this.animateOffsScreen,0,0,this.canvas.width,this.canvas.height),this.isBottom||(l.drawImage(this.otherOffsreen,0,0,this.canvas.width,this.canvas.height),this.store.patchFlagsTop=!1,!this.store.data.locked&&this.fitFlag&&l.drawImage(this.fitOffscreen,0,0,this.canvas.width,this.canvas.height))}}renderRule(e){var S,E,P,$,_,M,B,H;const{data:n,options:r}=this.store,{rule:i,ruleColor:o,scale:a,origin:l}=n;if(!(i??r.rule))return;const s=a*10;e.save();const u=o||r.ruleColor||"#ccc";e.strokeStyle=Ud(u,.7);const c=l.x+n.x,f=l.y+n.y,{width:v,height:g}=this.canvas;let m=((S=r.ruleOptions)==null?void 0:S.height)||20;(E=r.ruleOptions)!=null&&E.background&&(e.beginPath(),e.fillStyle=(P=r.ruleOptions)==null?void 0:P.background,e.rect(0,0,v,m),e.fill(),e.rect(0,0,m,g),e.fill()),($=r.ruleOptions)!=null&&$.underline&&(e.beginPath(),e.fillStyle=Ud(u,.7),e.moveTo(0,m),e.lineTo(v,m),e.stroke(),e.moveTo(m,0),e.lineTo(m,g),e.stroke());let y=m/4;((_=r.ruleOptions)==null?void 0:_.baseline)==="bottom"&&(y=m*3/4),e.beginPath(),e.lineWidth=m/2,e.lineDashOffset=-c%s,e.setLineDash([1,s-1]),e.moveTo(0,y),e.lineTo(v,y),e.stroke(),e.beginPath(),e.lineDashOffset=-f%s,e.moveTo(y,0),e.lineTo(y,g),e.stroke(),e.strokeStyle=u,e.beginPath(),e.lineWidth=m,e.lineDashOffset=-c%(s*10),e.setLineDash([1,s*10-1]),e.moveTo(0,m/2),e.lineTo(v,m/2),e.stroke(),e.beginPath(),e.lineDashOffset=-f%(s*10),e.moveTo(m/2,0),e.lineTo(m/2,g),e.stroke(),e.beginPath(),e.fillStyle=((M=r.ruleOptions)==null?void 0:M.textColor)||e.strokeStyle;let p=0-Math.floor(c/s/10)*100,C=((B=r.ruleOptions)==null?void 0:B.textTop)||16,x=((H=r.ruleOptions)==null?void 0:H.textLeft)||4;c<0&&(p-=100);for(let k=c%(s*10);k<v;k+=10*s,p+=100)s<3&&p%500||e.fillText(p.toString(),k+x,C);p=0-Math.floor(f/s/10)*100,f<0&&(p-=100);for(let k=f%(s*10);k<g;k+=10*s,p+=100)s<3&&p%500||(e.save(),e.beginPath(),e.translate(C,k-x),e.rotate(270*Math.PI/180),e.fillText(p.toString(),0,0),e.restore());e.restore()}}class d${constructor(e,n,r){se(this,"parentCanvas");se(this,"parentElement");se(this,"store");se(this,"canvas",document.createElement("canvas"));se(this,"magnifierScreen",uo());se(this,"offscreen",uo());se(this,"domOffscreen",uo());se(this,"magnifierSize",300);se(this,"magnifier");this.parentCanvas=e,this.parentElement=n,this.store=r,n.appendChild(this.canvas),this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.pointerEvents="none"}resize(e,n){this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.offscreen.width=e,this.offscreen.height=n,this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle",this.domOffscreen.width=e,this.domOffscreen.height=n,this.domOffscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.domOffscreen.getContext("2d").textBaseline="middle",this.magnifierScreen.width=this.magnifierSize+5,this.magnifierScreen.height=this.magnifierSize+5}renderMagnifier(){if(!this.magnifier)return;const e=this.magnifierSize/2,n=this.magnifierSize+5,r=this.magnifierScreen.getContext("2d");r.clearRect(0,0,n,n),r.lineWidth=5,r.save(),r.translate(2.5,2.5),r.save(),r.arc(e,e,e,0,Math.PI*2,!1),r.clip(),r.translate(-e,-e),r.scale(2,2);const i={x:(this.parentCanvas.mousePos.x+this.store.data.x)*this.store.dpiRatio,y:(this.parentCanvas.mousePos.y+this.store.data.y)*this.store.dpiRatio};[this.parentCanvas.canvasTemplate.bgOffscreen,this.parentCanvas.canvasTemplate.offscreen,this.parentCanvas.canvasImageBottom.offscreen,this.parentCanvas.canvasImageBottom.animateOffsScreen,this.parentCanvas.offscreen,this.parentCanvas.canvasImage.offscreen,this.parentCanvas.canvasImage.animateOffsScreen,this.domOffscreen].forEach(s=>{r.drawImage(s,i.x-e,i.y-e,this.magnifierSize,this.magnifierSize,0,0,this.magnifierSize,this.magnifierSize)}),r.restore(),r.beginPath();const a=r.createRadialGradient(e,e,e-5,e,e,e);a.addColorStop(0,"rgba(0,0,0,0.2)"),a.addColorStop(.8,"rgb(200,200,200)"),a.addColorStop(.9,"rgb(200,200,200)"),a.addColorStop(1,"rgba(200,200,200,0.9)"),r.strokeStyle=a,r.arc(e,e,e,0,Math.PI*2,!1),r.stroke(),r.restore(),this.offscreen.getContext("2d").drawImage(this.magnifierScreen,0,0,this.magnifierSize+5,this.magnifierSize+5,(i.x-e-2.5)/this.store.dpiRatio,(i.y-e-2.5)/this.store.dpiRatio,(this.magnifierSize+5)/this.store.dpiRatio,(this.magnifierSize+5)/this.store.dpiRatio)}updateDomOffscreen(){const e=this.domOffscreen.getContext("2d");e.clearRect(0,0,this.domOffscreen.width,this.domOffscreen.height);for(const n of this.store.data.pens)if((n.externElement||n.name==="gif")&&n.calculative.img){e.save(),e.translate(this.store.data.x,this.store.data.y);const{x:r,y:i,width:o,height:a}=n.calculative.worldRect;e.drawImage(n.calculative.img,r,i,o,a),e.restore()}}render(){this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.renderMagnifier();const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.offscreen,0,0,this.canvas.width,this.canvas.height)}}function cC(t){if(t.data.locked)throw new Error("canvas is locked")}class f${constructor(e,n){se(this,"parentElement");se(this,"box");se(this,"iframe");se(this,"dialog");se(this,"close");se(this,"title");se(this,"body");se(this,"x");se(this,"y");se(this,"url");se(this,"meta2dDiv");se(this,"dialogMeta2d");se(this,"store");this.parentElement=e,this.store=n,this.box=document.createElement("div"),this.dialog=document.createElement("div");let r=document.createElement("div");this.title=document.createElement("div"),this.close=document.createElement("span"),this.close.innerHTML=`
      <svg fill="none" viewBox="0 0 16 16" width="1em" height="1em">
      <path
        fill="currentColor"
        d="M8 8.92L11.08 12l.92-.92L8.92 8 12 4.92 11.08 4 8 7.08 4.92 4 4 4.92 7.08 8 4 11.08l.92.92L8 8.92z"
        fill-opacity="0.9"
      ></path>
    </svg>`,this.body=document.createElement("div"),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("frameborder","0"),this.meta2dDiv=document.createElement("div"),this.box.className="meta2d-dialog_mask",this.dialog.className="meta2d-dialog",this.body.className="meta2d-dialog_body",r.className="meta2d-dialog_header",this.title.className="meta2d-dialog-content",this.close.className="meta2d-dialog-close",this.meta2dDiv.className="meta2d-dialog-meta2d",r.appendChild(this.title),r.appendChild(this.close),this.body.appendChild(this.iframe),this.body.appendChild(this.meta2dDiv),this.dialog.appendChild(r),this.dialog.appendChild(this.body),this.box.appendChild(this.dialog),e.appendChild(this.box),this.dialog.onclick=o=>{o.stopPropagation()},this.box.onclick=()=>{this.hide()},this.close.onclick=()=>{this.hide()};let i;for(let o=0;o<document.styleSheets.length;o++)document.styleSheets[o].title==="le5le.com/dialog"&&(i=document.styleSheets[o]);if(!i){let o=document.createElement("style");o.type="text/css",o.title="le5le.com/dialog",document.head.appendChild(o),o=document.createElement("style"),o.type="text/css",document.head.appendChild(o),i=o.sheet,i.insertRule(`.meta2d-dialog_mask {
        display: none;
        position: absolute;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 100%;
        background-color: #0000006f;
        z-index: 9999;`),i.insertRule(`.meta2d-dialog_mask .meta2d-dialog {
            position: absolute;
            top: 15vh;
            left: 10%;
            width: 80%;
            height:420px;
            padding: 16px 20px;
            border-radius: 9px;
            z-index: 19999;
            overflow: auto;
        }`),i.insertRule(`.meta2d-dialog_header {
            display: flex;
            position: relative;
            z-index: 999;
        }`),i.insertRule(`.meta2d-dialog-content {
            width: calc(100% - 20px);
            font-weight: 600;
            font-size: 14px;
            color: #bdc7db;
            padding-bottom:8px;
        }`),i.insertRule(`.meta2d-dialog-close {
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            color: #617b91;
            position: absolute;
            right:20px;
            top:2px;
        }`),i.insertRule(`.meta2d-dialog-close svg{
            width: 18px;
            height: 18px;
        }`),i.insertRule(`.meta2d-dialog-close :hover{
            cursor: pointer;
        }`),i.insertRule(`.meta2d-dialog_body{
          width: 100%;
          height: 100%;
        } `),i.insertRule(`.meta2d-dialog_body iframe{
            width: 100%;
            height: 100%;
        }`),i.insertRule(`.meta2d-dialog_body .meta2d-dialog-meta2d{
          width: 100%;
          height: 100%;
          display: none;
      }`)}}async show(e,n,r,i){if(!n)return;const o=this.isUrl(n);if(o?(this.meta2dDiv.style.display="none",this.iframe.style.display="block"):(this.iframe.style.display="none",this.meta2dDiv.style.display="block"),o&&n!==this.url&&(this.iframe.setAttribute("src",n),this.url=n),e&&(this.title.innerText=e),e?(this.dialog.style.padding="16px 20px",this.title.style.display="block",this.body.style.height="calc(100% - 26px)",this.close.style.top="2px",this.close.style.right="2px",this.body.style.background="#1e2430"):(this.dialog.style.padding="0px",this.title.style.display="none",this.body.style.height="100%",this.body.style.overflow="hidden",this.close.style.top="18px",this.close.style.right="20px",this.body.style.background="transparent"),r&&(this.dialog.style.width=r.width?r.width+"px":"80%",this.dialog.style.height=r.height?r.height+"px":"420px",this.dialog.style.top=r.y?r.y+"px":r.height?`calc( 50% - ${r.height/2}px )`:"15vh",this.dialog.style.left=r.x?r.x+"px":`calc( 50% - ${r.width?r.width/2+"px":"40%"} )`),o&&i){let a=0;const l=setInterval(()=>{this.iframe.contentWindow.meta2d&&(clearInterval(l),setTimeout(()=>{this.iframe.contentWindow.postMessage(JSON.stringify({name:"dialog",data:i}),"*")},100)),a++,a>50&&clearInterval(l)},300)}if((!this.dialogMeta2d||o)&&(this.box.style.display="block"),!o){this.meta2dDiv.style.display="block",this.dialogMeta2d||(globalThis.mainMeta2d=globalThis.meta2d,this.dialogMeta2d=new vC(this.meta2dDiv),globalThis.meta2d=globalThis.mainMeta2d);const a=await O1(this.store,n);a&&(this.box.style.display="block",this.dialogMeta2d.clear(!0),this.dialogMeta2d.open(a,!1),this.dialogMeta2d.lock(1),this.dialogMeta2d.resize(),this.dialogMeta2d.fitView(!0,0),this.dialogMeta2d.render(!0))}}hide(){this.box.style.display="none"}isUrl(e){return!!(e.startsWith("http")||e.includes("?")||e.includes("/"))}destroy(){var e;this.dialog.onclick=void 0,this.box.onclick=void 0,this.close.onclick=void 0,(e=this.dialogMeta2d)==null||e.destroy(!0)}}class Qd{constructor(e){se(this,"parentElement");se(this,"box");se(this,"currentAnchor");this.parentElement=e,this.box=document.createElement("div"),this.box.className="meta2d-title",e.appendChild(this.box);let n;for(let r=0;r<document.styleSheets.length;r++)document.styleSheets[r].title==="le5le.com/title"&&(n=document.styleSheets[r]);if(!n){let r=document.createElement("style");r.type="text/css",r.title="le5le.com/title",document.head.appendChild(r),r=document.createElement("style"),r.type="text/css",document.head.appendChild(r),n=r.sheet,n.insertRule(".meta2d-title{position:absolute;padding:0;z-index:10;left: -9999px;top: -9999px;background:#fff;color:#000; cursor: crosshair;border: 1px solid black;}")}}static getTitle(e){}setText(e){this.box.innerText=e.title}updateText(e){var n;((n=this.currentAnchor)==null?void 0:n.id)===e.id&&(Qd.titleEmpty(e)||(this.setText(e),this.changePositionByAnchor(e)))}changePositionByAnchor(e){this.box.style.left=e.x+10+"px",this.box.style.top=e.y+10+"px"}static titleEmpty(e){return!e.title}show(e,n){if(Qd.titleEmpty(e))return;this.currentAnchor=e,this.setText(e);let r={x:n.calculative.canvas.store.data.x+e.x,y:n.calculative.canvas.store.data.y+e.y};this.changePositionByAnchor(r)}hide(){this.box.style.left="-9999px",this.box.innerText="",this.currentAnchor=null}destroy(){this.box.onmouseleave=null}}class h${constructor(e,n){se(this,"parentElement");se(this,"store");se(this,"canvas",document.createElement("canvas"));se(this,"offscreen",uo());se(this,"bgOffscreen",uo());se(this,"patchFlags");se(this,"bgPatchFlags");se(this,"fit");this.parentElement=e,this.store=n,e.appendChild(this.canvas),this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0"}resize(e,n){this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.bgOffscreen.width=e,this.bgOffscreen.height=n,this.offscreen.width=e,this.offscreen.height=n,this.bgOffscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.bgOffscreen.getContext("2d").textBaseline="middle",this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle",this.init()}init(){this.bgOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.patchFlags=!0,this.bgPatchFlags=!0}hidden(){this.canvas.style.display="none"}show(){this.canvas.style.display="block"}clear(){this.bgOffscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.offscreen.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.bgPatchFlags=!0,this.patchFlags=!0}render(){if(this.bgPatchFlags){const e=this.bgOffscreen.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height);const n=this.store.data.width||this.store.options.width,r=this.store.data.height||this.store.options.height,i=this.store.data.x||this.store.options.x||0,o=this.store.data.y||this.store.options.y||0,a=this.store.data.background||this.store.styles.background;a&&(e.save(),e.fillStyle=a,e.globalAlpha=this.store.data.globalAlpha??this.store.options.globalAlpha,n&&r&&!this.fit?(e.shadowOffsetX=this.store.options.shadowOffsetX,e.shadowOffsetY=this.store.options.shadowOffsetY,e.shadowBlur=this.store.options.shadowBlur,e.shadowColor=this.store.options.shadowColor,e.fillRect(this.store.data.origin.x+i,this.store.data.origin.y+o,n*this.store.data.scale,r*this.store.data.scale)):e.fillRect(0,0,this.canvas.width,this.canvas.height),e.restore()),n&&r&&this.store.bkImg&&(e.save(),this.fit?e.drawImage(this.store.bkImg,0,0,this.canvas.offsetWidth,this.canvas.offsetHeight):e.drawImage(this.store.bkImg,this.store.data.origin.x+i,this.store.data.origin.y+o,n*this.store.data.scale,r*this.store.data.scale),e.restore()),this.renderGrid(e)}if(this.patchFlags){const e=this.offscreen.getContext("2d");e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.translate(this.store.data.x,this.store.data.y);for(const n of this.store.data.pens)isFinite(n.x)&&n.canvasLayer===on.CanvasTemplate&&n.calculative.inView&&(Ta(e,n),n.image&&n.name!=="gif"&&n.calculative.img&&(e.save(),za(e,n),n.calculative.rotate&&Oo(e,n),Ha(e,n),el(e,n),e.restore()));e.restore()}if(this.patchFlags||this.bgPatchFlags){const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),e.drawImage(this.bgOffscreen,0,0,this.canvas.width,this.canvas.height),e.drawImage(this.offscreen,0,0,this.canvas.width,this.canvas.height),this.patchFlags=!1,this.bgPatchFlags=!1}}renderGrid(e){const{data:n,options:r}=this.store,{grid:i,gridRotate:o,gridColor:a,gridSize:l,scale:s,origin:u}=n;if(!(i??r.grid))return;e.save();const c=(n.width||r.width)*s,f=(n.height||r.height)*s,v=(n.x||r.x||0)+u.x,g=(n.y||r.y||0)+u.y;e.lineWidth=1,e.strokeStyle=a||r.gridColor,e.beginPath();let m=(l||r.gridSize)*s;if(m=m<0?0:m,!c||!f){const y=this.store.dpiRatio,p=this.canvas.width/y,C=this.canvas.height/y,x=v/m,S=g/m,E=m*10,P=v-Math.ceil(x)*m,$=g-Math.ceil(S)*m,_=p+P+E,M=C+$+E;if(o){const B=o*Math.PI/180,H=B+Math.PI/2,k={x:Math.sin(B),y:-Math.cos(B)},T={x:Math.sin(H),y:-Math.cos(H)};Tb(e,p,C,m,k),Tb(e,p,C,m,T)}else{for(let B=P;B<=_;B+=m)e.moveTo(B,$),e.lineTo(B,C+$+E);for(let B=$;B<=M;B+=m)e.moveTo(P,B),e.lineTo(p+P+E,B)}}else if(o){const y=o*Math.PI/180,p=y+Math.PI/2,C={x:Math.sin(y),y:-Math.cos(y)},x={x:Math.sin(p),y:-Math.cos(p)};_b(e,v,g,c,f,m,C),_b(e,v,g,c,f,m,x)}else{const y=c+v,p=f+g;for(let C=v;C<=y;C+=m)e.moveTo(C,g),e.lineTo(C,f+g);for(let C=g;C<=p;C+=m)e.moveTo(v,C),e.lineTo(c+v,C)}e.stroke(),e.restore()}}function Tb(t,e,n,r,i,o){const a=[{x:0,y:0},{x:e,y:0},{x:e,y:n},{x:0,y:n}];let l=1/0,s=-1/0;a.forEach(c=>{const f=c.x*i.x+c.y*i.y;l=Math.min(l,f),s=Math.max(s,f)});const u=Math.ceil((s-l)/r);t.beginPath();for(let c=0;c<=u;c++){const f=l+c*r;let v=[];for(let g=0;g<a.length;g++){const m=a[g],y=a[(g+1)%a.length],p=i.x*(y.y-m.y)-i.y*(y.x-m.x);if(Math.abs(p)>1e-6){const C=(f-m.x*i.x-m.y*i.y)/(i.x*(y.x-m.x)+i.y*(y.y-m.y));if(C>=0&&C<=1){const x=m.x+C*(y.x-m.x),S=m.y+C*(y.y-m.y);v.push({x,y:S})}}}v.length>=2&&(t.moveTo(v[0].x,v[0].y),t.lineTo(v[1].x,v[1].y))}t.stroke()}function _b(t,e,n,r,i,o,a,l){const s=[{x:e,y:n},{x:e+r,y:n},{x:e+r,y:n+i},{x:e,y:n+i}];let u=1/0,c=-1/0;s.forEach(m=>{const y=m.x*a.x+m.y*a.y;u=Math.min(u,y),c=Math.max(c,y)});const f=c-u,v=Math.ceil(f/o),g=u;t.beginPath();for(let m=0;m<=v;m++){const y=g+m*o,p=[];for(let C=0;C<s.length;C++){const x=s[C],S=s[(C+1)%4],E=S.x-x.x,P=S.y-x.y,$=a.x*P-a.y*E;if(Math.abs($)>1e-6){const _=(y-x.x*a.x-x.y*a.y)/(a.x*E+a.y*P);_>=0&&_<=1&&p.push({x:x.x+_*E,y:x.y+_*P})}}p.length>=2&&(t.moveTo(p[0].x,p[0].y),t.lineTo(p[1].x,p[1].y))}t.stroke()}const v$={info:{icon:'<svg fill="none" viewBox="0 0 24 24"><path fill="#0052d9" d="M12 23a11 11 0 100-22 11 11 0 000 22zM11 8.5v-2h2v2h-2zm2 1.5v7.5h-2V10h2z"></path></svg>'}};class g${constructor(e,n){se(this,"parentElement");se(this,"store");se(this,"box");se(this,"text");se(this,"arrowUp");se(this,"arrowDown");se(this,"icon");se(this,"confirm");se(this,"cancel");se(this,"x");se(this,"y");this.parentElement=e,this.store=n,this.box=document.createElement("div"),this.text=document.createElement("div"),this.arrowUp=document.createElement("div"),this.arrowDown=document.createElement("div"),this.icon=document.createElement("div"),this.confirm=document.createElement("button"),this.cancel=document.createElement("button"),this.box.className="meta2d-popconfirm",this.text.className="text",this.arrowUp.className="arrow",this.arrowDown.className="arrow down",this.icon.className="icon",this.confirm.className="confirm",this.cancel.className="cancel",this.confirm.innerHTML="确定",this.cancel.innerHTML="取消",this.icon.innerHTML=v$.info.icon,this.box.appendChild(this.text),this.box.appendChild(this.arrowUp),this.box.appendChild(this.arrowDown),this.box.appendChild(this.confirm),this.box.appendChild(this.cancel),this.box.appendChild(this.icon),e.appendChild(this.box);let r;for(let i=0;i<document.styleSheets.length;i++)document.styleSheets[i].title==="le5le.com/popconfirm"&&(r=document.styleSheets[i]);if(!r){let i=document.createElement("style");i.type="text/css",i.title="le5le.com/popconfirm",document.head.appendChild(i),i=document.createElement("style"),i.type="text/css",document.head.appendChild(i),r=i.sheet,r.insertRule(".meta2d-popconfirm{position:absolute;z-index:999;left: -9999px;top: -9999px;padding:16px;max-width:400px;background:#fff;border-radius:6px;box-shadow:0 3px 14px 2px rgba(0, 0, 0, .05),0 8px 10px 1px rgba(0, 0, 0, 6%),0 5px 5px -3px rgba(0, 0, 0, 10%);}"),r.insertRule(".meta2d-popconfirm .text{outline:none;padding:0px 0px 40px 28px;border-radius:4px;color:rgba(0, 0, 0, 0.9);overflow-y:auto;line-height:22px;font-size:13px;}"),r.insertRule(".meta2d-popconfirm .arrow{position:absolute;border:10px solid transparent;background:transparent;top:-18px;left:50%;transform:translateX(-50%)}"),r.insertRule(".meta2d-popconfirm .arrow.down{top:initial;bottom: -18px;}"),r.insertRule(".meta2d-popconfirm .icon{position:absolute;width:22px;height:22px;left:16px;top:16px;}"),r.insertRule(".meta2d-popconfirm .confirm{position:absolute;right:16px;bottom:16px;width:40px;height:24px;text-align:center;background:#4582e6;color:#fff;border-radius:3px;border-color:transparent}"),r.insertRule(".meta2d-popconfirm .confirm:hover{background:#003cab;}"),r.insertRule(".meta2d-popconfirm .cancel{position:absolute;right:64px;bottom:16px;width:40px;height:24px;text-align:center;background:#dcdcdc;color:rgba(0, 0, 0, 0.9);border-radius:3px;border-color:transparent}"),r.insertRule(".meta2d-popconfirm .cancel:hover{background:#a6a6a6;}")}}show(e,n){if(!e)return;const r=this.box.getBoundingClientRect(),i=e.calculative.worldRect;let o=e.calculative.canvas.store.data.x+n.x-r.width/2,a=e.calculative.canvas.store.data.y+n.y-r.height-20;e.type||(o=e.calculative.canvas.store.data.x+i.x-(r.width-i.width)/2,a=e.calculative.canvas.store.data.y+i.ey-r.height-i.height),a>0?(this.arrowUp.style.borderBottomColor="transparent",this.arrowDown.style.borderTopColor="#fff",a-=10):(a+=r.height+i.height+5,a+=10,this.arrowUp.style.borderBottomColor="#fff",this.arrowDown.style.borderTopColor="transparent"),this.x=o,this.y=a,this.box.style.left=this.x+"px",this.box.style.top=this.y+"px"}hide(){this.x=-9999,this.box.style.left="-9999px"}showModal(e,n,r){return new Promise(i=>{this.text.innerHTML=r||"确认执行操作吗？",this.show(e,n),this.confirm.onclick=()=>{i(!0),this.hide()},this.cancel.onclick=()=>{i(!1),this.hide()}})}destroy(){this.box=null}}const Yr="-moving";class Ab{constructor(e,n,r){se(this,"parent");se(this,"parentElement");se(this,"store");se(this,"canvas",document.createElement("canvas"));se(this,"offscreen",uo());se(this,"width");se(this,"height");se(this,"externalElements",document.createElement("div"));se(this,"clientRect");se(this,"canvasRect");se(this,"activeRect");se(this,"initActiveRect");se(this,"dragRect");se(this,"lastRotate",0);se(this,"sizeCPs");se(this,"activeInitPos");se(this,"hoverType",kt.None);se(this,"resizeIndex",0);se(this,"mouseDown");se(this,"hotkeyType");se(this,"mouseRight");se(this,"addCaches");se(this,"touchCenter");se(this,"initTouchDis");se(this,"initScale");se(this,"touchScaling");se(this,"touchMoving");se(this,"startTouches");se(this,"lastOffsetX",0);se(this,"lastOffsetY",0);se(this,"drawingLineName");se(this,"drawLineFns",[...UI]);se(this,"drawingLine");se(this,"pencil");se(this,"pencilLine");se(this,"movingPens");se(this,"patchFlagsLines",new Set);se(this,"dock");se(this,"prevAnchor");se(this,"nextAnchor");se(this,"lastMouseTime",0);se(this,"hoverTimer",0);se(this,"fitTimer",0);se(this,"willInactivePen");se(this,"patchFlags",!1);se(this,"lastRender",0);se(this,"touchStart",0);se(this,"touchStartTimer");se(this,"timer");se(this,"lastAnimateRender",0);se(this,"animateRendering",!1);se(this,"renderTimer");se(this,"initPens");se(this,"pointSize",8);se(this,"pasteOffset",!0);se(this,"opening",!1);se(this,"maxZindex",5);se(this,"canMoveLine",!1);se(this,"randomIdObj");se(this,"keyOptions");se(this,"beforeAddPen");se(this,"beforeAddPens");se(this,"beforeAddAnchor");se(this,"beforeRemovePens");se(this,"beforeRemoveAnchor");se(this,"customResizeDock");se(this,"customMoveDock");se(this,"inputParent",document.createElement("div"));se(this,"inputDiv",document.createElement("div"));se(this,"dropdown",document.createElement("ul"));se(this,"tooltip");se(this,"popconfirm");se(this,"title");se(this,"mousePos",{x:0,y:0});se(this,"scroll");se(this,"movingAnchor");se(this,"canvasTemplate");se(this,"canvasImage");se(this,"canvasImageBottom");se(this,"magnifierCanvas");se(this,"dialog");se(this,"autoPolylineFlag",!1);se(this,"stopPropagation",e=>{e.stopPropagation()});se(this,"curve",Nk);se(this,"polyline",Wk);se(this,"mind",Dk);se(this,"line",Bk);se(this,"onCopy",e=>{this.store.options.disableClipboard||e.target!==this.externalElements&&e.target!==document.body&&e.target.offsetParent!==this.externalElements||this.copy()});se(this,"onCut",e=>{this.store.options.disableClipboard||e.target!==this.externalElements&&e.target!==document.body&&e.target.offsetParent!==this.externalElements||this.cut()});se(this,"onPaste",async e=>{if(this.store.data.locked||this.store.options.disableClipboard||e.target!==this.externalElements&&e.target!==document.body&&e.target.offsetParent!==this.externalElements)return;let n;if(navigator.clipboard&&e.clipboardData){const r=e.clipboardData.items;if(r){for(let i=0;i<r.length;i++)if(r[i].type.indexOf("image")!==-1&&r[i].getAsFile()){n=!0;break}}}if(n){const r=e.clipboardData.items;if(r){for(let i=0;i<r.length;i++)if(r[i].type.indexOf("image")!==-1&&r[i].getAsFile()){const{x:o,y:a}=this.mousePos,l=r[i].getAsFile();let s=r[i].type.slice(6)==="gif"?"gif":"image";if(l!==null){const u=s==="gif",c=await this.fileToPen(l,u);c.height=c.height/c.width*100,c.width=100,c.x=o-50/2,c.y=a-c.height/c.width*50,c.externElement=u,this.addPens([c]),this.active([c]),this.copy([c])}}}}else this.paste()});se(this,"onMessage",e=>{if(typeof e.data!="string"||!e.data||e.data.startsWith("setImmediate")||e.data.startsWith("webpackHotUpdate"))return;let n=JSON.parse(e.data);typeof n=="object"?this.parent.doMessageEvent(n.name,JSON.stringify(n.data)):this.parent.doMessageEvent(n)});se(this,"onwheel",e=>{if(this.inputDiv.contentEditable==="true"||this.drawingLine||this.pencil)return;if(this.store.hover&&this.store.hover.onWheel){this.store.hover.onWheel(this.store.hover,e);return}if(this.store.data.disableScale||this.store.options.disableScale||(e.preventDefault(),e.stopPropagation(),this.mouseDown&&(this.hoverType===kt.Node||this.hoverType===kt.Line))||this.store.data.locked===Xt.Disable||this.store.data.locked===Xt.DisableScale||this.store.data.locked===Xt.DisableMoveScale)return;if(!e.ctrlKey&&Math.abs(e.wheelDelta)<100&&e.deltaY.toString().indexOf(".")===-1){if(this.store.options.scroll&&!e.metaKey&&this.scroll){this.scroll.wheel(e.deltaY<0);return}const o=this.store.data.scale||1;this.translate(-e.deltaX/o,-e.deltaY/o);return}if(Math.abs(e.wheelDelta)>100&&this.store.options.scroll&&this.scroll&&!this.store.options.scrollButScale&&!(e.ctrlKey||e.metaKey)){this.scroll.wheel(e.deltaY<0);return}if(this.store.options.disableTouchPadScale)return;let n=.015;if(this.store.options.scaleOff)n=this.store.options.scaleOff,e.deltaY>0&&(n=-this.store.options.scaleOff);else if(/mac os /i.test(navigator.userAgent))e.ctrlKey?e.deltaY>0&&(n*=-1):n*=e.wheelDeltaY/240;else{let a=.2;e.deltaY.toString().indexOf(".")!==-1&&(a=.01),e.deltaY>0?n=-a:n=a}let{offsetX:r,offsetY:i}=e;this.scale(this.store.data.scale+n,{x:r,y:i}),this.externalElements.focus()});se(this,"onkeydown",e=>{var o,a,l;if(this.store.data.locked>=Xt.DisableEdit&&e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"&&!e.target.dataset.meta2dIgnore&&this.store.active.forEach(s=>{var u;(u=s.onKeyDown)==null||u.call(s,s,e.key)}),this.store.data.locked>=Xt.DisableEdit||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.dataset.meta2dIgnore||this.store.options.unavailableKeys.includes(e.key))return;this.keyOptions||(this.keyOptions={}),this.keyOptions.altKey=e.altKey,this.keyOptions.shiftKey=e.shiftKey,this.keyOptions.ctrlKey=e.ctrlKey,this.keyOptions.metaKey=e.metaKey,this.keyOptions.F=!1,(e.key==="F"||e.key==="f")&&(this.keyOptions.F=!0);let n=10,r=10,i=null;if(this.store.options.strictScope){const s=this.store.data.width||this.store.options.width,u=this.store.data.height||this.store.options.height;s&&u&&(i={x:this.store.data.origin.x,y:this.store.data.origin.y,width:s*this.store.data.scale,height:u*this.store.data.scale})}switch(e.key){case" ":this.hotkeyType=Sn.Translate;break;case"Control":this.drawingLine?this.drawingLine.calculative.drawlineH=!this.drawingLine.calculative.drawlineH:this.hotkeyType||(this.patchFlags=!0,this.hotkeyType=Sn.Select);break;case"Meta":break;case"Shift":this.store.active.length===1&&this.store.active[0].type&&this.store.activeAnchor?this.toggleAnchorHand():this.hotkeyType||(this.patchFlags=!0,this.store.options.resizeMode||(this.hotkeyType=Sn.Resize));break;case"Alt":if(!e.ctrlKey&&!e.shiftKey&&this.drawingLine){const s=gn(this.drawingLine);s!==this.drawingLine.calculative.activeAnchor?(jm(this.drawingLine),this.drawingLine.calculative.worldAnchors.push(s)):this.drawingLine.calculative.worldAnchors.push({x:s.x,y:s.y});const u=this.drawLineFns.indexOf(this.drawingLineName);this.drawingLineName=this.drawLineFns[(u+1)%this.drawLineFns.length],this.drawingLine.lineName=this.drawingLineName,this.drawline(),this.patchFlags=!0}e.preventDefault();break;case"a":case"A":e.ctrlKey||e.metaKey?(this.active(this.store.data.pens.filter(s=>!s.parentId&&s.locked!==Xt.Disable)),e.preventDefault()):this.toggleAnchorMode();break;case"Delete":case"Backspace":if(this.canvasImage.fitFlag&&this.canvasImage.activeFit){this.deleteFit();break}!this.store.data.locked&&this.delete();break;case"ArrowLeft":if(this.movingAnchor){this.translateAnchor(-1,0);break}if(n=-1,e.shiftKey&&(n=-5),(e.ctrlKey||e.metaKey)&&(n=-10),n=n*this.store.data.scale,this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x+n,y:this.store.activeAnchor.y},{});break}i&&this.activeRect.x+n<i.x&&(n=i.x-this.activeRect.x),this.translatePens(this.store.active,n,0);break;case"ArrowUp":if(this.movingAnchor){this.translateAnchor(0,-1);break}if(r=-1,e.shiftKey&&(r=-5),(e.ctrlKey||e.metaKey)&&(r=-10),r=r*this.store.data.scale,i&&this.activeRect.y+r<i.y&&(r=i.y-this.activeRect.y),this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x,y:this.store.activeAnchor.y+r},{});break}this.translatePens(this.store.active,0,r);break;case"ArrowRight":if(this.movingAnchor){this.translateAnchor(1,0);break}if(n=1,e.shiftKey&&(n=5),(e.ctrlKey||e.metaKey)&&(n=10),n=n*this.store.data.scale,this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x+n,y:this.store.activeAnchor.y},{});break}i&&this.activeRect.x+this.activeRect.width+n>i.x+i.width&&(n=i.x+i.width-(this.activeRect.x+this.activeRect.width)),this.translatePens(this.store.active,n,0);break;case"ArrowDown":if(this.movingAnchor){this.translateAnchor(0,1);break}if(r=1,e.shiftKey&&(r=5),(e.ctrlKey||e.metaKey)&&(r=10),r=r*this.store.data.scale,i&&this.activeRect.y+this.activeRect.height+r>i.y+i.height&&(r=i.y+i.height-(this.activeRect.y+this.activeRect.height)),this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){this.moveLineAnchor({x:this.store.activeAnchor.x,y:this.store.activeAnchor.y+r},{});break}this.translatePens(this.store.active,0,r);break;case"d":case"D":(o=this.store.active[0])!=null&&o.locked||this.removeAnchorHand();break;case"h":case"H":(a=this.store.active[0])!=null&&a.locked||this.addAnchorHand();break;case"m":case"M":this.toggleMagnifier();break;case"g":case"G":if(e.ctrlKey||e.metaKey){e.shiftKey?this.parent.uncombine():this.store.active.length>1&&this.parent.combine(this.store.active),e.preventDefault();break}this.hoverType===kt.NodeAnchor&&(this.movingAnchor=this.store.hoverAnchor,this.externalElements.style.cursor="move");break;case"s":case"S":!this.store.data.locked&&this.hoverType===kt.LineAnchor&&this.store.hover===this.store.active[0]&&this.splitLine(this.store.active[0],this.store.hoverAnchor),(e.ctrlKey||e.metaKey)&&this.store.emitter.emit("save",{event:e});break;case"c":case"C":(e.ctrlKey||e.metaKey)&&this.store.options.disableClipboard&&this.copy();break;case"x":case"X":(e.ctrlKey||e.metaKey)&&this.store.options.disableClipboard&&this.cut();break;case"√":case"v":case"V":!e.ctrlKey&&!e.metaKey&&(this.pencil&&this.stopPencil(),this.drawingLineName?(this.finishDrawline(),this.drawingLineName=""):this.drawingLineName=this.store.options.drawingLineName),!this.store.data.locked&&(e.ctrlKey||e.metaKey)&&(this.store.options.disableClipboard||!this.store.options.disableClipboard&&e.altKey)&&this.paste();break;case"b":case"B":this.drawingLineName&&(this.finishDrawline(),this.drawingLineName=""),this.pencil?this.stopPencil():this.drawingPencil();break;case"y":case"Y":(e.ctrlKey||e.metaKey)&&this.redo();break;case"z":case"Z":e.ctrlKey||e.metaKey?this.undo():e.shiftKey&&this.redo();break;case"Enter":this.drawingLineName&&(this.finishDrawline(!0),this.store.active[0].anchors[0].connectTo?this.drawingLineName="":this.drawingLineName=this.store.options.drawingLineName),this.store.active&&(this.store.active.forEach(s=>{s.type?(s.close=!s.close,s.close&&tC(s),this.store.path2dMap.set(s,Tt.path2dDraws.line(s)),Yd(s)):s.calculative.focus=!0}),this.render());break;case"Escape":this.drawingLineName&&this.finishDrawline(),this.drawingLineName=void 0,this.stopPencil(),this.store.active&&this.store.active.forEach(s=>{s.type||(s.calculative.focus=!1)}),this.movingPens&&(this.getAllByPens(this.movingPens).forEach(s=>{this.store.pens[s.id]=void 0}),this.movingPens=void 0,this.mouseDown=void 0,this.clearDock(),(l=this.store.active)==null||l.forEach(s=>{this.updateLines(s)}),this.calcActiveRect(),this.patchFlags=!0),this.hotkeyType=Sn.None,this.movingAnchor=void 0,this.magnifierCanvas.magnifier&&(this.magnifierCanvas.magnifier=!1,this.patchFlags=!0);break;case"E":case"e":this.store.options.disableAnchor=!this.store.options.disableAnchor,this.store.emitter.emit("disableAnchor",this.store.options.disableAnchor);break;case"=":(e.ctrlKey||e.metaKey)&&(this.scale(this.store.data.scale+.1),e.preventDefault(),e.stopPropagation());break;case"-":(e.ctrlKey||e.metaKey)&&(this.scale(this.store.data.scale-.1),e.preventDefault(),e.stopPropagation());break;case"l":case"L":this.canMoveLine=!0;break;case"[":this.parent.down();break;case"]":this.parent.up();break;case"{":this.parent.bottom();break;case"}":this.parent.top();break;case"F":case"f":!this.store.data.locked&&(e.ctrlKey||e.metaKey)&&!this.store.options.disableClipboard&&this.paste(),this.setFollowers();break}this.render(!1)});se(this,"onkeyup",e=>{switch(e.key){case"l":case"L":this.canMoveLine=!1;break}this.hotkeyType&&this.render(),this.hotkeyType<Sn.AddAnchor&&(this.hotkeyType=Sn.None)});se(this,"ondrop",async e=>{if(this.store.data.locked){console.warn("canvas is locked, can not drop");return}e.preventDefault(),e.stopPropagation();const n=e.dataTransfer.getData("Meta2d")||e.dataTransfer.getData("Text");let r=null;try{n&&(r=JSON.parse(n))}catch{}if(!r){const{files:i}=e.dataTransfer;if(i.length&&i[0].type.match("image.*")&&!(this.addCaches&&this.addCaches.length)){const o=i[0].type==="image/gif";r=await this.fileToPen(i[0],o)}else if(this.addCaches&&this.addCaches.length)r=this.addCaches,this.addCaches=[];else{this.store.emitter.emit("drop",void 0);return}}if(r=Array.isArray(r)?r:[r],r[0]&&r[0].draggable!==!1){const i={x:e.offsetX,y:e.offsetY};this.calibrateMouse(i),this.dropPens(r,i),this.addCaches=[],this.getContainerHover(i),this.mousePos.x=i.x,this.mousePos.y=i.y,this.store.emitter.emit("mouseup",{x:i.x,y:i.y,pen:this.store.hoverContainer})}this.store.emitter.emit("drop",r||n)});se(this,"ontouchstart",e=>{this.store.data.locked!==Xt.Disable&&(this.touchStartTimer&&clearTimeout(this.touchStartTimer),this.touchStartTimer=setTimeout(()=>{this.touchStart=performance.now();const n=e.touches[0].pageX-this.clientRect.x,r=e.touches[0].pageY-this.clientRect.y,i={x:n,y:r};if(this.calibrateMouse(i),this.getHover(i),this.onMouseDown({x:n,y:r,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:1}),e.touches.length===2){this.initTouchDis=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),this.initScale=this.store.data.scale,this.startTouches=e.touches,this.touchCenter={x:e.touches[0].pageX+(e.touches[1].pageX-e.touches[0].pageX)/2-this.clientRect.x,y:e.touches[0].pageY+(e.touches[1].pageY-e.touches[0].pageY)/2-this.clientRect.y};return}else e.touches.length===3&&(this.store.emitter.emit("contextmenu",{e:{x:n,y:r,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},clientRect:this.clientRect}),e.preventDefault(),e.stopPropagation());this.touchStartTimer=void 0},50))});se(this,"ontouchmove",e=>{var l;if(this.store.data.locked===Xt.Disable)return;e.stopPropagation(),e.preventDefault();const n=performance.now();if(n-this.touchStart<50)return;this.touchStart=n;const r=e.touches,i=r.length,o=e.touches[0].pageX-this.clientRect.x,a=e.touches[0].pageY-this.clientRect.y;if(i===1)this.onMouseMove({x:o,y:a,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:1});else if(i===2&&((l=this.startTouches)==null?void 0:l.length)===2){if(!this.touchMoving&&!this.touchScaling){const s=this.startTouches[0].pageX-r[0].pageX,u=this.startTouches[1].pageX-r[1].pageX,c=this.startTouches[0].pageY-r[0].pageY,f=this.startTouches[1].pageY-r[1].pageY;(s>=0&&u<0||s<=0&&u>0)&&(c>=0&&f<0||c<=0&&f>0)?this.touchScaling=!0:this.touchMoving=!0}if(this.touchScaling){if(this.store.data.disableScale||this.store.options.disableScale)return;const s=Math.hypot(r[0].pageX-r[1].pageX,r[0].pageY-r[1].pageY)/this.initTouchDis;this.scale(this.initScale*s,Pe(this.touchCenter))}if(this.touchMoving){if(this.store.data.locked>=Xt.DisableMove&&this.store.data.locked!==Xt.DisableScale||this.store.data.disableScale||this.store.options.disableScale)return;if(this.lastOffsetX){const{scale:s}=this.store.data;this.translate((o-this.lastOffsetX)/s,(a-this.lastOffsetY)/s)}this.lastOffsetX=o,this.lastOffsetY=a}}});se(this,"ontouchend",e=>{if(this.store.data.locked===Xt.Disable)return;this.touchCenter=void 0,this.touchScaling=void 0,this.touchMoving=void 0,this.startTouches=void 0,this.lastOffsetX=0,this.lastOffsetY=0;const n=e.changedTouches[0].pageX-this.clientRect.x,r=e.changedTouches[0].pageY-this.clientRect.y;this.onMouseUp({x:n,y:r,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:1}),setTimeout(()=>{this.render()},20)});se(this,"onGesturestart",e=>{e.preventDefault()});se(this,"onMouseDown",e=>{var n,r,i,o,a;if(e.buttons===2&&!this.drawingLine&&(this.mouseRight=Po.Down),this.hideInput(),this.popconfirm.hide(),this.store.data.locked===Xt.Disable||e.buttons!==1&&e.buttons!==2){this.hoverType=kt.None;return}if(!this.magnifierCanvas.magnifier){if(this.calibrateMouse(e),this.mousePos.x=e.x,this.mousePos.y=e.y,this.mouseDown=e,this.lastMouseTime=performance.now(),this.canvasImage.fitFlag){this.canvasImage.currentFit||this.calcuActiveFit();return}if(this.hotkeyType===Sn.AddAnchor){this.setAnchor(this.store.pointAt);return}if(!this.store.options.autoAnchor&&!this.drawingLine&&e.shiftKey&&e.ctrlKey&&e.altKey){this.setAnchor(this.store.pointAt),this.drawingLineName=this.store.options.drawingLineName;const l=this.store.activeAnchor;if(!l)return;const s={id:Wt(),x:l.x,y:l.y};this.drawingLine=this.createDrawingLine(s);let u=Gn(this.drawingLine);this.drawingLine.calculative.activeAnchor=u,xr(this.store.hover,l,this.drawingLine,s),this.drawline();return}if(!(this.hotkeyType===Sn.Translate||this.mouseRight===Po.Down&&!this.store.options.mouseRightActive)){if(this.drawingLine){if(this.store.hoverAnchor){const s=gn(this.drawingLine);this.store.hoverAnchor.type===ko.Line?ed(s,this.store.hoverAnchor,this.store):(s.x=this.store.hoverAnchor.x,s.y=this.store.hoverAnchor.y),xr(this.store.hover,this.store.hoverAnchor,this.drawingLine,s),this.drawline(),this.finishDrawline(!0);return}if(!this.store.options.autoAnchor&&e.shiftKey&&e.altKey&&e.ctrlKey){this.setAnchor(this.store.pointAt);const s=gn(this.drawingLine),u=this.store.activeAnchor;if(!u)return;s.x=u.x,s.y=u.y,xr(this.store.hover,u,this.drawingLine,s),this.drawline(),this.finishDrawline(!0);return}if(e.buttons===2||this.drawingLineName==="mind"&&((n=this.drawingLine)==null?void 0:n.calculative.worldAnchors.length)>1||this.store.options.drawingLineLength&&((r=this.drawingLine)==null?void 0:r.calculative.worldAnchors.length)>this.store.options.drawingLineLength){this.finishDrawline(!0),(i=this.store.active[0])!=null&&i.anchors[0].connectTo||this.store.active.length==0?this.drawingLineName="":this.drawingLineName=this.store.options.drawingLineName;return}if(this.store.options.autoAnchor&&this.hoverType===kt.Node){const s=gn(this.drawingLine),u=Xs(this.store.hover,e);s.x=u.x,s.y=u.y,this.drawingLine.autoTo=!0,xr(this.store.hover,u,this.drawingLine,s),this.drawline(),this.finishDrawline(!0);return}const l=gn(this.drawingLine);l.isTemp?(this.drawingLine.calculative.activeAnchor=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2],l.isTemp=void 0):(this.drawingLine.calculative.activeAnchor=l,this.drawingLine.calculative.worldAnchors.push({x:l.x,y:l.y,penId:l.penId})),this.drawingLine.calculative.drawlineH=void 0,this.drawingLineName!=="polyline"&&this.drawline()}if(this.drawingLineName){if(this.hoverType===kt.Node)if(this.store.options.autoAnchor){this.inactive(!0);const l=Xs(this.store.hover,e);this.store.hoverAnchor=l;const s={id:Wt(),x:l.x,y:l.y};this.drawingLine=this.createDrawingLine(s),this.drawingLine.autoFrom=!0,xr(this.store.hover,l,this.drawingLine,s)}else this.inactive(),this.hoverType=kt.None;else if(this.hoverType===kt.NodeAnchor){this.drawingLineName=this.store.options.drawingLineName;const l={id:Wt(),x:this.store.hoverAnchor.x,y:this.store.hoverAnchor.y};this.drawingLine=this.createDrawingLine(l),this.drawingLine.calculative.activeAnchor=l,xr(this.store.hover,this.store.hoverAnchor,this.drawingLine,l)}else if(!this.drawingLine&&this.drawingLineName!=="curve"){this.inactive(!0);const l={id:Wt(),x:e.x,y:e.y};this.drawingLine=this.createDrawingLine(l),this.drawingLine.calculative.activeAnchor=l}}else if(this.pencil){this.inactive(!0);const l=Wt(),s={x:e.x,y:e.y,id:Wt(),penId:l};this.pencilLine=this.getInitPencilLine(s)}else{switch(this.hoverType){case kt.None:(this.store.data.rule||this.store.options.rule)&&!this.store.options.disableRuleLine&&this.addRuleLine(e),this.store.options.resizeMode&&(this.hotkeyType=Sn.None),this.inactive();break;case kt.Node:case kt.Line:if(this.store.hover){if((o=this.store.active)!=null&&o.length&&this.store.active.length===1&&this.store.hover.id===this.store.active[0].id){this.calcActiveRect();break}const l=hi(this.store.hover,!0);let s=l||this.store.hover;l&&(l.container||(a=this.store.options.containerShapes)!=null&&a.includes(l.name))&&(s=this.store.hover),e.ctrlKey&&!e.shiftKey?(s.calculative.active?this.willInactivePen=s:this.store.active.length>0&&(s.calculative.active=!0,Us(s),this.store.active.push(s),this.store.emitter.emit("active",this.store.active)),this.patchFlags=!0):e.ctrlKey&&e.shiftKey&&this.store.hover.parentId?this.active([this.store.hover]):(!(this.activeRect&&Io({x:e.x,y:e.y},this.activeRect))||this.store.active.length==1)&&(s.calculative.active||(this.active([s]),this.store.options.resizeMode&&(this.hotkeyType=Sn.Resize))),this.calcActiveRect()}break;case kt.LineAnchor:this.store.activeAnchor=this.store.hoverAnchor,this.store.hover.calculative.activeAnchor=this.store.hoverAnchor,this.active([this.store.hover]);break;case kt.LineAnchorPrev:case kt.LineAnchorNext:this.store.activeAnchor&&(this.prevAnchor={...this.store.activeAnchor.prev},this.nextAnchor={...this.store.activeAnchor.next});break;case kt.Resize:this.activeInitPos=[],this.store.active.forEach(l=>{this.activeInitPos.push({x:(l.calculative.worldRect.x-this.activeRect.x)/this.activeRect.width,y:(l.calculative.worldRect.y-this.activeRect.y)/this.activeRect.height})});break}this.store.hover&&(this.store.hover.calculative.mouseDown=!0),this.store.emitter.emit("mousedown",{x:e.x,y:e.y,pen:this.store.hover})}this.render()}}});se(this,"onMouseMove",e=>{var r,i,o,a,l,s,u,c;if(this.store.data.locked===Xt.Disable){this.hoverType=kt.None;return}if(this.mouseDown&&!this.mouseDown.restore&&e.buttons!==1&&e.buttons!==2){this.onMouseUp(e);return}if(this.lastMouseTime){if(performance.now()-this.lastMouseTime<50){this.lastMouseTime=0;return}this.lastMouseTime=0}if(this.calibrateMouse(e),this.mousePos.x=e.x,this.mousePos.y=e.y,this.magnifierCanvas.magnifier){this.render();return}if(this.canvasImage.fitFlag&&this.canvasImage.activeFit){const f=performance.now();f-this.fitTimer>100&&(this.mouseDown?this.updateFit(e):this.inFitBorder(this.mousePos),this.fitTimer=f);return}if(this.mouseDown&&!this.store.options.disableTranslate&&!this.store.data.disableTranslate){if(this.mouseRight===Po.Down&&(this.mouseRight=Po.Translate),this.store.data.locked===Xt.DisableEdit||this.store.data.locked===Xt.DisableScale||this.hotkeyType===Sn.Translate||this.mouseRight===Po.Translate){const{scale:f}=this.store.data;let v=(e.x-this.mouseDown.x)/f,g=(e.y-this.mouseDown.y)/f;e.shiftKey&&!e.ctrlKey&&(g=0),e.ctrlKey&&(v=0),this.translate(v,g);return}if(this.store.data.locked)return;if(!this.drawingLine&&!this.pencil){if(!this.drawingLineName&&!this.movingAnchor){if(this.hoverType===kt.NodeAnchor){if(!this.store.hoverAnchor)return;this.drawingLineName=this.store.options.drawingLineName;const f={id:Wt(),x:this.store.hoverAnchor.x,y:this.store.hoverAnchor.y};this.drawingLine=this.createDrawingLine(f),this.drawingLine.calculative.activeAnchor=f,xr(this.store.hover,this.store.hoverAnchor,this.drawingLine,f),this.drawline();return}}else if(this.drawingLineName&&this.hoverType===kt.None){const f={id:Wt(),x:e.x,y:e.y};this.drawingLine=this.createDrawingLine(f),this.drawingLine.calculative.activeAnchor=f,this.drawline();return}if(e.buttons===1&&(e.ctrlKey||!this.hoverType&&!this.hotkeyType)&&!(e.ctrlKey&&(this.store.activeAnchor||(r=this.store.active)!=null&&r.length))){this.dragRect={x:Math.min(this.mouseDown.x,e.x),y:Math.min(this.mouseDown.y,e.y),ex:Math.max(this.mouseDown.x,e.x),ey:Math.max(this.mouseDown.y,e.y),width:Math.abs(e.x-this.mouseDown.x),height:Math.abs(e.y-this.mouseDown.y)},this.render();return}if(this.movingAnchor){const f=e.x-this.movingAnchor.x,v=e.y-this.movingAnchor.y;this.translateAnchor(f,v),this.render();return}else if(!((i=this.store.active[0])!=null&&i.locked)){const f={x:e.x,y:e.y};if(this.hoverType===kt.LineAnchor){(this.dockInAnchor(e)||((o=this.store.active[0])==null?void 0:o.lineName)==="line")&&!this.store.options.disableDock&&!this.store.options.disableLineDock&&(this.clearDock(),this.dock=mb(this.store,f,this.store.activeAnchor),(a=this.dock)!=null&&a.xDock&&(f.x+=this.dock.xDock.step),(l=this.dock)!=null&&l.yDock&&(f.y+=this.dock.yDock.step)),this.moveLineAnchor(f,e);return}if(this.hoverType===kt.LineAnchorPrev){this.moveLineAnchorPrev(e);return}if(this.hoverType===kt.LineAnchorNext){this.moveLineAnchorNext(e);return}}if(this.hoverType===kt.Rotate){this.rotatePens({x:e.x,y:e.y});return}if(this.hoverType===kt.Resize){this.resizePens(e);return}if(this.hoverType===kt.Node||this.hoverType===kt.Line){const f=e.x-this.mouseDown.x,v=e.y-this.mouseDown.y,g=20;if(e.ctrlKey&&!e.shiftKey&&(Math.abs(f)>=g||Math.abs(v)>=g)&&(this.willInactivePen=void 0),this.store.active.length===1){const m=this.store.active[0];if((m.locked===void 0||m.locked<Xt.DisableMove)&&((s=m==null?void 0:m.onMouseMove)==null||s.call(m,m,this.mousePos)),m.calculative.focus)return}this.movePens(e),this.getContainerHover(e);return}}else if(this.pencil){const{x:f,y:v}=e,g={x:f,y:v};g.id=Wt(),g.penId=this.pencilLine.id,this.pencilLine.calculative.worldAnchors.push(g),this.store.path2dMap.set(this.pencilLine,Tt.path2dDraws[this.pencilLine.name](this.pencilLine)),this.patchFlags=!0}}if(this.drawingLine){const{x:f,y:v}=e,g={x:f,y:v};if(g.id=Wt(),g.penId=this.drawingLine.id,!this.store.options.disableDock&&!this.store.options.disableLineDock&&(this.clearDock(),this.dock=mb(this.store,g),(u=this.dock)!=null&&u.xDock&&(g.x+=this.dock.xDock.step),(c=this.dock)!=null&&c.yDock&&(g.y+=this.dock.yDock.step)),this.mouseDown&&this.drawingLineName==="curve"&&!this.drawingLine.calculative.worldAnchors[0].connectTo)this.drawline(g);else{let m;if(this.drawingLine.calculative.worldAnchors.length>1&&(m=gn(this.drawingLine)),m?(m.prev=void 0,m.next=void 0,m.id||(m.id=Wt()),m.x=g.x,m.y=g.y,m.connectTo=void 0):(m={...g},this.drawingLine.calculative.worldAnchors.push(m)),(this.hoverType===kt.NodeAnchor||this.hoverType===kt.LineAnchor)&&(this.store.hoverAnchor.type!==ko.Line&&(m.x=this.store.hoverAnchor.x,m.y=this.store.hoverAnchor.y),m.connectTo=this.store.hoverAnchor.penId,this.drawingLineName==="polyline"&&(m.isTemp=!1)),this.drawingLineName==="line"){if(e.ctrlKey&&!e.shiftKey)m.x=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2].x;else if(e.shiftKey&&!e.ctrlKey)m.y=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2].y;else if(e.shiftKey&&e.ctrlKey){let y=this.drawingLine.calculative.worldAnchors[this.drawingLine.calculative.worldAnchors.length-2];this.getSpecialAngle(m,y)}}this.drawline()}}globalThis.debug&&console.time("hover");const n=performance.now();n-this.hoverTimer>50&&(this.hoverTimer=n,this.getHover(e)),globalThis.debug&&console.timeEnd("hover"),this.hotkeyType===Sn.AddAnchor&&(this.patchFlags=!0),this.render(!1)});se(this,"onMouseUp",e=>{if(this.store.data.locked===Xt.Disable){this.hoverType=kt.None;return}if(this.mouseDown){if(this.mouseRight===Po.Down&&(this.store.hover&&this.store.hover.onContextmenu?this.store.hover.onContextmenu(this.store.hover,e):this.store.emitter.emit("contextmenu",{e,clientRect:this.clientRect,pen:this.store.hover})),this.mouseRight=Po.None,this.calibrateMouse(e),this.mousePos.x=e.x,this.mousePos.y=e.y,this.pencil&&this.finishPencil(),this.drawingLine){if(this.store.hoverAnchor){const n=gn(this.drawingLine);this.store.hoverAnchor.type===ko.Line?ed(n,this.store.hoverAnchor,this.store):(n.x=this.store.hoverAnchor.x,n.y=this.store.hoverAnchor.y),xr(this.store.hover,this.store.hoverAnchor,this.drawingLine,n),this.drawline(),this.finishDrawline(!0);return}if(this.store.options.autoAnchor&&this.hoverType===kt.Node){const n=gn(this.drawingLine),r=Xs(this.store.hover,e);n.x=r.x,n.y=r.y,this.drawingLine.autoTo=!0,xr(this.store.hover,r,this.drawingLine,n),this.drawline(),this.finishDrawline(!0);return}}if(this.hoverType===kt.LineAnchor&&this.store.hover&&this.store.active[0]&&this.store.active[0].name==="line"&&this.store.active[0]!==this.store.hover){const n=this.store.active[0],r=Gn(n),i=gn(n);if(this.store.hoverAnchor){const o=this.store.hover,a=Gn(o)===this.store.hoverAnchor,l=gn(o)===this.store.hoverAnchor,s=r===this.store.activeAnchor,u=i===this.store.activeAnchor;if((e.ctrlKey||e.altKey)&&o.type===mn.Line&&(a||l)&&(s||u)){const c=o.calculative.worldAnchors.map(f=>({...f,penId:n.id}));a?c.shift():l&&c.pop(),(a&&s||l&&u)&&c.reverse(),s?(n.calculative.worldAnchors[0].connectTo=void 0,n.calculative.worldAnchors.unshift(...c)):u&&(n.calculative.worldAnchors[n.calculative.worldAnchors.length-1].connectTo=void 0,n.calculative.worldAnchors.push(...c)),this.delete([o]),this.render()}else this.store.activeAnchor&&(this.store.hoverAnchor.type===ko.Line?ed(this.store.activeAnchor,this.store.hoverAnchor,this.store):(this.store.activeAnchor.x=this.store.hoverAnchor.x,this.store.activeAnchor.y=this.store.hoverAnchor.y),xr(this.store.hover,this.store.hoverAnchor,n,this.store.activeAnchor));this[n.lineName]&&n.lineName!=="polyline"&&this[n.lineName](this.store,n),this.store.path2dMap.set(n,Tt.path2dDraws.line(n)),this.initLineRect(n)}else r===this.store.activeAnchor&&n.autoFrom?this.calcAutoAnchor(n,r,this.store.hover):i===this.store.activeAnchor&&n.autoTo&&this.calcAutoAnchor(n,i,this.store.hover)}if(this.addCaches&&this.addCaches.length){if(!this.store.data.locked){if(this.dragRect&&this.addCaches.length===1){const n=this.addCaches[0];n.width=this.dragRect.width/this.store.data.scale,n.height=this.dragRect.height/this.store.data.scale,e.x=(this.dragRect.x+this.dragRect.ex)/2,e.y=(this.dragRect.y+this.dragRect.ey)/2}this.dropPens(this.addCaches,e)}this.addCaches=void 0}if(this.hoverType===kt.Rotate&&(this.getSizeCPs(),this.store.active.forEach(n=>{n.rotate=n.calculative.rotate})),this.patchFlagsLines.forEach(n=>{n.type&&this.initLineRect(n)}),this.patchFlagsLines.clear(),this.dragRect)if(this.canvasImage.fitFlag)this.makeFit();else{const n=this.store.data.pens.filter(r=>{if(r.visible===!1||r.locked>=Xt.DisableMove||r.parentId||r.isRuleLine)return!1;if(Ao(r.calculative.worldRect,this.dragRect,e.ctrlKey||this.store.options.dragAllIn))return r.type===mn.Line&&!this.store.options.dragAllIn?Av(r,this.dragRect):!0});this.active(n)}if(e.button!==2&&(mf(this.mouseDown,e)<2&&(this.store.hover&&this.store.hover.input&&(this.store.hover.onShowInput?this.store.hover.onShowInput(this.store.hover,e):(this.store.hover.parentId&&this.active([this.store.hover]),this.showInput(this.store.hover))),this.store.emitter.emit("click",{x:e.x,y:e.y,pen:this.store.hover})),this.store.hover&&(this.store.hover.calculative.mouseDown=!1),this.store.hover!=this.store.hoverContainer&&this.store.emitter.emit("mouseup",{x:e.x,y:e.y,pen:this.store.hover}),this.store.emitter.emit("mouseup",{x:e.x,y:e.y,pen:this.store.hoverContainer})),this.willInactivePen){this.willInactivePen.calculative.active=void 0,Us(this.willInactivePen,!1);const n=this.store.active.findIndex(r=>r===this.willInactivePen);n>=0&&this.store.active.splice(n,1),this.calcActiveRect(),this.willInactivePen=void 0,this.store.emitter.emit("inactive",[this.willInactivePen]),this.render()}this.movingPens&&(e.altKey&&!e.shiftKey?this.copyMovedPens():this.movedActivePens(e.ctrlKey&&e.shiftKey),this.getAllByPens(this.movingPens).forEach(n=>{this.store.pens[n.id]=void 0}),this.movingPens=void 0),this.store.active&&this.store.active[0]&&(this.store.active[0].calculative.h=void 0),this.mouseDown=void 0,this.lastOffsetX=0,this.lastOffsetY=0,this.clearDock(),this.dragRect=void 0,this.initActiveRect=void 0,this.render()}});se(this,"clearDock",()=>{var o,a,l,s;const e=(a=(o=this.dock)==null?void 0:o.xDock)==null?void 0:a.penId,n=(s=(l=this.dock)==null?void 0:l.yDock)==null?void 0:s.penId,r=this.store.pens[e];r&&(r.calculative.isDock=!1);const i=this.store.pens[n];i&&(i.calculative.isDock=!1),this.dock=void 0});se(this,"onResize",()=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.resize(),this.timer=void 0},100)});se(this,"onScroll",()=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.clientRect=this.canvas.getBoundingClientRect(),this.timer=void 0},100)});se(this,"calibrateMouse",e=>(e.x-=this.store.data.x,e.y-=this.store.data.y,e));se(this,"getContainerHover",e=>{var r;if(this.dragRect)return;this.store.hoverContainer=void 0;const n=this.store.data.pens.filter(i=>{var o;return i.container||((o=this.store.options.containerShapes)==null?void 0:o.includes(i.name))});if(n.length)for(let i=n.length-1;i>=0;--i){const o=n[i];if(!(o.visible==!1||o.calculative.inView==!1||o.locked===Xt.Disable)){if(Io(e,o.calculative.worldRect))this.store.hoverContainer=o,(r=o==null?void 0:o.onMouseMove)==null||r.call(o,o,e),this.store.lastHoverContainer!==this.store.hoverContainer&&(this.patchFlags=!0,this.store.lastHoverContainer&&(this.store.lastHoverContainer.calculative.containerHover=!1,this.store.emitter.emit("leave",this.store.lastHoverContainer)),this.store.hoverContainer&&(this.store.hoverContainer.calculative.containerHover=!0,this.store.emitter.emit("enter",this.store.hoverContainer)),this.store.lastHoverContainer=this.store.hoverContainer);else if(o===this.store.hoverContainer&&(this.store.hoverContainer=void 0,this.store.lastHoverContainer!==this.store.hoverContainer)){this.patchFlags=!0;const a=this.store.lastHoverContainer.calculative.canvas.store.pens[this.store.lastHoverContainer.id+Yr];this.store.lastHoverContainer&&!a&&(this.store.lastHoverContainer.calculative.containerHover=!1,this.store.emitter.emit("leave",this.store.lastHoverContainer)),this.store.lastHoverContainer=this.store.hoverContainer}}}});se(this,"getHover",e=>{var i,o;if(this.dragRect||this.canvasImage.fitFlag)return;let n=kt.None;this.store.hover=void 0,this.store.hoverAnchor=void 0,this.title.hide(),this.store.pointAt=void 0,this.store.pointAtIndex=void 0;const r=this.store.active.length===1&&this.store.active[0].type;if(!this.drawingLineName&&this.hotkeyType!==Sn.AddAnchor&&this.activeRect&&!r&&!this.store.data.locked){const a=Tv(this.store.active),l=hb(this.store.active)||this.store.options.disableRotate,s=vb(this.store.active)||this.store.options.disableSize;if(!a&&!l){const u={x:this.activeRect.center.x,y:this.activeRect.y-30};this.activeRect.rotate&&_n(u,this.activeRect.rotate,this.activeRect.pivot||this.activeRect.center),!this.hotkeyType&&Ws(e,u,this.pointSize)&&(n=kt.Rotate,this.externalElements.style.cursor=`url("${this.store.options.rotateCursor}"), auto`)}if(!a&&!s)for(let u=0;u<8;u++){const c=u<4;if((this.hotkeyType===Sn.Resize||c&&!this.hotkeyType)&&Ws(e,this.sizeCPs[u],this.pointSize)){let v=c?ib:ob,g=0;Math.abs(this.activeRect.rotate%90-45)<25?(v=c?ob:ib,g=Math.round((this.activeRect.rotate-45)/90)+(c?0:1)):g=Math.round(this.activeRect.rotate/90),n=kt.Resize,this.resizeIndex=u,this.externalElements.style.cursor=v[(u+g)%4];break}}}n===kt.None&&(n=this.inPens(e,this.store.data.pens)),!n&&!r&&Io(e,this.activeRect)&&(n=kt.Node,this.externalElements.style.cursor="move"),this.hoverType=n,n===kt.None&&(this.drawingLineName||this.pencil?this.externalElements.style.cursor="crosshair":this.mouseDown||(this.externalElements.style.cursor="default"),this.store.hover=void 0),this.store.lastHover!==this.store.hover&&(this.patchFlags=!0,this.store.lastHover&&(this.store.lastHover.calculative.hover=!1,lc(hi(this.store.lastHover,!0)||this.store.lastHover,!1),this.store.emitter.emit("leave",this.store.lastHover),this.tooltip.hide()),this.store.hover&&(this.store.hover.calculative.hover=!0,lc(hi(this.store.hover,!0)||this.store.hover),this.store.emitter.emit("enter",this.store.hover),this.tooltip.show(this.store.hover,e)),this.store.lastHover=this.store.hover),(o=(i=this.store.hover)==null?void 0:i.onMouseMove)==null||o.call(i,this.store.hover,this.mousePos)});se(this,"inPens",(e,n)=>{var i;let r=kt.None;e:for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.visible==!1||a.calculative.inView==!1||a.locked===Xt.Disable)continue;const l=Xd(a);if(!(!a.calculative.active&&!Va(e,a.calculative.worldRect,l)&&!Io(e,a.calculative.worldRect))){if(!this.store.data.locked&&this.hotkeyType!==Sn.Resize&&a.calculative.worldAnchors){for(const s of a.calculative.worldAnchors)if(r=this.inAnchor(e,a,s),r){let u=Pe(s);Object.assign(u,e),this.title.show(u,a);break e}}if(a.type){if(a.isRuleLine){let u=((i=this.store.options.ruleOptions)==null?void 0:i.height)||20;if(e.x+this.store.data.x>u&&e.y+this.store.data.y>u)break}const s=jk(e,a);if(s){!this.store.data.locked&&!a.locked?this.hotkeyType===Sn.AddAnchor?this.externalElements.style.cursor="pointer":this.externalElements.style.cursor="move":this.externalElements.style.cursor=this.store.options.hoverCursor,a.calculative.disabled&&(this.externalElements.style.cursor="not-allowed"),this.store.hover=a,this.store.pointAt=s.point,this.store.pointAtIndex=s.i,this.initTemplateCanvas([this.store.hover]),r=kt.Line;break}}else{if(a.children){const u=[];if(a.children.forEach(c=>{this.store.pens[c]&&u.push(this.store.pens[c])}),r=this.inPens(e,u),r)break}let s=!1;if(a.name==="line"?s=Va(e,a.calculative.worldRect,a.lineWidth):s=Io(e,a.calculative.worldRect),s){if(a.type===mn.Node&&a.name==="line"&&!sk(e,a.calculative.worldAnchors))continue;if(!this.store.data.locked&&!a.locked?this.hotkeyType===Sn.AddAnchor?this.externalElements.style.cursor="pointer":this.externalElements.style.cursor="move":this.externalElements.style.cursor=this.store.options.hoverCursor,a.calculative.disabled&&(this.externalElements.style.cursor="not-allowed"),this.store.hover=a,this.initTemplateCanvas([this.store.hover]),r=kt.Node,this.store.pointAt=e,!e.ctrlKey){let{x:u,y:c,ex:f,ey:v,rotate:g,center:m}=this.store.hover.calculative.worldRect;if(g){const y=[{x:u,y:c},{x:f,y:c},{x:f,y:v},{x:u,y:v}];y.forEach(C=>{_n(C,g,m)});let p=y[y.length-1];for(const C of y){if(p.y>e.y!=C.y>e.y){const x=C.x+(e.y-C.y)*(p.x-C.x)/(p.y-C.y);Math.abs(x-this.store.pointAt.x)<10&&(this.store.pointAt.x=x)}p=C}}else this.store.pointAt.x-10<u?this.store.pointAt.x=u:this.store.pointAt.x+10>f&&(this.store.pointAt.x=f),this.store.pointAt.y-10<c?this.store.pointAt.y=c:this.store.pointAt.y+10>v&&(this.store.pointAt.y=v)}break}}}}return r});se(this,"dockInAnchor",e=>{var n,r;this.store.hover=void 0;for(let i=this.store.data.pens.length-1;i>=0;--i){const o=this.store.data.pens[i];if(o.visible==!1||o.locked===Xt.Disable||o===this.store.active[0])continue;let a=Xd(o);if(a+=2*this.store.options.anchorRadius,!!Va(e,o.calculative.worldRect,a)&&(this.store.hover=o,this.hotkeyType!==Sn.Resize&&o.calculative.worldAnchors))for(const l of o.calculative.worldAnchors){if(l.twoWay===Pr.In){const s=gn(this.store.active[0]);if(this.store.activeAnchor.id!==s.id)continue}if(l.twoWay===Pr.Out){const s=Gn(this.store.active[0]);if(this.store.activeAnchor.id!==s.id)continue}if(!(l.twoWay===Pr.DisableConnected||l.twoWay===Pr.Disable||((n=this.store.activeAnchor)==null?void 0:n.twoWay)===Pr.DisableConnectTo||((r=this.store.activeAnchor)==null?void 0:r.twoWay)===Pr.Disable)&&(this.title.hide(),this.inAnchor(e,o,l))){let s=Pe(l);return Object.assign(s,e),this.title.show(s,o),!0}}}});se(this,"imageTimer");se(this,"templateImageTimer");se(this,"render",e=>{if(e&&(this.opening=!1),this.opening)return;let n;if(e==null||e===!0||e===1/0?(n=performance.now(),this.patchFlags=!0):e>1?n=e:n=performance.now(),!this.patchFlags)return;if(n-this.lastRender<this.store.options.interval){this.renderTimer&&cancelAnimationFrame(this.renderTimer),this.renderTimer=requestAnimationFrame(this.render);return}this.renderTimer=void 0,this.lastRender=n;const r=this.offscreen.getContext("2d");r.clearRect(0,0,this.offscreen.width,this.offscreen.height),r.save(),r.translate(this.store.data.x,this.store.data.y),globalThis.debugRender&&console.time("renderPens"),this.renderPens(),globalThis.debugRender&&console.timeEnd("renderPens"),this.renderBorder(),this.renderHoverPoint(),r.restore(),this.magnifierCanvas.magnifier&&this.magnifierCanvas.render();const i=this.canvas.getContext("2d");i.clearRect(0,0,this.canvas.width,this.canvas.height),i.drawImage(this.offscreen,0,0,this.width,this.height),this.canvasTemplate.render(),this.canvasImageBottom.render(),this.canvasImage.render(),this.patchFlags=!1});se(this,"renderPens",()=>{const e=this.offscreen.getContext("2d");e.strokeStyle=this.store.styles.color;for(const n of this.store.data.pens)isFinite(n.x)&&n.canvasLayer!==on.CanvasTemplate&&n.calculative.inView&&(n.canvasLayer===on.CanvasMain&&n.name!=="gif"&&n.image&&n.calculative.img&&(e.save(),za(e,n),n.calculative.rotate&&Oo(e,n),Ha(e,n),el(e,n),e.restore()),Ta(e,n));this.drawingLine&&Ta(e,this.drawingLine),this.pencilLine&&Ta(e,this.pencilLine),this.movingPens&&this.movingPens.forEach(n=>{this.renderPenContainChild(e,n)})});se(this,"renderPenContainChild",(e,n)=>{var r;n.calculative.inView&&Ta(e,n),(r=n.children)==null||r.forEach(i=>{const o=this.store.pens[i];o&&this.renderPenContainChild(e,o)})});se(this,"renderBorder",()=>{if(!this.store.data.locked&&this.activeRect&&!(this.store.active.length===1&&this.store.active[0].type)&&!this.movingPens){const e=this.offscreen.getContext("2d");e.save(),e.translate(.5,.5);const n=this.activeRect.pivot||this.activeRect.center;if(this.activeRect.rotate&&(e.translate(n.x,n.y),e.rotate(this.activeRect.rotate*Math.PI/180),e.translate(-n.x,-n.y)),e.strokeStyle=this.store.styles.activeColor,e.globalAlpha=this.store.options.activeGlobalAlpha===void 0?.3:this.store.options.activeGlobalAlpha,e.beginPath(),e.lineWidth=this.store.options.activeLineWidth||1,e.setLineDash(this.store.options.activeLineDash||[]),e.strokeRect(this.activeRect.x,this.activeRect.y,this.activeRect.width,this.activeRect.height),e.setLineDash([]),e.lineWidth=1,e.globalAlpha=1,Tv(this.store.active)||hb(this.store.active)||this.store.options.disableRotate){e.restore();return}e.beginPath(),e.moveTo(this.activeRect.center.x,this.activeRect.y),e.lineTo(this.activeRect.center.x,this.activeRect.y-30),e.stroke(),e.beginPath(),e.strokeStyle=this.store.styles.activeColor,e.fillStyle="#ffffff",e.arc(this.activeRect.center.x,this.activeRect.y-30,5,0,Math.PI*2),e.fill(),e.stroke(),e.restore()}});se(this,"renderHoverPoint",()=>{if(this.store.data.locked)return;const e=this.offscreen.getContext("2d");if(e.save(),e.translate(.5,.5),!this.store.options.disableAnchor&&this.store.hover&&!this.store.hover.disableAnchor&&(this.hotkeyType!==Sn.Resize||this.store.active.length!==1||this.store.active[0]!==this.store.hover)){const n=[...this.store.hover.calculative.worldAnchors];this.store.pointAt&&this.hotkeyType===Sn.AddAnchor&&n.push(this.store.pointAt),n&&(e.strokeStyle=this.store.hover.anchorColor||this.store.styles.anchorColor,e.fillStyle=this.store.hover.anchorBackground||this.store.options.anchorBackground,n.forEach(r=>{if(r.hidden&&r.locked>Xt.DisableEdit)return;if(r===this.store.hoverAnchor){e.save();const o=this.store.hover.hoverAnchorColor||this.store.options.hoverAnchorColor;e.strokeStyle=o,e.fillStyle=o}e.beginPath();let i=r.radius||this.store.hover.anchorRadius||this.store.options.anchorRadius;if(this.store.hover.type&&!r.radius&&!this.store.hover.anchorRadius&&(i=3,this.store.hover.calculative.lineWidth>3&&(i=this.store.hover.calculative.lineWidth)),r.type===ko.Line){let o=this.store.pens[r.penId].rotate||0;this.store.pens[r.penId].calculative.flipX&&(o*=-1),this.store.pens[r.penId].calculative.flipY&&(o*=-1);let a=r.rotate+o;this.store.pens[r.penId].calculative.flipX&&(a*=-1),this.store.pens[r.penId].calculative.flipY&&(a*=-1),e.save(),e.translate(r.x,r.y),e.rotate(a*Math.PI/180),e.translate(-r.x,-r.y),e.rect(r.x-r.length*this.store.data.scale/2,r.y-i,r.length*this.store.data.scale,i*2),e.restore()}else e.arc(r.x,r.y,i,0,Math.PI*2);if(this.store.hover.type&&this.store.hoverAnchor===r?(e.save(),e.strokeStyle=this.store.hover.activeColor||this.store.styles.activeColor,e.fillStyle=e.strokeStyle):(r.color||r.background)&&(e.save(),e.strokeStyle=r.color,e.fillStyle=r.background),e.fill(),e.stroke(),r===this.store.hoverAnchor&&e.restore(),(this.store.hover.type&&this.store.hoverAnchor===r||r.color||r.background)&&e.restore(),!this.store.hover.parentId&&this.store.hover.children&&this.store.hover.children.length>0&&r===this.store.hoverAnchor){e.save(),e.beginPath(),e.lineWidth=3;const o=this.store.hover.hoverAnchorColor||this.store.options.hoverAnchorColor;globalThis.pSBC&&(e.strokeStyle=globalThis.pSBC(.5,o)),e.arc(r.x,r.y,i+1.5,0,Math.PI*2),e.stroke(),e.restore()}}))}this.hotkeyType!==Sn.AddAnchor&&!this.movingPens&&this.activeRect&&!(this.store.active.length===1&&this.store.active[0].type)&&!Tv(this.store.active)&&!vb(this.store.active)&&!this.store.options.disableSize&&(e.strokeStyle=this.store.styles.activeColor,e.fillStyle="#ffffff",this.sizeCPs.forEach((n,r)=>{this.activeRect.rotate&&(e.save(),e.translate(n.x,n.y),e.rotate(this.activeRect.rotate*Math.PI/180),e.translate(-n.x,-n.y)),(r<4||this.hotkeyType===Sn.Resize)&&(e.beginPath(),e.fillRect(n.x-4.5,n.y-4.5,8,8),e.strokeRect(n.x-5.5,n.y-5.5,10,10)),this.activeRect.rotate&&e.restore()})),!this.store.data.locked&&this.dragRect&&(e.save(),e.fillStyle=Ud(this.store.options.dragColor,.2),e.strokeStyle=this.store.options.dragColor,e.beginPath(),e.strokeRect(this.dragRect.x,this.dragRect.y,this.dragRect.width,this.dragRect.height),e.fillRect(this.dragRect.x,this.dragRect.y,this.dragRect.width,this.dragRect.height),e.restore()),this.dock&&(e.strokeStyle=this.store.options.dockColor,this.dock.xDock&&(e.beginPath(),e.moveTo(this.dock.xDock.x,this.dock.xDock.y),e.lineTo(this.dock.xDock.x,this.dock.xDock.prev.y),e.stroke()),this.dock.yDock&&(e.beginPath(),e.moveTo(this.dock.yDock.x,this.dock.yDock.y),e.lineTo(this.dock.yDock.prev.x,this.dock.yDock.y),e.stroke())),e.restore()});se(this,"transTimeout");se(this,"pastePen",(e,n)=>{const r=e.id;if(pb(e),e.parentId=n,e.type===mn.Line?this.changeNodeConnectedLine(r,e,this.store.clipboard.pens):this.changeLineAnchors(r,e,this.store.clipboard.pens),!e.parentId){const o=this.getPenRect(e,this.store.clipboard.origin,this.store.clipboard.scale),a=this.getPenRect(this.store.clipboard.initRect,this.store.clipboard.origin,this.store.clipboard.scale),{origin:l,scale:s}=this.store.data;e.x=l.x+o.x*s,e.y=l.y+o.y*s,e.width=o.width*s,e.height=o.height*s,a.x=l.x+a.x*s,a.y=l.y+a.y*s,Dn(a),this.store.clipboard.pos&&(e.x-=a.center.x-this.store.clipboard.pos.x,e.y-=a.center.y-this.store.clipboard.pos.y),this.keyOptions&&this.keyOptions.altKey&&(this.keyOptions.ctrlKey||this.keyOptions.metaKey)?(e.x=-this.store.data.x+this.width/2-e.width/2,e.y=-this.store.data.y+this.height/2-e.height/2):this.keyOptions&&this.keyOptions.shiftKey&&(this.keyOptions.ctrlKey||this.keyOptions.metaKey||this.keyOptions.F)||(e.x+=this.store.clipboard.offset*this.store.data.scale,e.y+=this.store.clipboard.offset*this.store.data.scale)}this.makePen(e);const i=[];if(Array.isArray(e.children))for(const o of e.children){const a=this.store.clipboard.pens.find(l=>l.id===o);a&&i.push(this.pastePen(a,e.id).id)}return e.children=i,To(e,!0),e});se(this,"ondblclick",e=>{var n,r,i;if(this.store.hover&&(!this.store.data.locked||this.store.hover.dbInput)&&!this.store.options.disableInput)if(this.store.hover.onShowInput)this.store.hover.onShowInput(this.store.hover,e);else if(this.store.hover&&this.store.hover.parentId)if(((n=this.store.active)==null?void 0:n.length)===1&&this.store.active[0].id===this.store.hover.id)this.showInput(this.store.hover);else{if(this.store.pens[this.store.hover.parentId].children.forEach(o=>{this.store.pens[o].calculative.active=!1,this.store.pens[o].calculative.hover=!1}),this.store.hover.parentId){let o=this.store.hover.id;const a=this.calibrateMouse({x:e.offsetX,y:e.offsetY});let l=1/0;(i=(r=this.store.pens[this.store.hover.parentId])==null?void 0:r.children)==null||i.forEach(s=>{const u=this.store.pens[s];if(Io(a,u.calculative.worldRect)){const c=Math.sqrt((a.x-u.calculative.worldRect.center.x)**2+(a.y-u.calculative.worldRect.center.y)**2);c<l&&(l=c,o=s)}}),this.store.hover=this.store.pens[o],this.store.pens[o].calculative.hover=!0}this.active([this.store.hover])}else this.showInput(this.store.hover);this.store.emitter.emit("dblclick",{x:e.x,y:e.y,pen:this.store.hover})});se(this,"showInput",(e,n,r="transparent")=>{if(!window||!this.store.hover||this.store.hover.locked||this.store.hover.externElement||this.store.hover.disableInput||this.store.hover.disabled)return;if(this.inputDiv.dataset.penId===e.id){this.inputDiv.dataset.isInput="true",this.inputDiv.contentEditable="true",this.inputDiv.focus();const c=window.getSelection();c.selectAllChildren(this.inputDiv),c.collapseToEnd(),this.inputDiv.scrollTop=this.inputDiv.scrollHeight,this.inputDiv.scrollLeft=this.inputDiv.scrollWidth;return}!n&&!e.dbInput?this.setInputStyle(e):(this.inputDiv.style.width="100%",this.inputDiv.style.height="100%");const i=n||e.calculative.worldTextRect,l=`${(e.calculative.tempText===void 0?e.text+""||"":e.calculative.tempText).replace(/\x20/g,"&nbsp;").split(/[\s\n]/).join("</div><div>")}</div>`.replace("</div>","").replace(/\<div\>\<\/div\>/g,"<div><br></div>");this.inputDiv.innerHTML=l,this.inputParent.style.left=i.x+this.store.data.x-(e.calculative.textLeft||0)+"px",this.inputParent.style.top=i.y+this.store.data.y-(e.calculative.textTop||0)+"px";let s=i.width;this.inputParent.style.width=(s<0?12:s)+"px",this.inputParent.style.height=i.height+(e.textTop||0)+"px",this.inputParent.style.zIndex="9999",this.inputParent.style.background=r,e.rotate%360?this.inputParent.style.transform=`rotate(${e.rotate}deg)`:this.inputParent.style.transform=null,this.inputParent.style.display="flex",this.inputDiv.dataset.penId=e.id,this.inputDiv.contentEditable=e.disableInput==null?"true":e.disableInput.toString(),e.dropdownList&&this.dropdown.style.display!=="block"&&(this.dropdown.style.background=e.dropdownBackground||this.store.styles.popContentBg||"#fff",this.dropdown.style.color=e.dropdownColor||"#bdc7db",this.dropdown.style.width=this.inputParent.style.width,this.dropdown.style.fontSize=(e.fontSize||12)+"px",this.setDropdownList(),this.externalElements.style.zIndex="9999"),this.inputDiv.contentEditable="true",this.inputDiv.focus();const u=window.getSelection();u.selectAllChildren(this.inputDiv),u.collapseToEnd(),this.inputDiv.scrollTop=this.inputDiv.scrollHeight,this.inputDiv.scrollLeft=this.inputDiv.scrollWidth,e.calculative.text=void 0,this.initTemplateCanvas([e]),this.render()});se(this,"setInputStyle",e=>{e.text||(e.text="");let n;for(let s=0;s<document.styleSheets.length;s++)document.styleSheets[s].title==="le5le.com"&&(n=document.styleSheets[s]);let r="overflow: scroll;",i="",o=1;const{scale:a}=this.store.data;if(e.fontSize<12&&(o=12/e.fontSize),e.textAlign?r+=`text-align: ${e.textAlign};`:r+="text-align: center;",e.textAlign&&e.whiteSpace==="pre-line"&&(r+=`align-items: ${{left:"start",center:"center",right:"end"}[e.textAlign]};`),e.textBaseline?r+=`justify-content: ${{top:"start",middle:"center",bottom:"end"}[e.textBaseline]};`:r+="justify-content: center;",e.fontFamily&&(r+=`font-family: ${e.fontFamily};`),e.fontSize&&(e.fontSize*a<12?(r+=`font-size:${e.fontSize}px;`,r+=`zoom:${e.fontSize/12*a};`):r+=`font-size:${e.fontSize*a}px;`),r+=`color:${ll(e,this.store)};`,e.fontStyle&&(r+=`font-style: ${e.fontStyle};`),e.fontWeight&&(r+=`font-weight: ${e.fontWeight};`),e.textLeft&&(r+=`margin-left:${a>1?e.textLeft*o:e.textLeft*o/a}px;`),e.textTop&&(r+=`margin-top:${a>1?e.textTop*o:e.textTop*o/a}px;`),e.lineHeight&&(r+=`line-height:${a>1?e.fontSize*e.lineHeight*a:e.fontSize*e.lineHeight*o}px;`),e.textHeight)r+=`height:${a>1?e.textHeight*o*a:e.textHeight*o}px;`;else{let s=e.calculative.worldRect.height/a;s<0&&(s=0);let u=e.fontSize*a<12?s*o:s*a*o;u<e.fontSize*e.lineHeight*a&&(u=e.fontSize*e.lineHeight*a,r+=`top:-${u/2}px;`),r+=`height:${u}px;`}let l=null;if(e.textWidth)l=e.textWidth<1&&e.textWidth>-1?e.textWidth*e.calculative.worldRect.width:e.textWidth,e.whiteSpace!=="pre-line"&&(l<e.fontSize?r+=`width:${e.fontSize*1.2*o}px;`:r+=`width:${a>1?l*o*a:l*o}px;`);else if(e.whiteSpace===void 0||e.whiteSpace==="break-all"){let s=(e.calculative.worldTextRect.width||12)/a;s<0&&(s=0),r+=`width:${e.fontSize*a<12?s*o:s*a}px;`}if(e.whiteSpace&&(e.whiteSpace==="pre-line"?r+="white-space:pre;":(r+=`white-space:${e.whiteSpace};`,e.whiteSpace==="nowrap"&&(i+="display:contents;"))),e.whiteSpace!=="nowrap"){let s=e.fontSize*1.2*e.text.length,u=(l||e.calculative.worldRect.width/a)*Math.floor(e.calculative.worldRect.height/a/(e.lineHeight*e.fontSize));s>u&&(r+="justify-content: start;")}n.deleteRule(0),n.deleteRule(0),n.insertRule(`.meta2d-input
      .input-div{
        resize:none;border:none;outline:none;background:transparent;position:absolute;flex-grow:1;height:100%;width: 100%;position:absolute;left:0;top:0;display:flex;flex-direction: column;cursor: text;${r}}`),n.insertRule(`.input-div div{${i}}`)});se(this,"hideInput",()=>{if(this.externalElements.style.zIndex="5",this.inputParent.style.display==="flex"){this.inputParent.style.display="none";const e=this.store.pens[this.inputDiv.dataset.penId];if(!e)return;if(e.calculative.text=e.text,this.inputDiv.dataset.value=this.inputDiv.innerHTML.replace(/\<div\>/g,`
`).replace(/\<\/div\>/g,"").replace(/\<br\>/g,"").replace(/&nbsp;/g," ").replace(/(<([^>]+)>)/gi,""),this.inputDiv.dataset.value=this.convertSpecialCharacter(this.inputDiv.dataset.value),e.onInput)e.onInput(e,this.inputDiv.dataset.value);else if(e.text!==this.inputDiv.dataset.value){const n=[Pe(e,!0)];e.text=this.inputDiv.dataset.value,e.calculative.text=e.text,this.inputDiv.dataset.penId=void 0,e.text&&e.textAutoAdjust&&!e.parentId&&oP(e),ca(e),this.patchFlags=!0,this.pushHistory({type:Pt.Update,pens:[Pe(e,!0)],initPens:n}),this.store.emitter.emit("change",e),this.store.emitter.emit("valueUpdate",e)}else e.text===this.inputDiv.dataset.value&&e.calculative.textLines.length==0&&ca(e);this.initTemplateCanvas([e])}this.inputDiv.dataset.penId=void 0,this.dropdown.style.display="none",this.inputDiv.dataset.isInput="false",this.inputDiv.contentEditable="false",this.render()});se(this,"setDropdownList",e=>{this.clearDropdownList();const n=this.store.pens[this.inputDiv.dataset.penId];if(!this.store.data.locked&&!["tablePlus"].includes(n.name))return;if(this.dropdown.style.display="block",!n||!n.dropdownList){this.dropdown.style.display="none";return}if(!n.dropdownList.length){const o=document.createElement("div");o.innerText="None",o.style.padding="5px 12px",o.style.color="#ddd",this.dropdown.appendChild(o);return}const r=this.inputDiv.innerHTML.replace(/\<div\>/g,`
`).replace(/\<\/div\>/g,"").replace(/\<br\>/g,"");let i=0;for(const o of n.dropdownList){const a=typeof o=="string"?o:o.text;e&&r?a.includes(r)&&this.dropdownAppendOption(a,i):this.dropdownAppendOption(a,i),++i}if(!this.dropdown.hasChildNodes()){const o=document.createElement("div");o.innerText="None",o.style.padding="5px 12px",o.style.color="#ddd",this.dropdown.appendChild(o)}});se(this,"selectDropdown",e=>{const n=e.target,r=this.store.pens[this.inputDiv.dataset.penId];if(!n||!r||!r.dropdownList)return;const i=+n.dataset.i,o=r.dropdownList[i];if(!o)return;const a=[Pe(r,!0)];typeof o=="object"?(this.updateValue(r,{...o}),r.calculative.text=void 0,this.calcActiveRect()):r.text=o+"",this.inputDiv.innerText=r.text,this.hideInput(),this.pushHistory({type:Pt.Update,pens:[Pe(r,!0)],initPens:a}),this.render(),this.store.emitter.emit("change",r),this.store.emitter.emit("valueUpdate",r)});se(this,"inFitBorder",e=>{let n;const r=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;let o={x:(e.x-this.store.data.origin.x)/this.store.data.scale,y:(e.y-this.store.data.origin.y)/this.store.data.scale};const a=this.canvasImage.activeFit;this.externalElements.style.cursor="default",o.y>i*a.y-10&&o.y<i*a.y+10&&(n="top",this.externalElements.style.cursor="row-resize"),o.y>i*(a.y+a.height)-10&&o.y<i*(a.y+a.height)+10&&(n="bottom",this.externalElements.style.cursor="row-resize"),o.x>r*a.x-10&&o.x<r*a.x&&(n="left",this.externalElements.style.cursor="col-resize"),o.x>r*(a.x+a.width)-10&&o.x<r*(a.x+a.width)+10&&(n="right",this.externalElements.style.cursor="col-resize"),this.canvasImage.currentFit=n});this.parent=e,this.parentElement=n,this.store=r,this.canvasTemplate=new h$(n,r),this.canvasTemplate.canvas.style.zIndex="1",this.canvasImageBottom=new $b(n,r,!0),this.canvasImageBottom.canvas.style.zIndex="2",n.appendChild(this.canvas),this.canvas.style.position="absolute",this.canvas.style.backgroundRepeat="no-repeat",this.canvas.style.backgroundSize="100% 100%",this.canvas.style.zIndex="3",this.canvasImage=new $b(n,r),this.canvasImage.canvas.style.zIndex="4",this.magnifierCanvas=new d$(this,n,r),this.magnifierCanvas.canvas.style.zIndex="5",this.externalElements.style.position="absolute",this.externalElements.style.left="0",this.externalElements.style.top="0",this.externalElements.style.outline="none",this.externalElements.style.background="transparent",this.externalElements.style.zIndex="5",n.style.position="relative",n.appendChild(this.externalElements),this.createInput(),this.tooltip=new u$(n,r),this.tooltip.box.onmouseleave=i=>{this.patchFlags=!0,this.store.lastHover&&(this.store.lastHover.calculative.hover=!1);let o=this.store.data.pens.find(a=>a.calculative.hover===!0);lc(o,!1)},this.popconfirm=new g$(n,r),this.dialog=new f$(n,r),this.title=new Qd(n),this.store.options.scroll&&(this.scroll=new lC(this)),this.store.dpiRatio=globalThis.devicePixelRatio||1,this.store.dpiRatio<1?this.store.dpiRatio=1:this.store.dpiRatio>1&&this.store.dpiRatio<1.5&&(this.store.dpiRatio=1.5),this.clientRect=this.externalElements.getBoundingClientRect(),this.listen(),window==null||window.addEventListener("resize",this.onResize),window==null||window.addEventListener("scroll",this.onScroll),window==null||window.addEventListener("message",this.onMessage)}listen(){switch(this.externalElements.addEventListener("gesturestart",this.onGesturestart),this.externalElements.ondragover=e=>e.preventDefault(),this.externalElements.ondrop=this.ondrop,this.externalElements.oncontextmenu=e=>e.preventDefault(),this.store.options.interval=50,this.externalElements.ontouchstart=this.ontouchstart,this.externalElements.ontouchmove=this.ontouchmove,this.externalElements.ontouchend=this.ontouchend,this.externalElements.onmousedown=e=>{this.onMouseDown({x:e.offsetX,y:e.offsetY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:e.buttons})},this.externalElements.onmousemove=e=>{e.target===this.externalElements&&this.onMouseMove({x:e.offsetX,y:e.offsetY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:e.buttons})},this.externalElements.onmouseup=e=>{this.onMouseUp({x:e.offsetX,y:e.offsetY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,buttons:e.buttons,button:e.button})},this.externalElements.onmouseleave=e=>{this.store.data.pens.forEach(n=>{n.calculative.hover&&(n.calculative.hover=!1)}),this.store.hover&&(this.store.hover.calculative.hover=!1,this.store.hover=void 0),this.render(),e.toElement!==this.tooltip.box&&e.toElement!==this.tooltip.arrowUp&&e.toElement!==this.tooltip.arrowDown&&(this.tooltip.hide(),this.store.lastHover=void 0)},this.externalElements.ondblclick=this.ondblclick,this.externalElements.tabIndex=0,this.externalElements.onblur=()=>{this.mouseDown=void 0},this.externalElements.onwheel=this.onwheel,document.addEventListener("copy",this.onCopy),document.addEventListener("cut",this.onCut),document.addEventListener("paste",this.onPaste),this.store.options.keydown){case Na.Document:document.addEventListener("keydown",this.onkeydown),document.addEventListener("keyup",this.onkeyup);break;case Na.Canvas:this.externalElements.addEventListener("keydown",this.onkeydown),this.externalElements.addEventListener("keyup",this.onkeyup);break}}splitLine(e,n){const r=e.calculative.worldAnchors,i=r.findIndex(c=>c===n);if([-1,0,r.length-1].includes(i))return;const o=Pe(e,!0),a=Pe(e,!0),l=Wt();a.id=l,a.calculative.canvas=this,a.calculative.active=!1,a.calculative.hover=!1;const s=Pe(r.slice(0,i+1)),u=Pe(r.slice(i)).map(c=>(c.penId=l,c));e.calculative.worldAnchors=s,a.calculative.worldAnchors=u,this.initLineRect(e),this.initLineRect(a),this.store.data.pens.push(a),this.store.pens[l]=a,this.pushHistory({type:Pt.Add,pens:[Pe(a,!0)],step:2}),this.pushHistory({type:Pt.Update,initPens:[o],pens:[Pe(e,!0)],step:2})}translateAnchor(e,n){this.movingAnchor.x+=e,this.movingAnchor.y+=n;const r=this.movingAnchor.penId;if(r){const i=this.store.pens[r],o=i.calculative.worldRect;this.movingAnchor.x<o.x?this.movingAnchor.x=o.x:this.movingAnchor.x>o.ex&&(this.movingAnchor.x=o.ex),this.movingAnchor.y<o.y?this.movingAnchor.y=o.y:this.movingAnchor.y>o.ey&&(this.movingAnchor.y=o.ey);const a=pc(this.movingAnchor,o),l=i.anchors.findIndex(s=>s.id===this.movingAnchor.id);i.anchors[l]=a,this.patchFlags=!0}}async fileToPen(e,n){let r="";return this.store.options.uploadFn?r=await this.store.options.uploadFn(e):this.store.options.uploadUrl?r=await lP(e,this.store.options.uploadUrl,this.store.options.uploadParams,this.store.options.uploadHeaders):r=await sP(e),new Promise((i,o)=>{const a=new Image;a.onload=()=>{Tt.htmlElements[r]=a,i({width:a.width,height:a.height,name:n?"gif":"image",image:r})},a.onerror=l=>{o(l)},a.crossOrigin="anonymous",a.src=r})}async dropPens(e,n){var s,u,c,f;this.randomIdObj={};for(const v of e)!v.parentId&&this.randomCombineId(v,e);if(Object.keys(this.randomIdObj).length!==0){const v=Object.keys(this.randomIdObj).join("|"),g=new RegExp(`(${v})`,"g");for(const m of e){if(m.type?(m.anchors[0].connectTo=this.randomIdObj[m.anchors[0].connectTo],m.anchors[m.anchors.length-1].connectTo=this.randomIdObj[m.anchors[m.anchors.length-1].connectTo]):(s=m.connectedLines)==null||s.forEach(y=>{y.lineAnchor=this.randomIdObj[y.lineAnchor],y.lineId=this.randomIdObj[y.lineId]}),(u=m.animations)!=null&&u.length){const y=JSON.stringify(m.animations).replace(g,p=>this.randomIdObj[p]);m.animations=JSON.parse(y)}if((c=m.triggers)!=null&&c.length){const y=JSON.stringify(m.triggers).replace(g,p=>this.randomIdObj[p]);m.triggers=JSON.parse(y)}if((f=m.events)!=null&&f.length){const y=JSON.stringify(m.events).replace(g,p=>this.randomIdObj[p]);m.events=JSON.parse(y)}}}for(const v of e)v.id||(v.id=Wt()),!v.calculative&&(v.calculative={canvas:this}),this.store.pens[v.id]=v;let r=0,i=0,o=0;for(const v of e)v.parentId||(v.width*=this.store.data.scale,v.height*=this.store.data.scale,v.x=n.x-v.width/2+o,v.y=n.y-v.height/2+i,v.tags&&v.tags.includes("meta3d")&&(v.x=this.store.data.origin.x,v.y=this.store.data.origin.y),v.dataset&&(r%2===0?o=v.width-40*this.store.data.scale:o=0,r++,r%2===0&&(i+=v.height+10*this.store.data.scale)));const a=this.store.data.width||this.store.options.width,l=this.store.data.height||this.store.options.height;if(a&&l){let v={x:this.store.data.origin.x,y:this.store.data.origin.y,width:a*this.store.data.scale,height:l*this.store.data.scale},g=!0;for(const m of e)if(!m.parentId){let y=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x,y:m.y+m.height},{x:m.x+m.width,y:m.y+m.height},{x:m.x+m.width/2,y:m.y+m.height/2}];if(m.x===v.x&&m.y===v.y&&m.width===v.width&&m.height===v.height||y.some(p=>Io(p,v))){g=!1,this.store.options.strictScope&&(m.x<v.x&&(m.x=v.x),m.y<v.y&&(m.y=v.y),m.x+m.width>v.x+v.width&&(m.x=v.x+v.width-m.width),m.y+m.height>v.y+v.height&&(m.y=v.y+v.height-m.height));break}}if(g){console.info("画笔在大屏范围外");return}}await this.addPens(e,!0),this.active(e.filter(v=>!v.parentId)),this.render(),this.externalElements.focus()}randomCombineId(e,n,r){let i=null;e.type?e.anchors[0].connectTo||e.anchors[e.anchors.length-1].connectTo?i=[e.id,e.anchors[0].id,e.anchors[e.anchors.length-1].id]:i=[e.id]:n.length>1&&(i=[e.id]),pb(e),n.length>1&&(i.length===1?this.randomIdObj[i[0]]=e.id:(this.randomIdObj[i[0]]=e.id,this.randomIdObj[i[1]]=e.anchors[0].id,this.randomIdObj[i[2]]=e.anchors[e.anchors.length-1].id)),e.parentId=r;const o=[];if(Array.isArray(e.children))for(const a of e.children){const l=n.find(s=>s.id===a);l&&o.push(this.randomCombineId(l,n,e.id).id)}return e.children=o,e}async addPens(e,n,r){if(this.beforeAddPens&&await this.beforeAddPens(e)!=!0)return[];const i=[];for(const o of e)this.beforeAddPen&&this.beforeAddPen(o)!=!0||(r&&(o.x=o.x*this.store.data.scale+this.store.data.origin.x,o.y=o.y*this.store.data.scale+this.store.data.origin.y,o.width=o.width*this.store.data.scale,o.height=o.height*this.store.data.scale),this.makePen(o),i.push(o));return this.render(),this.store.emitter.emit("add",i),n&&this.pushHistory({type:Pt.Add,pens:Pe(i,!0)}),i}getInitPencilLine(e){const{data:n,options:r}=this.store,i=n.scale,o=n.lineWidth||1;return{id:e.penId,name:"line",x:e.x,y:e.y,type:mn.Line,calculative:{canvas:this,pencil:!0,active:!0,worldAnchors:[e],lineWidth:o*i},fromArrow:n.fromArrow||r.fromArrow,toArrow:n.toArrow||r.toArrow,lineWidth:o}}createDrawingLine(e){this.inactive();const{data:n,options:r}=this.store,i=n.scale,o=n.lineWidth||1;return e.penId=Wt(),{id:e.penId,name:"line",lineName:this.drawingLineName,x:e.x,y:e.y,type:mn.Line,calculative:{canvas:this,active:!0,worldAnchors:[e],lineWidth:o*i},fromArrow:n.fromArrow||r.fromArrow,toArrow:n.toArrow||r.toArrow,lineWidth:o}}addRuleLine(e){const{x:n,y:r,scale:i,origin:o}=this.store.data,a=e.x+n,l=e.y+r;let s=e.x,u=e.y,c=0,f=0,v=0,g=0;if(a<=l&&a<20)s=-n,c=this.width,v=1,e.ctrlKey||(u=Math.round((u-o.y)/(i*10))*(i*10)+o.y);else if(l<a&&l<20)u=-r,f=this.height,g=1,e.ctrlKey||(s=Math.round((s-o.x)/(i*10))*(i*10)+o.x);else return;this.addPen({isRuleLine:!0,type:mn.Line,name:"line",lineName:"line",x:s,y:u,width:c,height:f,color:this.store.options.ruleLineColor,anchors:[{x:0,y:0},{x:v,y:g}]})}clearRuleLines(){this.delete(this.ruleLines)}get ruleLines(){return this.store.data.pens.filter(e=>e.isRuleLine)}alignPenToGrid(e){var r;if(this.store.options.autoAlignGrid&&this.store.data.grid&&!e.type){const i=this.store.data.gridSize||this.store.options.gridSize,{origin:o,scale:a}=this.store.data,{x:l,y:s}=e,u={x:l,y:s},c=this.getPenRect(e),f=parseInt((c.x/i).toFixed()),v=parseInt((c.y/i).toFixed()),g=f*i,m=v*i;u.x=o.x+g*a,u.y=o.y+m*a,Object.assign(e,u),(r=e.onMove)==null||r.call(e,e),this.updatePenRect(e),this.calcActiveRect(),this.getSizeCPs()}}movedActivePens(e){let n=this.getAllFollowersByPens(this.store.active,!1);const r=Pe(n,!0),i=this.store.data.gridSize||this.store.options.gridSize,{origin:o,scale:a}=this.store.data,l=this.store.options.autoAlignGrid&&(this.store.data.grid||this.store.options.grid);if(n.forEach(v=>{var C;const g=this.movingPens.findIndex(x=>x.id===v.id+Yr);if(g<0)return;const{x:m,y}=this.movingPens[g],p={x:m,y};if(l&&!this.movingPens[g].type){const x=this.getPenRect(this.movingPens[g]),S=parseInt((x.x/i).toFixed()),E=parseInt((x.y/i).toFixed()),P=S*i,$=E*i;p.x=o.x+P*a,p.y=o.y+$*a}Object.assign(v,p),(C=v.onMove)==null||C.call(v,v),this.updatePenRect(v),this.updateLines(v),this.store.emitter.emit("updateLines",v),this.patchFlagsLines.forEach(x=>{x.type&&this.initLineRect(x)}),this.patchFlagsLines.clear(),v.calculative.x=v.x,v.calculative.y=v.y,v.calculative.initRect&&(v.calculative.initRect.x=v.calculative.x,v.calculative.initRect.y=v.calculative.y,v.calculative.initRect.ex=v.calculative.x+v.calculative.width,v.calculative.initRect.ey=v.calculative.y+v.calculative.height),K1(v),v.parentId&&this.parent.updateRectbyChild(v.calculative.worldRect,v,this.store.pens[v.parentId])}),this.initImageCanvas(this.store.active),this.initTemplateCanvas(this.store.active),!this.dock)return;const{xDock:s,yDock:u}=this.dock;let c;s&&(c=this.store.pens[s.penId]),!c&&u&&(c=this.store.pens[u.penId]);const f=Pe(this.store.active,!0);if(e&&this.store.active.length===1&&(c==null?void 0:c.type)===1&&(s!=null&&s.anchorId||u!=null&&u.anchorId)){const v=Gn(c),g=gn(c);if(s!=null&&s.anchorId){const m=this.store.pens[this.store.active[0].id+Yr].calculative.worldAnchors.find(y=>y.id===s.anchorId);m.x===v.x&&m.y===v.y?(r.push(Pe(c,!0)),xr(this.store.active[0],m,c,v),f.push(Pe(c,!0))):m.x===g.x&&m.y===g.y&&(r.push(Pe(c,!0)),xr(this.store.active[0],m,c,g),f.push(Pe(c,!0)))}else if(u!=null&&u.anchorId){const m=this.store.pens[this.store.active[0].id+Yr].calculative.worldAnchors.find(y=>y.id===u.anchorId);m.x===v.x&&m.y===v.y?(r.push(Pe(c,!0)),xr(this.store.active[0],m,c,v),f.push(Pe(c,!0))):m.x===g.x&&m.y===g.y&&(r.push(Pe(c,!0)),xr(this.store.active[0],m,c,g),f.push(Pe(c,!0)))}}l&&(this.calcActiveRect(),this.getSizeCPs()),this.pushHistory({type:Pt.Update,pens:f,initPens:r}),this.store.emitter.emit("translatePens",f)}copyMovedPens(){this.copy(this.store.active.map((e,n)=>{const{x:r,y:i}=this.movingPens[n];return this.updateLines(e),{...e,x:r,y:i}})),this.pasteOffset=!1,this.paste()}initImageCanvas(e){e.some(n=>this.hasImage(n,!1))&&this.canvasImage.init(),e.some(n=>this.hasImage(n,!0))&&this.canvasImageBottom.init()}initTemplateCanvas(e){e.some(n=>n.canvasLayer===on.CanvasTemplate)&&this.canvasTemplate.init()}hasImage(e,n){var r;return e.image&&e.name!=="gif"?n?e.canvasLayer===on.CanvasImageBottom:e.canvasLayer===on.CanvasImage:(r=e.children)==null?void 0:r.some(i=>{const o=this.store.pens[i];return o&&this.hasImage(o,n)})}inactive(e){this.store.active.length&&(this.initTemplateCanvas(this.store.active),this.store.active.forEach(n=>{n.calculative.active=void 0,n.calculative.activeAnchor=void 0,n.calculative.hover=!1,Us(n,!1)}),!e&&this.store.emitter.emit("inactive",this.store.active),this.store.active=[],this.activeRect=void 0,this.sizeCPs=void 0,this.store.activeAnchor=void 0,this.patchFlags=!0)}active(e,n=!0){if(this.store.active){n&&this.store.emitter.emit("inactive",this.store.active);for(const r of this.store.active)r.calculative.active=void 0,r.calculative.hover=!1,Us(r,!1)}this.store.active=[],e.forEach(r=>{r.calculative.active=!0,Us(r)}),this.store.active.push(...e),this.activeRect=void 0,this.calcActiveRect(),this.initTemplateCanvas(e),this.patchFlags=!0,n&&this.store.emitter.emit("active",this.store.active)}getSizeCPs(){this.sizeCPs=Mo(this.activeRect);const e=[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}],{x:n,y:r,width:i,height:o,rotate:a,center:l}=this.activeRect;e.forEach(s=>{const u={x:s.x*i+n,y:s.y*o+r};_n(u,a,l),this.sizeCPs.push(u)})}getSpecialAngle(e,n){let r=0;e.x-n.x!==0?(r=Math.atan((n.y-e.y)/(e.x-n.x))*180/Math.PI,e.x<n.x&&(r>0?r-=180:r+=180)):n.y>e.y?r=90:n.y<e.y&&(r=-90),r=Math.round(r/15)*15;let i=Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));e.x=n.x+Math.cos(r/180*Math.PI)*i,e.y=n.y-Math.sin(r/180*Math.PI)*i}clearHover(){this.hoverType=kt.None,this.store.hover=null,this.store.hoverAnchor=null}inAnchor(e,n,r){var i;if(this.store.hoverAnchor=void 0,this.movingAnchor=void 0,!r||r.locked>Xt.DisableEdit||!(n.type&&n.calculative.active)&&this.store.options.disableAnchor||n.disableAnchor)return kt.None;if((this.mouseDown||this.drawingLine)&&n.name==="line"&&r.connectTo){const o=this.findOne(r.connectTo);if(o!=null&&o.calculative&&!(o!=null&&o.calculative.active)){n=o;const a=o.calculative.worldAnchors.find(l=>l.id===r.anchorId);a&&(r=a)}}if(r.twoWay===Pr.Disable&&n.name!=="line")return kt.None;if(n.name==="line"&&r.connectTo){let o=(i=this.findOne(r.connectTo))==null?void 0:i.anchors.find(a=>a.id===r.anchorId);if(o&&o.twoWay)return kt.None}if(this.drawingLine){if(r.twoWay===Pr.Out)return kt.None}else if(!(this.mouseDown&&this.hoverType===kt.LineAnchor)){if(r.twoWay===Pr.In)return kt.None}if(Ws(e,r,this.pointSize,r.penId?this.store.pens[r.penId]:void 0))return r!==this.store.hoverAnchor&&(this.patchFlags=!0),this.store.hoverAnchor=r,this.store.hover=n,n.type?r.connectTo&&!n.calculative.active&&(this.store.hover=this.store.pens[r.connectTo],this.store.hover)?(this.store.hoverAnchor=this.store.hover.calculative.worldAnchors.find(o=>o.id===r.anchorId),this.store.hoverAnchor?(this.externalElements.style.cursor="crosshair",kt.NodeAnchor):kt.None):(this.hotkeyType===Sn.AddAnchor?this.externalElements.style.cursor="vertical-text":this.externalElements.style.cursor="pointer",kt.LineAnchor):(this.hotkeyType===Sn.AddAnchor?this.externalElements.style.cursor="vertical-text":this.externalElements.style.cursor="crosshair",kt.NodeAnchor);if(!this.mouseDown&&n.type){if(n.calculative.active&&r.prev&&Ws(e,r.prev,this.pointSize))return this.store.hoverAnchor=r,this.store.hover=n,this.externalElements.style.cursor="pointer",kt.LineAnchorPrev;if(n.calculative.active&&r.next&&Ws(e,r.next,this.pointSize))return this.store.hoverAnchor=r,this.store.hover=n,this.externalElements.style.cursor="pointer",kt.LineAnchorNext}return kt.None}resize(e,n){e=e||this.parentElement.clientWidth,n=n||this.parentElement.clientHeight,this.width=e,this.height=n,this.canvasRect={x:0,y:0,width:e,height:n},hr(this.canvasRect),this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",this.externalElements.style.width=e+"px",this.externalElements.style.height=n+"px",this.canvasTemplate.resize(e,n),this.canvasImage.resize(e,n),this.canvasImageBottom.resize(e,n),this.magnifierCanvas.resize(e,n),e=e*this.store.dpiRatio|0,n=n*this.store.dpiRatio|0,this.canvas.width=e,this.canvas.height=n,this.offscreen.width=e,this.offscreen.height=n,this.clientRect=this.externalElements.getBoundingClientRect(),this.canvas.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").scale(this.store.dpiRatio,this.store.dpiRatio),this.offscreen.getContext("2d").textBaseline="middle";for(const r of this.store.data.pens)r.isRuleLine&&(r.width?r.height||(r.width=this.width):r.height=this.height,this.updatePenRect(r)),To(r);this.render()}clearCanvas(){this.activeRect=void 0,this.sizeCPs=void 0,this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.offscreen.getContext("2d").clearRect(0,0,this.offscreen.width,this.offscreen.height),this.store.data.template||this.canvasTemplate.clear(),this.canvasImage.clear(),this.canvasImageBottom.clear()}async addPen(e,n,r,i){if(!(this.beforeAddPens&&await this.beforeAddPens([e])!=!0)&&!(this.beforeAddPen&&this.beforeAddPen(e)!=!0))return i&&(e.x=e.x*this.store.data.scale+this.store.data.origin.x,e.y=e.y*this.store.data.scale+this.store.data.origin.y,e.width=e.width*this.store.data.scale,e.height=e.height*this.store.data.scale),this.makePen(e),this.active([e]),this.render(),r&&this.store.emitter.emit("add",[e]),n&&this.pushHistory({type:Pt.Add,pens:[e]}),e}pushHistory(e){var i;if(this.store.data.locked)return;const{origin:n,scale:r}=this.store.data;e.origin=Pe(n),e.scale=r,e.type!==Pt.Update&&e.pens&&e.pens.forEach(o=>{o.calculative&&(o.calculative.layer=this.store.data.pens.findIndex(a=>a.id===o.id))}),this.store.historyIndex<this.store.histories.length-1&&this.store.histories.splice(this.store.historyIndex+1,this.store.histories.length-this.store.historyIndex-1),(i=e.pens)==null||i.forEach(o=>{let a;if(e.initPens)for(const l of e.initPens)l.id===o.id&&(a=l);if(a)for(const l in o)a[l]==null&&(a[l]=void 0)}),this.store.histories.push(e),this.store.historyIndex=this.store.histories.length-1,this.store.emitter.emit("update",{previous:e.initPens,current:e.pens})}undo(){if(this.store.data.locked||this.store.historyIndex==null||this.store.historyIndex<0)return;const e=this.store.histories[this.store.historyIndex--];this.doEditAction(e,!0);let n=e.step;for(;n>1;){const r=this.store.histories[this.store.historyIndex--];this.doEditAction(r,!0),n--}(e.type==Pt.Add||e.type==Pt.Delete||e.type==Pt.Update)&&this.activeHistory()}redo(){if(this.store.data.locked||this.store.historyIndex==null||this.store.historyIndex>this.store.histories.length-2)return;const e=this.store.histories[++this.store.historyIndex];this.doEditAction(e,!1);let n=e.step;for(;n>1;){const r=this.store.histories[++this.store.historyIndex];this.doEditAction(r,!1),n--}(e.type==Pt.Add||e.type==Pt.Delete||e.type==Pt.Update)&&this.activeHistory()}activeHistory(){let e=this.store.histories[this.store.historyIndex+1];const n=[];if(e&&e.type===Pt.Update){e.pens.forEach(i=>{n.push(this.store.pens[i.id])}),this.active(n);return}let r=this.store.histories[this.store.historyIndex];r&&(r.type===Pt.Add||r.type===Pt.Delete)&&(r.pens.forEach(i=>{n.push(this.store.pens[i.id])}),this.active(n))}doEditAction(e,n){switch(this.inactive(),this.store.hoverAnchor=void 0,this.store.hover=void 0,e.type){case Pt.Add:e.pens.forEach(o=>{var s;const a=Pe(o,!0),l=this.store.data.pens.findIndex(u=>u.id===a.id);l>-1&&((s=a.onDestroy)==null||s.call(a,this.store.pens[a.id]),this.store.data.pens.splice(l,1),this.store.pens[a.id]=void 0,a.calculative||(a.calculative={}),a.calculative.canvas=this,this.store.animates.delete(a),this.store.animateMap.delete(a))}),e.type=Pt.Delete;break;case Pt.Update:const r=n?e.initPens:e.pens,i=n?e.pens:e.initPens;r.forEach(o=>{const a=Pe(o,!0),l=this.store.data.pens.findIndex(s=>s.id===a.id);if(l>-1){if(a.calculative=this.store.data.pens[l].calculative,this.store.data.pens[l].type&&this.store.data.pens[l].lastConnected){for(let u in this.store.data.pens[l].lastConnected)if(this.store.pens[u]){let c=Pe(this.store.data.pens[l].lastConnected[u]);this.store.pens[u].connectedLines=c,a.anchors.forEach(f=>{c.forEach(v=>{f.id===v.lineAnchor&&(f.connectTo=u)})})}}this.store.data.pens[l]=a,this.store.pens[a.id]=a;for(const u in a)(typeof a[u]!="object"||u==="lineDash")&&(a.calculative[u]=a[u]);a.calculative.image=void 0;const s=this.getPenRect(a,e.origin,e.scale);if(this.setPenRect(a,s,!1),this.updateLines(a,!0),a.calculative.canvas.parent.isCombine(a)){let u=i.find(c=>c.id===a.id);P1.forEach(c=>{a[c]!==u[c]&&this.parent.setValue({id:a.id,[c]:a[c]},{render:!0,doEvent:!1})})}}});break;case Pt.Delete:e.pens.reverse().forEach(o=>{var l,s;const a=Pe(o,!0);if(a.calculative||(a.calculative={}),this.store.data.pens.splice(((l=a.calculative)==null?void 0:l.layer)!==-1?(s=a.calculative)==null?void 0:s.layer:this.store.data.pens.length,0,a),this.store.pens[a.id]=a,a.type&&a.lastConnected)for(let u in a.lastConnected)this.store.pens[u]&&(this.store.pens[u].connectedLines=a.lastConnected[u]);a.calculative.canvas=this}),e.pens.reverse().forEach(o=>{const a=this.store.pens[o.id],l=this.getPenRect(a,e.origin,e.scale);this.setPenRect(a,l,!1),a.calculative.image=void 0,a.calculative.backgroundImage=void 0,a.calculative.strokeImage=void 0,this.loadImage(a)}),e.type=Pt.Add;break;case Pt.Replace:{const o=n?e.initPens:e.pens;(n?e.pens:e.initPens).forEach(l=>{var c;const s=Pe(l,!0);if(this.store.data.pens.findIndex(f=>f.id===s.id)>-1){(c=s.onDestroy)==null||c.call(s,this.store.data.pens.find(v=>v.id===s.id));const f=this.store.data.pens.findIndex(v=>v.id===s.id);this.store.data.pens.splice(f,1),this.store.pens[s.id]=void 0,s.calculative||(s.calculative={}),s.calculative.canvas=this,this.store.animates.delete(s),this.store.animateMap.delete(s)}}),o.reverse().forEach(l=>{var u,c;const s=Pe(l,!0);if(s.calculative||(s.calculative={}),this.store.data.pens.splice(((u=s.calculative)==null?void 0:u.layer)!==-1?(c=s.calculative)==null?void 0:c.layer:this.store.data.pens.length,0,s),this.store.pens[s.id]=s,s.type&&s.lastConnected)for(let f in s.lastConnected)this.store.pens[f]&&(this.store.pens[f].connectedLines=s.lastConnected[f]);s.calculative.canvas=this}),o.reverse().forEach(l=>{const s=this.store.data.pens.find(c=>c.id===l.id),u=this.getPenRect(s,e.origin,e.scale);this.setPenRect(s,u,!1),s.calculative.image=void 0,s.calculative.backgroundImage=void 0,s.calculative.strokeImage=void 0,this.loadImage(s)}),e.type=Pt.Replace;break}}if(e.type===Pt.Update){let r=[...e.pens,...e.initPens];this.initImageCanvas(r),this.initTemplateCanvas(r)}else this.initImageCanvas(e.pens),this.initTemplateCanvas(e.pens);this.parent.onSizeUpdate(),this.render(),this.store.emitter.emit(n?"undo":"redo",e)}makePen(e){var i;if(e.id||(e.id=Wt()),Math.abs(this.store.lastScale-this.store.data.scale)<1e-4&&this.store.sameTemplate&&this.store.templatePens[e.id]&&e.canvasLayer===on.CanvasTemplate){e=this.store.templatePens[e.id],this.store.data.pens.push(e),this.updatePenRect(e);return}if(e.copyIndex?(this.store.data.pens.splice(e.copyIndex+1,0,e),delete e.copyIndex):this.store.data.pens.push(e),this.store.pens[e.id]=e,e.path){!e.pathId&&(e.pathId=Wt());const o=this.store.data.paths;!o[e.pathId]&&(o[e.pathId]=e.path),e.path=void 0}e.lineWidth==null&&(e.lineWidth=1);const{fontSize:n,lineHeight:r}=this.store.options;e.fontSize?e.fontSize<0&&(e.fontSize=0):e.fontSize=n>=0?n:12,e.lineHeight||(e.lineHeight=r),e.image&&e.name!=="gif"&&e.canvasLayer===void 0&&(e.isBottom?e.canvasLayer=on.CanvasImageBottom:e.canvasLayer=on.CanvasImage,delete e.isBottom),e.template&&(e.canvasLayer=on.CanvasTemplate),e.calculative={canvas:this,singleton:(i=e.calculative)==null?void 0:i.singleton},(e.video||e.audio)&&(e.calculative.onended=o=>{this.nextAnimate(o)});for(const o in e)(typeof e[o]!="object"||o==="lineDash")&&(e.calculative[o]=e[o]);if(e.calculative.image=void 0,e.calculative.backgroundImage=void 0,e.calculative.strokeImage=void 0,!e.anchors&&Tt.anchors[e.name]&&(e.anchors||(e.anchors=[]),Tt.anchors[e.name](e)),!e.anchors){const o=Pe(this.store.options.defaultAnchors);o.forEach((a,l)=>{a.id=`${l}`,a.penId=e.id}),e.anchors=o}this.updatePenRect(e),!e.anchors&&e.calculative.worldAnchors&&(e.anchors=e.calculative.worldAnchors.map(o=>pc(o,e.calculative.worldRect))),!e.rotate&&(e.rotate=0),e.lineAnimateImages??(e.lineAnimateImages=[]),e.lineAnimateImages&&e.lineAnimateImages.forEach(o=>{this.__loadImage(o)}),this.loadImage(e),this.parent.penNetwork(e)}drawline(e){var n;this.drawingLine&&((n=this[this.drawingLineName])==null||n.call(this,this.store,this.drawingLine,e),this.store.path2dMap.set(this.drawingLine,Tt.path2dDraws.line(this.drawingLine)),this.patchFlags=!0)}initLineRect(e){var o;if(!e)return;if(!((o=e.calculative.worldAnchors)!=null&&o.length)){this._del([e]);return}if(!isFinite(e.x)||!isFinite(e.x)||e.x==null||e.y==null)return;const n=Eg(e);e.parentId||Object.assign(e,n);const{fontSize:r,lineHeight:i}=this.store.options;e.fontSize||(e.fontSize=r>=0?r:12,e.calculative.fontSize=e.fontSize*this.store.data.scale),e.lineHeight||(e.lineHeight=i,e.calculative.lineHeight=e.lineHeight),Dn(n),e.calculative.worldRect=n,Bm(e,n),ca(e),To(e),e.calculative&&(e.calculative.gradientAnimatePath=void 0),this.store.path2dMap.set(e,Tt.path2dDraws[e.name](e)),e.calculative.worldAnchors&&(e.anchors=e.calculative.worldAnchors.map(a=>pc(a,e.calculative.worldRect)))}drawingPencil(){cC(this.store),this.pencil=!0,this.externalElements.style.cursor="crosshair"}stopPencil(){this.pencil=!1,this.pencilLine=void 0,this.externalElements.style.cursor="default"}async finishDrawline(e){if(!this.drawingLine)return;const n=Gn(this.drawingLine);let r=gn(this.drawingLine);if(r.isTemp&&(this.drawingLine.calculative.worldAnchors.pop(),r=gn(this.drawingLine)),!e&&(!r.connectTo&&this.drawingLine.calculative.worldAnchors.pop(),Gn(this.drawingLine)===this.drawingLine.calculative.activeAnchor)){this.drawingLine=void 0,this.render();return}if(!n.connectTo||!r.connectTo){if(this.store.options.disableEmptyLine){n.connectTo&&(this.store.pens[n.connectTo].connectedLines=this.store.pens[n.connectTo].connectedLines.filter(a=>a.lineId!==this.drawingLine.id)),this.drawingLine=void 0,this.render();return}}else if(this.store.options.disableRepeatLine&&this.store.data.pens.find(l=>{if(l.type){const s=Gn(l),u=gn(l);return ab(s,n)&&ab(u,r)}})){this.drawingLine=void 0,this.render();return}const i=Eg(this.drawingLine);Object.assign(this.drawingLine,i),this.drawingLine.calculative.worldRect=i,this.drawingLine.calculative.activeAnchor=gn(this.drawingLine),this.store.activeAnchor=this.drawingLine.calculative.activeAnchor,(!this.beforeAddPens||await this.beforeAddPens([this.drawingLine]))&&(!this.beforeAddPen||this.beforeAddPen(this.drawingLine))&&(this.initLineRect(this.drawingLine),this.store.data.pens.push(this.drawingLine),this.store.pens[this.drawingLine.id]=this.drawingLine,this.store.emitter.emit("add",[this.drawingLine]),this.active([this.drawingLine]),this.pushHistory({type:Pt.Add,pens:Pe([this.drawingLine],!0)})),this.store.path2dMap.set(this.drawingLine,Tt.path2dDraws[this.drawingLine.name](this.drawingLine)),this.drawingLine=void 0,this.drawingLineName=void 0,this.render()}async finishPencil(){if(this.pencilLine){const e=Rg(this.pencilLine.calculative.worldAnchors,10,0,this.pencilLine.calculative.worldAnchors.length-1);let n=Gn(this.pencilLine);e.unshift({id:n.id,penId:n.penId,x:n.x,y:n.y}),n=gn(this.pencilLine),e.push({id:n.id,penId:n.penId,x:n.x,y:n.y}),this.pencilLine.calculative.worldAnchors=Qk(e),this.pencilLine.calculative.worldAnchors.length>1&&(this.pencilLine.calculative.pencil=!1,this.store.path2dMap.set(this.pencilLine,Tt.path2dDraws[this.pencilLine.name](this.pencilLine)),(!this.beforeAddPens||await this.beforeAddPens([this.pencilLine]))&&(!this.beforeAddPen||this.beforeAddPen(this.pencilLine))&&(this.initLineRect(this.pencilLine),this.store.data.pens.push(this.pencilLine),this.store.pens[this.pencilLine.id]=this.pencilLine,this.store.emitter.emit("add",[this.pencilLine]),this.active([this.pencilLine]),this.pushHistory({type:Pt.Add,pens:Pe([this.pencilLine],!0)}))),this.pencilLine=void 0,this.render()}}firefoxLoadSvg(e){const n=new Image,r=new XMLHttpRequest;r.open("GET",e.image,!0),r.onload=()=>{const a=new DOMParser().parseFromString(r.responseText,"text/xml").getElementsByTagName("svg")[0],{width:l,height:s}=e.calculative.worldRect;a.setAttribute("width",`${l}px`),a.setAttribute("height",`${s}px`);const c="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(new XMLSerializer().serializeToString(a))));n.src=c,n.onload=()=>{e.calculative.img=n,e.calculative.imgNaturalWidth=n.naturalWidth||e.iconWidth,e.calculative.imgNaturalHeight=n.naturalHeight||e.iconHeight,Tt.htmlElements[e.image]=n,this.imageLoaded(),e.canvasLayer===on.CanvasTemplate&&this.templateImageLoaded()}},r.send()}loadImage(e){if(e.image!==e.calculative.image||!e.calculative.img){if(e.calculative.img=void 0,e.image)if(Tt.htmlElements[e.image]){const n=Tt.htmlElements[e.image];e.calculative.img=n,e.calculative.imgNaturalWidth=n.naturalWidth||e.iconWidth,e.calculative.imgNaturalHeight=n.naturalHeight||e.iconHeight,this.imageLoaded(),e.canvasLayer===on.CanvasTemplate&&this.templateImageLoaded()}else if(navigator.userAgent.includes("Firefox")&&e.image.endsWith(".svg"))this.firefoxLoadSvg(e);else{const n=new Image;n.crossOrigin=e.crossOrigin==="undefined"?void 0:e.crossOrigin||"anonymous",n.src=e.image,this.store.options.cdn&&!(e.image.startsWith("http")||e.image.startsWith("//")||e.image.startsWith("data:image"))&&(n.src=this.store.options.cdn+e.image),n.onload=()=>{e.calculative.img=n,e.calculative.imgNaturalWidth=n.naturalWidth||e.iconWidth,e.calculative.imgNaturalHeight=n.naturalHeight||e.iconHeight,Tt.htmlElements[e.image]=n,this.imageLoaded(),e.canvasLayer===on.CanvasTemplate&&this.templateImageLoaded()}}e.calculative.image=e.image}if(e.backgroundImage!==e.calculative.backgroundImage){if(e.calculative.backgroundImg=void 0,e.backgroundImage)if(Tt.htmlElements[e.backgroundImage]){const n=Tt.htmlElements[e.backgroundImage];e.calculative.backgroundImg=n}else{const n=new Image;n.crossOrigin="anonymous",n.src=e.backgroundImage,this.store.options.cdn&&!(e.backgroundImage.startsWith("http")||e.backgroundImage.startsWith("//")||e.backgroundImage.startsWith("data:image"))&&(n.src=this.store.options.cdn+e.backgroundImage),n.onload=()=>{e.calculative.backgroundImg=n,Tt.htmlElements[e.backgroundImage]=n,this.imageLoaded(),e.canvasLayer===on.CanvasTemplate&&this.templateImageLoaded()}}e.calculative.backgroundImage=e.backgroundImage}if(e.strokeImage!==e.calculative.strokeImage){if(e.calculative.strokeImg=void 0,e.strokeImage)if(Tt.htmlElements[e.strokeImage]){const n=Tt.htmlElements[e.strokeImage];e.calculative.strokeImg=n}else{const n=new Image;n.crossOrigin="anonymous",n.src=e.strokeImage,this.store.options.cdn&&!(e.strokeImage.startsWith("http")||e.strokeImage.startsWith("//")||e.strokeImage.startsWith("data:image"))&&(n.src=this.store.options.cdn+e.strokeImage),n.onload=()=>{e.calculative.strokeImg=n,Tt.htmlElements[e.strokeImage]=n,this.imageLoaded(),e.canvasLayer===on.CanvasTemplate&&e.name!=="gif"&&this.templateImageLoaded()}}e.calculative.strokeImage=e.strokeImage}}__loadImage(e){return new Promise(n=>{if(Tt.htmlElements[e])n(Tt.htmlElements[e]);else{const r=new Image;r.crossOrigin="anonymous",r.src=e,this.store.options.cdn&&!(e.startsWith("http")||e.startsWith("//")||e.startsWith("data:image"))&&(r.src=this.store.options.cdn+e),r.onload=()=>{Tt.htmlElements[e]=r,n(r)}}})}imageLoaded(){this.imageTimer&&clearTimeout(this.imageTimer),this.imageTimer=setTimeout(()=>{this.canvasImage.init(),this.canvasImageBottom.init(),this.render()},100)}templateImageLoaded(){this.templateImageTimer&&clearTimeout(this.templateImageTimer),this.templateImageTimer=setTimeout(()=>{this.canvasTemplate.init(),this.render()},100)}setCalculativeByScale(e){const n=this.store.data.scale;e.calculative.lineWidth=e.lineWidth*n,e.calculative.fontSize=e.fontSize*n,e.fontSize<1&&e.fontSize>0&&(e.calculative.fontSize=e.fontSize*e.calculative.worldRect.height),e.calculative.iconSize=e.iconSize*n,e.calculative.iconWidth=e.iconWidth*n,e.calculative.iconHeight=e.iconHeight*n,e.calculative.iconLeft=e.iconLeft<1&&e.iconLeft>-1?e.iconLeft:e.iconLeft*n,e.calculative.iconTop=e.iconTop<1&&e.iconTop>-1?e.iconTop:e.iconTop*n,e.calculative.textWidth=e.textWidth<1&&e.textWidth>-1?e.textWidth:e.textWidth*n,e.calculative.textHeight=e.textHeight<1&&e.textHeight>-1?e.textHeight:e.textHeight*n,e.calculative.textLeft=e.textLeft<1&&e.textLeft>-1?e.textLeft*e.calculative.worldRect.width:e.textLeft*n,e.calculative.textTop=e.textTop<1&&e.textTop>-1?e.textTop*e.calculative.worldRect.height:e.textTop*n,e.type===mn.Line&&e.borderWidth&&(e.calculative.borderWidth=e.borderWidth*n)}updatePenRect(e,{worldRectIsReady:n,playingAnimate:r}={}){n?Id(e):q1(e),r||this.setCalculativeByScale(e),tl(e),cb(this.store.pens,e),ca(e),To(e),Tt.path2dDraws[e.name]&&this.store.path2dMap.set(e,Tt.path2dDraws[e.name](e)),e.calculative.patchFlags=!0,this.patchFlags=!0,e.children&&e.children.forEach(i=>{const o=this.store.pens[i];o&&this.updatePenRect(o,{worldRectIsReady:!1})}),e.type&&this.initLineRect(e),e.calculative.gradientTimer&&clearTimeout(e.calculative.gradientTimer),e.calculative.gradientTimer=setTimeout(()=>{e.calculative.lineGradient&&(e.calculative.lineGradient=null),e.calculative.gradient&&(e.calculative.gradient=null),e.calculative.radialGradient&&(e.calculative.radialGradient=null),this.patchFlags=!0,e.calculative.gradientTimer=void 0},50)}initGlobalStyle(){if(this.store.options.themeOnlyCanvas||this.store.data.themeOnlyCanvas)return;const e={},n={},r={};ZI.forEach(o=>{var a;if(this.store.options[o]!==void 0&&(e[o]=this.store.options[o]),this.store.data[o]!==void 0&&(n[o]=this.store.data[o]),this.store.data.theme){const l=(a=this.store.theme[this.store.data.theme])==null?void 0:a[o];l!==void 0&&(r[o]=l)}}),this.store.styles={};const i=sc.getThemeObj(this.store.data.theme);Object.assign(this.store.styles,e,n,r,i)}translate(e=0,n=0){if(this.store.data.x+=e*this.store.data.scale,this.store.data.y+=n*this.store.data.scale,this.store.data.x=Math.round(this.store.data.x),this.store.data.y=Math.round(this.store.data.y),this.store.options.padding){let r=$o(this.store.options.padding);const i=this.store.data.width||this.store.options.width,o=this.store.data.height||this.store.options.height;this.width<(i+r[1]+r[3])*this.store.data.scale&&(this.store.data.x+this.store.data.origin.x>r[3]*this.store.data.scale&&(this.store.data.x=r[3]*this.store.data.scale-this.store.data.origin.x),this.store.data.x+this.store.data.origin.x+i*this.store.data.scale<this.width-r[1]*this.store.data.scale&&(this.store.data.x=this.width-r[1]*this.store.data.scale-(this.store.data.origin.x+i*this.store.data.scale))),this.height<(o+r[0]+r[2])*this.store.data.scale&&(this.store.data.y+this.store.data.origin.y>r[0]*this.store.data.scale&&(this.store.data.y=r[0]*this.store.data.scale-this.store.data.origin.y),this.store.data.y+this.store.data.origin.y+o*this.store.data.scale<this.height-r[2]*this.store.data.scale&&(this.store.data.y=this.height-r[2]*this.store.data.scale-(this.store.data.origin.y+o*this.store.data.scale)))}this.store.data.asyncTranslate?(clearTimeout(this.transTimeout),this.transTimeout=setTimeout(()=>{this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init(),this.render()},300)):(this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init(),this.render()),this.store.emitter.emit("translate",{x:this.store.data.x,y:this.store.data.y}),this.tooltip.translate(e,n),this.scroll&&this.scroll.isShow&&this.scroll.translate(e,n),this.onMovePens()}onMovePens(){var n;const e=this.parent.map;e&&e.isShow&&e.setView();for(const r of this.store.data.pens)To(r),(n=r.onMove)==null||n.call(r,r),r.isRuleLine&&(r.width?r.height||(r.x=-this.store.data.x):r.y=-this.store.data.y,this.updatePenRect(r))}scale(e,n={x:0,y:0}){var l;const r=this.store.data.minScale||this.store.options.minScale,i=this.store.data.maxScale||this.store.options.maxScale;if(!(e>=r&&e<=i))return;this.calibrateMouse(n);const o=e/this.store.data.scale;this.store.data.scale=e,this.store.data.center=n,(l=this.store.clipboard)!=null&&l.pos&&Wd(this.store.clipboard.pos,o,n),Wd(this.store.data.origin,o,n),this.store.data.pens.forEach(s=>{if(s.onScale&&s.onScale(s),!s.parentId){if(Os(s,o,n),s.isRuleLine){const u=1/o,c=s.calculative.worldRect.center;s.width&&s.height||Os(s,u,c)}this.updatePenRect(s,{worldRectIsReady:!0}),this.execPenResize(s)}}),this.onMovePens(),this.calcActiveRect(),this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init();const a=this.parent.map;a&&a.isShow&&a.setView(),this.render(),this.store.emitter.emit("scale",this.store.data.scale)}templateScale(e,n={x:0,y:0}){const{minScale:r,maxScale:i}=this.store.options;if(!(e>=r&&e<=i))return;const o=e/this.store.data.scale;this.store.data.scale=e,this.store.data.center={x:0,y:0},this.store.data.origin={x:0,y:0},this.store.data.pens.forEach(a=>{if(!a.parentId){if(Os(a,o,n),a.onScale&&a.onScale(a),a.isRuleLine){const l=o>1?1:1/o/o,s=a.calculative.worldRect.center;a.width&&a.height||Os(a,l,s)}this.execPenResize(a)}}),this.calcActiveRect()}rotatePens(e){this.initPens||(this.initPens=Pe(this.getAllByPens(this.store.active))),this.activeRect.rotate=Ai(e,this.activeRect.center),this.activeRect.rotate%90<10&&(this.activeRect.rotate-=this.activeRect.rotate%90),this.activeRect.rotate%90>80&&(this.activeRect.rotate+=90-this.activeRect.rotate%90),this.store.active.length===1&&(this.lastRotate=this.store.active[0].rotate||0);const n=this.activeRect.rotate-this.lastRotate;for(const r of this.store.active){if(r.parentId)return;this.rotatePen(r,n,this.activeRect),r.onRotate&&r.onRotate(r),this.updateLines(r)}this.lastRotate=this.activeRect.rotate,this.getSizeCPs(),this.initImageCanvas(this.store.active),this.initTemplateCanvas(this.store.active),this.render(),this.store.emitter.emit("rotatePens",this.store.active),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:Pt.Update,pens:Pe(this.getAllByPens(this.store.active)),initPens:this.initPens}),this.initPens=void 0},200)}resizePens(e){if(this.initPens||(this.initPens=Pe(this.store.active,!0)),!this.initActiveRect){this.initActiveRect=Pe(this.activeRect);return}const n={x:this.mouseDown.x,y:this.mouseDown.y},r={x:e.x,y:e.y};let i=r.x-n.x,o=r.y-n.y;const a=Pe(this.initActiveRect);if(yb(a,i,o,this.resizeIndex),Dn(a),!this.store.options.disableDock){this.clearDock();const g=this.customResizeDock||JP;this.dock=g(this.store,a,this.store.active,this.resizeIndex);const{xDock:m,yDock:y}=this.dock;if(m){i+=m.step;const p=this.store.pens[m.penId];p.calculative.isDock=!0}if(y){o+=y.step;const p=this.store.pens[y.penId];p.calculative.isDock=!0}}const l=this.activeRect.width,s=this.activeRect.height;let u=i-this.lastOffsetX,c=o-this.lastOffsetY;if(this.lastOffsetX=i,this.lastOffsetY=o,(e.ctrlKey||this.initPens.length===1&&this.initPens[0].ratio)&&(c=([1,3].includes(this.resizeIndex)?-1:1)*(u*s)/l),this.activeRect.ratio=this.initPens[0].ratio,yb(this.activeRect,u,c,this.resizeIndex),this.store.options.strictScope){const g=this.store.data.width||this.store.options.width,m=this.store.data.height||this.store.options.height;if(g&&m){let y={x:this.store.data.origin.x,y:this.store.data.origin.y,width:g*this.store.data.scale,height:m*this.store.data.scale};this.activeRect.x<y.x&&(this.activeRect.width=this.activeRect.width-(y.x-this.activeRect.x),this.activeRect.x=y.x),this.activeRect.y<y.y&&(this.activeRect.height=this.activeRect.height-(y.y-this.activeRect.y),this.activeRect.y=y.y),this.activeRect.x+this.activeRect.width>y.x+y.width&&(this.activeRect.width=this.activeRect.width-(this.activeRect.x+this.activeRect.width-(y.x+y.width)),this.activeRect.x=y.x+y.width-this.activeRect.width,this.activeRect.ex=this.activeRect.x+this.activeRect.width),this.activeRect.y+this.activeRect.height>y.y+y.height&&(this.activeRect.height=this.activeRect.height-(this.activeRect.y+this.activeRect.height-(y.y+y.height)),this.activeRect.y=y.y+y.height-this.activeRect.height,this.activeRect.ey=this.activeRect.y+this.activeRect.height)}}Dn(this.activeRect);const f=this.activeRect.width/l,v=this.activeRect.height/s;this.store.active.forEach((g,m)=>{g.calculative.worldRect.x=this.activeInitPos[m].x*this.activeRect.width+this.activeRect.x,g.calculative.worldRect.y=this.activeInitPos[m].y*this.activeRect.height+this.activeRect.y,g.calculative.worldRect.width*=f,g.calculative.iconWidth&&(g.calculative.iconWidth*=f),g.calculative.worldRect.height*=v,g.calculative.iconHeight&&(g.calculative.iconHeight*=v),hr(g.calculative.worldRect),Dn(g.calculative.worldRect),this.updatePenRect(g,{worldRectIsReady:!0}),this.execPenResize(g),this.updateLines(g)}),this.getSizeCPs(),this.initImageCanvas(this.store.active),this.initTemplateCanvas(this.store.active),this.render(),this.store.emitter.emit("resizePens",this.store.active),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:Pt.Update,pens:Pe(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},200)}movePens(e){var l,s;if(!this.activeRect||this.store.data.locked)return;if(!this.initActiveRect){this.initActiveRect=Pe(this.activeRect);return}if(!this.store.options.moveConnectedLine&&!this.canMoveLine&&this.store.active.length===1&&((l=this.store.active[0].anchors[0])!=null&&l.connectTo||(s=this.store.active[0].anchors[this.store.active[0].anchors.length-1])!=null&&s.connectTo)||(this.movingPens||(this.initMovingPens(),this.store.active.forEach(u=>{lc(u,!1)}),this.store.hover=void 0),!this.mouseDown))return;let n=e.x-this.mouseDown.x,r=e.y-this.mouseDown.y;e.shiftKey&&!e.ctrlKey&&(r=0),e.ctrlKey&&(n=0);const i=Pe(this.initActiveRect);La(i,n,r);let o=!1;if(this.store.options.strictScope){const u=this.store.data.width||this.store.options.width,c=this.store.data.height||this.store.options.height;if(u&&c){let f={x:this.store.data.origin.x,y:this.store.data.origin.y,width:u*this.store.data.scale,height:c*this.store.data.scale};i.x<f.x&&(i.x=f.x,o=!0),i.y<f.y&&(i.y=f.y,o=!0),i.x+i.width>f.x+f.width&&(i.x=f.x+f.width-i.width,o=!0),i.y+i.height>f.y+f.height&&(i.y=f.y+f.height-i.height,o=!0)}}const a={x:i.x-this.activeRect.x,y:i.y-this.activeRect.y};if(!this.store.options.disableDock&&!o){this.clearDock();const u=this.customMoveDock||QP;this.dock=u(this.store,i,this.movingPens,a);const{xDock:c,yDock:f}=this.dock;let v;c&&(a.x+=c.step,v=this.store.pens[c.penId],v.calculative.isDock=!0),f&&(a.y+=f.step,v=this.store.pens[f.penId],v.calculative.isDock=!0)}this.translatePens(this.movingPens,a.x,a.y,!0)}changeIdsByMoving(e,n){e.id+=Yr,e.parentId&&n.find(r=>r.id===e.parentId)&&(e.parentId+=Yr),e.children&&(e.children=e.children.map(r=>r+Yr)),e.connectedLines&&(e.connectedLines=e.connectedLines.map(r=>(n.find(i=>i.id===r.lineId)&&(r.lineId+=Yr),r))),e.type&&e.calculative.worldAnchors&&(e.calculative.worldAnchors=e.calculative.worldAnchors.map(r=>(r.connectTo&&n.find(i=>i.id===r.connectTo)&&(r.connectTo+=Yr),r)))}initMovingPens(){var r,i;if(!this.store.options.moveConnectedLine&&!this.canMoveLine)for(let o=0;o<this.store.active.length;o++){const a=this.store.active[o];((r=a.anchors[0])!=null&&r.connectTo||(i=a.anchors[a.anchors.length-1])!=null&&i.connectTo)&&(this.store.active.splice(o,1),a.calculative.active=void 0,--o)}this.movingPens=Pe(this.store.active,!0),this.movingPens=this.getAllFollowersByPens(this.movingPens);const e=this.getAllByPens(this.movingPens),n=Pe(e,!0);e.forEach(o=>{this.changeIdsByMoving(o,n),this.store.pens[o.id]=o,o.calculative.canvas=this;const a={globalAlpha:.5};o.lineWidth===0&&(a.lineWidth=1),(o.name.endsWith("Dom")||I1.includes(o.name)||this.store.options.domShapes.includes(o.name)||o.image)&&(a.name="rectangle",a.onDestroy=void 0),this.updateValue(o,a),o.calculative.image=void 0})}moveLineAnchor(e,n){var l,s,u,c,f;if(!this.activeRect||this.store.data.locked)return;if(this.initPens||(this.initPens=Pe(this.store.active,!0)),(l=this.store.activeAnchor)!=null&&l.connectTo){const v=this.store.pens[this.store.activeAnchor.connectTo];Ys(v,_a(v,this.store.activeAnchor.anchorId),this.store.pens[this.store.activeAnchor.penId],this.store.activeAnchor)}let r=(s=this.store.activeAnchor)==null?void 0:s.id,i=(c=(u=this.store.pens[this.store.activeAnchor.penId])==null?void 0:u.connectedLines)==null?void 0:c.filter(v=>v.anchor===r);i&&i.length>0&&i.forEach(v=>{const g=this.store.pens[v.lineId];Ys(this.store.pens[this.store.activeAnchor.penId],this.store.activeAnchor,g,_a(g,v.lineAnchor))});const o=this.store.active[0];Gn(o);const a=gn(o);if(o.lineName==="polyline"&&!n.shiftKey)Yk(o,this.store.activeAnchor,e);else{let v=0,g=0;if(o.lineName==="line"){let m=o.calculative.worldAnchors.findIndex(p=>p.id===this.store.activeAnchor.id);m===0&&(m=2);let y=o.calculative.worldAnchors[m-1];if(n.ctrlKey&&n.shiftKey){let p=Pe(e);this.getSpecialAngle(p,y),v=p.x-this.store.activeAnchor.x,g=p.y-this.store.activeAnchor.y}else if(!n.ctrlKey&&n.shiftKey){let p={x:e.x,y:y.y};v=p.x-this.store.activeAnchor.x,g=p.y-this.store.activeAnchor.y}else if(n.ctrlKey&&!n.shiftKey){let p={x:y.x,y:e.y};v=p.x-this.store.activeAnchor.x,g=p.y-this.store.activeAnchor.y}else v=e.x-this.store.activeAnchor.x,g=e.y-this.store.activeAnchor.y}else!n.ctrlKey&&n.shiftKey?(v=e.x-this.store.activeAnchor.x,g=0):n.ctrlKey&&!n.shiftKey?(v=0,g=e.y-this.store.activeAnchor.y):(v=e.x-this.store.activeAnchor.x,g=e.y-this.store.activeAnchor.y);mc(this.store.activeAnchor,v,g),this.store.hover&&this.store.hoverAnchor&&this.store.hoverAnchor.penId!==this.store.activeAnchor.penId&&(this.store.hoverAnchor.type===ko.Line?(v=e.x-this.store.activeAnchor.x,g=e.y-this.store.activeAnchor.y,ed(this.store.activeAnchor,this.store.hoverAnchor,this.store)):(v=this.store.hoverAnchor.x-this.store.activeAnchor.x,g=this.store.hoverAnchor.y-this.store.activeAnchor.y),mc(this.store.activeAnchor,v,g),a.prev=void 0,o.lineName!=="polyline"&&((f=this[o.lineName])==null||f.call(this,this.store,o)))}this.patchFlagsLines.add(o),this.store.path2dMap.set(o,Tt.path2dDraws[o.name](o)),this.render(),this.store.active[0].calculative&&(this.store.active[0].calculative.gradientAnimatePath=void 0),this.store.emitter.emit("moveLineAnchor",{pen:this.store.active[0],anchor:this.store.activeAnchor}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:Pt.Update,pens:Pe(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},500)}moveLineAnchorPrev(e){if(!this.activeRect||this.store.data.locked||!this.store.activeAnchor)return;if(this.initPens||(this.initPens=Pe(this.store.active,!0)),this.store.activeAnchor.prev.x=e.x,this.store.activeAnchor.prev.y=e.y,this.store.activeAnchor.next){if(!this.store.activeAnchor.prevNextType)this.store.activeAnchor.next.x=e.x,this.store.activeAnchor.next.y=e.y,_n(this.store.activeAnchor.next,180,this.store.activeAnchor);else if(this.store.activeAnchor.prevNextType===ja.Bilateral&&this.prevAnchor){const r=Ai(e,this.store.activeAnchor),i=Ai(this.prevAnchor,this.store.activeAnchor);this.store.activeAnchor.next.x=this.nextAnchor.x,this.store.activeAnchor.next.y=this.nextAnchor.y,_n(this.store.activeAnchor.next,r-i,this.store.activeAnchor)}}const n=this.store.active[0];this.patchFlagsLines.add(n),this.store.path2dMap.set(n,Tt.path2dDraws[n.name](n)),this.render(),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:Pt.Update,pens:Pe(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},200)}moveLineAnchorNext(e){if(!this.activeRect||this.store.data.locked||!this.store.activeAnchor)return;if(this.initPens||(this.initPens=Pe(this.store.active,!0)),this.store.activeAnchor.next.x=e.x,this.store.activeAnchor.next.y=e.y,this.store.activeAnchor.prev){if(!this.store.activeAnchor.prevNextType)this.store.activeAnchor.prev.x=e.x,this.store.activeAnchor.prev.y=e.y,_n(this.store.activeAnchor.prev,180,this.store.activeAnchor);else if(this.store.activeAnchor.prevNextType===ja.Bilateral&&this.nextAnchor){const r=Ai(e,this.store.activeAnchor),i=Ai(this.nextAnchor,this.store.activeAnchor);this.store.activeAnchor.prev.x=this.prevAnchor.x,this.store.activeAnchor.prev.y=this.prevAnchor.y,_n(this.store.activeAnchor.prev,r-i,this.store.activeAnchor)}}const n=this.store.active[0];this.patchFlagsLines.add(n),this.store.path2dMap.set(n,Tt.path2dDraws[n.name](n)),this.render(),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.pushHistory({type:Pt.Update,pens:Pe(this.store.active,!0),initPens:this.initPens}),this.initPens=void 0},200)}async setAnchor(e){var i;const n=[Pe(this.store.hover,!0)],r=this.store.hover;if(this.store.hoverAnchor){if(this.beforeRemoveAnchor&&!await this.beforeRemoveAnchor(r,this.store.hoverAnchor))return;r.type===mn.Line&&((i=r.calculative.worldAnchors)==null?void 0:i.length)<=2?this.delete([r]):(BP(r,this.store.hoverAnchor),r.type===mn.Line&&this.initLineRect(r)),this.store.hoverAnchor=void 0,this.store.activeAnchor=void 0,this.externalElements.style.cursor="default"}else if(r){if(this.beforeAddAnchor&&!await this.beforeAddAnchor(r,this.store.pointAt))return;if(r.type===mn.Line){this.store.activeAnchor=FP(r,this.store.pointAt,this.store.pointAtIndex),this.initLineRect(r);const o={x:e.x,y:e.y};this.getHover(o)}else{const o={id:Wt(),x:e.x,y:e.y};this.store.activeAnchor=DP(r,o)}}this.hotkeyType=Sn.None,this.render(),r&&this.pushHistory({type:Pt.Update,pens:[Pe(r,!0)],initPens:n})}checkDisconnect(e,n){if(e.id.indexOf(Yr)>0){const r=e.id;e=this.store.pens[r.replace(Yr,"")]}e.anchors.forEach(r=>{if(r.connectTo&&!n.find(i=>i.id===r.connectTo||i.id===r.connectTo+Yr)){const i=this.store.pens[r.connectTo];if(!i||i.type)return;Ys(i,_a(i,r.anchorId),e,r)}})}translatePens(e=this.store.active,n,r,i){if(!e||!e.length||e.some(s=>{if(s.locked>=Xt.DisableMove)return!0}))return;const a=!i&&Pe(e,!0);this.activeRect&&La(this.activeRect,n,r);const l=this.getAllByPens(e);e.forEach(s=>{var u,c;if(!(s.locked>=Xt.DisableMove)){if(s.type===mn.Line){if(!this.store.options.moveConnectedLine&&!this.canMoveLine||s.isRuleLine)return;ub(s,n,r),this.checkDisconnect(s,l),this.store.path2dMap.set(s,Tt.path2dDraws[s.name](s)),i||(this.initLineRect(s),(u=s.connectedLines)==null||u.forEach(f=>{const v=this.store.pens[f.lineId];this.initLineRect(v)}))}else La(s.calculative.worldRect,n,r),this.updatePenRect(s,{worldRectIsReady:!0}),s.calculative.x=s.x,s.calculative.y=s.y,s.calculative.initRect&&(s.calculative.initRect.x=s.calculative.x,s.calculative.initRect.y=s.calculative.y,s.calculative.initRect.ex=s.calculative.x+s.calculative.width,s.calculative.initRect.ey=s.calculative.y+s.calculative.height);this.updateLines(s),(c=s.onMove)==null||c.call(s,s)}}),this.activeRect&&this.getSizeCPs(),this.render(),this.tooltip.translate(n,r),i||(this.pushHistory({type:Pt.Update,pens:Pe(e,!0),initPens:a}),this.initImageCanvas(e),this.initTemplateCanvas(e),this.store.emitter.emit("translatePens",e)),this.store.emitter.emit("translatingPens",e)}templateTranslatePens(e=this.store.active,n,r){if(!e||!e.length)return;const i=this.getAllByPens(e);e.forEach(o=>{var a;if(o.type===mn.Line){if(!this.store.options.moveConnectedLine&&!this.canMoveLine)return;ub(o,n,r),this.checkDisconnect(o,i),this.store.path2dMap.set(o,Tt.path2dDraws[o.name](o))}else La(o.calculative.worldRect,n,r),this.updatePenRect(o,{worldRectIsReady:!0}),o.calculative.x=o.x,o.calculative.y=o.y,o.calculative.initRect&&(o.calculative.initRect.x=o.calculative.x,o.calculative.initRect.y=o.calculative.y,o.calculative.initRect.ex=o.calculative.x+o.calculative.width,o.calculative.initRect.ey=o.calculative.y+o.calculative.height);(a=o.onMove)==null||a.call(o,o)})}calcAutoAnchor(e,n,r,i){const o=Gn(e),a=gn(e),l=Xs(r,n===o?a:o);l&&(n.x=l.x,n.y=l.y,n.prev=void 0,n.next=void 0,i?i.anchor=l.id:xr(r,l,e,n),this[e.lineName]&&this[e.lineName](this.store,e),this.store.path2dMap.set(e,Tt.path2dDraws.line(e)),this.initLineRect(e))}restoreNodeAnimate(e){var n,r;if(e.calculative.initRect){if(e.keepAnimateState)for(const i in e)e.calculative[i]!==void 0&&i!=="x"&&i!=="y"&&i!=="width"&&i!=="height"&&i!=="initRect"&&(typeof e[i]!="object"||i==="lineDash")&&(i==="fontSize"||i==="lineWidth"?e[i]=e.calculative[i]/e.calculative.canvas.store.data.scale:e[i]=e.calculative[i]);else{const i=e.calculative.initRect.rotate-e.calculative.rotate;for(const a in e)a!=="x"&&a!=="y"&&a!=="width"&&a!=="height"&&a!=="initRect"&&a!=="rotate"&&(typeof e[a]!="object"||a==="lineDash")&&(e.calculative[a]=e[a]);(n=e.children)!=null&&n.length?i&&X1(e,i,e.calculative.worldRect):e.calculative.rotate=e.rotate;const o=Pe(this.store.animateMap.get(e));o&&(o.id=e.id,this.parent.setValue(o,{doEvent:!1,render:!0,history:!1})),e.calculative.worldRect=e.calculative.initRect}this.updatePenRect(e,{worldRectIsReady:!0}),this.updateLines(e),e.image&&e.name!=="gif"&&(this.canvasImage.init(),this.canvasImageBottom.init()),e.calculative.text!==e.text&&(e.calculative.text=e.text,pf(e)),(r=this.store.active)!=null&&r.length&&this.calcActiveRect(),e.calculative.initRect=void 0}}updateLines(e,n){var r;(r=e.children)==null||r.forEach(i=>{const o=this.store.pens[i];o&&this.updateLines(o,n)}),e.connectedLines&&e.connectedLines.forEach((i,o)=>{const a=this.store.pens[i.lineId];if(!a||a.calculative.active)return;const l=_a(a,i.lineAnchor);if(!l)return;if(!l.connectTo){e.connectedLines.splice(o,1);return}if(a.autoFrom){const v=Gn(a);v.id===l.id&&this.calcAutoAnchor(a,v,e,i)}if(a.autoTo){const v=gn(a);v.id===l.id&&this.calcAutoAnchor(a,v,e,i)}const s=_a(e,i.anchor);if(!s)return;let u=e.rotate;e.flipX&&(u*=-1),e.flipY&&(u*=-1);let c=l.distance*this.store.data.scale*Math.cos((u+s.rotate)/180*Math.PI)||0,f=l.distance*this.store.data.scale*Math.sin((u+s.rotate)/180*Math.PI)||0;if(e.flipX&&(c=-c),e.flipY&&(f=-f),mc(l,s.x-l.x+c,s.y-l.y+f),this.store.options.autoPolyline&&!this.autoPolylineFlag&&a.autoPolyline!==!1&&a.lineName==="polyline"){let v=Gn(a),g=gn(a),m=!1;v.id===l.id?(v=l,m=!0):g.id===l.id&&(g=l,m=!0),m&&(a.calculative.worldAnchors=[v,g],a.calculative.activeAnchor=v,this.polyline(this.store,a,g),this.initLineRect(a))}this.store.path2dMap.set(a,Tt.path2dDraws[a.name](a)),this.patchFlagsLines.add(a),a.calculative.gradientSmooth&&(a.calculative.gradientAnimatePath=Fm(a)),n&&Yd(a)})}calcActiveRect(){const e=this.store.active.filter(n=>(!n.locked||n.locked<Xt.DisableMove)&&n.visible!=!1);if(e.length)e.length===1?(this.activeRect=Pe(e[0].calculative.worldRect),this.activeRect.rotate=e[0].calculative.rotate||0,Dn(this.activeRect)):(this.activeRect=Wi(e),this.activeRect.rotate=0);else return;this.lastRotate=0,this.getSizeCPs()}rotatePen(e,n,r){e.type?(e.calculative.worldAnchors.forEach(i=>{_n(i,n,r.center)}),this.initLineRect(e),Id(e)):(e.calculative.rotate?e.calculative.rotate+=n:e.calculative.rotate=n,_n(e.calculative.worldRect.center,n,r.center),e.parentId?(e.calculative.worldRect.x=e.calculative.worldRect.center.x-e.calculative.worldRect.width/2,e.calculative.worldRect.y=e.calculative.worldRect.center.y-e.calculative.worldRect.height/2,e.x=(e.calculative.worldRect.x-r.x)/r.width,e.y=(e.calculative.worldRect.y-r.y)/r.height):(e.x=e.calculative.worldRect.center.x-e.width/2,e.y=e.calculative.worldRect.center.y-e.height/2),e.rotate=e.calculative.rotate,this.updatePenRect(e),e.children&&e.children.forEach(i=>{const o=this.store.pens[i];this.rotatePen(o,n,e.calculative.worldRect)}))}nextAnimate(e){if(!e)return;this.store.emitter.emit("animateEnd",e);let n;e.nextAnimate&&(n=this.store.data.pens.filter(r=>r.id===e.nextAnimate||r.tags&&r.tags.indexOf(e.nextAnimate)>-1)),n&&(n.forEach(r=>{var i,o,a,l,s;if(r.calculative.pause){const u=Date.now()-r.calculative.pause;r.calculative.pause=void 0,r.calculative.frameStart+=u,r.calculative.frameEnd+=u}else if(r.name==="video")r.calculative.media.currentTime=0,(i=r.calculative.media)==null||i.play(),(o=r.onStartVideo)==null||o.call(r,r);else if(r.type||(a=r.frames)!=null&&a.length||r.animations&&r.animations.length){if(r.type){if((s=r.animations)!=null&&s.length){const u=Pe(r.animations[0]);delete u.name,u.currentAnimation=0,this.parent.setValue({id:r.id,...u},{doEvent:!1,history:!1})}}else{if(!r.frames&&r.animations&&r.animations.length){let u=(l=r.animations)==null?void 0:l.findIndex(v=>v.autoPlay),c=u===-1?0:u;const f=Pe(r.animations[c]);delete f.name,f.currentAnimation=c,!r.type&&f.frames&&(f.showDuration=this.parent.calcAnimateDuration(f)),this.parent.setValue({id:r.id,...f},{doEvent:!1,history:!1})}this.store.animateMap.set(r,this.getFrameProps(r))}this.store.animates.add(r)}}),this.animate())}getFrameProps(e){let n={};return e.frames&&e.frames.forEach(r=>{for(let i in r)!["duration","x","y","width","height","rotate"].includes(i)&&!n[i]&&(n[i]=e[i])}),n}animate(){this.animateRendering||requestAnimationFrame(()=>{const e=Date.now();if(e-this.lastAnimateRender<this.store.options.animateInterval){this.store.animates.size>0&&this.animate();return}this.lastAnimateRender=e,this.animateRendering=!0;const n=[];let r=!1;for(const i of this.store.animates)if(!i.calculative.pause){if(i.calculative.active&&!i.type&&!this.movingPens&&(r=!0),!i.type)jP(i,e)?i.calculative.patchFlags&&(Dn(i.calculative.worldRect),this.updatePenRect(i,{worldRectIsReady:!0,playingAnimate:!0})):(requestAnimationFrame(()=>{this.restoreNodeAnimate(i)}),n.push(i),this.nextAnimate(i)),this.updateLines(i,!0);else if(!HP(i,e)){if(i.keepAnimateState){for(const o in i)i.calculative[o]!==void 0&&o!=="length"&&(typeof i[o]!="object"||o==="lineDash")&&(o==="lineWidth"?i[o]=i.calculative[o]/i.calculative.canvas.store.data.scale:i[o]=i.calculative[o]);Id(i)}else for(const o in i)(typeof i[o]!="object"||o==="lineDash")&&(o==="lineWidth"?i.calculative[o]=i[o]*i.calculative.canvas.store.data.scale:i.calculative[o]=i[o]);n.push(i),this.nextAnimate(i)}this.patchFlags=!0}r&&this.calcActiveRect(),n.forEach(i=>{this.store.animates.delete(i)}),this.render(!1),this.animateRendering=!1,this.animate()})}get clipboardName(){return"meta2d-clipboard"}async copy(e,n=!0){const r=Wt(),{origin:i,scale:o}=this.store.data;this.store.clipboard=void 0,localStorage.removeItem(this.clipboardName),sessionStorage.setItem("page",r);let a=this.getAllByPens(Pe(e||this.store.active,!0));a.forEach(s=>{s.copyIndex=this.store.data.pens.findIndex(u=>u.id===s.id),s.pathId&&(s.path=this.store.data.paths[s.pathId])}),a.sort((s,u)=>s.copyIndex-u.copyIndex);const l={meta2d:!0,pens:a,origin:Pe(i),scale:o,page:r,initRect:Pe(this.activeRect),offset:10,mousePos:Pe(this.mousePos)};if(navigator.clipboard&&!this.store.options.disableClipboard&&!navigator.userAgent.includes("Firefox"))try{await navigator.clipboard.writeText(JSON.stringify(l))}catch{localStorage.setItem(this.clipboardName,JSON.stringify(l))}else localStorage.setItem(this.clipboardName,JSON.stringify(l));n&&this.store.emitter.emit("copy",l.pens)}cut(e){this.copy(e,!1),this.delete(e),this.store.emitter.emit("cut",e)}async paste(){var s,u;let e,n;if(navigator.clipboard&&!this.store.options.disableClipboard&&!navigator.userAgent.includes("Firefox"))try{e=await((s=navigator.clipboard)==null?void 0:s.readText())}catch{e=localStorage.getItem(this.clipboardName)}else e=localStorage.getItem(this.clipboardName);if(e){try{n=JSON.parse(e)}catch(c){console.warn("剪切板数据不是json",c.message);return}if(!n||!n.meta2d)return}else return;if(this.beforeAddPens&&await this.beforeAddPens(n.pens)!=!0)return;let r,i;this.store.clipboard&&(r=this.store.clipboard.offset+10,i=this.store.clipboard.pos),this.store.clipboard=Pe(n);const o=sessionStorage.getItem("page"),a=this.store.data.scale;if(this.store.clipboard.mousePos&&(Math.abs(this.store.clipboard.mousePos.x-this.mousePos.x)>100*a||Math.abs(this.store.clipboard.mousePos.y-this.mousePos.y)>100*a)){let c=-this.store.clipboard.initRect.width/this.store.clipboard.scale/10/a,f=-this.store.clipboard.initRect.height/this.store.clipboard.scale/10/a,v=(a-this.store.clipboard.scale)*this.store.clipboard.initRect.width/2+c,g=(a-this.store.clipboard.scale)*this.store.clipboard.initRect.height/2+f;a<this.store.clipboard.scale&&(v=(a-this.store.clipboard.scale)/((this.store.clipboard.scale-a)*100)*this.store.clipboard.initRect.width/2+c,g=(a-this.store.clipboard.scale)/((this.store.clipboard.scale-a)*100)*this.store.clipboard.initRect.height/2+f),this.store.clipboard.pens.length>1&&(v=(a-1)*this.store.clipboard.initRect.width/this.store.clipboard.scale/2,g=(a-1)*this.store.clipboard.initRect.height/this.store.clipboard.scale/2),this.store.clipboard.pos={x:this.mousePos.x-v,y:this.mousePos.y-g},this.store.clipboard.offset=0}else o!==n.page?(this.store.clipboard.pos={x:this.mousePos.x,y:this.mousePos.y},this.store.clipboard.offset=0):this.pasteOffset?(r&&(this.store.clipboard.offset=r),i&&(this.store.clipboard.pos=i)):(this.store.clipboard.offset=0,this.pasteOffset=!0);(u=this.keyOptions)!=null&&u.F||this.store.clipboard.pens.forEach(c=>{delete c.copyIndex});const l=this.store.clipboard.pens.filter(c=>!c.parentId);for(const c of l)this.pastePen(c,void 0);sessionStorage.setItem("page",n.page),this.active(l),this.pushHistory({type:Pt.Add,pens:this.store.clipboard.pens}),this.render(),this.store.emitter.emit("add",this.store.clipboard.pens),this.store.emitter.emit("paste",this.store.clipboard.pens)}getAllByPens(e){const n=[];for(const r of e)n.push(...Pe(fi(r,this.store),!0));return n.concat(e)}getAllFollowersByPens(e,n=!0){const r=e;for(const i of e){let o=Lm(i,this.store);n&&(o=Pe(o,!0));for(const a of o)r.find(l=>l.id===a.id)||r.push(a)}return r}setFollowers(e=this.store.active){if(e)if(e.length<2)e[0].followers=[];else{let n=e.map(i=>i.id);n.pop();const r=e[e.length-1];r.followers?n.forEach(i=>{r.followers.includes(i)||r.followers.push(i)}):r.followers=n}}changeLineAnchors(e,n,r){if(Array.isArray(n.connectedLines))for(let i=0;i<n.connectedLines.length;i++){const{lineId:o}=n.connectedLines[i],a=r.find(l=>l.id===o);if(a){const l=a.anchors[0],s=a.anchors[a.anchors.length-1];l.connectTo===e&&(l.connectTo=n.id),s.connectTo===e&&(s.connectTo=n.id)}else n.connectedLines.splice(i,1),i--}}changeNodeConnectedLine(e,n,r){var l;const i=n.anchors[0],o=n.anchors[n.anchors.length-1],a=[i,o];for(const s of a){const u=s.connectTo;if(u){const c=r.find(f=>f.id===u);c?(l=c.connectedLines)==null||l.forEach(f=>{f.lineId===e&&(f.lineId=n.id,f.lineAnchor=s.id)}):(s.connectTo=void 0,s.prev&&(s.prev.connectTo=void 0),s.next&&(s.next.connectTo=void 0))}}}async delete(e=this.store.active,n=!1,r=!0){if(!e||!e.length||this.beforeRemovePens&&await this.beforeRemovePens(e)!=!0||(n||(e=e.filter(o=>!o.locked)),!e||!e.length))return;const i=[];if(this._del(e,i,n),this.initImageCanvas(i),this.initTemplateCanvas(i),this.inactive(),this.clearHover(),this.render(),r){if(i.length===0)return;this.pushHistory({type:Pt.Delete,pens:i})}this.store.emitter.emit("delete",e)}_del(e,n,r){e&&e.forEach(i=>{if(i.type&&(i.lastConnected={}),i.parentId)if(this.getLockedParent(i)){console.warn("父节点锁定");return}else{const a=hi(i),l=a.children.indexOf(i.id);a.children.splice(l,1),n&&this.getDelPens(i,n),this.delForce(i)}else{if(!r&&i.locked)return;n&&this.getDelPens(i,n),this.delForce(i)}})}getDelPens(e,n){if(!e)return;if(this.store.data.pens.findIndex(i=>i.id===e.id)>-1){const i=this.store.pens[e.id];i&&i.calculative&&(i.calculative.active=void 0),n.push(i)}e.children&&e.children.forEach(i=>{this.getDelPens(this.store.pens[i],n)})}getLockedParent(e){if(!e.parentId)return!1;const n=hi(e);if(n.locked)return n;this.getLockedParent(n)}delForce(e){var r;if(!e)return;const n=this.store.data.pens.findIndex(i=>i.id===e.id);n>-1&&(this.delConnectedLines(this.store.data.pens[n]),this.store.data.pens.splice(n,1),this.store.pens[e.id]=void 0,delete this.store.pens[e.id],e.pathId&&delete this.store.data.paths[e.pathId]),this.store.animates.delete(e),this.store.animateMap.delete(e),e.children&&e.children.forEach(i=>{this.delForce(this.store.pens[i])}),(r=e.onDestroy)==null||r.call(e,e)}delConnectedLines(e){var n;if(e.connectedLines)for(let r=0;r<e.connectedLines.length;r++){const{lineId:i,lineAnchor:o}=e.connectedLines[r],a=this.store.pens[i];if(a){let l=a.anchors.find(s=>s.id===o);(l==null?void 0:l.connectTo)===e.id&&(l.connectTo=void 0,l.anchorId=void 0,l.prev&&(l.prev.connectTo=void 0),l.next&&(l.next.connectTo=void 0)),l=_a(a,o),l&&(l.connectTo=void 0,l.anchorId=void 0,l.prev&&(l.prev.connectTo=void 0),l.next&&(l.next.connectTo=void 0))}}e.type&&((n=e.calculative.worldAnchors)==null||n.forEach((r,i)=>{var a;if(!r.connectTo)return;const o=this.store.pens[r.connectTo];o&&((a=o.calculative.worldAnchors)==null||a.forEach(l=>{Ys(o,l,e,r)}))}))}convertSpecialCharacter(e){var n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(r,i){return n[i]})}createInput(){this.inputParent.classList.add("meta2d-input"),this.inputDiv.classList.add("input-div"),this.inputParent.appendChild(this.inputDiv),this.dropdown.onmouseleave=()=>{this.store.hover=null},this.inputParent.appendChild(this.dropdown),this.externalElements.appendChild(this.inputParent),this.inputParent.onmousedown=this.stopPropagation,this.inputDiv.onmousedown=this.stopPropagation,this.inputDiv.contentEditable="false",this.dropdown.onmousedown=this.stopPropagation;let e;for(let n=0;n<document.styleSheets.length;n++)document.styleSheets[n].title==="le5le.com"&&(e=document.styleSheets[n]);if(!e){const n=document.createElement("style");n.title="le5le.com",document.head.appendChild(n),e=n.sheet,e.insertRule(".meta2d-input{display:none;position:absolute;outline:none;align-items: center;}"),e.insertRule(".meta2d-input textarea{resize:none;border:none;outline:none;background:transparent;flex-grow:1;height:100%;left:0;top:0}"),e.insertRule(".meta2d-input .right{width:10px;height:10px;flex-shrink:0;border-top: 1px solid;border-right: 1px solid;margin-right: 5px;transition: all .3s cubic-bezier(.645,.045,.355,1);position:absolute;right:1px;}"),e.insertRule(".meta2d-input ul{position:absolute;top:100%;margin-top:4px; width:calc(100% + 10px);min-height:30px;border-radius: 2px;box-shadow: 0 2px 8px #00000026;list-style-type: none;background-color: #fff;padding: 4px 0;max-height: 105px;overflow-y: auto;}"),e.insertRule(".meta2d-input ul li{padding: 5px 12px;line-height: 22px;white-space: nowrap;cursor: pointer;}"),e.insertRule(".meta2d-input ul li:hover{background: #eeeeee;}"),e.insertRule(".input-div::-webkit-scrollbar {display:none}"),e.insertRule(".input-div{scrollbar-width: none;}"),e.insertRule(".meta2d-input .input-div{resize:none;border:none;outline:none;background:transparent;flex-grow:1;height:100%;width: 100%;left:0;top:0;display:flex;text-align: center;justify-content: center;flex-direction: column;}"),e.insertRule(".input-div div{}")}this.inputDiv.onfocus=n=>{if(navigator.userAgent.includes("Firefox")){if(!n.target.innerText){let r=this.inputDiv.offsetWidth/2;window.getComputedStyle(this.inputDiv,null).textAlign!=="center"&&(r=0),this.inputDiv.innerHTML=`<br style="margin-left:${r}px;margin-top:4px;" />`}}else if(n.target.innerText)this.inputDiv.style.paddingTop="";else{let r=window.getComputedStyle(this.inputDiv,null);r.justifyContent==="center"&&(this.inputDiv.style.paddingTop=` ${this.inputDiv.offsetHeight/2-parseFloat(r.lineHeight)/2}px`)}},this.inputDiv.onblur=()=>{setTimeout(()=>{this.hideInput()},300)},this.inputDiv.oninput=n=>{const r=this.store.pens[this.inputDiv.dataset.penId];if(r&&r.inputType==="number"){const i=n.target.innerText,o=i.replace(/[^0-9]/g,"");i!==o&&(n.preventDefault(),n.target.innerText=o)}if(navigator.userAgent.includes("Firefox")){if(!n.target.innerText.trim()){let i=this.inputDiv.offsetWidth/2;window.getComputedStyle(this.inputDiv,null).textAlign!=="center"&&(i=0),this.inputDiv.innerHTML=`<br style="margin-left:${i}px;margin-top:4px;" />`}}else if(n.target.innerText)this.inputDiv.style.paddingTop="";else{let i=window.getComputedStyle(this.inputDiv,null);i.justifyContent==="center"&&(this.inputDiv.style.paddingTop=` ${this.inputDiv.offsetHeight/2-parseFloat(i.lineHeight)/2}px`)}this.store.emitter.emit("input",r)},this.inputDiv.onclick=n=>{n.stopPropagation();const r=this.store.pens[this.inputDiv.dataset.penId];this.dropdown.style.display==="block"?this.dropdown.style.display="none":r!=null&&r.dropdownList&&this.store.data.locked&&(this.dropdown.style.display="block"),this.store.emitter.emit("clickInput",r)},this.inputDiv.onkeyup=n=>{this.setDropdownList(!0);const r=this.store.pens[this.inputDiv.dataset.penId];this.store.emitter.emit("input",{pen:r,text:n.key}),n.stopPropagation()},this.inputDiv.onkeydown=n=>{n.stopPropagation()},this.inputDiv.onmousedown=this.stopPropagation,this.inputDiv.onwheel=n=>{n.stopPropagation()},this.inputDiv.onpaste=n=>{n.preventDefault();let r="";n.clipboardData&&n.clipboardData.getData&&(r=n.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,r)}}clearDropdownList(){if(this.dropdown.hasChildNodes())for(let e=0;e<this.dropdown.childNodes.length;e++)this.dropdown.childNodes[e].remove(),--e}dropdownAppendOption(e,n){const r=document.createElement("li");r.onwheel=this.stopPropagation,r.innerText=e,r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.title=e,r.style.zoom=this.store.data.scale,r.onmousedown=this.stopPropagation,r.dataset.i=n+"",r.onclick=this.selectDropdown;const i=this.store.pens[this.inputDiv.dataset.penId];r.onmouseenter=()=>{r.style.background=i.dropdownHoverBackground||this.store.styles.activeBg||"#eee",r.style.color=i.dropdownHoverColor||"#bdc7db"},r.onmouseleave=()=>{r.style.background=i.dropdownBackground||this.store.styles.popContentBg||"#fff",r.style.color=i.dropdownColor||"#bdc7db"},this.dropdown.appendChild(r)}find(e){return this.store.data.pens.filter(n=>n.id==e||n.tags&&n.tags.indexOf(e)>-1)}findOne(e){return this.store.data.pens.find(n=>n.id==e||n.tags&&n.tags.indexOf(e)>-1)}changePenId(e,n){var i,o,a,l,s,u,c;if(e===n)return;const r=this.store.pens[e];if(r&&!this.store.pens[n]){if(r.id=n,this.store.pens[n]=this.store.pens[e],(i=r.onChangeId)==null||i.call(r,r,e,n),delete this.store.pens[e],r.parentId){const f=this.store.pens[r.parentId],v=(o=f.children)==null?void 0:o.findIndex(g=>g===e);v!==-1&&((a=f.children)==null||a.splice(v,1,n))}(l=r.children)==null||l.forEach(f=>{const v=this.store.pens[f];v.parentId=n}),r.formId&&r.followers.forEach(f=>{const v=this.store.pens[f];v.formId=n}),r.type===mn.Line?this.changeNodeConnectedLine(e,r,this.store.data.pens):(this.changeLineAnchors(e,r,this.store.data.pens),(s=r.connectedLines)==null||s.forEach(({lineId:f})=>{const v=this.store.pens[f];tl(v)})),(u=r.anchors)==null||u.forEach(f=>f.penId=n),(c=r.calculative.worldAnchors)==null||c.forEach(f=>f.penId=n)}}updateValue(e,n){var m,y;const r=this.getPenRect(e),i=e.name;Object.assign(e,n);const o=i!==e.name;n.newId&&this.changePenId(e.id,n.newId);let a=!1,l=!1,s=!1,u=!1,c=!1,f=!1,v,g=!1;for(const p in n)p.indexOf(".")===-1?(p==="rotate"?e.disableRotate?e.rotate=e.calculative.rotate||0:v=e.calculative.rotate||0:p==="canvasLayer"||p==="isBottom"||p==="showChild"?f=!0:p==="image"&&(g=!0),(typeof e[p]!="object"||p==="lineDash")&&(!e.disableRotate||p!=="rotate")&&(e.calculative[p]=n[p]),jI.includes(p)&&(l=!0),["name","borderRadius","lineSmooth","close"].includes(p)&&(a=!0),zI.includes(p)&&(c=!0),HI.includes(p)&&(s=!0),VI.includes(p)&&(u=!0),e.image&&e.name!=="gif"&&R1.includes(p)&&(g=!0)):(delete e[p],dP(e,p,n[p])),p.split(".")[0]==="anchors"&&tl(e);if(this.setCalculativeByScale(e),o&&((m=e.onDestroy)==null||m.call(e,e),WI(e)),c){const p={x:n.x??r.x,y:n.y??r.y,width:n.width??r.width,height:n.height??r.height};this.setPenRect(e,p,!1),this.updateLines(e,!0),this.store.active&&this.store.active.length&&e.id===this.store.active[0].id&&this.calcActiveRect()}else s?this.updatePenRect(e):(l&&ca(e),u&&cb(this.store.pens,e),a&&Tt.path2dDraws[e.name]&&this.store.path2dMap.set(e,Tt.path2dDraws[e.name](e)));if(v!==void 0){const p=e.calculative.rotate;e.calculative.rotate=v,this.rotatePen(e,p-v,e.calculative.worldRect)}(n.image||n.backgroundImage||n.strokeImage)&&(e.calculative.image=void 0,e.calculative.backgroundImage=void 0,e.calculative.strokeImage=void 0,this.loadImage(e)),n.lineGradientColors&&(e.calculative.lineGradient=void 0,e.calculative.gradientColorStop=void 0),n.gradientColors&&(e.calculative.gradient=void 0,e.calculative.radialGradient=void 0),n.gradientRadius&&(e.calculative.gradient=void 0,e.calculative.radialGradient=void 0),n.animateLineWidth&&(e.calculative.gradientAnimatePath=void 0),n.gradientSmooth&&(e.calculative.gradientAnimatePath=void 0),f?(this.canvasImage.init(),this.canvasImageBottom.init()):g&&(e.canvasLayer===void 0&&(e.canvasLayer=on.CanvasImageBottom,e.calculative.canvasLayer=on.CanvasImageBottom),e.canvasLayer===on.CanvasImageBottom?this.canvasImageBottom.init():e.canvasLayer===on.CanvasImage&&this.canvasImage.init()),(n.canvasLayer!==void 0||e.canvasLayer===on.CanvasTemplate)&&this.initTemplateCanvas([e]),n.zIndex!==void 0&&(y=e.calculative.singleton)!=null&&y.div&&mi(e,e.calculative.singleton.div)}execPenResize(e){var n,r;(n=e.onResize)==null||n.call(e,e),(r=e.children)==null||r.forEach(i=>{const o=this.store.pens[i];o&&this.execPenResize(o)})}setPenRect(e,n,r=!0){if(e.parentId)Object.assign(e,n);else{const{origin:i,scale:o}=this.store.data;e.x=i.x+n.x*o,e.y=i.y+n.y*o,e.width=n.width*o,e.height=n.height*o}this.updatePenRect(e),this.execPenResize(e),r&&this.render()}getPenRect(e,n=this.store.data.origin,r=this.store.data.scale){if(e)return e.parentId?{x:e.x,y:e.y,width:e.width,height:e.height}:{x:(e.x-n.x)/r,y:(e.y-n.y)/r,width:e.width/r,height:e.height/r}}toPng(e=2,n,r=!1,i){const o=Wi(this.store.data.pens),a=this.store.data.scale;if(!isFinite(o.width))throw new Error("can not to png, because width is not finite");const l=Pe(o),s=this.store.data,u=r&&this.store.bkImg;let c=!1,f=!1;if(u){if(o.x+=s.x,o.y+=s.y,hr(o),Ao(o,this.canvasRect,!0))Object.assign(o,this.canvasRect);else{const P=jc([...Mo(o),...Mo(this.canvasRect)]);Object.assign(o,P)}c=o.x===0,f=o.y===0}const v=this.store.data.width||this.store.options.width,g=this.store.data.height||this.store.options.height;let m=!1;v&&g&&!this.store.data.component&&(m=!0),m&&(o.x=this.store.data.origin.x,o.y=this.store.data.origin.y,o.width=v*this.store.data.scale,o.height=g*this.store.data.scale);const y=Pe(o),p=$o(e);o.x-=p[3]*a,o.y-=p[0]*a,o.width+=(p[3]+p[1])*a,o.height+=(p[0]+p[2])*a;const C=(i||1920)/o.width;o.width*=C,o.height*=C,hr(o);const x=document.createElement("canvas");if(x.width=o.width,x.height=o.height,x.width>32767||x.height>32767||!navigator.userAgent.includes("Firefox")&&x.height*x.width>268435456||navigator.userAgent.includes("Firefox")&&x.height*x.width>472907776)throw new Error("can not to png, because the size exceeds the browser limit");const S=x.getContext("2d");S.textBaseline="middle",S.scale(C,C);const E=this.store.options.downloadBgTransparent?void 0:this.store.data.background||this.store.styles.background;if(E&&m&&(S.save(),S.fillStyle=E,S.fillRect(0,0,y.width+(p[1]+p[3])*a,y.height+(p[0]+p[2])*a),S.restore()),u)if(m)S.drawImage(this.store.bkImg,p[3]*a||0,p[0]*a||0,y.width,y.height);else{const P=o.x<0?-o.x:0,$=o.y<0?-o.y:0;S.drawImage(this.store.bkImg,P,$,this.canvasRect.width,this.canvasRect.height)}if(E&&!m)if(u){const P=o.x<0?-o.x:0,$=o.y<0?-o.y:0;S.save(),S.fillStyle=E,S.fillRect(P,$,this.canvasRect.width,this.canvasRect.height),S.restore()}else S.save(),S.fillStyle=E,S.fillRect(0,0,l.width+(p[3]+p[1])*a,l.height+(p[0]+p[2])*a),S.restore();u?m?S.translate(-o.x,-o.y):S.translate((c?s.x:-l.x)+p[3]*a||0,(f?s.y:-l.y)+p[0]*a||0):S.translate(-o.x,-o.y);for(const P of this.store.data.pens){if(!Gd(P,this.store)||P.visible==!1)continue;const{active:$}=P.calculative;P.calculative.active=!1,P.calculative.img?Kd(S,P):Ta(S,P,!0),P.calculative.active=$}if(n){x.toBlob(n);return}return x.toDataURL()}activeToPng(e=2,n){return this.pensToPng(this.store.active,e,n)}pensToPng(e=this.store.active,n=2,r){if(e.length===0)return;const i=this.getAllByPens(e);let o=i.map(g=>g.id);const a=Wi(i);if(!isFinite(a.width))throw new Error("can not to png, because width is not finite");const l=Pe(a),s=$o(n);a.x-=s[3],a.y-=s[0],a.width+=s[3]+s[1],a.height+=s[0]+s[2],hr(a);const u=(r||a.width)/a.width;a.width*=u,a.height*=u;const c=document.createElement("canvas");if(c.width=a.width,c.height=a.height,c.width>32767||c.height>32767||!navigator.userAgent.includes("Firefox")&&c.height*c.width>268435456||navigator.userAgent.includes("Firefox")&&c.height*c.width>472907776)throw new Error("can not to png, because the size exceeds the browser limit");const f=c.getContext("2d");f.textBaseline="middle",f.scale(u,u);const v=this.store.options.downloadBgTransparent?void 0:this.store.data.background||this.store.styles.background;v&&(f.save(),f.fillStyle=v,f.fillRect(0,0,l.width+(s[3]+s[1]),l.height+(s[0]+s[2])),f.restore()),f.translate(-l.x+s[3],-l.y+s[0]);for(const g of this.store.data.pens)if(o.includes(g.id)){if(!Gd(g,this.store)||g.visible==!1)continue;const{active:m}=g.calculative;g.calculative.active=!1,g.calculative.img?Kd(f,g):Ta(f,g),g.calculative.active=m}return c.toDataURL()}toggleAnchorMode(){var e;if(this.hotkeyType)this.hotkeyType===Sn.AddAnchor&&(this.hotkeyType=Sn.None,this.store.hoverAnchor?this.externalElements.style.cursor="vertical-text":this.store.hover&&(this.externalElements.style.cursor="move"));else{if(this.store.options.disableAnchor||(e=this.store.hover)!=null&&e.disableAnchor)return;this.hotkeyType=Sn.AddAnchor,this.store.hover&&(this.externalElements.style.cursor="pointer")}this.patchFlags=!0}addAnchorHand(){if(this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){const e=[Pe(this.store.active[0],!0)];this.store.activeAnchor.prev?this.store.activeAnchor.next||(this.store.activeAnchor.next={...this.store.activeAnchor.prev},_n(this.store.activeAnchor.next,180,this.store.activeAnchor),this.initLineRect(this.store.active[0]),this.patchFlags=!0):(this.store.activeAnchor.next||(this.store.activeAnchor.next={penId:this.store.activeAnchor.penId,x:this.store.activeAnchor.x+50,y:this.store.activeAnchor.y}),this.store.activeAnchor.prev={...this.store.activeAnchor.next},_n(this.store.activeAnchor.prev,180,this.store.activeAnchor),this.initLineRect(this.store.active[0]),this.patchFlags=!0),this.pushHistory({type:Pt.Update,pens:[Pe(this.store.active[0],!0)],initPens:e})}}removeAnchorHand(){if(this.store.activeAnchor&&this.store.active&&this.store.active.length===1&&this.store.active[0].type){const e=[Pe(this.store.active[0],!0)];this.hoverType===kt.LineAnchorPrev?(this.store.activeAnchor.prev=void 0,this.initLineRect(this.store.active[0]),this.patchFlags=!0):this.hoverType===kt.LineAnchorNext?(this.store.activeAnchor.next=void 0,this.initLineRect(this.store.active[0]),this.patchFlags=!0):(this.store.activeAnchor.prev=void 0,this.store.activeAnchor.next=void 0,this.initLineRect(this.store.active[0]),this.patchFlags=!0),this.pushHistory({type:Pt.Update,pens:[Pe(this.store.active[0])],initPens:e})}}toggleAnchorHand(){this.store.active.length===1&&this.store.active[0].type&&this.store.activeAnchor&&(this.store.activeAnchor.prevNextType||(this.store.activeAnchor.prevNextType=ja.Mirror),this.store.activeAnchor.prevNextType=(this.store.activeAnchor.prevNextType+1)%3)}gotoView(e,n){let r=Wi(this.store.data.pens);if(!isFinite(r.width))throw new Error("can not move view, because width is not finite");const i=this.store.data.width||this.store.options.width,o=this.store.data.height||this.store.options.height;i&&o&&(r={x:this.store.data.origin.x,y:this.store.data.origin.y,width:i*this.store.data.scale,height:o*this.store.data.scale}),this.store.data.x=this.canvas.clientWidth/2-e*r.width-r.x,this.store.data.y=this.canvas.clientHeight/2-n*r.height-r.y,this.onMovePens(),this.canvasTemplate.init(),this.canvasImage.init(),this.canvasImageBottom.init(),this.render()}showMagnifier(){this.magnifierCanvas.canvas.style.zIndex="100",this.externalElements.style.zIndex="101",this.magnifierCanvas.magnifier=!0,this.magnifierCanvas.updateDomOffscreen(),this.externalElements.style.cursor="default",this.render()}hideMagnifier(){this.magnifierCanvas.canvas.style.zIndex="5",this.externalElements.style.zIndex="5",this.magnifierCanvas.magnifier=!1,this.externalElements.style.cursor="default",this.magnifierCanvas.render(),this.render()}showFit(){this.store.data.locked=0,this.canvasImage.fitFlag=!0,this.canvasImage.activeFit=void 0,this.canvasImage.currentFit=void 0,this.store.data.fits||(this.store.data.fits=[]),this.store.data.fits.forEach(e=>e.active=!1),this.canvasImage.init(),this.canvasImage.render()}hideFit(){this.canvasImage.fitFlag=!1,this.canvasImage.activeFit=void 0,this.canvasImage.currentFit=void 0,this.canvasImage.init(),this.canvasImage.render()}makeFit(){if(this.dragRect.width<100&&this.dragRect.height<100)return;const e=this.store.data.pens.filter(u=>{if(u.parentId||u.isRuleLine)return!1;if(Ao(u.calculative.worldRect,this.dragRect,!0))return u.type===mn.Line&&!this.store.options.dragAllIn?Av(u,this.dragRect):!0});if(!e.length)return;const n=this.parent.getRect(e),r=this.store.data.scale,i=this.store.data.width||this.store.options.width,o=this.store.data.height||this.store.options.height;let a=(Math.floor(n.x)-this.store.data.origin.x)/r/i,l=(Math.floor(n.y)-this.store.data.origin.y)/r/o,s={x:a,y:l,width:(Math.ceil(n.width)+1)/r/i,height:(Math.ceil(n.height)+1)/r/o,children:e.map(u=>u.id),id:Wt(),active:!0};s.x<-.1&&(s.x=-.1),s.y<-.1&&(s.y=-.1),s.width>.5?(s.left=!0,s.right=!0,s.leftValue=(s.x-0)*r*i,s.rightValue=(1-(s.x+s.width))*r*i):s.x<.5?(s.left=!0,s.leftValue=(s.x-0)*r*i):(s.right=!0,s.rightValue=(1-(s.x+s.width))*r*i),s.leftValue<1&&(s.leftValue=0),s.rightValue<1&&(s.rightValue=0),s.height>.5?(s.top=!0,s.bottom=!0,s.topValue=(s.y-0)*r*o,s.bottomValue=(1-(s.y+s.height))*r*o):s.y<.5?(s.top=!0,s.topValue=(s.y-0)*r*o):(s.bottom=!0,s.bottomValue=(1-(s.y+s.height))*r*o),s.topValue<1&&(s.topValue=0),s.bottomValue<1&&(s.bottomValue=0),this.store.data.fits||(this.store.data.fits=[]),this.store.data.fits.forEach(u=>{u.active=!1}),this.store.data.fits.push(s),this.canvasImage.activeFit=s,this.store.emitter.emit("fit",s),this.canvasImage.init(),this.canvasImage.render()}updateFit(e){const n=this.store.data.scale,r=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;let o=(e.x-this.store.data.origin.x)/n/r,a=(e.y-this.store.data.origin.y)/n/i;if(this.canvasImage.currentFit){const l=this.canvasImage.activeFit;if(this.canvasImage.currentFit==="top"){a<-.1&&(a=-.1);let c=a-l.y;if(l.height-=c,l.height<.01){l.height=.01;return}l.y=a}if(this.canvasImage.currentFit==="bottom"&&(a>1.1&&(a=1.1),l.height=a-l.y,l.height<=.01&&(l.height=.01)),this.canvasImage.currentFit==="left"){o<-.1&&(o=-.1);let c=o-l.x;if(l.width-=c,l.width<.01){l.width=.01;return}l.x=o}this.canvasImage.currentFit==="right"&&(o>1.1&&(o=1.1),l.width=o-l.x,l.width<=.01&&(l.width=.01));let s={x:l.x*r*n+this.store.data.origin.x,y:l.y*i*n+this.store.data.origin.y,width:l.width*r*n,height:l.height*i*n};hr(s);const u=this.store.data.pens.filter(c=>{if(c.parentId||c.isRuleLine)return!1;if(Ao(c.calculative.worldRect,s,!0))return c.type===mn.Line&&!this.store.options.dragAllIn?Av(c,s):!0});l.left=void 0,l.leftValue=void 0,l.right=void 0,l.rightValue=void 0,l.top=void 0,l.topValue=void 0,l.bottom=void 0,l.bottomValue=void 0,l.width>.5?(l.left=!0,l.right=!0,l.leftValue=(l.x-0)*n*r,l.rightValue=(1-(l.x+l.width))*n*r):l.x<.5?(l.left=!0,l.leftValue=(l.x-0)*n*r):(l.right=!0,l.rightValue=(1-(l.x+l.width))*n*r),Math.abs(l.leftValue)<1&&(l.leftValue=0),Math.abs(l.rightValue)<1&&(l.rightValue=0),l.height>.5?(l.top=!0,l.bottom=!0,l.topValue=(l.y-0)*n*i,l.bottomValue=(1-(l.y+l.height))*n*i):l.y<.5?(l.top=!0,l.topValue=(l.y-0)*n*i):(l.bottom=!0,l.bottomValue=(1-(l.y+l.height))*n*i),Math.abs(l.topValue)<1&&(l.topValue=0),Math.abs(l.bottomValue)<1&&(l.bottomValue=0),l.children=u.map(c=>c.id),this.store.emitter.emit("fit",l),this.mouseDown.x=e.x,this.mouseDown.y=e.y,this.canvasImage.init(),this.canvasImage.render()}}updateFitRect(e=this.canvasImage.activeFit){const n=this.store.data.width||this.store.options.width,r=this.store.data.height||this.store.options.height;e.left&&(e.leftValue?e.x=Math.abs(e.leftValue)<1?e.leftValue:e.leftValue/n:e.x=0),e.right&&(e.rightValue?e.width=1-(Math.abs(e.rightValue)<1?e.rightValue:e.rightValue/n)-e.x:e.width=1-e.x),e.top&&(e.topValue?e.y=Math.abs(e.topValue)<1?e.topValue:e.topValue/r:e.y=0),e.bottom&&(e.bottomValue?e.height=1-(Math.abs(e.bottomValue)<1?e.bottomValue:e.bottomValue/r)-e.y:e.height=1-e.y),this.canvasImage.init(),this.canvasImage.render()}deleteFit(e=this.canvasImage.activeFit){if(!e)return;const n=this.store.data.fits.findIndex(r=>r.id===e.id);this.store.data.fits.splice(n,1),this.canvasImage.activeFit=void 0,this.canvasImage.init(),this.canvasImage.render(),this.store.emitter.emit("fit",void 0)}calcuActiveFit(){var l;const e=this.store.data.width||this.store.options.width,n=this.store.data.height||this.store.options.height;let r=(this.mouseDown.x-this.store.data.origin.x)/this.store.data.scale/e,i=(this.mouseDown.y-this.store.data.origin.y)/this.store.data.scale/n,o=-1,a=-1;(l=this.store.data.fits)==null||l.forEach((s,u)=>{s.ex=null,s.ey=null,Io({x:r,y:i},s)&&(o=u),s.active&&(a=u)}),o!==-1&&o!==a?(this.canvasImage.activeFit=this.store.data.fits[o],this.store.data.fits[o].active=!0,a!==-1&&(this.store.data.fits[a].active=!1),this.store.emitter.emit("fit",this.store.data.fits[o])):o===-1&&a!==-1&&(this.store.data.fits[a].active=!1,this.store.emitter.emit("fit",void 0),this.canvasImage.activeFit=null),this.inactive(),this.canvasImage.init(),this.canvasImage.render()}toggleMagnifier(){this.magnifierCanvas.magnifier=!this.magnifierCanvas.magnifier,this.magnifierCanvas.magnifier&&(this.externalElements.style.cursor="default"),this.render()}destroy(){var e,n,r,i;switch(this.scroll&&this.scroll.destroy(),(e=this.tooltip)==null||e.destroy(),(n=this.dialog)==null||n.destroy(),(r=this.title)==null||r.destroy(),(i=this.popconfirm)==null||i.destroy(),this.externalElements.removeEventListener("gesturestart",this.onGesturestart),this.externalElements.ondragover=o=>o.preventDefault(),this.externalElements.ondrop=void 0,this.externalElements.ontouchstart=void 0,this.externalElements.ontouchmove=void 0,this.externalElements.ontouchend=void 0,this.externalElements.onmousedown=void 0,this.externalElements.onmousemove=void 0,this.externalElements.onmouseup=void 0,this.externalElements.onmouseleave=void 0,this.externalElements.ondblclick=void 0,this.store.options.keydown){case Na.Document:document.removeEventListener("keydown",this.onkeydown),document.removeEventListener("keyup",this.onkeyup);break;case Na.Canvas:this.externalElements.removeEventListener("keydown",this.onkeydown),this.externalElements.removeEventListener("keyup",this.onkeyup);break}document.removeEventListener("copy",this.onCopy),document.removeEventListener("cut",this.onCut),document.removeEventListener("paste",this.onPaste),window&&window.removeEventListener("message",this.onMessage),window&&window.removeEventListener("resize",this.onResize),window&&window.removeEventListener("scroll",this.onScroll),this.parentElement.innerHTML=""}}function m$(t,e){const n=e||new Path2D;t.onDestroy||(t.onDestroy=y$,t.onMove=Ob,t.onRotate=Ob,t.onMouseEnter=b$,t.onMouseLeave=w$,t.onMouseMove=C$,t.onMouseUp=x$,t.onInput=p$),t.formId=t.id;let r=t.calculative.borderRadius||0,i=r;const{x:o,y:a,width:l,height:s,ex:u,ey:c}=t.calculative.worldRect,{x:f}=t.calculative.worldTextRect;r<1&&(r=l*r,i=s*i);let v=r<i?r:i;if(l<2*v&&(v=l/2),s<2*v&&(v=s/2),n.moveTo(o+v,a),n.arcTo(u,a,u,c,v),n.arcTo(u,c,o,c,v),n.arcTo(o,c,o,a,v),n.arcTo(o,a,u,a,v),n instanceof Path2D)return n}function p$(t,e){t.text=e,t.calculative.text=t.text,t.calculative.canvas.updatePenRect(t)}function y$(t){}function Ob(t){}function b$(t){}function w$(t){const e=t.calculative.canvas.store.active;e&&e.length&&e.forEach(n=>{if(t.followers){let r=t.followers.findIndex(i=>i===n.id);if(r!==-1){const i=t.calculative.canvas.store.pens[n.id+Yr];i&&i.calculative&&(Ao(i.calculative.worldRect,t.calculative.worldRect,!0)||(t.followers.splice(r,1),delete n.formId))}}})}function x$(t){const e=t.calculative.canvas.store.active;e&&e.length&&e.forEach(n=>{const r=t.calculative.canvas.store.pens[n.id+Yr];if(r&&r.calculative){let i=Pe(t.calculative.worldRect);i.x-=1,i.y-=1,i.width+=2,i.height+=2,Ao(r.calculative.worldRect,i,!0)&&(t.followers||(t.followers=[]),t.followers.includes(n.id)||t.followers.push(n.id),n.formId=t.id)}})}function C$(t,e){}function Mb(t,e){if(t.formId&&t.formKey&&t.formValue){const n=t.calculative.canvas.store.pens[t.formId];n&&(n.formData||(n.formData={}),n.formData[t.formKey]=t[t.formValue])}}function S$(t){const e=t.calculative.canvas.store.pens[t.formId];e.followers.forEach(n=>{const r=t.calculative.canvas.store.pens[n];if(r.formId&&r.formKey&&e.formData[r.formKey]){const i=r[r.formValue];let o="";Array.isArray(i)&&(o=[]),t.calculative.canvas.parent.setValue({id:r.id,[r.formValue]:o},{render:!1,doEvent:!1,history:!1})}}),e.formData={},t.calculative.canvas.parent.render()}const ar={};function E$(t){t.onDestroy||(t.onDestroy=R$,t.onMove=Nb,t.onResize=I$,t.onRotate=Nb,t.onValue=P$,t.onChangeId=k$);const e=new Path2D;if(!t.image)return;const r=t.calculative.canvas.store.id+"-"+t.id;if(!ar[r]){const i=new Image;i.crossOrigin="anonymous",i.src=t.image,t.calculative.canvas.parent.store.options.cdn&&!(t.image.startsWith("http")||t.image.startsWith("//")||t.image.startsWith("data:image"))&&(i.src=t.calculative.canvas.parent.store.options.cdn+t.image),ar[r]=i,i.onload=()=>{var o;ar[r]===i&&(t.calculative.img=i,t.calculative.imgNaturalWidth=i.naturalWidth||t.iconWidth,t.calculative.imgNaturalHeight=i.naturalHeight||t.iconHeight,(o=t.calculative.canvas.externalElements)==null||o.parentElement.appendChild(i),Ec(t,i))}}return t.calculative.patchFlags&&ar[r]&&Ec(t,ar[r]),e}function R$(t){const n=t.calculative.canvas.store.id+"-"+t.id;ar[n]&&(ar[n].remove(),ar[n]=void 0)}function Nb(t){const n=t.calculative.canvas.store.id+"-"+t.id;ar[n]&&Ec(t,ar[n])}function I$(t){const n=t.calculative.canvas.store.id+"-"+t.id;ar[n]&&Ec(t,ar[n])}function P$(t){const n=t.calculative.canvas.store.id+"-"+t.id;ar[n]&&(Ec(t,ar[n]),ar[n].getAttribute("src")!==t.image&&(ar[n].src=t.image))}function k$(t,e,n){const r=t.calculative.canvas.store.id;ar[r+"-"+e]&&(ar[r+"-"+n]=ar[r+"-"+e],delete ar[r+"-"+e])}function Ec(t,e){e.style.objectFit=t.imageRatio?"contain":"fill",mi(t,e)}function $$(t,e){return t.onResize||(t.onResize=uC,t.onValue=T$),gc(t,e)}function uC(t){const e=t.anchors.filter(n=>n.flag!==1);dC(t),t.anchors=t.anchors.concat(...e)}function T$(t){uC(t),tl(t)}function dC(t){const e=[],{x:n,y:r,width:i,height:o}=t,a=_$(t),l=5;for(let f=0;f<l;f++){if(f===2)continue;let v=n+i*(f+1)/(l+1),g=r;v<n+a?g=ld(n+a,g+a,v,a,-1):v>n+i-a&&(g=ld(n+i-a,g+a,v,a,-1)),e.push({id:String(e.length),flag:1,penId:t.id,x:(v-n)/i,y:(g-r)/o})}const s=3;for(let f=0;f<s;f++){let v=r+o*(f+1)/(s+1),g=n+i;v<r+a?g=sd(g-a,r+a,v,a):v>r+o-a&&(g=sd(g-a,r+o-a,v,a)),e.push({id:String(e.length),flag:1,penId:t.id,x:(g-n)/i,y:(v-r)/o})}const u=5;for(let f=0;f<u;f++){if(f===2)continue;let v=n+i*(f+1)/(u+1),g=r+o;v<n+a?g=ld(n+a,g-a,v,a):v>n+i-a&&(g=ld(n+i-a,g-a,v,a)),e.push({id:String(e.length),flag:1,penId:t.id,x:(v-n)/i,y:(g-r)/o})}const c=3;for(let f=0;f<c;f++){let v=r+o*(f+1)/(c+1),g=n;v<r+a?g=sd(g+a,r+a,v,a,-1):v>r+o-a&&(g=sd(g+a,r+o-a,v,a,-1)),e.push({id:String(e.length),flag:1,penId:t.id,x:(g-n)/i,y:(v-r)/o})}t.anchors=e}function _$(t){let e=t.calculative.borderRadius||0,n=t.calculative.borderRadius||0;const{width:r,height:i}=t;t.calculative.borderRadius<1&&(e=r*t.calculative.borderRadius,n=i*t.calculative.borderRadius);let o=e<n?e:n;return r<2*o&&(o=r/2),i<2*o&&(o=i/2),o}function sd(t,e,n,r,i=1){return i*Math.sqrt(r**2-(n-e)**2)+t}function ld(t,e,n,r,i=1){return i*Math.sqrt(r**2-(n-t)**2)+e}function A$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a}=t.calculative.worldRect;if(n.moveTo(r,i+a),n.lineTo(r+o,i+a),n.closePath(),n instanceof Path2D)return n}function O$(t){const e=[{x:0,y:1},{x:1,y:1}];t.anchors=e.map(({x:n,y:r},i)=>({id:i+"",x:n,y:r,penId:t.id}))}function M$(){return{rectangle:gc,square:FI,circle:BI,svgPath:yk,diamond:bk,triangle:wk,pentagon:Ck,pentagram:Ek,hexagon:Ik,leftArrow:Pk,rightArrow:kk,twowayArrow:$k,message:Tk,cloud:_k,file:Ak,people:Mk,line:Fk,iframe:t$,video:a$,gif:E$,mindNode:$$,mindLine:A$,mindNode2:gc,form:m$,combine:gc}}function N$(){return{triangle:xk,pentagon:Sk,pentagram:Z1,mindNode:dC,mindLine:O$}}var Jn;(function(t){t[t.Link=0]="Link",t[t.SetProps=1]="SetProps",t[t.StartAnimate=2]="StartAnimate",t[t.PauseAnimate=3]="PauseAnimate",t[t.StopAnimate=4]="StopAnimate",t[t.JS=5]="JS",t[t.GlobalFn=6]="GlobalFn",t[t.Emit=7]="Emit",t[t.StartVideo=8]="StartVideo",t[t.PauseVideo=9]="PauseVideo",t[t.StopVideo=10]="StopVideo",t[t.SendPropData=11]="SendPropData",t[t.SendVarData=12]="SendVarData",t[t.Navigator=13]="Navigator",t[t.Dialog=14]="Dialog",t[t.SendData=15]="SendData",t[t.PostMessage=16]="PostMessage",t[t.PostMessageToParent=17]="PostMessageToParent",t[t.Message=18]="Message"})(Jn||(Jn={}));class L${constructor(e){se(this,"parent");se(this,"box");se(this,"boxWidth",320);se(this,"boxHeight",180);se(this,"ratio",this.boxWidth/this.boxHeight);se(this,"padding",5);se(this,"img");se(this,"isShow");se(this,"isDown");se(this,"view");se(this,"timer");se(this,"onMouseDown",e=>{e.preventDefault(),e.stopPropagation(),this.isDown=!0});se(this,"onMouseMove",e=>{if(e.preventDefault(),e.stopPropagation(),this.isDown)try{this.parent.gotoView(e.offsetX/this.box.clientWidth,e.offsetY/this.box.clientHeight)}catch(n){console.warn(n.message),this.isDown=!1}});se(this,"onMouseUp",e=>{e.preventDefault(),e.stopPropagation();try{this.parent.gotoView(e.offsetX/this.box.clientWidth,e.offsetY/this.box.clientHeight)}catch(n){console.warn(n.message)}finally{this.isDown=!1}});se(this,"onWheel",e=>{let n=.015;if(this.parent.store.options.scaleOff)n=this.parent.store.options.scaleOff,e.deltaY>0&&(n=-this.parent.store.options.scaleOff);else if(/mac os /i.test(navigator.userAgent))e.ctrlKey?e.deltaY>0&&(n*=-1):n*=e.wheelDeltaY/240;else{let s=.2;e.deltaY.toString().indexOf(".")!==-1&&(s=.01),e.deltaY>0?n=-s:n=s}let{offsetX:r,offsetY:i}=e;const o=this.parent.store.data.width||this.parent.store.options.width,a=this.parent.store.data.height||this.parent.store.options.height;if(o&&a)r=r/this.boxWidth*o*this.parent.store.data.scale+this.parent.store.data.origin.x+this.parent.store.data.x,i=i/this.boxHeight*a*this.parent.store.data.scale+this.parent.store.data.origin.y+this.parent.store.data.y;else{const l=this.parent.parent.getRect();r=r/this.boxWidth*l.width+l.x+this.parent.store.data.x,i=i/this.boxHeight*l.height+l.y+this.parent.store.data.y}this.parent.scale(this.parent.store.data.scale+n,{x:r,y:i})});var r;this.parent=e,this.box=document.createElement("div"),this.img=new Image,this.view=document.createElement("div"),this.box.appendChild(this.img),this.box.appendChild(this.view),(r=this.parent.externalElements)==null||r.parentElement.appendChild(this.box),this.box.className="meta2d-map",this.box.onmousedown=this.onMouseDown,this.box.onmousemove=this.onMouseMove,this.box.onmouseup=this.onMouseUp,this.box.onwheel=this.onWheel;let n;for(let i=0;i<document.styleSheets.length;i++)document.styleSheets[i].title==="le5le/map"&&(n=document.styleSheets[i]);if(!n){let i=document.createElement("style");i.type="text/css",i.title="le5le.com/map",document.head.appendChild(i),i=document.createElement("style"),i.type="text/css",document.head.appendChild(i),n=i.sheet,n.insertRule(`.meta2d-map{display:flex;width:${this.boxWidth+2*this.padding}px;height:${this.boxHeight+2*this.padding}px;padding:${this.padding}px;background:#f4f4f4;border:1px solid #ffffff;box-shadow: 0px 0px 14px 0px rgba(0,10,38,0.30);border-radius:8px;position:absolute;z-index:9999;right:0;bottom:0;justify-content:center;align-items:center;cursor:default;user-select:none;overflow: hidden;}`),n.insertRule(".meta2d-map img{max-width:100%;max-height:100%;pointer-events: none;}"),n.insertRule(".meta2d-map div{pointer-events: none;border:1px solid #1890ff;position:absolute}")}}show(){this.box.style.display="flex",this.parent.store.data.pens.length?(this.img.style.display="block",this.img.src=this.parent.toPng(0,void 0,!0),this.setView()):this.img.style.display="none",this.isShow=!0}hide(){this.box.style.display="none",this.isShow=!1}setView(){const e=this.parent.store.data;if(e.pens.length){let n=Wi(e.pens);const r=this.parent.store.data.width||this.parent.store.options.width,i=this.parent.store.data.height||this.parent.store.options.height;if(r&&i?n={x:this.parent.store.data.origin.x,y:this.parent.store.data.origin.y,width:r*this.parent.store.data.scale,height:i*this.parent.store.data.scale}:(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.parent.store.bkImg&&(this.img.src=this.parent.toPng(0,void 0,!0))},300)),La(n,e.x,e.y),n.width/n.height>this.ratio){const f=n.width/this.ratio;n.y-=(f-n.height)/2,n.height=f,hr(n)}else{const f=n.height*this.ratio;n.x-=(f-n.width)/2,n.width=f,hr(n)}const a=this.parent.canvasRect;let l=0,s=0;if(n.x<0)l=-n.x/n.width;else if(n.x+n.width>a.width){let f=0;a.width>n.width&&(f=a.width-n.width),l=(-n.x+f)/n.width}if(n.y<0)s=-n.y/n.height;else if(n.y+n.height>a.height){let f=0;a.height>n.height&&(f=a.height-n.height),s=(-n.y+f)/n.height}const u=a.width>n.width?1:a.width/n.width,c=a.height>n.height?1:a.height/n.height;this.view.style.left=this.padding+l*this.boxWidth+"px",this.view.style.width=u*this.boxWidth+"px",this.view.style.top=this.padding+s*this.boxHeight+"px",this.view.style.height=c*this.boxHeight+"px"}}}function cd(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mv={exports:{}},Lb;function D$(){return Lb||(Lb=1,function(t,e){(function(n){t.exports=n()})(function(){return function(){return function n(r,i,o){function a(u,c){if(!i[u]){if(!r[u]){var f=typeof cd=="function"&&cd;if(!c&&f)return f(u,!0);if(l)return l(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=i[u]={exports:{}};r[u][0].call(g.exports,function(m){return a(r[u][1][m]||m)},g,g.exports,n,r,i,o)}return i[u].exports}for(var l=typeof cd=="function"&&cd,s=0;s<o.length;s++)a(o[s]);return a}}()({1:[function(n,r,i){(function(o,a){(function(){const l=n("events").EventEmitter,s=n("./store"),u=n("./topic-alias-recv"),c=n("./topic-alias-send"),f=n("mqtt-packet"),v=n("./default-message-id-provider"),g=n("readable-stream").Writable,m=n("inherits"),y=n("reinterval"),p=n("rfdc/default"),C=n("./validations"),x=n("xtend"),S=n("debug")("mqttjs:client"),E=o?o.nextTick:function(O){setTimeout(O,0)},P=a.setImmediate||function(O){E(O)},$={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},_={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function M(O,L){let K;L.properties&&(K=L.properties.topicAlias);let q=L.topic.toString();if(q.length===0){if(K===void 0)return new Error("Unregistered Topic Alias");if((q=O.topicAliasSend.getTopicByAlias(K))===void 0)return new Error("Unregistered Topic Alias");L.topic=q}K&&delete L.properties.topicAlias}function B(O,L,K){S("sendPacket :: packet: %O",L),S("sendPacket :: emitting `packetsend`"),O.emit("packetsend",L),S("sendPacket :: writing to stream");const q=f.writeToStream(L,O.stream,O.options);S("sendPacket :: writeToStream result %s",q),!q&&K&&K!==k?(S("sendPacket :: handle events on `drain` once through callback."),O.stream.once("drain",K)):K&&(S("sendPacket :: invoking cb"),K())}function H(O,L,K,q){S("storeAndSend :: store packet with cmd %s to outgoingStore",L.cmd);let J,V=L;if(V.cmd==="publish"&&(V=p(L),J=M(O,V)))return K&&K(J);O.outgoingStore.put(V,function(z){if(z)return K&&K(z);q(),B(O,L,K)})}function k(O){S("nop ::",O)}function T(O,L){let K;const q=this;if(!(this instanceof T))return new T(O,L);for(K in this.options=L||{},$)this.options[K]===void 0?this.options[K]=$[K]:this.options[K]=L[K];S("MqttClient :: options.protocol",L.protocol),S("MqttClient :: options.protocolVersion",L.protocolVersion),S("MqttClient :: options.username",L.username),S("MqttClient :: options.keepalive",L.keepalive),S("MqttClient :: options.reconnectPeriod",L.reconnectPeriod),S("MqttClient :: options.rejectUnauthorized",L.rejectUnauthorized),S("MqttClient :: options.topicAliasMaximum",L.topicAliasMaximum),this.options.clientId=typeof L.clientId=="string"?L.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),S("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=L.protocolVersion===5&&L.customHandleAcks?L.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=O,this.messageIdProvider=this.options.messageIdProvider===void 0?new v:this.options.messageIdProvider,this.outgoingStore=L.outgoingStore||new s,this.incomingStore=L.incomingStore||new s,this.queueQoSZero=L.queueQoSZero===void 0||L.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,L.topicAliasMaximum>0&&(L.topicAliasMaximum>65535?S("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new u(L.topicAliasMaximum)),this.on("connect",function(){const J=this.queue;S("connect :: sending queued packets"),function V(){const z=J.shift();S("deliver :: entry %o",z);let D=null;if(!z)return void q._resubscribe();D=z.packet,S("deliver :: call _sendPacket for %o",D);let U=!0;D.messageId&&D.messageId!==0&&(q.messageIdProvider.register(D.messageId)||(U=!1)),U?q._sendPacket(D,function(W){z.cb&&z.cb(W),V()}):(S("messageId: %d has already used. The message is skipped and removed.",D.messageId),V())}()}),this.on("close",function(){S("close :: connected set to `false`"),this.connected=!1,S("close :: clearing connackTimer"),clearTimeout(this.connackTimer),S("close :: clearing ping timer"),q.pingTimer!==null&&(q.pingTimer.clear(),q.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),S("close :: calling _setupReconnect"),this._setupReconnect()}),l.call(this),S("MqttClient :: setting up stream"),this._setupStream()}m(T,l),T.prototype._setupStream=function(){const O=this,L=new g,K=f.parser(this.options);let q=null;const J=[];function V(){if(J.length)E(z);else{const U=q;q=null,U()}}function z(){S("work :: getting next packet in queue");const U=J.shift();if(U)S("work :: packet pulled from queue"),O._handlePacket(U,V);else{S("work :: no packets in queue");const W=q;q=null,S("work :: done flag is %s",!!W),W&&W()}}S("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),S("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),K.on("packet",function(U){S("parser :: on packet push to packets array."),J.push(U)}),L._write=function(U,W,X){q=X,S("writable stream :: parsing buffer"),K.parse(U),z()},S("_setupStream :: pipe stream to writable stream"),this.stream.pipe(L),this.stream.on("error",function(U){S("streamErrorHandler :: error",U.message),U.code?(S("streamErrorHandler :: emitting error"),O.emit("error",U)):k(U)}),this.stream.on("close",function(){var U;S("(%s)stream :: on close",O.options.clientId),(U=O.outgoing)&&(S("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(U).forEach(function(W){U[W].volatile&&typeof U[W].cb=="function"&&(U[W].cb(new Error("Connection closed")),delete U[W])})),S("stream: emit close to MqttClient"),O.emit("close")}),S("_setupStream: sending packet `connect`");const D=Object.create(this.options);if(D.cmd="connect",this.topicAliasRecv&&(D.properties||(D.properties={}),this.topicAliasRecv&&(D.properties.topicAliasMaximum=this.topicAliasRecv.max)),B(this,D),K.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return O.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"&&B(this,x({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){S("!!connectTimeout hit!! Calling _cleanUp with force `true`"),O._cleanUp(!0)},this.options.connectTimeout)},T.prototype._handlePacket=function(O,L){const K=this.options;if(K.protocolVersion===5&&K.properties&&K.properties.maximumPacketSize&&K.properties.maximumPacketSize<O.length)return this.emit("error",new Error("exceeding packets size "+O.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(S("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",O),O.cmd){case"publish":this._handlePublish(O,L);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(O),L();break;case"pubrel":this._handlePubrel(O,L);break;case"connack":this._handleConnack(O),L();break;case"auth":this._handleAuth(O),L();break;case"pingresp":this._handlePingresp(O),L();break;case"disconnect":this._handleDisconnect(O),L()}},T.prototype._checkDisconnecting=function(O){return this.disconnecting&&(O&&O!==k?O(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},T.prototype.publish=function(O,L,K,q){S("publish :: message `%s` to topic `%s`",L,O);const J=this.options;if(typeof K=="function"&&(q=K,K=null),K=x({qos:0,retain:!1,dup:!1},K),this._checkDisconnecting(q))return this;const V=this,z=function(){let D=0;if((K.qos===1||K.qos===2)&&(D=V._nextId())===null)return S("No messageId left"),!1;const U={cmd:"publish",topic:O,payload:L,qos:K.qos,retain:K.retain,messageId:D,dup:K.dup};switch(J.protocolVersion===5&&(U.properties=K.properties),S("publish :: qos",K.qos),K.qos){case 1:case 2:V.outgoing[U.messageId]={volatile:!1,cb:q||k},S("MqttClient:publish: packet cmd: %s",U.cmd),V._sendPacket(U,void 0,K.cbStorePut);break;default:S("MqttClient:publish: packet cmd: %s",U.cmd),V._sendPacket(U,q,K.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!z())&&this._storeProcessingQueue.push({invoke:z,cbStorePut:K.cbStorePut,callback:q}),this},T.prototype.subscribe=function(){const O=this,L=new Array(arguments.length);for(let Y=0;Y<arguments.length;Y++)L[Y]=arguments[Y];const K=[];let q=L.shift();const J=q.resubscribe;let V=L.pop()||k,z=L.pop();const D=this.options.protocolVersion;delete q.resubscribe,typeof q=="string"&&(q=[q]),typeof V!="function"&&(z=V,V=k);const U=C.validateTopics(q);if(U!==null)return P(V,new Error("Invalid topic "+U)),this;if(this._checkDisconnecting(V))return S("subscribe: discconecting true"),this;const W={qos:0};if(D===5&&(W.nl=!1,W.rap=!1,W.rh=0),z=x(W,z),Array.isArray(q)?q.forEach(function(Y){if(S("subscribe: array topic %s",Y),!Object.prototype.hasOwnProperty.call(O._resubscribeTopics,Y)||O._resubscribeTopics[Y].qos<z.qos||J){const Q={topic:Y,qos:z.qos};D===5&&(Q.nl=z.nl,Q.rap=z.rap,Q.rh=z.rh,Q.properties=z.properties),S("subscribe: pushing topic `%s` and qos `%s` to subs list",Q.topic,Q.qos),K.push(Q)}}):Object.keys(q).forEach(function(Y){if(S("subscribe: object topic %s",Y),!Object.prototype.hasOwnProperty.call(O._resubscribeTopics,Y)||O._resubscribeTopics[Y].qos<q[Y].qos||J){const Q={topic:Y,qos:q[Y].qos};D===5&&(Q.nl=q[Y].nl,Q.rap=q[Y].rap,Q.rh=q[Y].rh,Q.properties=z.properties),S("subscribe: pushing `%s` to subs list",Q),K.push(Q)}}),!K.length)return V(null,[]),this;const X=function(){const Y=O._nextId();if(Y===null)return S("No messageId left"),!1;const Q={cmd:"subscribe",subscriptions:K,qos:1,retain:!1,dup:!1,messageId:Y};if(z.properties&&(Q.properties=z.properties),O.options.resubscribe){S("subscribe :: resubscribe true");const ne=[];K.forEach(function(ie){if(O.options.reconnectPeriod>0){const re={qos:ie.qos};D===5&&(re.nl=ie.nl||!1,re.rap=ie.rap||!1,re.rh=ie.rh||0,re.properties=ie.properties),O._resubscribeTopics[ie.topic]=re,ne.push(ie.topic)}}),O.messageIdToTopic[Q.messageId]=ne}return O.outgoing[Q.messageId]={volatile:!0,cb:function(ne,ie){if(!ne){const re=ie.granted;for(let I=0;I<re.length;I+=1)K[I].qos=re[I]}V(ne,K)}},S("subscribe :: call _sendPacket"),O._sendPacket(Q),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!X())&&this._storeProcessingQueue.push({invoke:X,callback:V}),this},T.prototype.unsubscribe=function(){const O=this,L=new Array(arguments.length);for(let D=0;D<arguments.length;D++)L[D]=arguments[D];let K=L.shift(),q=L.pop()||k,J=L.pop();typeof K=="string"&&(K=[K]),typeof q!="function"&&(J=q,q=k);const V=C.validateTopics(K);if(V!==null)return P(q,new Error("Invalid topic "+V)),this;if(O._checkDisconnecting(q))return this;const z=function(){const D=O._nextId();if(D===null)return S("No messageId left"),!1;const U={cmd:"unsubscribe",qos:1,messageId:D};return typeof K=="string"?U.unsubscriptions=[K]:Array.isArray(K)&&(U.unsubscriptions=K),O.options.resubscribe&&U.unsubscriptions.forEach(function(W){delete O._resubscribeTopics[W]}),typeof J=="object"&&J.properties&&(U.properties=J.properties),O.outgoing[U.messageId]={volatile:!0,cb:q},S("unsubscribe: call _sendPacket"),O._sendPacket(U),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!z())&&this._storeProcessingQueue.push({invoke:z,callback:q}),this},T.prototype.end=function(O,L,K){const q=this;function J(){S("end :: (%s) :: finish :: calling _cleanUp with force %s",q.options.clientId,O),q._cleanUp(O,()=>{S("end :: finish :: calling process.nextTick on closeStores"),E((function(){S("end :: closeStores: closing incoming and outgoing stores"),q.disconnected=!0,q.incomingStore.close(function(V){q.outgoingStore.close(function(z){if(S("end :: closeStores: emitting end"),q.emit("end"),K){const D=V||z;S("end :: closeStores: invoking callback with args"),K(D)}})}),q._deferredReconnect&&q._deferredReconnect()}).bind(q))},L)}return S("end :: (%s)",this.options.clientId),O!=null&&typeof O=="boolean"||(K=L||k,L=O,O=!1,typeof L!="object"&&(K=L,L=null,typeof K!="function"&&(K=k))),typeof L!="object"&&(K=L,L=null),S("end :: cb? %s",!!K),K=K||k,this.disconnecting?(K(),this):(this._clearReconnect(),this.disconnecting=!0,!O&&Object.keys(this.outgoing).length>0?(S("end :: (%s) :: calling finish in 10ms once outgoing is empty",q.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,J,10))):(S("end :: (%s) :: immediately calling finish",q.options.clientId),J()),this)},T.prototype.removeOutgoingMessage=function(O){const L=this.outgoing[O]?this.outgoing[O].cb:null;return delete this.outgoing[O],this.outgoingStore.del({messageId:O},function(){L(new Error("Message removed"))}),this},T.prototype.reconnect=function(O){S("client reconnect");const L=this,K=function(){O?(L.options.incomingStore=O.incomingStore,L.options.outgoingStore=O.outgoingStore):(L.options.incomingStore=null,L.options.outgoingStore=null),L.incomingStore=L.options.incomingStore||new s,L.outgoingStore=L.options.outgoingStore||new s,L.disconnecting=!1,L.disconnected=!1,L._deferredReconnect=null,L._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=K:K(),this},T.prototype._reconnect=function(){S("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),S("client already connected. disconnecting first.")):(S("_reconnect: calling _setupStream"),this._setupStream())},T.prototype._setupReconnect=function(){const O=this;!O.disconnecting&&!O.reconnectTimer&&O.options.reconnectPeriod>0?(this.reconnecting||(S("_setupReconnect :: emit `offline` state"),this.emit("offline"),S("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),S("_setupReconnect :: setting reconnectTimer for %d ms",O.options.reconnectPeriod),O.reconnectTimer=setInterval(function(){S("reconnectTimer :: reconnect triggered!"),O._reconnect()},O.options.reconnectPeriod)):S("_setupReconnect :: doing nothing...")},T.prototype._clearReconnect=function(){S("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},T.prototype._cleanUp=function(O,L){const K=arguments[2];if(L&&(S("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",L)),S("_cleanUp :: forced? %s",O),O)this.options.reconnectPeriod===0&&this.options.clean&&(q=this.outgoing)&&(S("flush: queue exists? %b",!!q),Object.keys(q).forEach(function(J){typeof q[J].cb=="function"&&(q[J].cb(new Error("Connection closed")),delete q[J])})),S("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const J=x({cmd:"disconnect"},K);S("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(J,P.bind(null,this.stream.end.bind(this.stream)))}var q;this.disconnecting||(S("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(S("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),L&&!this.connected&&(S("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",L),L())},T.prototype._sendPacket=function(O,L,K){S("_sendPacket :: (%s) ::  start",this.options.clientId),K=K||k,L=L||k;const q=function(J,V){if(J.options.protocolVersion===5&&V.cmd==="publish"){let z;V.properties&&(z=V.properties.topicAlias);const D=V.topic.toString();if(J.topicAliasSend)if(z){if(D.length!==0&&(S("applyTopicAlias :: register topic: %s - alias: %d",D,z),!J.topicAliasSend.put(D,z)))return S("applyTopicAlias :: error out of range. topic: %s - alias: %d",D,z),new Error("Sending Topic Alias out of range")}else D.length!==0&&(J.options.autoAssignTopicAlias?(z=J.topicAliasSend.getAliasByTopic(D))?(V.topic="",V.properties={...V.properties,topicAlias:z},S("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",D,z)):(z=J.topicAliasSend.getLruAlias(),J.topicAliasSend.put(D,z),V.properties={...V.properties,topicAlias:z},S("applyTopicAlias :: auto assign topic: %s - alias: %d",D,z)):J.options.autoUseTopicAlias&&(z=J.topicAliasSend.getAliasByTopic(D))&&(V.topic="",V.properties={...V.properties,topicAlias:z},S("applyTopicAlias :: auto use topic: %s - alias: %d",D,z)));else if(z)return S("applyTopicAlias :: error out of range. topic: %s - alias: %d",D,z),new Error("Sending Topic Alias out of range")}}(this,O);if(q)L(q);else{if(!this.connected)return O.cmd==="auth"?(this._shiftPingInterval(),void B(this,O,L)):(S("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(O,L,K));switch(this._shiftPingInterval(),O.cmd){case"publish":break;case"pubrel":return void H(this,O,L,K);default:return void B(this,O,L)}switch(O.qos){case 2:case 1:H(this,O,L,K);break;case 0:default:B(this,O,L)}S("_sendPacket :: (%s) ::  end",this.options.clientId)}},T.prototype._storePacket=function(O,L,K){S("_storePacket :: packet: %o",O),S("_storePacket :: cb? %s",!!L),K=K||k;let q=O;if(q.cmd==="publish"){const J=M(this,q=p(O));if(J)return L&&L(J)}(q.qos||0)===0&&this.queueQoSZero||q.cmd!=="publish"?this.queue.push({packet:q,cb:L}):q.qos>0?(L=this.outgoing[q.messageId]?this.outgoing[q.messageId].cb:null,this.outgoingStore.put(q,function(J){if(J)return L&&L(J);K()})):L&&L(new Error("No connection to broker"))},T.prototype._setupPingTimer=function(){S("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const O=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=y(function(){O._checkPing()},1e3*this.options.keepalive))},T.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},T.prototype._checkPing=function(){S("_checkPing :: checking ping..."),this.pingResp?(S("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(S("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},T.prototype._handlePingresp=function(){this.pingResp=!0},T.prototype._handleConnack=function(O){S("_handleConnack");const L=this.options,K=L.protocolVersion===5?O.reasonCode:O.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,O.properties){if(O.properties.topicAliasMaximum){if(O.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));O.properties.topicAliasMaximum>0&&(this.topicAliasSend=new c(O.properties.topicAliasMaximum))}O.properties.serverKeepAlive&&L.keepalive&&(L.keepalive=O.properties.serverKeepAlive,this._shiftPingInterval()),O.properties.maximumPacketSize&&(L.properties||(L.properties={}),L.properties.maximumPacketSize=O.properties.maximumPacketSize)}if(K===0)this.reconnecting=!1,this._onConnect(O);else if(K>0){const q=new Error("Connection refused: "+_[K]);q.code=K,this.emit("error",q)}},T.prototype._handleAuth=function(O){const L=this.options.protocolVersion,K=L===5?O.reasonCode:O.returnCode;if(L!==5){const J=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+L);return J.code=K,void this.emit("error",J)}const q=this;this.handleAuth(O,function(J,V){if(J)q.emit("error",J);else if(K===24)q.reconnecting=!1,q._sendPacket(V);else{const z=new Error("Connection refused: "+_[K]);J.code=K,q.emit("error",z)}})},T.prototype.handleAuth=function(O,L){L()},T.prototype._handlePublish=function(O,L){S("_handlePublish: packet %o",O),L=L!==void 0?L:k;let K=O.topic.toString();const q=O.payload,J=O.qos,V=O.messageId,z=this,D=this.options,U=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let W;if(O.properties&&(W=O.properties.topicAlias),W!==void 0)if(K.length===0){if(!(W>0&&W<=65535))return S("_handlePublish :: topic alias out of range. alias: %d",W),void this.emit("error",new Error("Received Topic Alias is out of range"));{const X=this.topicAliasRecv.getTopicByAlias(W);if(!X)return S("_handlePublish :: unregistered topic alias. alias: %d",W),void this.emit("error",new Error("Received unregistered Topic Alias"));S("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",K=X,W)}}else{if(!this.topicAliasRecv.put(K,W))return S("_handlePublish :: topic alias out of range. alias: %d",W),void this.emit("error",new Error("Received Topic Alias is out of range"));S("_handlePublish :: registered topic: %s - alias: %d",K,W)}}switch(S("_handlePublish: qos %d",J),J){case 2:D.customHandleAcks(K,q,O,function(W,X){return W instanceof Error||(X=W,W=null),W?z.emit("error",W):U.indexOf(X)===-1?z.emit("error",new Error("Wrong reason code for pubrec")):void(X?z._sendPacket({cmd:"pubrec",messageId:V,reasonCode:X},L):z.incomingStore.put(O,function(){z._sendPacket({cmd:"pubrec",messageId:V},L)}))});break;case 1:D.customHandleAcks(K,q,O,function(W,X){return W instanceof Error||(X=W,W=null),W?z.emit("error",W):U.indexOf(X)===-1?z.emit("error",new Error("Wrong reason code for puback")):(X||z.emit("message",K,q,O),void z.handleMessage(O,function(Y){if(Y)return L&&L(Y);z._sendPacket({cmd:"puback",messageId:V,reasonCode:X},L)}))});break;case 0:this.emit("message",K,q,O),this.handleMessage(O,L);break;default:S("_handlePublish: unknown QoS. Doing nothing.")}},T.prototype.handleMessage=function(O,L){L()},T.prototype._handleAck=function(O){const L=O.messageId,K=O.cmd;let q=null;const J=this.outgoing[L]?this.outgoing[L].cb:null,V=this;let z;if(J){switch(S("_handleAck :: packet type",K),K){case"pubcomp":case"puback":{const D=O.reasonCode;D&&D>0&&D!==16&&((z=new Error("Publish error: "+_[D])).code=D,J(z,O)),delete this.outgoing[L],this.outgoingStore.del(O,J),this.messageIdProvider.deallocate(L),this._invokeStoreProcessingQueue();break}case"pubrec":{q={cmd:"pubrel",qos:2,messageId:L};const D=O.reasonCode;D&&D>0&&D!==16?((z=new Error("Publish error: "+_[D])).code=D,J(z,O)):this._sendPacket(q);break}case"suback":delete this.outgoing[L],this.messageIdProvider.deallocate(L);for(let D=0;D<O.granted.length;D++)if((128&O.granted[D])!=0){const U=this.messageIdToTopic[L];U&&U.forEach(function(W){delete V._resubscribeTopics[W]})}this._invokeStoreProcessingQueue(),J(null,O);break;case"unsuback":delete this.outgoing[L],this.messageIdProvider.deallocate(L),this._invokeStoreProcessingQueue(),J(null);break;default:V.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")}else S("_handleAck :: Server sent an ack in error. Ignoring.")},T.prototype._handlePubrel=function(O,L){S("handling pubrel packet"),L=L!==void 0?L:k;const K=this,q={cmd:"pubcomp",messageId:O.messageId};K.incomingStore.get(O,function(J,V){J?K._sendPacket(q,L):(K.emit("message",V.topic,V.payload,V),K.handleMessage(V,function(z){if(z)return L(z);K.incomingStore.del(V,k),K._sendPacket(q,L)}))})},T.prototype._handleDisconnect=function(O){this.emit("disconnect",O)},T.prototype._nextId=function(){return this.messageIdProvider.allocate()},T.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},T.prototype._resubscribe=function(){S("_resubscribe");const O=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&O.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){S("_resubscribe: protocolVersion 5");for(let L=0;L<O.length;L++){const K={};K[O[L]]=this._resubscribeTopics[O[L]],K.resubscribe=!0,this.subscribe(K,{properties:K[O[L]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},T.prototype._onConnect=function(O){if(this.disconnected)return void this.emit("connect",O);const L=this;this.connackPacket=O,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function K(){let q=L.outgoingStore.createStream();function J(){L._storeProcessing=!1,L._packetIdsDuringStoreProcessing={}}function V(){q.destroy(),q=null,L._flushStoreProcessingQueue(),J()}L.once("close",V),q.on("error",function(z){J(),L._flushStoreProcessingQueue(),L.removeListener("close",V),L.emit("error",z)}),q.on("end",function(){let z=!0;for(const D in L._packetIdsDuringStoreProcessing)if(!L._packetIdsDuringStoreProcessing[D]){z=!1;break}z?(J(),L.removeListener("close",V),L._invokeAllStoreProcessingQueue(),L.emit("connect",O)):K()}),function z(){if(!q)return;L._storeProcessing=!0;const D=q.read(1);let U;D?L._packetIdsDuringStoreProcessing[D.messageId]?z():L.disconnecting||L.reconnectTimer?q.destroy&&q.destroy():(U=L.outgoing[D.messageId]?L.outgoing[D.messageId].cb:null,L.outgoing[D.messageId]={volatile:!1,cb:function(W,X){U&&U(W,X),z()}},L._packetIdsDuringStoreProcessing[D.messageId]=!0,L.messageIdProvider.register(D.messageId)?L._sendPacket(D):S("messageId: %d has already used.",D.messageId)):q.once("readable",z)}()}()},T.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const O=this._storeProcessingQueue[0];if(O&&O.invoke())return this._storeProcessingQueue.shift(),!0}return!1},T.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},T.prototype._flushStoreProcessingQueue=function(){for(const O of this._storeProcessingQueue)O.cbStorePut&&O.cbStorePut(new Error("Connection closed")),O.callback&&O.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},r.exports=T}).call(this)}).call(this,n("_process"),typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(n,r,i){const{Buffer:o}=n("buffer"),a=n("readable-stream").Transform,l=n("duplexify");let s,u,c,f=!1;r.exports=function(v,g){if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");const m=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";(function(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})})(g);const y=function(p,C){const x=p.protocol==="alis"?"wss":"ws";let S=x+"://"+p.hostname+p.path;return p.port&&p.port!==80&&p.port!==443&&(S=x+"://"+p.hostname+":"+p.port+p.path),typeof p.transformWsUrl=="function"&&(S=p.transformWsUrl(S,p,C)),S}(g,v);return(s=g.my).connectSocket({url:y,protocols:m}),u=function(){const p=new a;return p._write=function(C,x,S){s.sendSocketMessage({data:C.buffer,success:function(){S()},fail:function(){S(new Error)}})},p._flush=function(C){s.closeSocket({success:function(){C()}})},p}(),c=l.obj(),f||(f=!0,s.onSocketOpen(function(){c.setReadable(u),c.setWritable(u),c.emit("connect")}),s.onSocketMessage(function(p){if(typeof p.data=="string"){const C=o.from(p.data,"base64");u.push(C)}else{const C=new FileReader;C.addEventListener("load",function(){let x=C.result;x=x instanceof ArrayBuffer?o.from(x):o.from(x,"utf8"),u.push(x)}),C.readAsArrayBuffer(p.data)}}),s.onSocketClose(function(){c.end(),c.destroy()}),s.onSocketError(function(p){c.destroy(p)})),c}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(n,r,i){const o=n("net"),a=n("debug")("mqttjs:tcp");r.exports=function(l,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const u=s.port,c=s.hostname;return a("port %d and host %s",u,c),o.createConnection(u,c)}},{debug:18,net:16}],4:[function(n,r,i){const o=n("tls"),a=n("net"),l=n("debug")("mqttjs:tls");r.exports=function(s,u){u.port=u.port||8883,u.host=u.hostname||u.host||"localhost",a.isIP(u.host)===0&&(u.servername=u.host),u.rejectUnauthorized=u.rejectUnauthorized!==!1,delete u.path,l("port %d host %s rejectUnauthorized %b",u.port,u.host,u.rejectUnauthorized);const c=o.connect(u);function f(v){u.rejectUnauthorized&&s.emit("error",v),c.end()}return c.on("secureConnect",function(){u.rejectUnauthorized&&!c.authorized?c.emit("error",new Error("TLS not authorized")):c.removeListener("error",f)}),c.on("error",f),c}},{debug:18,net:16,tls:16}],5:[function(n,r,i){(function(o){(function(){const{Buffer:a}=n("buffer"),l=n("ws"),s=n("debug")("mqttjs:ws"),u=n("duplexify"),c=n("readable-stream").Transform,f=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],v=o!==void 0&&o.title==="browser"||typeof __webpack_require__=="function";function g(y,p){let C=y.protocol+"://"+y.hostname+":"+y.port+y.path;return typeof y.transformWsUrl=="function"&&(C=y.transformWsUrl(C,y,p)),C}function m(y){const p=y;return y.hostname||(p.hostname="localhost"),y.port||(y.protocol==="wss"?p.port=443:p.port=80),y.path||(p.path="/"),y.wsOptions||(p.wsOptions={}),v||y.protocol!=="wss"||f.forEach(function(C){Object.prototype.hasOwnProperty.call(y,C)&&!Object.prototype.hasOwnProperty.call(y.wsOptions,C)&&(p.wsOptions[C]=y[C])}),p}r.exports=v?function(y,p){let C;s("browserStreamBuilder");const x=function(O){const L=m(O);if(L.hostname||(L.hostname=L.host),!L.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const K=new URL(document.URL);L.hostname=K.hostname,L.port||(L.port=K.port)}return L.objectMode===void 0&&(L.objectMode=!(L.binary===!0||L.binary===void 0)),L}(p).browserBufferSize||524288,S=p.browserBufferTimeout||1e3,E=!p.objectMode,P=function(O,L){const K=L.protocolId==="MQIsdp"&&L.protocolVersion===3?"mqttv3.1":"mqtt",q=g(L,O),J=new WebSocket(q,[K]);return J.binaryType="arraybuffer",J}(y,p),$=function(O,L,K){const q=new c({objectModeMode:O.objectMode});return q._write=L,q._flush=K,q}(p,function O(L,K,q){P.bufferedAmount>x&&setTimeout(O,S,L,K,q),E&&typeof L=="string"&&(L=a.from(L,"utf8"));try{P.send(L)}catch(J){return q(J)}q()},function(O){P.close(),O()});p.objectMode||($._writev=T),$.on("close",()=>{P.close()});const _=P.addEventListener!==void 0;function M(){C.setReadable($),C.setWritable($),C.emit("connect")}function B(){C.end(),C.destroy()}function H(O){C.destroy(O)}function k(O){let L=O.data;L=L instanceof ArrayBuffer?a.from(L):a.from(L,"utf8"),$.push(L)}function T(O,L){const K=new Array(O.length);for(let q=0;q<O.length;q++)typeof O[q].chunk=="string"?K[q]=a.from(O[q],"utf8"):K[q]=O[q].chunk;this._write(a.concat(K),"binary",L)}return P.readyState===P.OPEN?C=$:(C=C=u(void 0,void 0,p),p.objectMode||(C._writev=T),_?P.addEventListener("open",M):P.onopen=M),C.socket=P,_?(P.addEventListener("close",B),P.addEventListener("error",H),P.addEventListener("message",k)):(P.onclose=B,P.onerror=H,P.onmessage=k),C}:function(y,p){s("streamBuilder");const C=m(p),x=g(C,y),S=function(P,$,_){s("createWebSocket"),s("protocol: "+_.protocolId+" "+_.protocolVersion);const M=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";return s("creating new Websocket for url: "+$+" and protocol: "+M),new l($,[M],_.wsOptions)}(0,x,C),E=l.createWebSocketStream(S,C.wsOptions);return E.url=x,S.on("close",()=>{E.destroy()}),E}}).call(this)}).call(this,n("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(n,r,i){const{Buffer:o}=n("buffer"),a=n("readable-stream").Transform,l=n("duplexify");let s,u,c;r.exports=function(f,v){if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");const g=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";(function(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})})(v);const m=function(p,C){const x=p.protocol==="wxs"?"wss":"ws";let S=x+"://"+p.hostname+p.path;return p.port&&p.port!==80&&p.port!==443&&(S=x+"://"+p.hostname+":"+p.port+p.path),typeof p.transformWsUrl=="function"&&(S=p.transformWsUrl(S,p,C)),S}(v,f);s=wx.connectSocket({url:m,protocols:[g]}),u=function(){const p=new a;return p._write=function(C,x,S){s.send({data:C.buffer,success:function(){S()},fail:function(E){S(new Error(E))}})},p._flush=function(C){s.close({success:function(){C()}})},p}(),(c=l.obj())._destroy=function(p,C){s.close({success:function(){C&&C(p)}})};const y=c.destroy;return c.destroy=(function(){c.destroy=y;const p=this;setTimeout(function(){s.close({fail:function(){p._destroy(new Error)}})},0)}).bind(c),s.onOpen(function(){c.setReadable(u),c.setWritable(u),c.emit("connect")}),s.onMessage(function(p){let C=p.data;C=C instanceof ArrayBuffer?o.from(C):o.from(C,"utf8"),u.push(C)}),s.onClose(function(){c.end(),c.destroy()}),s.onError(function(p){c.destroy(new Error(p.errMsg))}),c}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(n,r,i){function o(){if(!(this instanceof o))return new o;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}o.prototype.allocate=function(){const a=this.nextId++;return this.nextId===65536&&(this.nextId=1),a},o.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},o.prototype.register=function(a){return!0},o.prototype.deallocate=function(a){},o.prototype.clear=function(){},r.exports=o},{}],8:[function(n,r,i){const o=n("xtend"),a=n("readable-stream").Readable,l={objectMode:!0},s={clean:!0};function u(c){if(!(this instanceof u))return new u(c);this.options=c||{},this.options=o(s,c),this._inflights=new Map}u.prototype.put=function(c,f){return this._inflights.set(c.messageId,c),f&&f(),this},u.prototype.createStream=function(){const c=new a(l),f=[];let v=!1,g=0;return this._inflights.forEach(function(m,y){f.push(m)}),c._read=function(){!v&&g<f.length?this.push(f[g++]):this.push(null)},c.destroy=function(){if(v)return;const m=this;v=!0,setTimeout(function(){m.emit("close")},0)},c},u.prototype.del=function(c,f){return(c=this._inflights.get(c.messageId))?(this._inflights.delete(c.messageId),f(null,c)):f&&f(new Error("missing packet")),this},u.prototype.get=function(c,f){return(c=this._inflights.get(c.messageId))?f(null,c):f&&f(new Error("missing packet")),this},u.prototype.close=function(c){this.options.clean&&(this._inflights=null),c&&c()},r.exports=u},{"readable-stream":69,xtend:81}],9:[function(n,r,i){function o(a){if(!(this instanceof o))return new o(a);this.aliasToTopic={},this.max=a}o.prototype.put=function(a,l){return!(l===0||l>this.max)&&(this.aliasToTopic[l]=a,this.length=Object.keys(this.aliasToTopic).length,!0)},o.prototype.getTopicByAlias=function(a){return this.aliasToTopic[a]},o.prototype.clear=function(){this.aliasToTopic={}},r.exports=o},{}],10:[function(n,r,i){const o=n("lru-cache"),a=n("number-allocator").NumberAllocator;function l(s){if(!(this instanceof l))return new l(s);s>0&&(this.aliasToTopic=new o({max:s}),this.topicToAlias={},this.numberAllocator=new a(1,s),this.max=s,this.length=0)}l.prototype.put=function(s,u){if(u===0||u>this.max)return!1;const c=this.aliasToTopic.get(u);return c&&delete this.topicToAlias[c],this.aliasToTopic.set(u,s),this.topicToAlias[s]=u,this.numberAllocator.use(u),this.length=this.aliasToTopic.length,!0},l.prototype.getTopicByAlias=function(s){return this.aliasToTopic.get(s)},l.prototype.getAliasByTopic=function(s){const u=this.topicToAlias[s];return u!==void 0&&this.aliasToTopic.get(u),u},l.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},l.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},r.exports=l},{"lru-cache":37,"number-allocator":46}],11:[function(n,r,i){function o(a){const l=a.split("/");for(let s=0;s<l.length;s++)if(l[s]!=="+"){if(l[s]==="#")return s===l.length-1;if(l[s].indexOf("+")!==-1||l[s].indexOf("#")!==-1)return!1}return!0}r.exports={validateTopics:function(a){if(a.length===0)return"empty_topic_list";for(let l=0;l<a.length;l++)if(!o(a[l]))return a[l];return null}}},{}],12:[function(n,r,i){(function(o){(function(){const a=n("../client"),l=n("../store"),s=n("url"),u=n("xtend"),c=n("debug")("mqttjs"),f={};function v(g,m){if(c("connecting to an MQTT broker..."),typeof g!="object"||m||(m=g,g=null),m=m||{},g){const p=s.parse(g,!0);if(p.port!=null&&(p.port=Number(p.port)),(m=u(p,m)).protocol===null)throw new Error("Missing protocol");m.protocol=m.protocol.replace(/:$/,"")}if(function(p){let C;p.auth&&((C=p.auth.match(/^(.+):(.+)$/))?(p.username=C[1],p.password=C[2]):p.username=p.auth)}(m),m.query&&typeof m.query.clientId=="string"&&(m.clientId=m.query.clientId),m.cert&&m.key){if(!m.protocol)throw new Error("Missing secure protocol key");if(["mqtts","wss","wxs","alis"].indexOf(m.protocol)===-1)switch(m.protocol){case"mqtt":m.protocol="mqtts";break;case"ws":m.protocol="wss";break;case"wx":m.protocol="wxs";break;case"ali":m.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+m.protocol+'"!')}}if(!f[m.protocol]){const p=["mqtts","wss"].indexOf(m.protocol)!==-1;m.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(C,x){return(!p||x%2!=0)&&typeof f[C]=="function"})[0]}if(m.clean===!1&&!m.clientId)throw new Error("Missing clientId for unclean clients");m.protocol&&(m.defaultProtocol=m.protocol);const y=new a(function(p){return m.servers&&(p._reconnectCount&&p._reconnectCount!==m.servers.length||(p._reconnectCount=0),m.host=m.servers[p._reconnectCount].host,m.port=m.servers[p._reconnectCount].port,m.protocol=m.servers[p._reconnectCount].protocol?m.servers[p._reconnectCount].protocol:m.defaultProtocol,m.hostname=m.host,p._reconnectCount++),c("calling streambuilder for",m.protocol),f[m.protocol](p,m)},m);return y.on("error",function(){}),y}o!==void 0&&o.title!=="browser"||typeof __webpack_require__!="function"?(f.mqtt=n("./tcp"),f.tcp=n("./tcp"),f.ssl=n("./tls"),f.tls=n("./tls"),f.mqtts=n("./tls")):(f.wx=n("./wx"),f.wxs=n("./wx"),f.ali=n("./ali"),f.alis=n("./ali")),f.ws=n("./ws"),f.wss=n("./ws"),r.exports=v,r.exports.connect=v,r.exports.MqttClient=a,r.exports.Store=l}).call(this)}).call(this,n("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(n,r,i){i.byteLength=function(g){var m=f(g),y=m[0],p=m[1];return 3*(y+p)/4-p},i.toByteArray=function(g){var m,y,p=f(g),C=p[0],x=p[1],S=new l(function($,_,M){return 3*(_+M)/4-M}(0,C,x)),E=0,P=x>0?C-4:C;for(y=0;y<P;y+=4)m=a[g.charCodeAt(y)]<<18|a[g.charCodeAt(y+1)]<<12|a[g.charCodeAt(y+2)]<<6|a[g.charCodeAt(y+3)],S[E++]=m>>16&255,S[E++]=m>>8&255,S[E++]=255&m;return x===2&&(m=a[g.charCodeAt(y)]<<2|a[g.charCodeAt(y+1)]>>4,S[E++]=255&m),x===1&&(m=a[g.charCodeAt(y)]<<10|a[g.charCodeAt(y+1)]<<4|a[g.charCodeAt(y+2)]>>2,S[E++]=m>>8&255,S[E++]=255&m),S},i.fromByteArray=function(g){for(var m,y=g.length,p=y%3,C=[],x=0,S=y-p;x<S;x+=16383)C.push(v(g,x,x+16383>S?S:x+16383));return p===1?(m=g[y-1],C.push(o[m>>2]+o[m<<4&63]+"==")):p===2&&(m=(g[y-2]<<8)+g[y-1],C.push(o[m>>10]+o[m>>4&63]+o[m<<2&63]+"=")),C.join("")};for(var o=[],a=[],l=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=s.length;u<c;++u)o[u]=s[u],a[s.charCodeAt(u)]=u;function f(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=g.indexOf("=");return y===-1&&(y=m),[y,y===m?0:4-y%4]}function v(g,m,y){for(var p,C,x=[],S=m;S<y;S+=3)p=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(255&g[S+2]),x.push(o[(C=p)>>18&63]+o[C>>12&63]+o[C>>6&63]+o[63&C]);return x.join("")}a[45]=62,a[95]=63},{}],14:[function(n,r,i){const{Buffer:o}=n("buffer"),a=Symbol.for("BufferList");function l(s){if(!(this instanceof l))return new l(s);l._init.call(this,s)}l._init=function(s){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},l.prototype._new=function(s){return new l(s)},l.prototype._offset=function(s){if(s===0)return[0,0];let u=0;for(let c=0;c<this._bufs.length;c++){const f=u+this._bufs[c].length;if(s<f||c===this._bufs.length-1)return[c,s-u];u=f}},l.prototype._reverseOffset=function(s){const u=s[0];let c=s[1];for(let f=0;f<u;f++)c+=this._bufs[f].length;return c},l.prototype.get=function(s){if(s>this.length||s<0)return;const u=this._offset(s);return this._bufs[u[0]][u[1]]},l.prototype.slice=function(s,u){return typeof s=="number"&&s<0&&(s+=this.length),typeof u=="number"&&u<0&&(u+=this.length),this.copy(null,0,s,u)},l.prototype.copy=function(s,u,c,f){if((typeof c!="number"||c<0)&&(c=0),(typeof f!="number"||f>this.length)&&(f=this.length),c>=this.length||f<=0)return s||o.alloc(0);const v=!!s,g=this._offset(c),m=f-c;let y=m,p=v&&u||0,C=g[1];if(c===0&&f===this.length){if(!v)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let x=0;x<this._bufs.length;x++)this._bufs[x].copy(s,p),p+=this._bufs[x].length;return s}if(y<=this._bufs[g[0]].length-C)return v?this._bufs[g[0]].copy(s,u,C,C+y):this._bufs[g[0]].slice(C,C+y);v||(s=o.allocUnsafe(m));for(let x=g[0];x<this._bufs.length;x++){const S=this._bufs[x].length-C;if(!(y>S)){this._bufs[x].copy(s,p,C,C+y),p+=S;break}this._bufs[x].copy(s,p,C),p+=S,y-=S,C&&(C=0)}return s.length>p?s.slice(0,p):s},l.prototype.shallowSlice=function(s,u){if(s=s||0,u=typeof u!="number"?this.length:u,s<0&&(s+=this.length),u<0&&(u+=this.length),s===u)return this._new();const c=this._offset(s),f=this._offset(u),v=this._bufs.slice(c[0],f[0]+1);return f[1]===0?v.pop():v[v.length-1]=v[v.length-1].slice(0,f[1]),c[1]!==0&&(v[0]=v[0].slice(c[1])),this._new(v)},l.prototype.toString=function(s,u,c){return this.slice(u,c).toString(s)},l.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;){if(!(s>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},l.prototype.duplicate=function(){const s=this._new();for(let u=0;u<this._bufs.length;u++)s.append(this._bufs[u]);return s},l.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(o.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let u=0;u<s.length;u++)this.append(s[u]);else if(this._isBufferList(s))for(let u=0;u<s._bufs.length;u++)this.append(s._bufs[u]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(o.from(s));return this},l.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},l.prototype.indexOf=function(s,u,c){if(c===void 0&&typeof u=="string"&&(c=u,u=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=o.from([s]):typeof s=="string"?s=o.from(s,c):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=o.from(s.buffer,s.byteOffset,s.byteLength):o.isBuffer(s)||(s=o.from(s)),u=Number(u||0),isNaN(u)&&(u=0),u<0&&(u=this.length+u),u<0&&(u=0),s.length===0)return u>this.length?this.length:u;const f=this._offset(u);let v=f[0],g=f[1];for(;v<this._bufs.length;v++){const m=this._bufs[v];for(;g<m.length;)if(m.length-g>=s.length){const y=m.indexOf(s,g);if(y!==-1)return this._reverseOffset([v,y]);g=m.length-s.length+1}else{const y=this._reverseOffset([v,g]);if(this._match(y,s))return y;g++}g=0}return-1},l.prototype._match=function(s,u){if(this.length-s<u.length)return!1;for(let c=0;c<u.length;c++)if(this.get(s+c)!==u[c])return!1;return!0},function(){const s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const u in s)(function(c){l.prototype[c]=s[c]===null?function(f,v){return this.slice(f,f+v)[c](0,v)}:function(f=0){return this.slice(f,f+s[c])[c](0)}})(u)}(),l.prototype._isBufferList=function(s){return s instanceof l||l.isBufferList(s)},l.isBufferList=function(s){return s!=null&&s[a]},r.exports=l},{buffer:17}],15:[function(n,r,i){const o=n("readable-stream").Duplex,a=n("inherits"),l=n("./BufferList");function s(u){if(!(this instanceof s))return new s(u);if(typeof u=="function"){this._callback=u;const c=(function(f){this._callback&&(this._callback(f),this._callback=null)}).bind(this);this.on("pipe",function(f){f.on("error",c)}),this.on("unpipe",function(f){f.removeListener("error",c)}),u=null}l._init.call(this,u),o.call(this)}a(s,o),Object.assign(s.prototype,l.prototype),s.prototype._new=function(u){return new s(u)},s.prototype._write=function(u,c,f){this._appendBuffer(u),typeof f=="function"&&f()},s.prototype._read=function(u){if(!this.length)return this.push(null);u=Math.min(u,this.length),this.push(this.slice(0,u)),this.consume(u)},s.prototype.end=function(u){o.prototype.end.call(this,u),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(u,c){this._bufs.length=0,this.length=0,c(u)},s.prototype._isBufferList=function(u){return u instanceof s||u instanceof l||s.isBufferList(u)},s.isBufferList=l.isBufferList,r.exports=s,r.exports.BufferListStream=s,r.exports.BufferList=l},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(n,r,i){},{}],17:[function(n,r,i){(function(o){(function(){var a=n("base64-js"),l=n("ieee754");i.Buffer=c,i.SlowBuffer=function(I){return+I!=I&&(I=0),c.alloc(+I)},i.INSPECT_MAX_BYTES=50;var s=2147483647;function u(I){if(I>s)throw new RangeError('The value "'+I+'" is invalid for option "size"');var A=new Uint8Array(I);return A.__proto__=c.prototype,A}function c(I,A,F){if(typeof I=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(I)}return f(I,A,F)}function f(I,A,F){if(typeof I=="string")return function(te,ae){if(typeof ae=="string"&&ae!==""||(ae="utf8"),!c.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);var de=0|p(te,ae),he=u(de),pe=he.write(te,ae);return pe!==de&&(he=he.slice(0,pe)),he}(I,A);if(ArrayBuffer.isView(I))return m(I);if(I==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(ie(I,ArrayBuffer)||I&&ie(I.buffer,ArrayBuffer))return function(te,ae,de){if(ae<0||te.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<ae+(de||0))throw new RangeError('"length" is outside of buffer bounds');var he;return he=ae===void 0&&de===void 0?new Uint8Array(te):de===void 0?new Uint8Array(te,ae):new Uint8Array(te,ae,de),he.__proto__=c.prototype,he}(I,A,F);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var G=I.valueOf&&I.valueOf();if(G!=null&&G!==I)return c.from(G,A,F);var ee=function(te){if(c.isBuffer(te)){var ae=0|y(te.length),de=u(ae);return de.length===0||te.copy(de,0,0,ae),de}if(te.length!==void 0)return typeof te.length!="number"||re(te.length)?u(0):m(te);if(te.type==="Buffer"&&Array.isArray(te.data))return m(te.data)}(I);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return c.from(I[Symbol.toPrimitive]("string"),A,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}function v(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function g(I){return v(I),u(I<0?0:0|y(I))}function m(I){for(var A=I.length<0?0:0|y(I.length),F=u(A),G=0;G<A;G+=1)F[G]=255&I[G];return F}function y(I){if(I>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|I}function p(I,A){if(c.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||ie(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);var F=I.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&F===0)return 0;for(var ee=!1;;)switch(A){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return Y(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*F;case"hex":return F>>>1;case"base64":return Q(I).length;default:if(ee)return G?-1:Y(I).length;A=(""+A).toLowerCase(),ee=!0}}function C(I,A,F){var G=I[A];I[A]=I[F],I[F]=G}function x(I,A,F,G,ee){if(I.length===0)return-1;if(typeof F=="string"?(G=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),re(F=+F)&&(F=ee?0:I.length-1),F<0&&(F=I.length+F),F>=I.length){if(ee)return-1;F=I.length-1}else if(F<0){if(!ee)return-1;F=0}if(typeof A=="string"&&(A=c.from(A,G)),c.isBuffer(A))return A.length===0?-1:S(I,A,F,G,ee);if(typeof A=="number")return A&=255,typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(I,A,F):Uint8Array.prototype.lastIndexOf.call(I,A,F):S(I,[A],F,G,ee);throw new TypeError("val must be string, number or Buffer")}function S(I,A,F,G,ee){var te,ae=1,de=I.length,he=A.length;if(G!==void 0&&((G=String(G).toLowerCase())==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(I.length<2||A.length<2)return-1;ae=2,de/=2,he/=2,F/=2}function pe(Me,Re){return ae===1?Me[Re]:Me.readUInt16BE(Re*ae)}if(ee){var we=-1;for(te=F;te<de;te++)if(pe(I,te)===pe(A,we===-1?0:te-we)){if(we===-1&&(we=te),te-we+1===he)return we*ae}else we!==-1&&(te-=te-we),we=-1}else for(F+he>de&&(F=de-he),te=F;te>=0;te--){for(var _e=!0,$e=0;$e<he;$e++)if(pe(I,te+$e)!==pe(A,$e)){_e=!1;break}if(_e)return te}return-1}function E(I,A,F,G){F=Number(F)||0;var ee=I.length-F;G?(G=Number(G))>ee&&(G=ee):G=ee;var te=A.length;G>te/2&&(G=te/2);for(var ae=0;ae<G;++ae){var de=parseInt(A.substr(2*ae,2),16);if(re(de))return ae;I[F+ae]=de}return ae}function P(I,A,F,G){return ne(Y(A,I.length-F),I,F,G)}function $(I,A,F,G){return ne(function(ee){for(var te=[],ae=0;ae<ee.length;++ae)te.push(255&ee.charCodeAt(ae));return te}(A),I,F,G)}function _(I,A,F,G){return $(I,A,F,G)}function M(I,A,F,G){return ne(Q(A),I,F,G)}function B(I,A,F,G){return ne(function(ee,te){for(var ae,de,he,pe=[],we=0;we<ee.length&&!((te-=2)<0);++we)ae=ee.charCodeAt(we),de=ae>>8,he=ae%256,pe.push(he),pe.push(de);return pe}(A,I.length-F),I,F,G)}function H(I,A,F){return A===0&&F===I.length?a.fromByteArray(I):a.fromByteArray(I.slice(A,F))}function k(I,A,F){F=Math.min(I.length,F);for(var G=[],ee=A;ee<F;){var te,ae,de,he,pe=I[ee],we=null,_e=pe>239?4:pe>223?3:pe>191?2:1;if(ee+_e<=F)switch(_e){case 1:pe<128&&(we=pe);break;case 2:(192&(te=I[ee+1]))==128&&(he=(31&pe)<<6|63&te)>127&&(we=he);break;case 3:te=I[ee+1],ae=I[ee+2],(192&te)==128&&(192&ae)==128&&(he=(15&pe)<<12|(63&te)<<6|63&ae)>2047&&(he<55296||he>57343)&&(we=he);break;case 4:te=I[ee+1],ae=I[ee+2],de=I[ee+3],(192&te)==128&&(192&ae)==128&&(192&de)==128&&(he=(15&pe)<<18|(63&te)<<12|(63&ae)<<6|63&de)>65535&&he<1114112&&(we=he)}we===null?(we=65533,_e=1):we>65535&&(we-=65536,G.push(we>>>10&1023|55296),we=56320|1023&we),G.push(we),ee+=_e}return function($e){var Me=$e.length;if(Me<=T)return String.fromCharCode.apply(String,$e);for(var Re="",be=0;be<Me;)Re+=String.fromCharCode.apply(String,$e.slice(be,be+=T));return Re}(G)}i.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{var I=new Uint8Array(1);return I.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},I.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(I,A,F){return f(I,A,F)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(I,A,F){return function(G,ee,te){return v(G),G<=0?u(G):ee!==void 0?typeof te=="string"?u(G).fill(ee,te):u(G).fill(ee):u(G)}(I,A,F)},c.allocUnsafe=function(I){return g(I)},c.allocUnsafeSlow=function(I){return g(I)},c.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==c.prototype},c.compare=function(I,A){if(ie(I,Uint8Array)&&(I=c.from(I,I.offset,I.byteLength)),ie(A,Uint8Array)&&(A=c.from(A,A.offset,A.byteLength)),!c.isBuffer(I)||!c.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===A)return 0;for(var F=I.length,G=A.length,ee=0,te=Math.min(F,G);ee<te;++ee)if(I[ee]!==A[ee]){F=I[ee],G=A[ee];break}return F<G?-1:G<F?1:0},c.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(I,A){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return c.alloc(0);var F;if(A===void 0)for(A=0,F=0;F<I.length;++F)A+=I[F].length;var G=c.allocUnsafe(A),ee=0;for(F=0;F<I.length;++F){var te=I[F];if(ie(te,Uint8Array)&&(te=c.from(te)),!c.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(G,ee),ee+=te.length}return G},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var I=this.length;if(I%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<I;A+=2)C(this,A,A+1);return this},c.prototype.swap32=function(){var I=this.length;if(I%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<I;A+=4)C(this,A,A+3),C(this,A+1,A+2);return this},c.prototype.swap64=function(){var I=this.length;if(I%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<I;A+=8)C(this,A,A+7),C(this,A+1,A+6),C(this,A+2,A+5),C(this,A+3,A+4);return this},c.prototype.toString=function(){var I=this.length;return I===0?"":arguments.length===0?k(this,0,I):(function(A,F,G){var ee=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(F>>>=0))return"";for(A||(A="utf8");;)switch(A){case"hex":return K(this,F,G);case"utf8":case"utf-8":return k(this,F,G);case"ascii":return O(this,F,G);case"latin1":case"binary":return L(this,F,G);case"base64":return H(this,F,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,F,G);default:if(ee)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),ee=!0}}).apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(I){if(!c.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I||c.compare(this,I)===0},c.prototype.inspect=function(){var I="",A=i.INSPECT_MAX_BYTES;return I=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(I+=" ... "),"<Buffer "+I+">"},c.prototype.compare=function(I,A,F,G,ee){if(ie(I,Uint8Array)&&(I=c.from(I,I.offset,I.byteLength)),!c.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(A===void 0&&(A=0),F===void 0&&(F=I?I.length:0),G===void 0&&(G=0),ee===void 0&&(ee=this.length),A<0||F>I.length||G<0||ee>this.length)throw new RangeError("out of range index");if(G>=ee&&A>=F)return 0;if(G>=ee)return-1;if(A>=F)return 1;if(A>>>=0,F>>>=0,G>>>=0,ee>>>=0,this===I)return 0;for(var te=ee-G,ae=F-A,de=Math.min(te,ae),he=this.slice(G,ee),pe=I.slice(A,F),we=0;we<de;++we)if(he[we]!==pe[we]){te=he[we],ae=pe[we];break}return te<ae?-1:ae<te?1:0},c.prototype.includes=function(I,A,F){return this.indexOf(I,A,F)!==-1},c.prototype.indexOf=function(I,A,F){return x(this,I,A,F,!0)},c.prototype.lastIndexOf=function(I,A,F){return x(this,I,A,F,!1)},c.prototype.write=function(I,A,F,G){if(A===void 0)G="utf8",F=this.length,A=0;else if(F===void 0&&typeof A=="string")G=A,F=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A>>>=0,isFinite(F)?(F>>>=0,G===void 0&&(G="utf8")):(G=F,F=void 0)}var ee=this.length-A;if((F===void 0||F>ee)&&(F=ee),I.length>0&&(F<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var te=!1;;)switch(G){case"hex":return E(this,I,A,F);case"utf8":case"utf-8":return P(this,I,A,F);case"ascii":return $(this,I,A,F);case"latin1":case"binary":return _(this,I,A,F);case"base64":return M(this,I,A,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,I,A,F);default:if(te)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),te=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(I,A,F){var G="";F=Math.min(I.length,F);for(var ee=A;ee<F;++ee)G+=String.fromCharCode(127&I[ee]);return G}function L(I,A,F){var G="";F=Math.min(I.length,F);for(var ee=A;ee<F;++ee)G+=String.fromCharCode(I[ee]);return G}function K(I,A,F){var G=I.length;(!A||A<0)&&(A=0),(!F||F<0||F>G)&&(F=G);for(var ee="",te=A;te<F;++te)ee+=X(I[te]);return ee}function q(I,A,F){for(var G=I.slice(A,F),ee="",te=0;te<G.length;te+=2)ee+=String.fromCharCode(G[te]+256*G[te+1]);return ee}function J(I,A,F){if(I%1!=0||I<0)throw new RangeError("offset is not uint");if(I+A>F)throw new RangeError("Trying to access beyond buffer length")}function V(I,A,F,G,ee,te){if(!c.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>ee||A<te)throw new RangeError('"value" argument is out of bounds');if(F+G>I.length)throw new RangeError("Index out of range")}function z(I,A,F,G,ee,te){if(F+G>I.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function D(I,A,F,G,ee){return A=+A,F>>>=0,ee||z(I,0,F,4),l.write(I,A,F,G,23,4),F+4}function U(I,A,F,G,ee){return A=+A,F>>>=0,ee||z(I,0,F,8),l.write(I,A,F,G,52,8),F+8}c.prototype.slice=function(I,A){var F=this.length;I=~~I,A=A===void 0?F:~~A,I<0?(I+=F)<0&&(I=0):I>F&&(I=F),A<0?(A+=F)<0&&(A=0):A>F&&(A=F),A<I&&(A=I);var G=this.subarray(I,A);return G.__proto__=c.prototype,G},c.prototype.readUIntLE=function(I,A,F){I>>>=0,A>>>=0,F||J(I,A,this.length);for(var G=this[I],ee=1,te=0;++te<A&&(ee*=256);)G+=this[I+te]*ee;return G},c.prototype.readUIntBE=function(I,A,F){I>>>=0,A>>>=0,F||J(I,A,this.length);for(var G=this[I+--A],ee=1;A>0&&(ee*=256);)G+=this[I+--A]*ee;return G},c.prototype.readUInt8=function(I,A){return I>>>=0,A||J(I,1,this.length),this[I]},c.prototype.readUInt16LE=function(I,A){return I>>>=0,A||J(I,2,this.length),this[I]|this[I+1]<<8},c.prototype.readUInt16BE=function(I,A){return I>>>=0,A||J(I,2,this.length),this[I]<<8|this[I+1]},c.prototype.readUInt32LE=function(I,A){return I>>>=0,A||J(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]},c.prototype.readUInt32BE=function(I,A){return I>>>=0,A||J(I,4,this.length),16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])},c.prototype.readIntLE=function(I,A,F){I>>>=0,A>>>=0,F||J(I,A,this.length);for(var G=this[I],ee=1,te=0;++te<A&&(ee*=256);)G+=this[I+te]*ee;return G>=(ee*=128)&&(G-=Math.pow(2,8*A)),G},c.prototype.readIntBE=function(I,A,F){I>>>=0,A>>>=0,F||J(I,A,this.length);for(var G=A,ee=1,te=this[I+--G];G>0&&(ee*=256);)te+=this[I+--G]*ee;return te>=(ee*=128)&&(te-=Math.pow(2,8*A)),te},c.prototype.readInt8=function(I,A){return I>>>=0,A||J(I,1,this.length),128&this[I]?-1*(255-this[I]+1):this[I]},c.prototype.readInt16LE=function(I,A){I>>>=0,A||J(I,2,this.length);var F=this[I]|this[I+1]<<8;return 32768&F?4294901760|F:F},c.prototype.readInt16BE=function(I,A){I>>>=0,A||J(I,2,this.length);var F=this[I+1]|this[I]<<8;return 32768&F?4294901760|F:F},c.prototype.readInt32LE=function(I,A){return I>>>=0,A||J(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},c.prototype.readInt32BE=function(I,A){return I>>>=0,A||J(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},c.prototype.readFloatLE=function(I,A){return I>>>=0,A||J(I,4,this.length),l.read(this,I,!0,23,4)},c.prototype.readFloatBE=function(I,A){return I>>>=0,A||J(I,4,this.length),l.read(this,I,!1,23,4)},c.prototype.readDoubleLE=function(I,A){return I>>>=0,A||J(I,8,this.length),l.read(this,I,!0,52,8)},c.prototype.readDoubleBE=function(I,A){return I>>>=0,A||J(I,8,this.length),l.read(this,I,!1,52,8)},c.prototype.writeUIntLE=function(I,A,F,G){I=+I,A>>>=0,F>>>=0,G||V(this,I,A,F,Math.pow(2,8*F)-1,0);var ee=1,te=0;for(this[A]=255&I;++te<F&&(ee*=256);)this[A+te]=I/ee&255;return A+F},c.prototype.writeUIntBE=function(I,A,F,G){I=+I,A>>>=0,F>>>=0,G||V(this,I,A,F,Math.pow(2,8*F)-1,0);var ee=F-1,te=1;for(this[A+ee]=255&I;--ee>=0&&(te*=256);)this[A+ee]=I/te&255;return A+F},c.prototype.writeUInt8=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,1,255,0),this[A]=255&I,A+1},c.prototype.writeUInt16LE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,2,65535,0),this[A]=255&I,this[A+1]=I>>>8,A+2},c.prototype.writeUInt16BE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,2,65535,0),this[A]=I>>>8,this[A+1]=255&I,A+2},c.prototype.writeUInt32LE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,4,4294967295,0),this[A+3]=I>>>24,this[A+2]=I>>>16,this[A+1]=I>>>8,this[A]=255&I,A+4},c.prototype.writeUInt32BE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,4,4294967295,0),this[A]=I>>>24,this[A+1]=I>>>16,this[A+2]=I>>>8,this[A+3]=255&I,A+4},c.prototype.writeIntLE=function(I,A,F,G){if(I=+I,A>>>=0,!G){var ee=Math.pow(2,8*F-1);V(this,I,A,F,ee-1,-ee)}var te=0,ae=1,de=0;for(this[A]=255&I;++te<F&&(ae*=256);)I<0&&de===0&&this[A+te-1]!==0&&(de=1),this[A+te]=(I/ae>>0)-de&255;return A+F},c.prototype.writeIntBE=function(I,A,F,G){if(I=+I,A>>>=0,!G){var ee=Math.pow(2,8*F-1);V(this,I,A,F,ee-1,-ee)}var te=F-1,ae=1,de=0;for(this[A+te]=255&I;--te>=0&&(ae*=256);)I<0&&de===0&&this[A+te+1]!==0&&(de=1),this[A+te]=(I/ae>>0)-de&255;return A+F},c.prototype.writeInt8=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,1,127,-128),I<0&&(I=255+I+1),this[A]=255&I,A+1},c.prototype.writeInt16LE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,2,32767,-32768),this[A]=255&I,this[A+1]=I>>>8,A+2},c.prototype.writeInt16BE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,2,32767,-32768),this[A]=I>>>8,this[A+1]=255&I,A+2},c.prototype.writeInt32LE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,4,2147483647,-2147483648),this[A]=255&I,this[A+1]=I>>>8,this[A+2]=I>>>16,this[A+3]=I>>>24,A+4},c.prototype.writeInt32BE=function(I,A,F){return I=+I,A>>>=0,F||V(this,I,A,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[A]=I>>>24,this[A+1]=I>>>16,this[A+2]=I>>>8,this[A+3]=255&I,A+4},c.prototype.writeFloatLE=function(I,A,F){return D(this,I,A,!0,F)},c.prototype.writeFloatBE=function(I,A,F){return D(this,I,A,!1,F)},c.prototype.writeDoubleLE=function(I,A,F){return U(this,I,A,!0,F)},c.prototype.writeDoubleBE=function(I,A,F){return U(this,I,A,!1,F)},c.prototype.copy=function(I,A,F,G){if(!c.isBuffer(I))throw new TypeError("argument should be a Buffer");if(F||(F=0),G||G===0||(G=this.length),A>=I.length&&(A=I.length),A||(A=0),G>0&&G<F&&(G=F),G===F||I.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),I.length-A<G-F&&(G=I.length-A+F);var ee=G-F;if(this===I&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(A,F,G);else if(this===I&&F<A&&A<G)for(var te=ee-1;te>=0;--te)I[te+A]=this[te+F];else Uint8Array.prototype.set.call(I,this.subarray(F,G),A);return ee},c.prototype.fill=function(I,A,F,G){if(typeof I=="string"){if(typeof A=="string"?(G=A,A=0,F=this.length):typeof F=="string"&&(G=F,F=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!c.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(I.length===1){var ee=I.charCodeAt(0);(G==="utf8"&&ee<128||G==="latin1")&&(I=ee)}}else typeof I=="number"&&(I&=255);if(A<0||this.length<A||this.length<F)throw new RangeError("Out of range index");if(F<=A)return this;var te;if(A>>>=0,F=F===void 0?this.length:F>>>0,I||(I=0),typeof I=="number")for(te=A;te<F;++te)this[te]=I;else{var ae=c.isBuffer(I)?I:c.from(I,G),de=ae.length;if(de===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(te=0;te<F-A;++te)this[te+A]=ae[te%de]}return this};var W=/[^+/0-9A-Za-z-_]/g;function X(I){return I<16?"0"+I.toString(16):I.toString(16)}function Y(I,A){var F;A=A||1/0;for(var G=I.length,ee=null,te=[],ae=0;ae<G;++ae){if((F=I.charCodeAt(ae))>55295&&F<57344){if(!ee){if(F>56319){(A-=3)>-1&&te.push(239,191,189);continue}if(ae+1===G){(A-=3)>-1&&te.push(239,191,189);continue}ee=F;continue}if(F<56320){(A-=3)>-1&&te.push(239,191,189),ee=F;continue}F=65536+(ee-55296<<10|F-56320)}else ee&&(A-=3)>-1&&te.push(239,191,189);if(ee=null,F<128){if((A-=1)<0)break;te.push(F)}else if(F<2048){if((A-=2)<0)break;te.push(F>>6|192,63&F|128)}else if(F<65536){if((A-=3)<0)break;te.push(F>>12|224,F>>6&63|128,63&F|128)}else{if(!(F<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;te.push(F>>18|240,F>>12&63|128,F>>6&63|128,63&F|128)}}return te}function Q(I){return a.toByteArray(function(A){if((A=(A=A.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;A.length%4!=0;)A+="=";return A}(I))}function ne(I,A,F,G){for(var ee=0;ee<G&&!(ee+F>=A.length||ee>=I.length);++ee)A[ee+F]=I[ee];return ee}function ie(I,A){return I instanceof A||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===A.name}function re(I){return I!=I}}).call(this)}).call(this,n("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(n,r,i){(function(o){(function(){i.formatArgs=function(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;l.splice(1,0,s,"color: inherit");let u=0,c=0;l[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&f==="%c"&&(c=++u)}),l.splice(c,0,s)},i.save=function(l){try{l?i.storage.setItem("debug",l):i.storage.removeItem("debug")}catch{}},i.load=function(){let l;try{l=i.storage.getItem("debug")}catch{}return!l&&o!==void 0&&"env"in o&&(l=o.env.DEBUG),l},i.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage=function(){try{return localStorage}catch{}}(),i.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.log=console.debug||console.log||(()=>{}),r.exports=n("./common")(i);const{formatters:a}=r.exports;a.j=function(l){try{return JSON.stringify(l)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}).call(this)}).call(this,n("_process"))},{"./common":19,_process:50}],19:[function(n,r,i){r.exports=function(o){function a(u){let c,f,v,g=null;function m(...y){if(!m.enabled)return;const p=m,C=Number(new Date),x=C-(c||C);p.diff=x,p.prev=c,p.curr=C,c=C,y[0]=a.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let S=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(E,P)=>{if(E==="%%")return"%";S++;const $=a.formatters[P];if(typeof $=="function"){const _=y[S];E=$.call(p,_),y.splice(S,1),S--}return E}),a.formatArgs.call(p,y),(p.log||a.log).apply(p,y)}return m.namespace=u,m.useColors=a.useColors(),m.color=a.selectColor(u),m.extend=l,m.destroy=a.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(f!==a.namespaces&&(f=a.namespaces,v=a.enabled(u)),v),set:y=>{g=y}}),typeof a.init=="function"&&a.init(m),m}function l(u,c){const f=a(this.namespace+(c===void 0?":":c)+u);return f.log=this.log,f}function s(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}return a.debug=a,a.default=a,a.coerce=function(u){return u instanceof Error?u.stack||u.message:u},a.disable=function(){const u=[...a.names.map(s),...a.skips.map(s).map(c=>"-"+c)].join(",");return a.enable(""),u},a.enable=function(u){let c;a.save(u),a.namespaces=u,a.names=[],a.skips=[];const f=(typeof u=="string"?u:"").split(/[\s,]+/),v=f.length;for(c=0;c<v;c++)f[c]&&((u=f[c].replace(/\*/g,".*?"))[0]==="-"?a.skips.push(new RegExp("^"+u.substr(1)+"$")):a.names.push(new RegExp("^"+u+"$")))},a.enabled=function(u){if(u[u.length-1]==="*")return!0;let c,f;for(c=0,f=a.skips.length;c<f;c++)if(a.skips[c].test(u))return!1;for(c=0,f=a.names.length;c<f;c++)if(a.names[c].test(u))return!0;return!1},a.humanize=n("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(o).forEach(u=>{a[u]=o[u]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(u){let c=0;for(let f=0;f<u.length;f++)c=(c<<5)-c+u.charCodeAt(f),c|=0;return a.colors[Math.abs(c)%a.colors.length]},a.enable(a.load()),a}},{ms:45}],20:[function(n,r,i){(function(o,a){(function(){var l=n("readable-stream"),s=n("end-of-stream"),u=n("inherits"),c=n("stream-shift"),f=a.from&&a.from!==Uint8Array.from?a.from([0]):new a([0]),v=function(p,C){p._corked?p.once("uncork",C):C()},g=function(p,C){return function(x){x?function(S,E){S._autoDestroy&&S.destroy(E)}(p,x.message==="premature close"?null:x):C&&!p._ended&&p.end()}},m=function(){},y=function(p,C,x){if(!(this instanceof y))return new y(p,C,x);l.Duplex.call(this,x),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!x||x.autoDestroy!==!1,this._forwardDestroy=!x||x.destroy!==!1,this._forwardEnd=!x||x.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,p&&this.setWritable(p),C&&this.setReadable(C)};u(y,l.Duplex),y.obj=function(p,C,x){return x||(x={}),x.objectMode=!0,x.highWaterMark=16,new y(p,C,x)},y.prototype.cork=function(){++this._corked==1&&this.emit("cork")},y.prototype.uncork=function(){this._corked&&--this._corked==0&&this.emit("uncork")},y.prototype.setWritable=function(p){if(this._unwrite&&this._unwrite(),this.destroyed)p&&p.destroy&&p.destroy();else if(p!==null&&p!==!1){var C=this,x=s(p,{writable:!0,readable:!1},g(this,this._forwardEnd)),S=function(){var E=C._ondrain;C._ondrain=null,E&&E()};this._unwrite&&o.nextTick(S),this._writable=p,this._writable.on("drain",S),this._unwrite=function(){C._writable.removeListener("drain",S),x()},this.uncork()}else this.end()},y.prototype.setReadable=function(p){if(this._unread&&this._unread(),this.destroyed)p&&p.destroy&&p.destroy();else{if(p===null||p===!1)return this.push(null),void this.resume();var C,x=this,S=s(p,{writable:!1,readable:!0},g(this)),E=function(){x._forward()},P=function(){x.push(null)};this._drained=!0,this._readable=p,this._readable2=p._readableState?p:(C=p,new l.Readable({objectMode:!0,highWaterMark:16}).wrap(C)),this._readable2.on("readable",E),this._readable2.on("end",P),this._unread=function(){x._readable2.removeListener("readable",E),x._readable2.removeListener("end",P),S()},this._forward()}},y.prototype._read=function(){this._drained=!0,this._forward()},y.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var p;for(this._forwarding=!0;this._drained&&(p=c(this._readable2))!==null;)this.destroyed||(this._drained=this.push(p));this._forwarding=!1}},y.prototype.destroy=function(p,C){if(C||(C=m),this.destroyed)return C(null);this.destroyed=!0;var x=this;o.nextTick(function(){x._destroy(p),C(null)})},y.prototype._destroy=function(p){if(p){var C=this._ondrain;this._ondrain=null,C?C(p):this.emit("error",p)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},y.prototype._write=function(p,C,x){if(!this.destroyed)return this._corked?v(this,this._write.bind(this,p,C,x)):p===f?this._finish(x):this._writable?void(this._writable.write(p)===!1?this._ondrain=x:this.destroyed||x()):x()},y.prototype._finish=function(p){var C=this;this.emit("preend"),v(this,function(){var x,S;x=C._forwardEnd&&C._writable,S=function(){C._writableState.prefinished===!1&&(C._writableState.prefinished=!0),C.emit("prefinish"),v(C,p)},x?x._writableState&&x._writableState.finished?S():x._writableState?x.end(S):(x.end(),S()):S()})},y.prototype.end=function(p,C,x){return typeof p=="function"?this.end(null,null,p):typeof C=="function"?this.end(p,null,C):(this._ended=!0,p&&this.write(p),this._writableState.ending||this._writableState.destroyed||this.write(f),l.Writable.prototype.end.call(this,x))},r.exports=y}).call(this)}).call(this,n("_process"),n("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(n,r,i){(function(o){(function(){var a=n("once"),l=function(){},s=function(u,c,f){if(typeof c=="function")return s(u,null,c);c||(c={}),f=a(f||l);var v=u._writableState,g=u._readableState,m=c.readable||c.readable!==!1&&u.readable,y=c.writable||c.writable!==!1&&u.writable,p=!1,C=function(){u.writable||x()},x=function(){y=!1,m||f.call(u)},S=function(){m=!1,y||f.call(u)},E=function(B){f.call(u,B?new Error("exited with error code: "+B):null)},P=function(B){f.call(u,B)},$=function(){o.nextTick(_)},_=function(){if(!p)return(!m||g&&g.ended&&!g.destroyed)&&(!y||v&&v.ended&&!v.destroyed)?void 0:f.call(u,new Error("premature close"))},M=function(){u.req.on("finish",x)};return function(B){return B.setHeader&&typeof B.abort=="function"}(u)?(u.on("complete",x),u.on("abort",$),u.req?M():u.on("request",M)):y&&!v&&(u.on("end",C),u.on("close",C)),function(B){return B.stdio&&Array.isArray(B.stdio)&&B.stdio.length===3}(u)&&u.on("exit",E),u.on("end",S),u.on("finish",x),c.error!==!1&&u.on("error",P),u.on("close",$),function(){p=!0,u.removeListener("complete",x),u.removeListener("abort",$),u.removeListener("request",M),u.req&&u.req.removeListener("finish",x),u.removeListener("end",C),u.removeListener("close",C),u.removeListener("finish",x),u.removeListener("exit",E),u.removeListener("end",S),u.removeListener("error",P),u.removeListener("close",$)}};r.exports=s}).call(this)}).call(this,n("_process"))},{_process:50,once:48}],22:[function(n,r,i){var o=Object.create||function(S){var E=function(){};return E.prototype=S,new E},a=Object.keys||function(S){var E=[];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&E.push(P);return P},l=Function.prototype.bind||function(S){var E=this;return function(){return E.apply(S,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=o(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}r.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var u,c=10;try{var f={};Object.defineProperty&&Object.defineProperty(f,"x",{value:0}),u=f.x===0}catch{u=!1}function v(S){return S._maxListeners===void 0?s.defaultMaxListeners:S._maxListeners}function g(S,E,P,$){var _,M,B;if(typeof P!="function")throw new TypeError('"listener" argument must be a function');if((M=S._events)?(M.newListener&&(S.emit("newListener",E,P.listener?P.listener:P),M=S._events),B=M[E]):(M=S._events=o(null),S._eventsCount=0),B){if(typeof B=="function"?B=M[E]=$?[P,B]:[B,P]:$?B.unshift(P):B.push(P),!B.warned&&(_=v(S))&&_>0&&B.length>_){B.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+B.length+' "'+String(E)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');H.name="MaxListenersExceededWarning",H.emitter=S,H.type=E,H.count=B.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",H.name,H.message)}}else B=M[E]=P,++S._eventsCount;return S}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var S=new Array(arguments.length),E=0;E<S.length;++E)S[E]=arguments[E];this.listener.apply(this.target,S)}}function y(S,E,P){var $={fired:!1,wrapFn:void 0,target:S,type:E,listener:P},_=l.call(m,$);return _.listener=P,$.wrapFn=_,_}function p(S,E,P){var $=S._events;if(!$)return[];var _=$[E];return _?typeof _=="function"?P?[_.listener||_]:[_]:P?function(M){for(var B=new Array(M.length),H=0;H<B.length;++H)B[H]=M[H].listener||M[H];return B}(_):x(_,_.length):[]}function C(S){var E=this._events;if(E){var P=E[S];if(typeof P=="function")return 1;if(P)return P.length}return 0}function x(S,E){for(var P=new Array(E),$=0;$<E;++$)P[$]=S[$];return P}u?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(S){if(typeof S!="number"||S<0||S!=S)throw new TypeError('"defaultMaxListeners" must be a positive number');c=S}}):s.defaultMaxListeners=c,s.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||isNaN(S))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=S,this},s.prototype.getMaxListeners=function(){return v(this)},s.prototype.emit=function(S){var E,P,$,_,M,B,H=S==="error";if(B=this._events)H=H&&B.error==null;else if(!H)return!1;if(H){if(arguments.length>1&&(E=arguments[1]),E instanceof Error)throw E;var k=new Error('Unhandled "error" event. ('+E+")");throw k.context=E,k}if(!(P=B[S]))return!1;var T=typeof P=="function";switch($=arguments.length){case 1:(function(O,L,K){if(L)O.call(K);else for(var q=O.length,J=x(O,q),V=0;V<q;++V)J[V].call(K)})(P,T,this);break;case 2:(function(O,L,K,q){if(L)O.call(K,q);else for(var J=O.length,V=x(O,J),z=0;z<J;++z)V[z].call(K,q)})(P,T,this,arguments[1]);break;case 3:(function(O,L,K,q,J){if(L)O.call(K,q,J);else for(var V=O.length,z=x(O,V),D=0;D<V;++D)z[D].call(K,q,J)})(P,T,this,arguments[1],arguments[2]);break;case 4:(function(O,L,K,q,J,V){if(L)O.call(K,q,J,V);else for(var z=O.length,D=x(O,z),U=0;U<z;++U)D[U].call(K,q,J,V)})(P,T,this,arguments[1],arguments[2],arguments[3]);break;default:for(_=new Array($-1),M=1;M<$;M++)_[M-1]=arguments[M];(function(O,L,K,q){if(L)O.apply(K,q);else for(var J=O.length,V=x(O,J),z=0;z<J;++z)V[z].apply(K,q)})(P,T,this,_)}return!0},s.prototype.addListener=function(S,E){return g(this,S,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(S,E){return g(this,S,E,!0)},s.prototype.once=function(S,E){if(typeof E!="function")throw new TypeError('"listener" argument must be a function');return this.on(S,y(this,S,E)),this},s.prototype.prependOnceListener=function(S,E){if(typeof E!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(S,y(this,S,E)),this},s.prototype.removeListener=function(S,E){var P,$,_,M,B;if(typeof E!="function")throw new TypeError('"listener" argument must be a function');if(!($=this._events))return this;if(!(P=$[S]))return this;if(P===E||P.listener===E)--this._eventsCount==0?this._events=o(null):(delete $[S],$.removeListener&&this.emit("removeListener",S,P.listener||E));else if(typeof P!="function"){for(_=-1,M=P.length-1;M>=0;M--)if(P[M]===E||P[M].listener===E){B=P[M].listener,_=M;break}if(_<0)return this;_===0?P.shift():function(H,k){for(var T=k,O=T+1,L=H.length;O<L;T+=1,O+=1)H[T]=H[O];H.pop()}(P,_),P.length===1&&($[S]=P[0]),$.removeListener&&this.emit("removeListener",S,B||E)}return this},s.prototype.removeAllListeners=function(S){var E,P,$;if(!(P=this._events))return this;if(!P.removeListener)return arguments.length===0?(this._events=o(null),this._eventsCount=0):P[S]&&(--this._eventsCount==0?this._events=o(null):delete P[S]),this;if(arguments.length===0){var _,M=a(P);for($=0;$<M.length;++$)(_=M[$])!=="removeListener"&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=o(null),this._eventsCount=0,this}if(typeof(E=P[S])=="function")this.removeListener(S,E);else if(E)for($=E.length-1;$>=0;$--)this.removeListener(S,E[$]);return this},s.prototype.listeners=function(S){return p(this,S,!0)},s.prototype.rawListeners=function(S){return p(this,S,!1)},s.listenerCount=function(S,E){return typeof S.listenerCount=="function"?S.listenerCount(E):C.call(S,E)},s.prototype.listenerCount=C,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(n,r,i){i.read=function(o,a,l,s,u){var c,f,v=8*u-s-1,g=(1<<v)-1,m=g>>1,y=-7,p=l?u-1:0,C=l?-1:1,x=o[a+p];for(p+=C,c=x&(1<<-y)-1,x>>=-y,y+=v;y>0;c=256*c+o[a+p],p+=C,y-=8);for(f=c&(1<<-y)-1,c>>=-y,y+=s;y>0;f=256*f+o[a+p],p+=C,y-=8);if(c===0)c=1-m;else{if(c===g)return f?NaN:1/0*(x?-1:1);f+=Math.pow(2,s),c-=m}return(x?-1:1)*f*Math.pow(2,c-s)},i.write=function(o,a,l,s,u,c){var f,v,g,m=8*c-u-1,y=(1<<m)-1,p=y>>1,C=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=s?0:c-1,S=s?1:-1,E=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(v=isNaN(a)?1:0,f=y):(f=Math.floor(Math.log(a)/Math.LN2),a*(g=Math.pow(2,-f))<1&&(f--,g*=2),(a+=f+p>=1?C/g:C*Math.pow(2,1-p))*g>=2&&(f++,g/=2),f+p>=y?(v=0,f=y):f+p>=1?(v=(a*g-1)*Math.pow(2,u),f+=p):(v=a*Math.pow(2,p-1)*Math.pow(2,u),f=0));u>=8;o[l+x]=255&v,x+=S,v/=256,u-=8);for(f=f<<u|v,m+=u;m>0;o[l+x]=255&f,x+=S,f/=256,m-=8);o[l+x-S]|=128*E}},{}],24:[function(n,r,i){typeof Object.create=="function"?r.exports=function(o,a){a&&(o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(o,a){if(a){o.super_=a;var l=function(){};l.prototype=a.prototype,o.prototype=new l,o.prototype.constructor=o}}},{}],25:[function(n,r,i){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function a(l,s){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=l,this.value=s}return a.prototype.rotateLeft=function(){var l=this.parent,s=this.brother,u=this.leftChild,c=this.rightChild;if(!c)throw new Error("unknown error");var f=c.leftChild,v=c.rightChild;return l&&(l.leftChild===this?l.leftChild=c:l.rightChild===this&&(l.rightChild=c)),c.parent=l,c.brother=s,c.leftChild=this,c.rightChild=v,s&&(s.brother=c),this.parent=c,this.brother=v,this.leftChild=u,this.rightChild=f,v&&(v.parent=c,v.brother=this),u&&(u.parent=this,u.brother=f),f&&(f.parent=this,f.brother=u),c},a.prototype.rotateRight=function(){var l=this.parent,s=this.brother,u=this.leftChild;if(!u)throw new Error("unknown error");var c=this.rightChild,f=u.leftChild,v=u.rightChild;return l&&(l.leftChild===this?l.leftChild=u:l.rightChild===this&&(l.rightChild=u)),u.parent=l,u.brother=s,u.leftChild=f,u.rightChild=this,s&&(s.brother=u),f&&(f.parent=u,f.brother=this),this.parent=u,this.brother=f,this.leftChild=v,this.rightChild=c,v&&(v.parent=this,v.brother=c),c&&(c.parent=this,c.brother=v),u},a.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},a.TreeNodeColorType={red:!0,black:!1},a}();Object.freeze(o),i.default=o},{}],26:[function(n,r,i){var o=this&&this.__generator||function(l,s){var u,c,f,v,g={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return v={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function m(y){return function(p){return function(C){if(u)throw new TypeError("Generator is already executing.");for(;g;)try{if(u=1,c&&(f=2&C[0]?c.return:C[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,C[1])).done)return f;switch(c=0,f&&(C=[2&C[0],f.value]),C[0]){case 0:case 1:f=C;break;case 4:return g.label++,{value:C[1],done:!1};case 5:g.label++,c=C[1],C=[0];continue;case 7:C=g.ops.pop(),g.trys.pop();continue;default:if(!(f=(f=g.trys).length>0&&f[f.length-1])&&(C[0]===6||C[0]===2)){g=0;continue}if(C[0]===3&&(!f||C[1]>f[0]&&C[1]<f[3])){g.label=C[1];break}if(C[0]===6&&g.label<f[1]){g.label=f[1],f=C;break}if(f&&g.label<f[2]){g.label=f[2],g.ops.push(C);break}f[2]&&g.ops.pop(),g.trys.pop();continue}C=s.call(l,g)}catch(x){C=[6,x],c=0}finally{u=f=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([y,p])}}};function a(l){var s=this;l===void 0&&(l=[]);var u=[],c=0,f=0,v=0,g=0,m=0,y=0;this.size=function(){return y},this.empty=function(){return y===0},this.clear=function(){c=v=f=g=m=y=0,C.call(this,a.bucketSize),y=0},this.front=function(){return u[c][f]},this.back=function(){return u[v][g]},this.forEach=function(x){if(!this.empty()){var S=0;if(c!==v){for(P=f;P<a.bucketSize;++P)x(u[c][P],S++);for(P=c+1;P<v;++P)for(var E=0;E<a.bucketSize;++E)x(u[P][E],S++);for(P=0;P<=g;++P)x(u[v][P],S++)}else for(var P=f;P<=g;++P)x(u[c][P],S++)}};var p=function(x){var S=c*a.bucketSize+f,E=S+x,P=v*a.bucketSize+g;if(E<S||E>P)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(E/a.bucketSize),curNodePointerIndex:E%a.bucketSize}};this.getElementByPos=function(x){var S=p(x),E=S.curNodeBucketIndex,P=S.curNodePointerIndex;return u[E][P]},this.eraseElementByPos=function(x){var S=this;if(x<0||x>y)throw new Error("pos should more than 0 and less than queue's size");if(x===0)this.popFront();else if(x===this.size())this.popBack();else{for(var E=[],P=x+1;P<y;++P)E.push(this.getElementByPos(P));this.cut(x),this.popBack(),E.forEach(function($){return S.pushBack($)})}},this.eraseElementByValue=function(x){if(!this.empty()){var S=[];this.forEach(function($){$!==x&&S.push($)});for(var E=S.length,P=0;P<E;++P)this.setElementByPos(P,S[P]);this.cut(E-1)}};var C=function(x){for(var S=[],E=x*a.sigma,P=Math.max(Math.ceil(E/a.bucketSize),2),$=0;$<P;++$)S.push(new Array(a.bucketSize));var _=Math.ceil(x/a.bucketSize),M=Math.floor(P/2)-Math.floor(_/2),B=M,H=0;if(this.size())for($=0;$<_;++$){for(var k=0;k<a.bucketSize;++k)if(S[M+$][k]=this.front(),this.popFront(),this.empty()){B=M+$,H=k;break}if(this.empty())break}u=S,c=M,f=0,v=B,g=H,m=P,y=x};this.pushBack=function(x){this.empty()||(v===m-1&&g===a.bucketSize-1&&C.call(this,this.size()),g<a.bucketSize-1?++g:v<m-1&&(++v,g=0)),++y,u[v][g]=x},this.popBack=function(){this.empty()||(this.size()!==1&&(g>0?--g:c<v&&(--v,g=a.bucketSize-1)),y>0&&--y)},this.setElementByPos=function(x,S){var E=p(x),P=E.curNodeBucketIndex,$=E.curNodePointerIndex;u[P][$]=S},this.insert=function(x,S,E){var P=this;if(E===void 0&&(E=1),x===0)for(;E--;)this.pushFront(S);else if(x===this.size())for(;E--;)this.pushBack(S);else{for(var $=[],_=x;_<y;++_)$.push(this.getElementByPos(_));for(this.cut(x-1),_=0;_<E;++_)this.pushBack(S);$.forEach(function(M){return P.pushBack(M)})}},this.find=function(x){if(c===v){for(var S=f;S<=g;++S)if(u[c][S]===x)return!0;return!1}for(S=f;S<a.bucketSize;++S)if(u[c][S]===x)return!0;for(S=c+1;S<v;++S)for(var E=0;E<a.bucketSize;++E)if(u[S][E]===x)return!0;for(S=0;S<=g;++S)if(u[v][S]===x)return!0;return!1},this.reverse=function(){for(var x=0,S=y-1;x<S;){var E=this.getElementByPos(x);this.setElementByPos(x,this.getElementByPos(S)),this.setElementByPos(S,E),++x,--S}},this.unique=function(){if(!this.empty()){var x=[],S=this.front();this.forEach(function(P,$){$!==0&&P===S||(x.push(P),S=P)});for(var E=0;E<y;++E)this.setElementByPos(E,x[E]);this.cut(x.length-1)}},this.sort=function(x){var S=[];this.forEach(function(P){S.push(P)}),S.sort(x);for(var E=0;E<y;++E)this.setElementByPos(E,S[E])},this.pushFront=function(x){this.empty()||(c===0&&f===0&&C.call(this,this.size()),f>0?--f:c>0&&(--c,f=a.bucketSize-1)),++y,u[c][f]=x},this.popFront=function(){this.empty()||(this.size()!==1&&(f<a.bucketSize-1?++f:c<v&&(++c,f=0)),y>0&&--y)},this.shrinkToFit=function(){var x=this,S=[];this.forEach(function(_){S.push(_)});var E=S.length;u=[];for(var P=Math.ceil(E/a.bucketSize),$=0;$<P;++$)u.push(new Array(a.bucketSize));this.clear(),S.forEach(function(_){return x.pushBack(_)})},this.cut=function(x){if(x<0)this.clear();else{var S=p(x),E=S.curNodeBucketIndex,P=S.curNodePointerIndex;v=E,g=P,y=x+1}},this[Symbol.iterator]=function(){return function(){var x,S;return o(this,function(E){switch(E.label){case 0:if(y===0)return[2];if(c!==v)return[3,5];S=f,E.label=1;case 1:return S<=g?[4,u[c][S]]:[3,4];case 2:E.sent(),E.label=3;case 3:return++S,[3,1];case 4:return[2];case 5:S=f,E.label=6;case 6:return S<a.bucketSize?[4,u[c][S]]:[3,9];case 7:E.sent(),E.label=8;case 8:return++S,[3,6];case 9:S=c+1,E.label=10;case 10:if(!(S<v))return[3,15];x=0,E.label=11;case 11:return x<a.bucketSize?[4,u[S][x]]:[3,14];case 12:E.sent(),E.label=13;case 13:return++x,[3,11];case 14:return++S,[3,10];case 15:S=0,E.label=16;case 16:return S<=g?[4,u[v][S]]:[3,19];case 17:E.sent(),E.label=18;case 18:return++S,[3,16];case 19:return[2]}})}()},function(){var x=a.bucketSize;l.size?x=l.size():l.length&&(x=l.length);var S=x*a.sigma;m=Math.ceil(S/a.bucketSize),m=Math.max(m,3);for(var E=0;E<m;++E)u.push(new Array(a.bucketSize));var P=Math.ceil(x/a.bucketSize);c=Math.floor(m/2)-Math.floor(P/2),v=c,l.forEach(function($){return s.pushBack($)})}(),Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),a.sigma=3,a.bucketSize=5e3,Object.freeze(a),i.default=a},{}],27:[function(n,r,i){var o=this&&this.__generator||function(c,f){var v,g,m,y,p={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(x){return function(S){return function(E){if(v)throw new TypeError("Generator is already executing.");for(;p;)try{if(v=1,g&&(m=2&E[0]?g.return:E[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,E[1])).done)return m;switch(g=0,m&&(E=[2&E[0],m.value]),E[0]){case 0:case 1:m=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,g=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(!(m=(m=p.trys).length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){p=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){p.label=E[1];break}if(E[0]===6&&p.label<m[1]){p.label=m[1],m=E;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(E);break}m[2]&&p.ops.pop(),p.trys.pop();continue}E=f.call(c,p)}catch(P){E=[6,P],g=0}finally{v=m=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([x,S])}}},a=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&c[f],g=0;if(v)return v.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&g>=c.length&&(c=void 0),{value:c&&c[g++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var l=n("../LinkList/LinkList"),s=n("../Map/Map");function u(c,f,v){var g=this;if(c===void 0&&(c=[]),f===void 0&&(f=u.initSize),v=v||function(C){var x,S,E=0,P="";if(typeof C=="number")E=((E=Math.floor(C))<<5)-E,E&=E;else{P=typeof C!="string"?JSON.stringify(C):C;try{for(var $=a(P),_=$.next();!_.done;_=$.next())E=(E<<5)-E+_.value.charCodeAt(0),E&=E}catch(M){x={error:M}}finally{try{_&&!_.done&&(S=$.return)&&S.call($)}finally{if(x)throw x.error}}}return E^=E>>>16},(f&f-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var m=0,y=[],p=Math.max(u.initSize,Math.min(u.maxSize,f));this.size=function(){return m},this.empty=function(){return m===0},this.clear=function(){m=0,p=f,y=[]},this.forEach=function(C){var x=0;y.forEach(function(S){S.forEach(function(E){C(E,x++)})})},this.setElement=function(C,x){var S,E;if(C==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(x!=null){var P=v(C)&p-1;if(y[P]){var $=y[P].size();if(y[P]instanceof l.default){try{for(var _=a(y[P]),M=_.next();!M.done;M=_.next()){var B=M.value;if(B.key===C)return void(B.value=x)}}catch(k){S={error:k}}finally{try{M&&!M.done&&(E=_.return)&&E.call(_)}finally{if(S)throw S.error}}y[P].pushBack({key:C,value:x}),y[P].size()>=u.treeifyThreshold&&(y[P]=new s.default(y[P]))}else y[P].setElement(C,x);var H=y[P].size();m+=H-$}else++m,y[P]=new l.default([{key:C,value:x}]);m>p*u.sigma&&(function(k){if(!(k>=u.maxSize)){p=2*k;var T=[];y.forEach(function(O,L){if(!O.empty()){if(O instanceof l.default&&O.size()===1){var K=O.front(),q=K.key,J=K.value;T[v(q)&p-1]=new l.default([{key:q,value:J}])}else if(O instanceof s.default){var V=new l.default,z=new l.default;O.forEach(function(W){(v(W.key)&k)==0?V.pushBack(W):z.pushBack(W)}),V.size()>u.untreeifyThreshold?T[L]=new s.default(V):V.size()&&(T[L]=V),z.size()>u.untreeifyThreshold?T[L+k]=new s.default(z):z.size()&&(T[L+k]=z)}else{var D=new l.default,U=new l.default;O.forEach(function(W){(v(W.key)&k)==0?D.pushBack(W):U.pushBack(W)}),D.size()&&(T[L]=D),U.size()&&(T[L+k]=U)}y[L].clear()}}),y=T}}).call(this,p)}else this.eraseElementByKey(C)},this.getElementByKey=function(C){var x,S,E=v(C)&p-1;if(y[E]){if(y[E]instanceof s.default)return y[E].getElementByKey(C);try{for(var P=a(y[E]),$=P.next();!$.done;$=P.next()){var _=$.value;if(_.key===C)return _.value}}catch(M){x={error:M}}finally{try{$&&!$.done&&(S=P.return)&&S.call(P)}finally{if(x)throw x.error}}}},this.eraseElementByKey=function(C){var x,S,E=v(C)&p-1;if(y[E]){var P=y[E].size();if(y[E]instanceof s.default)y[E].eraseElementByKey(C),y[E].size()<=u.untreeifyThreshold&&(y[E]=new l.default(y[E]));else{var $=-1;try{for(var _=a(y[E]),M=_.next();!M.done;M=_.next())if(++$,M.value.key===C){y[E].eraseElementByPos($);break}}catch(H){x={error:H}}finally{try{M&&!M.done&&(S=_.return)&&S.call(_)}finally{if(x)throw x.error}}}var B=y[E].size();m+=B-P}},this.find=function(C){var x,S,E=v(C)&p-1;if(!y[E])return!1;if(y[E]instanceof s.default)return y[E].find(C);try{for(var P=a(y[E]),$=P.next();!$.done;$=P.next())if($.value.key===C)return!0}catch(_){x={error:_}}finally{try{$&&!$.done&&(S=P.return)&&S.call(P)}finally{if(x)throw x.error}}return!1},this[Symbol.iterator]=function(){return function(){var C,x,S,E,P,$;return o(this,function(_){switch(_.label){case 0:C=0,_.label=1;case 1:if(!(C<p))return[3,10];for(;C<p&&!y[C];)++C;if(C>=p)return[3,10];_.label=2;case 2:_.trys.push([2,7,8,9]),P=void 0,x=a(y[C]),S=x.next(),_.label=3;case 3:return S.done?[3,6]:[4,S.value];case 4:_.sent(),_.label=5;case 5:return S=x.next(),[3,3];case 6:return[3,9];case 7:return E=_.sent(),P={error:E},[3,9];case 8:try{S&&!S.done&&($=x.return)&&$.call(x)}finally{if(P)throw P.error}return[7];case 9:return++C,[3,1];case 10:return[2]}})}()},c.forEach(function(C){var x=C.key,S=C.value;return g.setElement(x,S)}),Object.freeze(this)}u.initSize=16,u.maxSize=1<<30,u.sigma=.75,u.treeifyThreshold=8,u.untreeifyThreshold=6,u.minTreeifySize=64,Object.freeze(u),i.default=u},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(n,r,i){var o=this&&this.__generator||function(c,f){var v,g,m,y,p={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(x){return function(S){return function(E){if(v)throw new TypeError("Generator is already executing.");for(;p;)try{if(v=1,g&&(m=2&E[0]?g.return:E[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,E[1])).done)return m;switch(g=0,m&&(E=[2&E[0],m.value]),E[0]){case 0:case 1:m=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,g=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(!(m=(m=p.trys).length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){p=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){p.label=E[1];break}if(E[0]===6&&p.label<m[1]){p.label=m[1],m=E;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(E);break}m[2]&&p.ops.pop(),p.trys.pop();continue}E=f.call(c,p)}catch(P){E=[6,P],g=0}finally{v=m=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([x,S])}}},a=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&c[f],g=0;if(v)return v.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&g>=c.length&&(c=void 0),{value:c&&c[g++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var l=n("../Set/Set"),s=n("../LinkList/LinkList");function u(c,f,v){var g=this;if(c===void 0&&(c=[]),f===void 0&&(f=u.initSize),v=v||function(C){var x=0,S="";if(typeof C=="number")x=((x=Math.floor(C))<<5)-x,x&=x;else{S=typeof C!="string"?JSON.stringify(C):C;for(var E=0;E<S.length;E++)x=(x<<5)-x+S.charCodeAt(E),x&=x}return x^=x>>>16},(f&f-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var m=0,y=[],p=Math.max(u.initSize,Math.min(u.maxSize,f));this.size=function(){return m},this.empty=function(){return m===0},this.clear=function(){m=0,p=f,y=[]},this.forEach=function(C){var x=0;y.forEach(function(S){S.forEach(function(E){C(E,x++)})})},this.insert=function(C){if(C==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var x=v(C)&p-1;if(y[x]){var S=y[x].size();if(y[x]instanceof s.default){if(y[x].find(C))return;y[x].pushBack(C),y[x].size()>=u.treeifyThreshold&&(y[x]=new l.default(y[x]))}else y[x].insert(C);var E=y[x].size();m+=E-S}else y[x]=new s.default([C]),++m;m>p*u.sigma&&(function(P){if(!(P>=u.maxSize)){p=2*P;var $=[];y.forEach(function(_,M){if(!_.empty()){if(_ instanceof s.default&&_.size()===1){var B=_.front();if(B===void 0)throw new Error("unknown error");$[v(B)&p-1]=new s.default([B])}else if(_ instanceof l.default){var H=new s.default,k=new s.default;_.forEach(function(L){(v(L)&P)==0?H.pushBack(L):k.pushBack(L)}),H.size()>u.untreeifyThreshold?$[M]=new l.default(H):H.size()&&($[M]=H),k.size()>u.untreeifyThreshold?$[M+P]=new l.default(k):k.size()&&($[M+P]=k)}else{var T=new s.default,O=new s.default;_.forEach(function(L){(v(L)&P)==0?T.pushBack(L):O.pushBack(L)}),T.size()&&($[M]=T),O.size()&&($[M+P]=O)}y[M].clear()}}),y=$}}).call(this,p)},this.eraseElementByValue=function(C){var x=v(C)&p-1;if(y[x]){var S=y[x].size();y[x].eraseElementByValue(C),y[x]instanceof l.default&&y[x].size()<=u.untreeifyThreshold&&(y[x]=new s.default(y[x]));var E=y[x].size();m+=E-S}},this.find=function(C){var x=v(C)&p-1;return!!y[x]&&y[x].find(C)},this[Symbol.iterator]=function(){return function(){var C,x,S,E,P,$;return o(this,function(_){switch(_.label){case 0:C=0,_.label=1;case 1:if(!(C<p))return[3,10];for(;C<p&&!y[C];)++C;if(C>=p)return[3,10];_.label=2;case 2:_.trys.push([2,7,8,9]),P=void 0,x=a(y[C]),S=x.next(),_.label=3;case 3:return S.done?[3,6]:[4,S.value];case 4:_.sent(),_.label=5;case 5:return S=x.next(),[3,3];case 6:return[3,9];case 7:return E=_.sent(),P={error:E},[3,9];case 8:try{S&&!S.done&&($=x.return)&&$.call(x)}finally{if(P)throw P.error}return[7];case 9:return++C,[3,1];case 10:return[2]}})}()},c.forEach(function(C){return g.insert(C)}),Object.freeze(this)}u.initSize=16,u.maxSize=1<<30,u.sigma=.75,u.treeifyThreshold=8,u.untreeifyThreshold=6,u.minTreeifySize=64,Object.freeze(u),i.default=u},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(n,r,i){var o=this&&this.__generator||function(s,u){var c,f,v,g,m={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(C){return function(x){if(c)throw new TypeError("Generator is already executing.");for(;m;)try{if(c=1,f&&(v=2&x[0]?f.return:x[0]?f.throw||((v=f.return)&&v.call(f),0):f.next)&&!(v=v.call(f,x[1])).done)return v;switch(f=0,v&&(x=[2&x[0],v.value]),x[0]){case 0:case 1:v=x;break;case 4:return m.label++,{value:x[1],done:!1};case 5:m.label++,f=x[1],x=[0];continue;case 7:x=m.ops.pop(),m.trys.pop();continue;default:if(!(v=(v=m.trys).length>0&&v[v.length-1])&&(x[0]===6||x[0]===2)){m=0;continue}if(x[0]===3&&(!v||x[1]>v[0]&&x[1]<v[3])){m.label=x[1];break}if(x[0]===6&&m.label<v[1]){m.label=v[1],v=x;break}if(v&&m.label<v[2]){m.label=v[2],m.ops.push(x);break}v[2]&&m.ops.pop(),m.trys.pop();continue}x=u.call(s,m)}catch(S){x=[6,S],f=0}finally{c=v=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([p,C])}}};Object.defineProperty(i,"__esModule",{value:!0});var a=function(){return function(s){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=s}}();function l(s){var u=this;s===void 0&&(s=[]);var c=0,f=void 0,v=void 0;this.size=function(){return c},this.empty=function(){return c===0},this.clear=function(){f=v=void 0,c=0},this.front=function(){return f==null?void 0:f.value},this.back=function(){return v==null?void 0:v.value},this.forEach=function(g){for(var m=f,y=0;m;){if(m.value===void 0)throw new Error("unknown error");g(m.value,y++),m=m.next}},this.getElementByPos=function(g){if(g<0||g>=c)throw new Error("pos must more then 0 and less then the list length");for(var m=f;g--&&m;)m=m.next;if(!m||m.value===void 0)throw new Error("unknown error");return m.value},this.eraseElementByPos=function(g){if(g<0||g>=c)throw new Error("erase pos must more then 0 and less then the list length");if(g===0)this.popFront();else if(g===c-1)this.popBack();else{for(var m=f;g--;){if(!(m!=null&&m.next))throw new Error("unknown error");m=m.next}if(!m||!m.pre||!m.next)throw new Error("unknown error");var y=m.pre,p=m.next;p.pre=y,y.next=p,c>0&&--c}},this.eraseElementByValue=function(g){for(;f&&f.value===g;)this.popFront();for(;v&&v.value===g;)this.popBack();if(f)for(var m=f;m;){if(m.value===g){var y=m.pre,p=m.next;p&&(p.pre=y),y&&(y.next=p),c>0&&--c}m=m.next}},this.pushBack=function(g){if(g==null)throw new Error("you can't push null or undefined here");++c;var m=new a(g);v?(v.next=m,m.pre=v,v=m):f=v=m},this.popBack=function(){v&&(c>0&&--c,v&&(f===v?f=v=void 0:(v=v.pre)&&(v.next=void 0)))},this.setElementByPos=function(g,m){if(m==null)throw new Error("you can't set null or undefined here");if(g<0||g>=c)throw new Error("pos must more then 0 and less then the list length");for(var y=f;g--;){if(!y)throw new Error("unknown error");y=y.next}y&&(y.value=m)},this.insert=function(g,m,y){if(y===void 0&&(y=1),m==null)throw new Error("you can't insert null or undefined here");if(g<0||g>c)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(y<0)throw new Error("insert size must more than 0");if(g===0)for(;y--;)this.pushFront(m);else if(g===c)for(;y--;)this.pushBack(m);else{for(var p=f,C=1;C<g;++C){if(!(p!=null&&p.next))throw new Error("unknown error");p=p==null?void 0:p.next}if(!p)throw new Error("unknown error");var x=p.next;for(c+=y;y--;)p.next=new a(m),p.next.pre=p,p=p.next;p.next=x,x&&(x.pre=p)}},this.find=function(g){for(var m=f;m;){if(m.value===g)return!0;m=m.next}return!1},this.reverse=function(){for(var g=f,m=v,y=0;g&&m&&2*y<c;){var p=g.value;g.value=m.value,m.value=p,g=g.next,m=m.pre,++y}},this.unique=function(){for(var g=f;g;){for(var m=g;m&&m.next&&m.value===m.next.value;)m=m.next,c>0&&--c;g.next=m.next,g.next&&(g.next.pre=g),g=g.next}},this.sort=function(g){var m=[];this.forEach(function(p){m.push(p)}),m.sort(g);var y=f;m.forEach(function(p){y&&(y.value=p,y=y.next)})},this.pushFront=function(g){if(g==null)throw new Error("you can't push null or undefined here");++c;var m=new a(g);f?(m.next=f,f.pre=m,f=m):f=v=m},this.popFront=function(){f&&(c>0&&--c,f&&(f===v?f=v=void 0:(f=f.next)&&(f.pre=void 0)))},this.merge=function(g){var m=this,y=f;g.forEach(function(p){for(;y&&y.value!==void 0&&y.value<=p;)y=y.next;if(y===void 0)m.pushBack(p),y=v;else if(y===f)m.pushFront(p),y=f;else{++c;var C=y.pre;C&&(C.next=new a(p),C.next.pre=C,C.next.next=y,y&&(y.pre=C.next))}})},this[Symbol.iterator]=function(){return function(){var g;return o(this,function(m){switch(m.label){case 0:g=f,m.label=1;case 1:if(g===void 0)return[3,3];if(!g.value)throw new Error("unknown error");return[4,g.value];case 2:return m.sent(),g=g.next,[3,1];case 3:return[2]}})}()},s.forEach(function(g){return u.pushBack(g)}),Object.freeze(this)}Object.freeze(l),i.default=l},{}],30:[function(n,r,i){var o=this&&this.__generator||function(u,c){var f,v,g,m,y={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return m={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function p(C){return function(x){return function(S){if(f)throw new TypeError("Generator is already executing.");for(;y;)try{if(f=1,v&&(g=2&S[0]?v.return:S[0]?v.throw||((g=v.return)&&g.call(v),0):v.next)&&!(g=g.call(v,S[1])).done)return g;switch(v=0,g&&(S=[2&S[0],g.value]),S[0]){case 0:case 1:g=S;break;case 4:return y.label++,{value:S[1],done:!1};case 5:y.label++,v=S[1],S=[0];continue;case 7:S=y.ops.pop(),y.trys.pop();continue;default:if(!(g=(g=y.trys).length>0&&g[g.length-1])&&(S[0]===6||S[0]===2)){y=0;continue}if(S[0]===3&&(!g||S[1]>g[0]&&S[1]<g[3])){y.label=S[1];break}if(S[0]===6&&y.label<g[1]){y.label=g[1],g=S;break}if(g&&y.label<g[2]){y.label=g[2],y.ops.push(S);break}g[2]&&y.ops.pop(),y.trys.pop();continue}S=c.call(u,y)}catch(E){S=[6,E],v=0}finally{f=g=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([C,x])}}},a=this&&this.__values||function(u){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&u[c],v=0;if(f)return f.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&v>=u.length&&(u=void 0),{value:u&&u[v++],done:!u}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var l=n("../Base/TreeNode");function s(u,c){var f=this;u===void 0&&(u=[]),c=c||function(k,T){return k<T?-1:k>T?1:0};var v=0,g=new l.default;g.color=l.default.TreeNodeColorType.black,this.size=function(){return v},this.empty=function(){return v===0},this.clear=function(){v=0,g.key=g.value=void 0,g.leftChild=g.rightChild=g.brother=void 0};var m=function(k){if(!k||k.key===void 0)throw new Error("unknown error");return k.leftChild?m(k.leftChild):k},y=function(k){if(!k||k.key===void 0)throw new Error("unknown error");return k.rightChild?y(k.rightChild):k};this.front=function(){if(!this.empty()){var k=m(g);if(k.key===void 0||k.value===void 0)throw new Error("unknown error");return{key:k.key,value:k.value}}},this.back=function(){if(!this.empty()){var k=y(g);if(k.key===void 0||k.value===void 0)throw new Error("unknown error");return{key:k.key,value:k.value}}},this.forEach=function(k){var T,O,L=0;try{for(var K=a(this),q=K.next();!q.done;q=K.next())k(q.value,L++)}catch(J){T={error:J}}finally{try{q&&!q.done&&(O=K.return)&&O.call(K)}finally{if(T)throw T.error}}},this.getElementByPos=function(k){var T,O;if(k<0||k>=this.size())throw new Error("pos must more than 0 and less than set's size");var L=0;try{for(var K=a(this),q=K.next();!q.done;q=K.next()){var J=q.value;if(L===k)return J;++L}}catch(V){T={error:V}}finally{try{q&&!q.done&&(O=K.return)&&O.call(K)}finally{if(T)throw T.error}}throw new Error("unknown Error")};var p=function(k,T){if(k&&k.key!==void 0&&k.value!==void 0){var O=c(k.key,T);return O===0?{key:k.key,value:k.value}:O<0?p(k.rightChild,T):p(k.leftChild,T)||{key:k.key,value:k.value}}};this.lowerBound=function(k){return p(g,k)};var C=function(k,T){if(k&&k.key!==void 0&&k.value!==void 0)return c(k.key,T)<=0?C(k.rightChild,T):C(k.leftChild,T)||{key:k.key,value:k.value}};this.upperBound=function(k){return C(g,k)};var x=function(k,T){if(k&&k.key!==void 0&&k.value!==void 0){var O=c(k.key,T);return O===0?{key:k.key,value:k.value}:O>0?x(k.leftChild,T):x(k.rightChild,T)||{key:k.key,value:k.value}}};this.reverseLowerBound=function(k){return x(g,k)};var S=function(k,T){if(k&&k.key!==void 0&&k.value!==void 0)return c(k.key,T)>=0?S(k.leftChild,T):S(k.rightChild,T)||{key:k.key,value:k.value}};this.reverseUpperBound=function(k){return S(g,k)};var E=function(k){var T=k.parent;if(!T){if(k===g)return;throw new Error("unknown error")}if(k.color!==l.default.TreeNodeColorType.red){var O=k.brother;if(!O)throw new Error("unknown error");if(k===T.leftChild)if(O.color===l.default.TreeNodeColorType.red){O.color=l.default.TreeNodeColorType.black,T.color=l.default.TreeNodeColorType.red;var L=T.rotateLeft();g===T&&(g=L),E(k)}else O.color===l.default.TreeNodeColorType.black&&(O.rightChild&&O.rightChild.color===l.default.TreeNodeColorType.red?(O.color=T.color,T.color=l.default.TreeNodeColorType.black,O.rightChild&&(O.rightChild.color=l.default.TreeNodeColorType.black),L=T.rotateLeft(),g===T&&(g=L),k.color=l.default.TreeNodeColorType.black):O.rightChild&&O.rightChild.color!==l.default.TreeNodeColorType.black||!O.leftChild||O.leftChild.color!==l.default.TreeNodeColorType.red?O.leftChild&&O.leftChild.color!==l.default.TreeNodeColorType.black||O.rightChild&&O.rightChild.color!==l.default.TreeNodeColorType.black||(O.color=l.default.TreeNodeColorType.red,E(T)):(O.color=l.default.TreeNodeColorType.red,O.leftChild&&(O.leftChild.color=l.default.TreeNodeColorType.black),L=O.rotateRight(),g===O&&(g=L),E(k)));else k===T.rightChild&&(O.color===l.default.TreeNodeColorType.red?(O.color=l.default.TreeNodeColorType.black,T.color=l.default.TreeNodeColorType.red,L=T.rotateRight(),g===T&&(g=L),E(k)):O.color===l.default.TreeNodeColorType.black&&(O.leftChild&&O.leftChild.color===l.default.TreeNodeColorType.red?(O.color=T.color,T.color=l.default.TreeNodeColorType.black,O.leftChild&&(O.leftChild.color=l.default.TreeNodeColorType.black),L=T.rotateRight(),g===T&&(g=L),k.color=l.default.TreeNodeColorType.black):O.leftChild&&O.leftChild.color!==l.default.TreeNodeColorType.black||!O.rightChild||O.rightChild.color!==l.default.TreeNodeColorType.red?O.leftChild&&O.leftChild.color!==l.default.TreeNodeColorType.black||O.rightChild&&O.rightChild.color!==l.default.TreeNodeColorType.black||(O.color=l.default.TreeNodeColorType.red,E(T)):(O.color=l.default.TreeNodeColorType.red,O.rightChild&&(O.rightChild.color=l.default.TreeNodeColorType.black),L=O.rotateLeft(),g===O&&(g=L),E(k))))}else k.color=l.default.TreeNodeColorType.black},P=function(k){for(var T=k;T.leftChild||T.rightChild;){if(T.rightChild){T=m(T.rightChild);var O=k.key;k.key=T.key,T.key=O;var L=k.value;k.value=T.value,T.value=L,k=T}T.leftChild&&(T=y(T.leftChild),O=k.key,k.key=T.key,T.key=O,L=k.value,k.value=T.value,T.value=L,k=T)}E(T),T&&T.remove(),--v,g.color=l.default.TreeNodeColorType.black},$=function(k,T){return!(!k||k.key===void 0)&&(!!$(k.leftChild,T)||!!T(k)||$(k.rightChild,T))};this.eraseElementByPos=function(k){if(k<0||k>=v)throw new Error("pos must more than 0 and less than set's size");var T=0;$(g,function(O){return k===T?(P(O),!0):(++T,!1)})},this.eraseElementByKey=function(k){if(!this.empty()){var T=B(g,k);T!==void 0&&T.key!==void 0&&c(T.key,k)===0&&P(T)}};var _=function(k,T){if(!k||k.key===void 0)throw new Error("unknown error");var O=c(T,k.key);return O<0?k.leftChild?_(k.leftChild,T):(k.leftChild=new l.default,k.leftChild.parent=k,k.leftChild.brother=k.rightChild,k.rightChild&&(k.rightChild.brother=k.leftChild),k.leftChild):O>0?k.rightChild?_(k.rightChild,T):(k.rightChild=new l.default,k.rightChild.parent=k,k.rightChild.brother=k.leftChild,k.leftChild&&(k.leftChild.brother=k.rightChild),k.rightChild):k},M=function(k){var T=k.parent;if(!T){if(k===g)return;throw new Error("unknown error")}if(T.color!==l.default.TreeNodeColorType.black&&T.color===l.default.TreeNodeColorType.red){var O=T.brother,L=T.parent;if(!L)throw new Error("unknown error");if(O&&O.color===l.default.TreeNodeColorType.red)O.color=T.color=l.default.TreeNodeColorType.black,L.color=l.default.TreeNodeColorType.red,M(L);else if(!O||O.color===l.default.TreeNodeColorType.black)if(T===L.leftChild)if(k===T.leftChild){T.color=l.default.TreeNodeColorType.black,L.color=l.default.TreeNodeColorType.red;var K=L.rotateRight();L===g&&(g=K)}else k===T.rightChild&&(K=T.rotateLeft(),L===g&&(g=K),M(T));else T===L.rightChild&&(k===T.leftChild?(K=T.rotateRight(),L===g&&(g=K),M(T)):k===T.rightChild&&(T.color=l.default.TreeNodeColorType.black,L.color=l.default.TreeNodeColorType.red,K=L.rotateLeft(),L===g&&(g=K)))}};this.setElement=function(k,T){if(k==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(T!=null){if(this.empty())return++v,g.key=k,g.value=T,void(g.color=l.default.TreeNodeColorType.black);var O=_(g,k);O.key===void 0||c(O.key,k)!==0?(++v,O.key=k,O.value=T,M(O),g.color=l.default.TreeNodeColorType.black):O.value=T}else this.eraseElementByKey(k)};var B=function(k,T){if(k&&k.key!==void 0){var O=c(T,k.key);return O<0?B(k.leftChild,T):O>0?B(k.rightChild,T):k}};this.find=function(k){return!!B(g,k)},this.getElementByKey=function(k){var T=B(g,k);if((T==null?void 0:T.key)===void 0||(T==null?void 0:T.value)===void 0)throw new Error("unknown error");return T.value},this.union=function(k){var T=this;k.forEach(function(O){var L=O.key,K=O.value;return T.setElement(L,K)})},this.getHeight=function(){if(this.empty())return 0;var k=function(T){return T?Math.max(k(T.leftChild),k(T.rightChild))+1:1};return k(g)};var H=function(k){return o(this,function(T){switch(T.label){case 0:return k&&k.key!==void 0&&k.value!==void 0?[5,a(H(k.leftChild))]:[2];case 1:return T.sent(),[4,{key:k.key,value:k.value}];case 2:return T.sent(),[5,a(H(k.rightChild))];case 3:return T.sent(),[2]}})};this[Symbol.iterator]=function(){return H(g)},u.forEach(function(k){var T=k.key,O=k.value;return f.setElement(T,O)}),Object.freeze(this)}Object.freeze(s),i.default=s},{"../Base/TreeNode":25}],31:[function(n,r,i){function o(a,l){a===void 0&&(a=[]),l=l||function(v,g){return v>g?-1:v<g?1:0};var s=[];a.forEach(function(v){return s.push(v)});var u=s.length,c=function(v,g){if(v<0||v>=u)throw new Error("unknown error");if(g<0||g>=u)throw new Error("unknown error");var m=s[v];s[v]=s[g],s[g]=m},f=function(v){if(v<0||v>=u)throw new Error("unknown error");var g=2*v+1,m=2*v+2;g<u&&l(s[v],s[g])>0&&c(v,g),m<u&&l(s[v],s[m])>0&&c(v,m)};(function(){for(var v=Math.floor((u-1)/2);v>=0;--v)for(var g=v,m=2*g+1;m<u;){var y=m+1,p=m;if(y<u&&l(s[m],s[y])>0&&(p=y),l(s[g],s[p])<=0)break;c(g,p),m=2*(g=p)+1}})(),this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,s.length=0},this.push=function(v){if(s.push(v),++u!==1)for(var g=u-1;g>0;){var m=Math.floor((g-1)/2);if(l(s[m],v)<=0)break;f(m),g=m}},this.pop=function(){if(!this.empty())if(this.size()!==1){var v=s[u-1];--u;for(var g=0;g<this.size();){var m=2*g+1,y=2*g+2;if(m>=this.size())break;var p=m;if(y<this.size()&&l(s[m],s[y])>0&&(p=y),l(s[p],v)>=0)break;s[g]=s[p],g=p}s[g]=v}else--u},this.top=function(){return s[0]},Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),Object.freeze(o),i.default=o},{}],32:[function(n,r,i){Object.defineProperty(i,"__esModule",{value:!0});var o=n("../LinkList/LinkList");function a(l){l===void 0&&(l=[]);var s=new o.default(l);this.size=function(){return s.size()},this.empty=function(){return s.empty()},this.clear=function(){s.clear()},this.push=function(u){s.pushBack(u)},this.pop=function(){s.popFront()},this.front=function(){return s.front()},Object.freeze(this)}Object.freeze(a),i.default=a},{"../LinkList/LinkList":29}],33:[function(n,r,i){var o=this&&this.__generator||function(u,c){var f,v,g,m,y={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return m={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function p(C){return function(x){return function(S){if(f)throw new TypeError("Generator is already executing.");for(;y;)try{if(f=1,v&&(g=2&S[0]?v.return:S[0]?v.throw||((g=v.return)&&g.call(v),0):v.next)&&!(g=g.call(v,S[1])).done)return g;switch(v=0,g&&(S=[2&S[0],g.value]),S[0]){case 0:case 1:g=S;break;case 4:return y.label++,{value:S[1],done:!1};case 5:y.label++,v=S[1],S=[0];continue;case 7:S=y.ops.pop(),y.trys.pop();continue;default:if(!(g=(g=y.trys).length>0&&g[g.length-1])&&(S[0]===6||S[0]===2)){y=0;continue}if(S[0]===3&&(!g||S[1]>g[0]&&S[1]<g[3])){y.label=S[1];break}if(S[0]===6&&y.label<g[1]){y.label=g[1],g=S;break}if(g&&y.label<g[2]){y.label=g[2],y.ops.push(S);break}g[2]&&y.ops.pop(),y.trys.pop();continue}S=c.call(u,y)}catch(E){S=[6,E],v=0}finally{f=g=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([C,x])}}},a=this&&this.__values||function(u){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&u[c],v=0;if(f)return f.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&v>=u.length&&(u=void 0),{value:u&&u[v++],done:!u}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var l=n("../Base/TreeNode");function s(u,c){var f=this;u===void 0&&(u=[]),c=c||function(k,T){return k<T?-1:k>T?1:0};var v=0,g=new l.default;g.color=l.default.TreeNodeColorType.black,this.size=function(){return v},this.empty=function(){return v===0},this.clear=function(){v=0,g.key=void 0,g.leftChild=g.rightChild=g.brother=g.parent=void 0,g.color=l.default.TreeNodeColorType.black};var m=function(k){if(!k||k.key===void 0)throw new Error("unknown error");return k.leftChild?m(k.leftChild):k},y=function(k){if(!k||k.key===void 0)throw new Error("unknown error");return k.rightChild?y(k.rightChild):k};this.front=function(){if(!this.empty())return m(g).key},this.back=function(){if(!this.empty())return y(g).key},this.forEach=function(k){var T,O,L=0;try{for(var K=a(this),q=K.next();!q.done;q=K.next())k(q.value,L++)}catch(J){T={error:J}}finally{try{q&&!q.done&&(O=K.return)&&O.call(K)}finally{if(T)throw T.error}}},this.getElementByPos=function(k){var T,O;if(k<0||k>=this.size())throw new Error("pos must more than 0 and less than set's size");var L=0;try{for(var K=a(this),q=K.next();!q.done;q=K.next()){var J=q.value;if(L===k)return J;++L}}catch(V){T={error:V}}finally{try{q&&!q.done&&(O=K.return)&&O.call(K)}finally{if(T)throw T.error}}throw new Error("unknown error")};var p=function(k){var T=k.parent;if(!T){if(k===g)return;throw new Error("unknown error")}if(k.color!==l.default.TreeNodeColorType.red){var O=k.brother;if(!O)throw new Error("unknown error");if(k===T.leftChild)if(O.color===l.default.TreeNodeColorType.red){O.color=l.default.TreeNodeColorType.black,T.color=l.default.TreeNodeColorType.red;var L=T.rotateLeft();g===T&&(g=L),p(k)}else O.color===l.default.TreeNodeColorType.black&&(O.rightChild&&O.rightChild.color===l.default.TreeNodeColorType.red?(O.color=T.color,T.color=l.default.TreeNodeColorType.black,O.rightChild&&(O.rightChild.color=l.default.TreeNodeColorType.black),L=T.rotateLeft(),g===T&&(g=L),k.color=l.default.TreeNodeColorType.black):O.rightChild&&O.rightChild.color!==l.default.TreeNodeColorType.black||!O.leftChild||O.leftChild.color!==l.default.TreeNodeColorType.red?O.leftChild&&O.leftChild.color!==l.default.TreeNodeColorType.black||O.rightChild&&O.rightChild.color!==l.default.TreeNodeColorType.black||(O.color=l.default.TreeNodeColorType.red,p(T)):(O.color=l.default.TreeNodeColorType.red,O.leftChild&&(O.leftChild.color=l.default.TreeNodeColorType.black),L=O.rotateRight(),g===O&&(g=L),p(k)));else k===T.rightChild&&(O.color===l.default.TreeNodeColorType.red?(O.color=l.default.TreeNodeColorType.black,T.color=l.default.TreeNodeColorType.red,L=T.rotateRight(),g===T&&(g=L),p(k)):O.color===l.default.TreeNodeColorType.black&&(O.leftChild&&O.leftChild.color===l.default.TreeNodeColorType.red?(O.color=T.color,T.color=l.default.TreeNodeColorType.black,O.leftChild&&(O.leftChild.color=l.default.TreeNodeColorType.black),L=T.rotateRight(),g===T&&(g=L),k.color=l.default.TreeNodeColorType.black):O.leftChild&&O.leftChild.color!==l.default.TreeNodeColorType.black||!O.rightChild||O.rightChild.color!==l.default.TreeNodeColorType.red?O.leftChild&&O.leftChild.color!==l.default.TreeNodeColorType.black||O.rightChild&&O.rightChild.color!==l.default.TreeNodeColorType.black||(O.color=l.default.TreeNodeColorType.red,p(T)):(O.color=l.default.TreeNodeColorType.red,O.rightChild&&(O.rightChild.color=l.default.TreeNodeColorType.black),L=O.rotateLeft(),g===O&&(g=L),p(k))))}else k.color=l.default.TreeNodeColorType.black},C=function(k){for(var T=k;T.leftChild||T.rightChild;){if(T.rightChild){T=m(T.rightChild);var O=k.key;k.key=T.key,T.key=O,k=T}T.leftChild&&(T=y(T.leftChild),O=k.key,k.key=T.key,T.key=O,k=T)}p(T),T&&T.remove(),--v,g.color=l.default.TreeNodeColorType.black},x=function(k,T){return!(!k||k.key===void 0)&&(!!x(k.leftChild,T)||!!T(k)||x(k.rightChild,T))};this.eraseElementByPos=function(k){if(k<0||k>=v)throw new Error("pos must more than 0 and less than set's size");var T=0;x(g,function(O){return k===T?(C(O),!0):(++T,!1)})},this.eraseElementByValue=function(k){if(!this.empty()){var T=P(g,k);T!==void 0&&T.key!==void 0&&c(T.key,k)===0&&C(T)}};var S=function(k,T){if(!k||k.key===void 0)throw new Error("unknown error");var O=c(T,k.key);return O<0?k.leftChild?S(k.leftChild,T):(k.leftChild=new l.default,k.leftChild.parent=k,k.leftChild.brother=k.rightChild,k.rightChild&&(k.rightChild.brother=k.leftChild),k.leftChild):O>0?k.rightChild?S(k.rightChild,T):(k.rightChild=new l.default,k.rightChild.parent=k,k.rightChild.brother=k.leftChild,k.leftChild&&(k.leftChild.brother=k.rightChild),k.rightChild):k},E=function(k){var T=k.parent;if(!T){if(k===g)return;throw new Error("unknown error")}if(T.color!==l.default.TreeNodeColorType.black&&T.color===l.default.TreeNodeColorType.red){var O=T.brother,L=T.parent;if(!L)throw new Error("unknown error");if(O&&O.color===l.default.TreeNodeColorType.red)O.color=T.color=l.default.TreeNodeColorType.black,L.color=l.default.TreeNodeColorType.red,E(L);else if(!O||O.color===l.default.TreeNodeColorType.black)if(T===L.leftChild)if(k===T.leftChild){T.color=l.default.TreeNodeColorType.black,L.color=l.default.TreeNodeColorType.red;var K=L.rotateRight();L===g&&(g=K)}else k===T.rightChild&&(K=T.rotateLeft(),L===g&&(g=K),E(T));else T===L.rightChild&&(k===T.leftChild?(K=T.rotateRight(),L===g&&(g=K),E(T)):k===T.rightChild&&(T.color=l.default.TreeNodeColorType.black,L.color=l.default.TreeNodeColorType.red,K=L.rotateLeft(),L===g&&(g=K)))}};this.insert=function(k){if(k==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++v,g.key=k,void(g.color=l.default.TreeNodeColorType.black);var T=S(g,k);T.key!==void 0&&c(T.key,k)===0||(++v,T.key=k,E(T),g.color=l.default.TreeNodeColorType.black)};var P=function(k,T){if(k&&k.key!==void 0){var O=c(T,k.key);return O<0?P(k.leftChild,T):O>0?P(k.rightChild,T):k}};this.find=function(k){var T=P(g,k);return T!==void 0&&T.key!==void 0&&c(T.key,k)===0};var $=function(k,T){if(k&&k.key!==void 0){var O=c(k.key,T);if(O===0)return k.key;if(O<0)return $(k.rightChild,T);var L=$(k.leftChild,T);return L!==void 0?L:k.key}};this.lowerBound=function(k){return $(g,k)};var _=function(k,T){if(k&&k.key!==void 0){if(c(k.key,T)<=0)return _(k.rightChild,T);var O=_(k.leftChild,T);return O!==void 0?O:k.key}};this.upperBound=function(k){return _(g,k)};var M=function(k,T){if(k&&k.key!==void 0){var O=c(k.key,T);if(O===0)return k.key;if(O>0)return M(k.leftChild,T);var L=M(k.rightChild,T);return L!==void 0?L:k.key}};this.reverseLowerBound=function(k){return M(g,k)};var B=function(k,T){if(k&&k.key!==void 0){if(c(k.key,T)>=0)return B(k.leftChild,T);var O=B(k.rightChild,T);return O!==void 0?O:k.key}};this.reverseUpperBound=function(k){return B(g,k)},this.union=function(k){var T=this;k.forEach(function(O){return T.insert(O)})},this.getHeight=function(){if(this.empty())return 0;var k=function(T){return T?Math.max(k(T.leftChild),k(T.rightChild))+1:1};return k(g)};var H=function(k){return o(this,function(T){switch(T.label){case 0:return k&&k.key!==void 0?[5,a(H(k.leftChild))]:[2];case 1:return T.sent(),[4,k.key];case 2:return T.sent(),[5,a(H(k.rightChild))];case 3:return T.sent(),[2]}})};this[Symbol.iterator]=function(){return H(g)},u.forEach(function(k){return f.insert(k)}),Object.freeze(this)}Object.freeze(s),i.default=s},{"../Base/TreeNode":25}],34:[function(n,r,i){function o(a){var l=this;a===void 0&&(a=[]);var s=0,u=[];this.size=function(){return s},this.empty=function(){return s===0},this.clear=function(){s=0,u.length=0},this.push=function(c){u.push(c),++s},this.pop=function(){u.pop(),s>0&&--s},this.top=function(){return u[s-1]},a.forEach(function(c){return l.push(c)}),Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),Object.freeze(o),i.default=o},{}],35:[function(n,r,i){var o=this&&this.__generator||function(c,f){var v,g,m,y,p={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(x){return function(S){return function(E){if(v)throw new TypeError("Generator is already executing.");for(;p;)try{if(v=1,g&&(m=2&E[0]?g.return:E[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,E[1])).done)return m;switch(g=0,m&&(E=[2&E[0],m.value]),E[0]){case 0:case 1:m=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,g=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(!(m=(m=p.trys).length>0&&m[m.length-1])&&(E[0]===6||E[0]===2)){p=0;continue}if(E[0]===3&&(!m||E[1]>m[0]&&E[1]<m[3])){p.label=E[1];break}if(E[0]===6&&p.label<m[1]){p.label=m[1],m=E;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(E);break}m[2]&&p.ops.pop(),p.trys.pop();continue}E=f.call(c,p)}catch(P){E=[6,P],g=0}finally{v=m=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([x,S])}}},a=this&&this.__read||function(c,f){var v=typeof Symbol=="function"&&c[Symbol.iterator];if(!v)return c;var g,m,y=v.call(c),p=[];try{for(;(f===void 0||f-- >0)&&!(g=y.next()).done;)p.push(g.value)}catch(C){m={error:C}}finally{try{g&&!g.done&&(v=y.return)&&v.call(y)}finally{if(m)throw m.error}}return p},l=this&&this.__spreadArray||function(c,f,v){if(v||arguments.length===2)for(var g,m=0,y=f.length;m<y;m++)!g&&m in f||(g||(g=Array.prototype.slice.call(f,0,m)),g[m]=f[m]);return c.concat(g||Array.prototype.slice.call(f))},s=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,v=f&&c[f],g=0;if(v)return v.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&g>=c.length&&(c=void 0),{value:c&&c[g++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};function u(c){var f=this;c===void 0&&(c=[]);var v=0,g=[];this.size=function(){return v},this.empty=function(){return v===0},this.clear=function(){v=0,g.length=0},this.front=function(){if(!this.empty())return g[0]},this.back=function(){if(!this.empty())return g[v-1]},this.forEach=function(m){g.forEach(m)},this.getElementByPos=function(m){if(m<0||m>=v)throw new Error("pos must more than 0 and less than vector's size");return g[m]},this.eraseElementByPos=function(m){if(m<0||m>=v)throw new Error("pos must more than 0 and less than vector's size");for(var y=m;y<v-1;++y)g[y]=g[y+1];this.popBack()},this.eraseElementByValue=function(m){var y=[];this.forEach(function(C){C!==m&&y.push(C)}),y.forEach(function(C,x){g[x]=C});for(var p=y.length;v>p;)this.popBack()},this.pushBack=function(m){g.push(m),++v},this.popBack=function(){g.pop(),v>0&&--v},this.setElementByPos=function(m,y){if(m<0||m>=v)throw new Error("pos must more than 0 and less than vector's size");g[m]=y},this.insert=function(m,y,p){if(p===void 0&&(p=1),m<0||m>v)throw new Error("pos must more than 0 and less than or equal to vector's size");g.splice.apply(g,l([m,0],a(new Array(p).fill(y)),!1)),v+=p},this.find=function(m){return g.includes(m)},this.reverse=function(){g.reverse()},this.unique=function(){var m,y=[];this.forEach(function(C,x){x!==0&&C===m||(y.push(C),m=C)}),y.forEach(function(C,x){g[x]=C});for(var p=y.length;v>p;)this.popBack()},this.sort=function(m){g.sort(m)},this[Symbol.iterator]=function(){return function(){return o(this,function(m){switch(m.label){case 0:return[5,s(g)];case 1:return[2,m.sent()]}})}()},c.forEach(function(m){return f.pushBack(m)}),Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),Object.freeze(u),i.default=u},{}],36:[function(n,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.HashMap=i.HashSet=i.Map=i.Set=i.PriorityQueue=i.Deque=i.LinkList=i.Queue=i.Stack=i.Vector=void 0;var o=n("./Vector/Vector");i.Vector=o.default;var a=n("./Stack/Stack");i.Stack=a.default;var l=n("./Queue/Queue");i.Queue=l.default;var s=n("./LinkList/LinkList");i.LinkList=s.default;var u=n("./Deque/Deque");i.Deque=u.default;var c=n("./PriorityQueue/PriorityQueue");i.PriorityQueue=c.default;var f=n("./Set/Set");i.Set=f.default;var v=n("./Map/Map");i.Map=v.default;var g=n("./HashSet/HashSet");i.HashSet=g.default;var m=n("./HashMap/HashMap");i.HashMap=m.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(n,r,i){const o=n("yallist"),a=Symbol("max"),l=Symbol("length"),s=Symbol("lengthCalculator"),u=Symbol("allowStale"),c=Symbol("maxAge"),f=Symbol("dispose"),v=Symbol("noDisposeOnSet"),g=Symbol("lruList"),m=Symbol("cache"),y=Symbol("updateAgeOnGet"),p=()=>1,C=(_,M,B)=>{const H=_[m].get(M);if(H){const k=H.value;if(x(_,k)){if(E(_,H),!_[u])return}else B&&(_[y]&&(H.value.now=Date.now()),_[g].unshiftNode(H));return k.value}},x=(_,M)=>{if(!M||!M.maxAge&&!_[c])return!1;const B=Date.now()-M.now;return M.maxAge?B>M.maxAge:_[c]&&B>_[c]},S=_=>{if(_[l]>_[a])for(let M=_[g].tail;_[l]>_[a]&&M!==null;){const B=M.prev;E(_,M),M=B}},E=(_,M)=>{if(M){const B=M.value;_[f]&&_[f](B.key,B.value),_[l]-=B.length,_[m].delete(B.key),_[g].removeNode(M)}};class P{constructor(M,B,H,k,T){this.key=M,this.value=B,this.length=H,this.now=k,this.maxAge=T||0}}const $=(_,M,B,H)=>{let k=B.value;x(_,k)&&(E(_,B),_[u]||(k=void 0)),k&&M.call(H,k.value,k.key,_)};r.exports=class{constructor(_){if(typeof _=="number"&&(_={max:_}),_||(_={}),_.max&&(typeof _.max!="number"||_.max<0))throw new TypeError("max must be a non-negative number");this[a]=_.max||1/0;const M=_.length||p;if(this[s]=typeof M!="function"?p:M,this[u]=_.stale||!1,_.maxAge&&typeof _.maxAge!="number")throw new TypeError("maxAge must be a number");this[c]=_.maxAge||0,this[f]=_.dispose,this[v]=_.noDisposeOnSet||!1,this[y]=_.updateAgeOnGet||!1,this.reset()}set max(_){if(typeof _!="number"||_<0)throw new TypeError("max must be a non-negative number");this[a]=_||1/0,S(this)}get max(){return this[a]}set allowStale(_){this[u]=!!_}get allowStale(){return this[u]}set maxAge(_){if(typeof _!="number")throw new TypeError("maxAge must be a non-negative number");this[c]=_,S(this)}get maxAge(){return this[c]}set lengthCalculator(_){typeof _!="function"&&(_=p),_!==this[s]&&(this[s]=_,this[l]=0,this[g].forEach(M=>{M.length=this[s](M.value,M.key),this[l]+=M.length})),S(this)}get lengthCalculator(){return this[s]}get length(){return this[l]}get itemCount(){return this[g].length}rforEach(_,M){M=M||this;for(let B=this[g].tail;B!==null;){const H=B.prev;$(this,_,B,M),B=H}}forEach(_,M){M=M||this;for(let B=this[g].head;B!==null;){const H=B.next;$(this,_,B,M),B=H}}keys(){return this[g].toArray().map(_=>_.key)}values(){return this[g].toArray().map(_=>_.value)}reset(){this[f]&&this[g]&&this[g].length&&this[g].forEach(_=>this[f](_.key,_.value)),this[m]=new Map,this[g]=new o,this[l]=0}dump(){return this[g].map(_=>!x(this,_)&&{k:_.key,v:_.value,e:_.now+(_.maxAge||0)}).toArray().filter(_=>_)}dumpLru(){return this[g]}set(_,M,B){if((B=B||this[c])&&typeof B!="number")throw new TypeError("maxAge must be a number");const H=B?Date.now():0,k=this[s](M,_);if(this[m].has(_)){if(k>this[a])return E(this,this[m].get(_)),!1;const O=this[m].get(_).value;return this[f]&&(this[v]||this[f](_,O.value)),O.now=H,O.maxAge=B,O.value=M,this[l]+=k-O.length,O.length=k,this.get(_),S(this),!0}const T=new P(_,M,k,H,B);return T.length>this[a]?(this[f]&&this[f](_,M),!1):(this[l]+=T.length,this[g].unshift(T),this[m].set(_,this[g].head),S(this),!0)}has(_){if(!this[m].has(_))return!1;const M=this[m].get(_).value;return!x(this,M)}get(_){return C(this,_,!0)}peek(_){return C(this,_,!1)}pop(){const _=this[g].tail;return _?(E(this,_),_.value):null}del(_){E(this,this[m].get(_))}load(_){this.reset();const M=Date.now();for(let B=_.length-1;B>=0;B--){const H=_[B],k=H.e||0;if(k===0)this.set(H.k,H.v);else{const T=k-M;T>0&&this.set(H.k,H.v,T)}}}prune(){this[m].forEach((_,M)=>C(this,M,!1))}}},{yallist:83}],38:[function(n,r,i){(function(o){(function(){const a=r.exports;a.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},a.codes={};for(const s in a.types){const u=a.types[s];a.codes[u]=s}a.CMD_SHIFT=4,a.CMD_MASK=240,a.DUP_MASK=8,a.QOS_MASK=3,a.QOS_SHIFT=1,a.RETAIN_MASK=1,a.VARBYTEINT_MASK=127,a.VARBYTEINT_FIN_MASK=128,a.VARBYTEINT_MAX=268435455,a.SESSIONPRESENT_MASK=1,a.SESSIONPRESENT_HEADER=o.from([a.SESSIONPRESENT_MASK]),a.CONNACK_HEADER=o.from([a.codes.connack<<a.CMD_SHIFT]),a.USERNAME_MASK=128,a.PASSWORD_MASK=64,a.WILL_RETAIN_MASK=32,a.WILL_QOS_MASK=24,a.WILL_QOS_SHIFT=3,a.WILL_FLAG_MASK=4,a.CLEAN_SESSION_MASK=2,a.CONNECT_HEADER=o.from([a.codes.connect<<a.CMD_SHIFT]),a.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},a.propertiesCodes={};for(const s in a.properties){const u=a.properties[s];a.propertiesCodes[u]=s}function l(s){return[0,1,2].map(u=>[0,1].map(c=>[0,1].map(f=>{const v=o.alloc(1);return v.writeUInt8(a.codes[s]<<a.CMD_SHIFT|(c?a.DUP_MASK:0)|u<<a.QOS_SHIFT|f,0,!0),v})))}a.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},a.PUBLISH_HEADER=l("publish"),a.SUBSCRIBE_HEADER=l("subscribe"),a.SUBSCRIBE_OPTIONS_QOS_MASK=3,a.SUBSCRIBE_OPTIONS_NL_MASK=1,a.SUBSCRIBE_OPTIONS_NL_SHIFT=2,a.SUBSCRIBE_OPTIONS_RAP_MASK=1,a.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,a.SUBSCRIBE_OPTIONS_RH_MASK=3,a.SUBSCRIBE_OPTIONS_RH_SHIFT=4,a.SUBSCRIBE_OPTIONS_RH=[0,16,32],a.SUBSCRIBE_OPTIONS_NL=4,a.SUBSCRIBE_OPTIONS_RAP=8,a.SUBSCRIBE_OPTIONS_QOS=[0,1,2],a.UNSUBSCRIBE_HEADER=l("unsubscribe"),a.ACKS={unsuback:l("unsuback"),puback:l("puback"),pubcomp:l("pubcomp"),pubrel:l("pubrel"),pubrec:l("pubrec")},a.SUBACK_HEADER=o.from([a.codes.suback<<a.CMD_SHIFT]),a.VERSION3=o.from([3]),a.VERSION4=o.from([4]),a.VERSION5=o.from([5]),a.VERSION131=o.from([131]),a.VERSION132=o.from([132]),a.QOS=[0,1,2].map(s=>o.from([s])),a.EMPTY={pingreq:o.from([a.codes.pingreq<<4,0]),pingresp:o.from([a.codes.pingresp<<4,0]),disconnect:o.from([a.codes.disconnect<<4,0])}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:17}],39:[function(n,r,i){(function(o){(function(){const a=n("./writeToStream"),l=n("events");class s extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(c){return this._array[this._i++]=c,!0}concat(){let c=0;const f=new Array(this._array.length),v=this._array;let g,m=0;for(g=0;g<v.length&&v[g]!==void 0;g++)typeof v[g]!="string"?f[g]=v[g].length:f[g]=o.byteLength(v[g]),c+=f[g];const y=o.allocUnsafe(c);for(g=0;g<v.length&&v[g]!==void 0;g++)typeof v[g]!="string"?(v[g].copy(y,m),m+=f[g]):(y.write(v[g],m),m+=f[g]);return y}}r.exports=function(u,c){const f=new s;return a(u,f,c),f.concat()}}).call(this)}).call(this,n("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(n,r,i){i.parser=n("./parser").parser,i.generate=n("./generate"),i.writeToStream=n("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(n,r,i){(function(o){(function(){const l={},s=o.isBuffer(o.from([1,2]).subarray(0,1));function u(c){const f=o.allocUnsafe(2);return f.writeUInt8(c>>8,0),f.writeUInt8(255&c,1),f}r.exports={cache:l,generateCache:function(){for(let c=0;c<65536;c++)l[c]=u(c)},generateNumber:u,genBufVariableByteInt:function(c){let f=0,v=0;const g=o.allocUnsafe(4);do f=c%128|0,(c=c/128|0)>0&&(f|=128),g.writeUInt8(f,v++);while(c>0&&v<4);return c>0&&(v=0),s?g.subarray(0,v):g.slice(0,v)},generate4ByteBuffer:function(c){const f=o.allocUnsafe(4);return f.writeUInt32BE(c,0),f}}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:17}],42:[function(n,r,i){r.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(n,r,i){const o=n("bl"),a=n("events"),l=n("./packet"),s=n("./constants"),u=n("debug")("mqtt-packet:parser");class c extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(v){return this instanceof c?(this.settings=v||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new c().parser(v)}_resetState(){u("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new l,this.error=null,this._list=o(),this._stateCounter=0}parse(v){for(this.error&&this._resetState(),this._list.append(v),u("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,u("parse: state complete. _stateCounter is now: %d",this._stateCounter),u("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return u("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const v=this._list.readUInt8(0);return this.packet.cmd=s.types[v>>s.CMD_SHIFT],this.packet.retain=(v&s.RETAIN_MASK)!=0,this.packet.qos=v>>s.QOS_SHIFT&s.QOS_MASK,this.packet.dup=(v&s.DUP_MASK)!=0,u("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const v=this._parseVarByteNum(!0);return v&&(this.packet.length=v.value,this._list.consume(v.bytes)),u("_parseLength %d",v.value),!!v}_parsePayload(){u("_parsePayload: payload %O",this._list);let v=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}v=!0}return u("_parsePayload complete result: %s",v),v}_parseConnect(){let v,g,m,y;u("_parseConnect");const p={},C=this.packet,x=this._parseString();if(x===null)return this._emitError(new Error("Cannot parse protocolId"));if(x!=="MQTT"&&x!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(C.protocolId=x,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(C.protocolVersion=this._list.readUInt8(this._pos),C.protocolVersion>=128&&(C.bridgeMode=!0,C.protocolVersion=C.protocolVersion-128),C.protocolVersion!==3&&C.protocolVersion!==4&&C.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(p.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,p.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,p.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK,p.will&&(C.will={},C.will.retain=(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK)!=0,C.will.qos=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT),C.clean=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK)!=0,this._pos++,C.keepalive=this._parseNum(),C.keepalive===-1)return this._emitError(new Error("Packet too short"));if(C.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(C.properties=E)}const S=this._parseString();if(S===null)return this._emitError(new Error("Packet too short"));if(C.clientId=S,u("_parseConnect: packet.clientId: %s",C.clientId),p.will){if(C.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(C.will.properties=E)}if((v=this._parseString())===null)return this._emitError(new Error("Cannot parse will topic"));if(C.will.topic=v,u("_parseConnect: packet.will.topic: %s",C.will.topic),(g=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse will payload"));C.will.payload=g,u("_parseConnect: packet.will.paylaod: %s",C.will.payload)}if(p.username){if((y=this._parseString())===null)return this._emitError(new Error("Cannot parse username"));C.username=y,u("_parseConnect: packet.username: %s",C.username)}if(p.password){if((m=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse password"));C.password=m}return this.settings=C,u("_parseConnect: complete"),C}_parseConnack(){u("_parseConnack");const v=this.packet;if(this._list.length<1)return null;if(v.sessionPresent=!!(this._list.readUInt8(this._pos++)&s.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?v.reasonCode=this._list.readUInt8(this._pos++):v.reasonCode=0;else{if(this._list.length<2)return null;v.returnCode=this._list.readUInt8(this._pos++)}if(v.returnCode===-1||v.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(v.properties=g)}u("_parseConnack: complete")}_parsePublish(){u("_parsePublish");const v=this.packet;if(v.topic=this._parseString(),v.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(v.qos>0)||this._parseMessageId()){if(this.settings.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(v.properties=g)}v.payload=this._list.slice(this._pos,v.length),u("_parsePublish: payload from buffer list: %o",v.payload)}}_parseSubscribe(){u("_parseSubscribe");const v=this.packet;let g,m,y,p,C,x,S;if(v.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(v.subscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(v.properties=E)}for(;this._pos<v.length;){if((g=this._parseString())===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=v.length)return this._emitError(new Error("Malformed Subscribe Payload"));y=(m=this._parseByte())&s.SUBSCRIBE_OPTIONS_QOS_MASK,x=(m>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK)!=0,C=(m>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,p=m>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,S={topic:g,qos:y},this.settings.protocolVersion===5?(S.nl=x,S.rap=C,S.rh=p):this.settings.bridgeMode&&(S.rh=0,S.rap=!0,S.nl=!0),u("_parseSubscribe: push subscription `%s` to subscription",S),v.subscriptions.push(S)}}}_parseSuback(){u("_parseSuback");const v=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(v.properties=g)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){u("_parseUnsubscribe");const v=this.packet;if(v.unsubscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(v.properties=g)}for(;this._pos<v.length;){const g=this._parseString();if(g===null)return this._emitError(new Error("Cannot parse topic"));u("_parseUnsubscribe: push topic `%s` to unsubscriptions",g),v.unsubscriptions.push(g)}}}_parseUnsuback(){u("_parseUnsuback");const v=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const g=this._parseProperties();for(Object.getOwnPropertyNames(g).length&&(v.properties=g),v.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){u("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const v=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(v.length>2?(v.reasonCode=this._parseByte(),u("_parseConfirmation: packet.reasonCode `%d`",v.reasonCode)):v.reasonCode=0,v.length>3)){const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(v.properties=g)}return!0}_parseDisconnect(){const v=this.packet;if(u("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?v.reasonCode=this._parseByte():v.reasonCode=0;const g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(v.properties=g)}return u("_parseDisconnect result: true"),!0}_parseAuth(){u("_parseAuth");const v=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));v.reasonCode=this._parseByte();const g=this._parseProperties();return Object.getOwnPropertyNames(g).length&&(v.properties=g),u("_parseAuth: result: true"),!0}_parseMessageId(){const v=this.packet;return v.messageId=this._parseNum(),v.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(u("_parseMessageId: packet.messageId %d",v.messageId),!0)}_parseString(v){const g=this._parseNum(),m=g+this._pos;if(g===-1||m>this._list.length||m>this.packet.length)return null;const y=this._list.toString("utf8",this._pos,m);return this._pos+=g,u("_parseString: result: %s",y),y}_parseStringPair(){return u("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const v=this._parseNum(),g=v+this._pos;if(v===-1||g>this._list.length||g>this.packet.length)return null;const m=this._list.slice(this._pos,g);return this._pos+=v,u("_parseBuffer: result: %o",m),m}_parseNum(){if(this._list.length-this._pos<2)return-1;const v=this._list.readUInt16BE(this._pos);return this._pos+=2,u("_parseNum: result: %s",v),v}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const v=this._list.readUInt32BE(this._pos);return this._pos+=4,u("_parse4ByteNum: result: %s",v),v}_parseVarByteNum(v){u("_parseVarByteNum");let g,m=0,y=1,p=0,C=!1;const x=this._pos?this._pos:0;for(;m<4&&x+m<this._list.length;){if(p+=y*((g=this._list.readUInt8(x+m++))&s.VARBYTEINT_MASK),y*=128,(g&s.VARBYTEINT_FIN_MASK)==0){C=!0;break}if(this._list.length<=m)break}return!C&&m===4&&this._list.length>=m&&this._emitError(new Error("Invalid variable byte integer")),x&&(this._pos+=m),u("_parseVarByteNum: result: %o",C=!!C&&(v?{bytes:m,value:p}:p)),C}_parseByte(){let v;return this._pos<this._list.length&&(v=this._list.readUInt8(this._pos),this._pos++),u("_parseByte: result: %o",v),v}_parseByType(v){switch(u("_parseByType: type: %s",v),v){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){u("_parseProperties");const v=this._parseVarByteNum(),g=this._pos+v,m={};for(;this._pos<g;){const y=this._parseByte();if(!y)return this._emitError(new Error("Cannot parse property code type")),!1;const p=s.propertiesCodes[y];if(!p)return this._emitError(new Error("Unknown property")),!1;if(p!=="userProperties")m[p]?Array.isArray(m[p])?m[p].push(this._parseByType(s.propertiesTypes[p])):(m[p]=[m[p]],m[p].push(this._parseByType(s.propertiesTypes[p]))):m[p]=this._parseByType(s.propertiesTypes[p]);else{m[p]||(m[p]=Object.create(null));const C=this._parseByType(s.propertiesTypes[p]);if(m[p][C.name])if(Array.isArray(m[p][C.name]))m[p][C.name].push(C.value);else{const x=m[p][C.name];m[p][C.name]=[x],m[p][C.name].push(C.value)}else m[p][C.name]=C.value}}return m}_newPacket(){return u("_newPacket"),this.packet&&(this._list.consume(this.packet.length),u("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),u("_newPacket: new packet"),this.packet=new l,this._pos=0,!0}_emitError(v){u("_emitError"),this.error=v,this.emit("error",v)}}r.exports=c},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(n,r,i){(function(o){(function(){const a=n("./constants"),l=o.allocUnsafe(0),s=o.from([0]),u=n("./numbers"),c=n("process-nextick-args").nextTick,f=n("debug")("mqtt-packet:writeToStream"),v=u.cache,g=u.generateNumber,m=u.generateCache,y=u.genBufVariableByteInt,p=u.generate4ByteBuffer;let C=B,x=!0;function S(V,z,D){switch(f("generate called"),z.cork&&(z.cork(),c(E,z)),x&&(x=!1,m()),f("generate: packet.cmd: %s",V.cmd),V.cmd){case"connect":return function(U,W,X){const Y=U||{},Q=Y.protocolId||"MQTT";let ne=Y.protocolVersion||4;const ie=Y.will;let re=Y.clean;const I=Y.keepalive||0,A=Y.clientId||"",F=Y.username,G=Y.password,ee=Y.properties;re===void 0&&(re=!0);let te=0;if(typeof Q!="string"&&!o.isBuffer(Q))return W.emit("error",new Error("Invalid protocolId")),!1;if(te+=Q.length+2,ne!==3&&ne!==4&&ne!==5)return W.emit("error",new Error("Invalid protocol version")),!1;if(te+=1,(typeof A=="string"||o.isBuffer(A))&&(A||ne>=4)&&(A||re))te+=o.byteLength(A)+2;else{if(ne<4)return W.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*re==0)return W.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof I!="number"||I<0||I>65535||I%1!=0)return W.emit("error",new Error("Invalid keepalive")),!1;if(te+=2,te+=1,ne===5){var ae=T(W,ee);if(!ae)return!1;te+=ae.length}if(ie){if(typeof ie!="object")return W.emit("error",new Error("Invalid will")),!1;if(!ie.topic||typeof ie.topic!="string")return W.emit("error",new Error("Invalid will topic")),!1;if(te+=o.byteLength(ie.topic)+2,te+=2,ie.payload){if(!(ie.payload.length>=0))return W.emit("error",new Error("Invalid will payload")),!1;typeof ie.payload=="string"?te+=o.byteLength(ie.payload):te+=ie.payload.length}var de={};if(ne===5){if(!(de=T(W,ie.properties)))return!1;te+=de.length}}let he=!1;if(F!=null){if(!J(F))return W.emit("error",new Error("Invalid username")),!1;he=!0,te+=o.byteLength(F)+2}if(G!=null){if(!he)return W.emit("error",new Error("Username is required to use password")),!1;if(!J(G))return W.emit("error",new Error("Invalid password")),!1;te+=q(G)+2}W.write(a.CONNECT_HEADER),$(W,te),k(W,Q),Y.bridgeMode&&(ne+=128),W.write(ne===131?a.VERSION131:ne===132?a.VERSION132:ne===4?a.VERSION4:ne===5?a.VERSION5:a.VERSION3);let pe=0;return pe|=F!=null?a.USERNAME_MASK:0,pe|=G!=null?a.PASSWORD_MASK:0,pe|=ie&&ie.retain?a.WILL_RETAIN_MASK:0,pe|=ie&&ie.qos?ie.qos<<a.WILL_QOS_SHIFT:0,pe|=ie?a.WILL_FLAG_MASK:0,pe|=re?a.CLEAN_SESSION_MASK:0,W.write(o.from([pe])),C(W,I),ne===5&&ae.write(),k(W,A),ie&&(ne===5&&de.write(),_(W,ie.topic),k(W,ie.payload)),F!=null&&k(W,F),G!=null&&k(W,G),!0}(V,z);case"connack":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Y===5?Q.reasonCode:Q.returnCode,ie=Q.properties;let re=2;if(typeof ne!="number")return W.emit("error",new Error("Invalid return code")),!1;let I=null;if(Y===5){if(!(I=T(W,ie)))return!1;re+=I.length}return W.write(a.CONNACK_HEADER),$(W,re),W.write(Q.sessionPresent?a.SESSIONPRESENT_HEADER:s),W.write(o.from([ne])),I!=null&&I.write(),!0}(V,z,D);case"publish":return function(U,W,X){f("publish: packet: %o",U);const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.qos||0,ie=Q.retain?a.RETAIN_MASK:0,re=Q.topic,I=Q.payload||l,A=Q.messageId,F=Q.properties;let G=0;if(typeof re=="string")G+=o.byteLength(re)+2;else{if(!o.isBuffer(re))return W.emit("error",new Error("Invalid topic")),!1;G+=re.length+2}if(o.isBuffer(I)?G+=I.length:G+=o.byteLength(I),ne&&typeof A!="number")return W.emit("error",new Error("Invalid messageId")),!1;ne&&(G+=2);let ee=null;if(Y===5){if(!(ee=T(W,F)))return!1;G+=ee.length}return W.write(a.PUBLISH_HEADER[ne][Q.dup?1:0][ie?1:0]),$(W,G),C(W,q(re)),W.write(re),ne>0&&C(W,A),ee!=null&&ee.write(),f("publish: payload: %o",I),W.write(I)}(V,z,D);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.cmd||"puback",ie=Q.messageId,re=Q.dup&&ne==="pubrel"?a.DUP_MASK:0;let I=0;const A=Q.reasonCode,F=Q.properties;let G=Y===5?3:2;if(ne==="pubrel"&&(I=1),typeof ie!="number")return W.emit("error",new Error("Invalid messageId")),!1;let ee=null;if(Y===5&&typeof F=="object"){if(!(ee=O(W,F,X,G)))return!1;G+=ee.length}return W.write(a.ACKS[ne][I][re][0]),$(W,G),C(W,ie),Y===5&&W.write(o.from([A])),ee!==null&&ee.write(),!0}(V,z,D);case"subscribe":return function(U,W,X){f("subscribe: packet: ");const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.dup?a.DUP_MASK:0,ie=Q.messageId,re=Q.subscriptions,I=Q.properties;let A=0;if(typeof ie!="number")return W.emit("error",new Error("Invalid messageId")),!1;A+=2;let F=null;if(Y===5){if(!(F=T(W,I)))return!1;A+=F.length}if(typeof re!="object"||!re.length)return W.emit("error",new Error("Invalid subscriptions")),!1;for(let ee=0;ee<re.length;ee+=1){const te=re[ee].topic,ae=re[ee].qos;if(typeof te!="string")return W.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof ae!="number")return W.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(Y===5){if(typeof(re[ee].nl||!1)!="boolean")return W.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(re[ee].rap||!1)!="boolean")return W.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const pe=re[ee].rh||0;if(typeof pe!="number"||pe>2)return W.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}A+=o.byteLength(te)+2+1}f("subscribe: writing to stream: %o",a.SUBSCRIBE_HEADER),W.write(a.SUBSCRIBE_HEADER[1][ne?1:0][0]),$(W,A),C(W,ie),F!==null&&F.write();let G=!0;for(const ee of re){const te=ee.topic,ae=ee.qos,de=+ee.nl,he=+ee.rap,pe=ee.rh;let we;_(W,te),we=a.SUBSCRIBE_OPTIONS_QOS[ae],Y===5&&(we|=de?a.SUBSCRIBE_OPTIONS_NL:0,we|=he?a.SUBSCRIBE_OPTIONS_RAP:0,we|=pe?a.SUBSCRIBE_OPTIONS_RH[pe]:0),G=W.write(o.from([we]))}return G}(V,z,D);case"suback":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.messageId,ie=Q.granted,re=Q.properties;let I=0;if(typeof ne!="number")return W.emit("error",new Error("Invalid messageId")),!1;if(I+=2,typeof ie!="object"||!ie.length)return W.emit("error",new Error("Invalid qos vector")),!1;for(let F=0;F<ie.length;F+=1){if(typeof ie[F]!="number")return W.emit("error",new Error("Invalid qos vector")),!1;I+=1}let A=null;if(Y===5){if(!(A=O(W,re,X,I)))return!1;I+=A.length}return W.write(a.SUBACK_HEADER),$(W,I),C(W,ne),A!==null&&A.write(),W.write(o.from(ie))}(V,z,D);case"unsubscribe":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.messageId,ie=Q.dup?a.DUP_MASK:0,re=Q.unsubscriptions,I=Q.properties;let A=0;if(typeof ne!="number")return W.emit("error",new Error("Invalid messageId")),!1;if(A+=2,typeof re!="object"||!re.length)return W.emit("error",new Error("Invalid unsubscriptions")),!1;for(let ee=0;ee<re.length;ee+=1){if(typeof re[ee]!="string")return W.emit("error",new Error("Invalid unsubscriptions")),!1;A+=o.byteLength(re[ee])+2}let F=null;if(Y===5){if(!(F=T(W,I)))return!1;A+=F.length}W.write(a.UNSUBSCRIBE_HEADER[1][ie?1:0][0]),$(W,A),C(W,ne),F!==null&&F.write();let G=!0;for(let ee=0;ee<re.length;ee++)G=_(W,re[ee]);return G}(V,z,D);case"unsuback":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.messageId,ie=Q.dup?a.DUP_MASK:0,re=Q.granted,I=Q.properties,A=Q.cmd;let F=2;if(typeof ne!="number")return W.emit("error",new Error("Invalid messageId")),!1;if(Y===5){if(typeof re!="object"||!re.length)return W.emit("error",new Error("Invalid qos vector")),!1;for(let ee=0;ee<re.length;ee+=1){if(typeof re[ee]!="number")return W.emit("error",new Error("Invalid qos vector")),!1;F+=1}}let G=null;if(Y===5){if(!(G=O(W,I,X,F)))return!1;F+=G.length}return W.write(a.ACKS[A][0][ie][0]),$(W,F),C(W,ne),G!==null&&G.write(),Y===5&&W.write(o.from(re)),!0}(V,z,D);case"pingreq":case"pingresp":return function(U,W,X){return W.write(a.EMPTY[U.cmd])}(V,z);case"disconnect":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.reasonCode,ie=Q.properties;let re=Y===5?1:0,I=null;if(Y===5){if(!(I=O(W,ie,X,re)))return!1;re+=I.length}return W.write(o.from([a.codes.disconnect<<4])),$(W,re),Y===5&&W.write(o.from([ne])),I!==null&&I.write(),!0}(V,z,D);case"auth":return function(U,W,X){const Y=X?X.protocolVersion:4,Q=U||{},ne=Q.reasonCode,ie=Q.properties;let re=Y===5?1:0;Y!==5&&W.emit("error",new Error("Invalid mqtt version for auth packet"));const I=O(W,ie,X,re);return I?(re+=I.length,W.write(o.from([a.codes.auth<<4])),$(W,re),W.write(o.from([ne])),I!==null&&I.write(),!0):!1}(V,z,D);default:return z.emit("error",new Error("Unknown command")),!1}}function E(V){V.uncork()}Object.defineProperty(S,"cacheNumbers",{get:()=>C===B,set(V){V?(v&&Object.keys(v).length!==0||(x=!0),C=B):(x=!1,C=H)}});const P={};function $(V,z){if(z>a.VARBYTEINT_MAX)return V.emit("error",new Error(`Invalid variable byte integer: ${z}`)),!1;let D=P[z];return D||(D=y(z),z<16384&&(P[z]=D)),f("writeVarByteInt: writing to stream: %o",D),V.write(D)}function _(V,z){const D=o.byteLength(z);return C(V,D),f("writeString: %s",z),V.write(z,"utf8")}function M(V,z,D){_(V,z),_(V,D)}function B(V,z){return f("writeNumberCached: number: %d",z),f("writeNumberCached: %o",v[z]),V.write(v[z])}function H(V,z){const D=g(z);return f("writeNumberGenerated: %o",D),V.write(D)}function k(V,z){typeof z=="string"?_(V,z):z?(C(V,z.length),V.write(z)):C(V,0)}function T(V,z){if(typeof z!="object"||z.length!=null)return{length:1,write(){K(V,{},0)}};let D=0;function U(W,X){let Y=0;switch(a.propertiesTypes[W]){case"byte":if(typeof X!="boolean")return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=2;break;case"int8":if(typeof X!="number"||X<0||X>255)return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=2;break;case"binary":if(X&&X===null)return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=1+o.byteLength(X)+2;break;case"int16":if(typeof X!="number"||X<0||X>65535)return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=3;break;case"int32":if(typeof X!="number"||X<0||X>4294967295)return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=5;break;case"var":if(typeof X!="number"||X<0||X>268435455)return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=1+o.byteLength(y(X));break;case"string":if(typeof X!="string")return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=3+o.byteLength(X.toString());break;case"pair":if(typeof X!="object")return V.emit("error",new Error(`Invalid ${W}: ${X}`)),!1;Y+=Object.getOwnPropertyNames(X).reduce((Q,ne)=>{const ie=X[ne];return Array.isArray(ie)?Q+=ie.reduce((re,I)=>re+=3+o.byteLength(ne.toString())+2+o.byteLength(I.toString()),0):Q+=3+o.byteLength(ne.toString())+2+o.byteLength(X[ne].toString()),Q},0);break;default:return V.emit("error",new Error(`Invalid property ${W}: ${X}`)),!1}return Y}if(z)for(const W in z){let X=0,Y=0;const Q=z[W];if(Array.isArray(Q))for(let ne=0;ne<Q.length;ne++){if(!(Y=U(W,Q[ne])))return!1;X+=Y}else{if(!(Y=U(W,Q)))return!1;X=Y}if(!X)return!1;D+=X}return{length:o.byteLength(y(D))+D,write(){K(V,z,D)}}}function O(V,z,D,U){const W=["reasonString","userProperties"],X=D&&D.properties&&D.properties.maximumPacketSize?D.properties.maximumPacketSize:0;let Y=T(V,z);if(X)for(;U+Y.length>X;){const Q=W.shift();if(!Q||!z[Q])return!1;delete z[Q],Y=T(V,z)}return Y}function L(V,z,D){switch(a.propertiesTypes[z]){case"byte":V.write(o.from([a.properties[z]])),V.write(o.from([+D]));break;case"int8":V.write(o.from([a.properties[z]])),V.write(o.from([D]));break;case"binary":V.write(o.from([a.properties[z]])),k(V,D);break;case"int16":V.write(o.from([a.properties[z]])),C(V,D);break;case"int32":V.write(o.from([a.properties[z]])),function(U,W){const X=p(W);f("write4ByteNumber: %o",X),U.write(X)}(V,D);break;case"var":V.write(o.from([a.properties[z]])),$(V,D);break;case"string":V.write(o.from([a.properties[z]])),_(V,D);break;case"pair":Object.getOwnPropertyNames(D).forEach(U=>{const W=D[U];Array.isArray(W)?W.forEach(X=>{V.write(o.from([a.properties[z]])),M(V,U.toString(),X.toString())}):(V.write(o.from([a.properties[z]])),M(V,U.toString(),W.toString()))});break;default:return V.emit("error",new Error(`Invalid property ${z} value: ${D}`)),!1}}function K(V,z,D){$(V,D);for(const U in z)if(Object.prototype.hasOwnProperty.call(z,U)&&z[U]!==null){const W=z[U];if(Array.isArray(W))for(let X=0;X<W.length;X++)L(V,U,W[X]);else L(V,U,W)}}function q(V){return V?V instanceof o?V.length:o.byteLength(V):0}function J(V){return typeof V=="string"||V instanceof o}r.exports=S}).call(this)}).call(this,n("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(n,r,i){var o=1e3,a=60*o,l=60*a,s=24*l,u=7*s,c=365.25*s;function f(v,g,m,y){var p=g>=1.5*m;return Math.round(v/m)+" "+y+(p?"s":"")}r.exports=function(v,g){g=g||{};var m=typeof v;if(m==="string"&&v.length>0)return function(y){if(!((y=String(y)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(p){var C=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return C*c;case"weeks":case"week":case"w":return C*u;case"days":case"day":case"d":return C*s;case"hours":case"hour":case"hrs":case"hr":case"h":return C*l;case"minutes":case"minute":case"mins":case"min":case"m":return C*a;case"seconds":case"second":case"secs":case"sec":case"s":return C*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}(v);if(m==="number"&&isFinite(v))return g.long?function(y){var p=Math.abs(y);return p>=s?f(y,p,s,"day"):p>=l?f(y,p,l,"hour"):p>=a?f(y,p,a,"minute"):p>=o?f(y,p,o,"second"):y+" ms"}(v):function(y){var p=Math.abs(y);return p>=s?Math.round(y/s)+"d":p>=l?Math.round(y/l)+"h":p>=a?Math.round(y/a)+"m":p>=o?Math.round(y/o)+"s":y+"ms"}(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))}},{}],46:[function(n,r,i){const o=n("./lib/number-allocator.js");r.exports.NumberAllocator=o},{"./lib/number-allocator.js":47}],47:[function(n,r,i){const o=n("js-sdsl").Set,a=n("debug")("number-allocator:trace"),l=n("debug")("number-allocator:error");function s(c,f){this.low=c,this.high=f}function u(c,f){if(!(this instanceof u))return new u(c,f);this.min=c,this.max=f,this.ss=new o([],(v,g)=>v.compare(g)),a("Create"),this.clear()}s.prototype.equals=function(c){return this.low===c.low&&this.high===c.high},s.prototype.compare=function(c){return this.low<c.low&&this.high<c.low?-1:c.low<this.low&&c.high<this.low?1:0},u.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},u.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;const c=this.ss.front(),f=c.low;return f+1<=c.high?++c.low:this.ss.eraseElementByPos(0),a("alloc():"+f),f},u.prototype.use=function(c){const f=new s(c,c),v=this.ss.lowerBound(f);if(v){if(v.equals(f))return this.ss.eraseElementByValue(v),a("use():"+c),!0;if(v.low>c)return!1;if(v.low===c)return++v.low,a("use():"+c),!0;if(v.high===c)return--v.high,a("use():"+c),!0;const g=v.low;return v.low=c+1,this.ss.insert(new s(g,c-1)),a("use():"+c),!0}return a("use():failed"),!1},u.prototype.free=function(c){if(c<this.min||c>this.max)return void l("free():"+c+" is out of range");const f=new s(c,c),v=this.ss.lowerBound(f);if(v){if(v.low<=c&&c<=v.high)return void l("free():"+c+" has already been vacant");if(v===this.ss.front())c+1===v.low?--v.low:this.ss.insert(f);else{const g=this.ss.reverseLowerBound(f);g.high+1===c?c+1===v.low?(this.ss.eraseElementByValue(g),v.low=g.low):g.high=c:c+1===v.low?v.low=c:this.ss.insert(f)}}else{if(v===this.ss.front())return void this.ss.insert(f);const g=this.ss.reverseLowerBound(f);g.high+1===c?g.high=c:this.ss.insert(f)}a("free():"+c)},u.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},u.prototype.intervalCount=function(){return this.ss.size()},u.prototype.dump=function(){console.log("length:"+this.ss.size());for(const c of this.ss)console.log(c)},r.exports=u},{debug:18,"js-sdsl":36}],48:[function(n,r,i){var o=n("wrappy");function a(s){var u=function(){return u.called?u.value:(u.called=!0,u.value=s.apply(this,arguments))};return u.called=!1,u}function l(s){var u=function(){if(u.called)throw new Error(u.onceError);return u.called=!0,u.value=s.apply(this,arguments)},c=s.name||"Function wrapped with `once`";return u.onceError=c+" shouldn't be called more than once",u.called=!1,u}r.exports=o(a),r.exports.strict=o(l),a.proto=a(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return a(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return l(this)},configurable:!0})})},{wrappy:79}],49:[function(n,r,i){(function(o){(function(){o===void 0||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?r.exports={nextTick:function(a,l,s,u){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var c,f,v=arguments.length;switch(v){case 0:case 1:return o.nextTick(a);case 2:return o.nextTick(function(){a.call(null,l)});case 3:return o.nextTick(function(){a.call(null,l,s)});case 4:return o.nextTick(function(){a.call(null,l,s,u)});default:for(c=new Array(v-1),f=0;f<c.length;)c[f++]=arguments[f];return o.nextTick(function(){a.apply(null,c)})}}}:r.exports=o}).call(this)}).call(this,n("_process"))},{_process:50}],50:[function(n,r,i){var o,a,l=r.exports={};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(S){if(o===setTimeout)return setTimeout(S,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(S,0);try{return o(S,0)}catch{try{return o.call(null,S,0)}catch{return o.call(this,S,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:s}catch{o=s}try{a=typeof clearTimeout=="function"?clearTimeout:u}catch{a=u}})();var f,v=[],g=!1,m=-1;function y(){g&&f&&(g=!1,f.length?v=f.concat(v):m=-1,v.length&&p())}function p(){if(!g){var S=c(y);g=!0;for(var E=v.length;E;){for(f=v,v=[];++m<E;)f&&f[m].run();m=-1,E=v.length}f=null,g=!1,function(P){if(a===clearTimeout)return clearTimeout(P);if((a===u||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(P);try{a(P)}catch{try{return a.call(null,P)}catch{return a.call(this,P)}}}(S)}}function C(S,E){this.fun=S,this.array=E}function x(){}l.nextTick=function(S){var E=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)E[P-1]=arguments[P];v.push(new C(S,E)),v.length!==1||g||c(p)},C.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=x,l.addListener=x,l.once=x,l.off=x,l.removeListener=x,l.removeAllListeners=x,l.emit=x,l.prependListener=x,l.prependOnceListener=x,l.listeners=function(S){return[]},l.binding=function(S){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(S){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],51:[function(n,r,i){(function(o){(function(){(function(a){var l=typeof i=="object"&&i&&!i.nodeType&&i,s=typeof r=="object"&&r&&!r.nodeType&&r,u=typeof o=="object"&&o;u.global!==u&&u.window!==u&&u.self!==u||(a=u);var c,f,v=2147483647,g=36,m=1,y=26,p=38,C=700,x=72,S=128,E="-",P=/^xn--/,$=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=g-m,H=Math.floor,k=String.fromCharCode;function T(U){throw new RangeError(M[U])}function O(U,W){for(var X=U.length,Y=[];X--;)Y[X]=W(U[X]);return Y}function L(U,W){var X=U.split("@"),Y="";return X.length>1&&(Y=X[0]+"@",U=X[1]),Y+O((U=U.replace(_,".")).split("."),W).join(".")}function K(U){for(var W,X,Y=[],Q=0,ne=U.length;Q<ne;)(W=U.charCodeAt(Q++))>=55296&&W<=56319&&Q<ne?(64512&(X=U.charCodeAt(Q++)))==56320?Y.push(((1023&W)<<10)+(1023&X)+65536):(Y.push(W),Q--):Y.push(W);return Y}function q(U){return O(U,function(W){var X="";return W>65535&&(X+=k((W-=65536)>>>10&1023|55296),W=56320|1023&W),X+=k(W)}).join("")}function J(U,W){return U+22+75*(U<26)-((W!=0)<<5)}function V(U,W,X){var Y=0;for(U=X?H(U/C):U>>1,U+=H(U/W);U>B*y>>1;Y+=g)U=H(U/B);return H(Y+(B+1)*U/(U+p))}function z(U){var W,X,Y,Q,ne,ie,re,I,A,F,G,ee=[],te=U.length,ae=0,de=S,he=x;for((X=U.lastIndexOf(E))<0&&(X=0),Y=0;Y<X;++Y)U.charCodeAt(Y)>=128&&T("not-basic"),ee.push(U.charCodeAt(Y));for(Q=X>0?X+1:0;Q<te;){for(ne=ae,ie=1,re=g;Q>=te&&T("invalid-input"),((I=(G=U.charCodeAt(Q++))-48<10?G-22:G-65<26?G-65:G-97<26?G-97:g)>=g||I>H((v-ae)/ie))&&T("overflow"),ae+=I*ie,!(I<(A=re<=he?m:re>=he+y?y:re-he));re+=g)ie>H(v/(F=g-A))&&T("overflow"),ie*=F;he=V(ae-ne,W=ee.length+1,ne==0),H(ae/W)>v-de&&T("overflow"),de+=H(ae/W),ae%=W,ee.splice(ae++,0,de)}return q(ee)}function D(U){var W,X,Y,Q,ne,ie,re,I,A,F,G,ee,te,ae,de,he=[];for(ee=(U=K(U)).length,W=S,X=0,ne=x,ie=0;ie<ee;++ie)(G=U[ie])<128&&he.push(k(G));for(Y=Q=he.length,Q&&he.push(E);Y<ee;){for(re=v,ie=0;ie<ee;++ie)(G=U[ie])>=W&&G<re&&(re=G);for(re-W>H((v-X)/(te=Y+1))&&T("overflow"),X+=(re-W)*te,W=re,ie=0;ie<ee;++ie)if((G=U[ie])<W&&++X>v&&T("overflow"),G==W){for(I=X,A=g;!(I<(F=A<=ne?m:A>=ne+y?y:A-ne));A+=g)de=I-F,ae=g-F,he.push(k(J(F+de%ae,0))),I=H(de/ae);he.push(k(J(I,0))),ne=V(X,te,Y==Q),X=0,++Y}++X,++W}return he.join("")}if(c={version:"1.4.1",ucs2:{decode:K,encode:q},decode:z,encode:D,toASCII:function(U){return L(U,function(W){return $.test(W)?"xn--"+D(W):W})},toUnicode:function(U){return L(U,function(W){return P.test(W)?z(W.slice(4).toLowerCase()):W})}},l&&s)if(r.exports==l)s.exports=c;else for(f in c)c.hasOwnProperty(f)&&(l[f]=c[f]);else a.punycode=c})(this)}).call(this)}).call(this,typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(n,r,i){function o(l,s){return Object.prototype.hasOwnProperty.call(l,s)}r.exports=function(l,s,u,c){s=s||"&",u=u||"=";var f={};if(typeof l!="string"||l.length===0)return f;var v=/\+/g;l=l.split(s);var g=1e3;c&&typeof c.maxKeys=="number"&&(g=c.maxKeys);var m=l.length;g>0&&m>g&&(m=g);for(var y=0;y<m;++y){var p,C,x,S,E=l[y].replace(v,"%20"),P=E.indexOf(u);P>=0?(p=E.substr(0,P),C=E.substr(P+1)):(p=E,C=""),x=decodeURIComponent(p),S=decodeURIComponent(C),o(f,x)?a(f[x])?f[x].push(S):f[x]=[f[x],S]:f[x]=S}return f};var a=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"}},{}],53:[function(n,r,i){var o=function(u){switch(typeof u){case"string":return u;case"boolean":return u?"true":"false";case"number":return isFinite(u)?u:"";default:return""}};r.exports=function(u,c,f,v){return c=c||"&",f=f||"=",u===null&&(u=void 0),typeof u=="object"?l(s(u),function(g){var m=encodeURIComponent(o(g))+f;return a(u[g])?l(u[g],function(y){return m+encodeURIComponent(o(y))}).join(c):m+encodeURIComponent(o(u[g]))}).join(c):v?encodeURIComponent(o(v))+f+encodeURIComponent(o(u)):""};var a=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function l(u,c){if(u.map)return u.map(c);for(var f=[],v=0;v<u.length;v++)f.push(c(u[v],v));return f}var s=Object.keys||function(u){var c=[];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&c.push(f);return c}},{}],54:[function(n,r,i){i.decode=i.parse=n("./decode"),i.encode=i.stringify=n("./encode")},{"./decode":52,"./encode":53}],55:[function(n,r,i){var o={};function a(s,u,c){c||(c=Error);var f=function(v){var g,m;function y(p,C,x){return v.call(this,function(S,E,P){return typeof u=="string"?u:u(S,E,P)}(p,C,x))||this}return m=v,(g=y).prototype=Object.create(m.prototype),g.prototype.constructor=g,g.__proto__=m,y}(c);f.prototype.name=c.name,f.prototype.code=s,o[s]=f}function l(s,u){if(Array.isArray(s)){var c=s.length;return s=s.map(function(f){return String(f)}),c>2?"one of ".concat(u," ").concat(s.slice(0,c-1).join(", "),", or ")+s[c-1]:c===2?"one of ".concat(u," ").concat(s[0]," or ").concat(s[1]):"of ".concat(u," ").concat(s[0])}return"of ".concat(u," ").concat(String(s))}a("ERR_INVALID_OPT_VALUE",function(s,u){return'The value "'+u+'" is invalid for option "'+s+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(s,u,c){var f,v,g;if(typeof u=="string"&&(v="not ",u.substr(0,v.length)===v)?(f="must not be",u=u.replace(/^not /,"")):f="must be",function(y,p,C){return(C===void 0||C>y.length)&&(C=y.length),y.substring(C-p.length,C)===p}(s," argument"))g="The ".concat(s," ").concat(f," ").concat(l(u,"type"));else{var m=function(y,p,C){return typeof C!="number"&&(C=0),!(C+p.length>y.length)&&y.indexOf(p,C)!==-1}(s,".")?"property":"argument";g='The "'.concat(s,'" ').concat(m," ").concat(f," ").concat(l(u,"type"))}return g+=". Received type ".concat(typeof c)},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.codes=o},{}],56:[function(n,r,i){(function(o){(function(){var a=Object.keys||function(y){var p=[];for(var C in y)p.push(C);return p};r.exports=v;var l=n("./_stream_readable"),s=n("./_stream_writable");n("inherits")(v,l);for(var u=a(s.prototype),c=0;c<u.length;c++){var f=u[c];v.prototype[f]||(v.prototype[f]=s.prototype[f])}function v(y){if(!(this instanceof v))return new v(y);l.call(this,y),s.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}function g(){this._writableState.ended||o.nextTick(m,this)}function m(y){y.end()}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}})}).call(this)}).call(this,n("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(n,r,i){r.exports=a;var o=n("./_stream_transform");function a(l){if(!(this instanceof a))return new a(l);o.call(this,l)}n("inherits")(a,o),a.prototype._transform=function(l,s,u){u(null,l)}},{"./_stream_transform":59,inherits:24}],58:[function(n,r,i){(function(o,a){(function(){var l;r.exports=T,T.ReadableState=k,n("events").EventEmitter;var s=function(I,A){return I.listeners(A).length},u=n("./internal/streams/stream"),c=n("buffer").Buffer,f=a.Uint8Array||function(){},v,g=n("util");v=g&&g.debuglog?g.debuglog("stream"):function(){};var m,y,p,C=n("./internal/streams/buffer_list"),x=n("./internal/streams/destroy"),S=n("./internal/streams/state").getHighWaterMark,E=n("../errors").codes,P=E.ERR_INVALID_ARG_TYPE,$=E.ERR_STREAM_PUSH_AFTER_EOF,_=E.ERR_METHOD_NOT_IMPLEMENTED,M=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n("inherits")(T,u);var B=x.errorOrDestroy,H=["error","close","destroy","pause","resume"];function k(I,A,F){l=l||n("./_stream_duplex"),I=I||{},typeof F!="boolean"&&(F=A instanceof l),this.objectMode=!!I.objectMode,F&&(this.objectMode=this.objectMode||!!I.readableObjectMode),this.highWaterMark=S(this,I,"readableHighWaterMark",F),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.destroyed=!1,this.defaultEncoding=I.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,I.encoding&&(m||(m=n("string_decoder/").StringDecoder),this.decoder=new m(I.encoding),this.encoding=I.encoding)}function T(I){if(l=l||n("./_stream_duplex"),!(this instanceof T))return new T(I);var A=this instanceof l;this._readableState=new k(I,this,A),this.readable=!0,I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy)),u.call(this)}function O(I,A,F,G,ee){v("readableAddChunk",A);var te,ae=I._readableState;if(A===null)ae.reading=!1,function(de,he){if(v("onEofChunk"),!he.ended){if(he.decoder){var pe=he.decoder.end();pe&&pe.length&&(he.buffer.push(pe),he.length+=he.objectMode?1:pe.length)}he.ended=!0,he.sync?J(de):(he.needReadable=!1,he.emittedReadable||(he.emittedReadable=!0,V(de)))}}(I,ae);else if(ee||(te=function(de,he){var pe;we=he,c.isBuffer(we)||we instanceof f||typeof he=="string"||he===void 0||de.objectMode||(pe=new P("chunk",["string","Buffer","Uint8Array"],he));var we;return pe}(ae,A)),te)B(I,te);else if(ae.objectMode||A&&A.length>0)if(typeof A=="string"||ae.objectMode||Object.getPrototypeOf(A)===c.prototype||(A=function(de){return c.from(de)}(A)),G)ae.endEmitted?B(I,new M):L(I,ae,A,!0);else if(ae.ended)B(I,new $);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!F?(A=ae.decoder.write(A),ae.objectMode||A.length!==0?L(I,ae,A,!1):z(I,ae)):L(I,ae,A,!1)}else G||(ae.reading=!1,z(I,ae));return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function L(I,A,F,G){A.flowing&&A.length===0&&!A.sync?(A.awaitDrain=0,I.emit("data",F)):(A.length+=A.objectMode?1:F.length,G?A.buffer.unshift(F):A.buffer.push(F),A.needReadable&&J(I)),z(I,A)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(I){this._readableState&&(this._readableState.destroyed=I)}}),T.prototype.destroy=x.destroy,T.prototype._undestroy=x.undestroy,T.prototype._destroy=function(I,A){A(I)},T.prototype.push=function(I,A){var F,G=this._readableState;return G.objectMode?F=!0:typeof I=="string"&&((A=A||G.defaultEncoding)!==G.encoding&&(I=c.from(I,A),A=""),F=!0),O(this,I,A,!1,F)},T.prototype.unshift=function(I){return O(this,I,null,!0,!1)},T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(I){m||(m=n("string_decoder/").StringDecoder);var A=new m(I);this._readableState.decoder=A,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,G="";F!==null;)G+=A.write(F.data),F=F.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var K=1073741824;function q(I,A){return I<=0||A.length===0&&A.ended?0:A.objectMode?1:I!=I?A.flowing&&A.length?A.buffer.head.data.length:A.length:(I>A.highWaterMark&&(A.highWaterMark=function(F){return F>=K?F=K:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}(I)),I<=A.length?I:A.ended?A.length:(A.needReadable=!0,0))}function J(I){var A=I._readableState;v("emitReadable",A.needReadable,A.emittedReadable),A.needReadable=!1,A.emittedReadable||(v("emitReadable",A.flowing),A.emittedReadable=!0,o.nextTick(V,I))}function V(I){var A=I._readableState;v("emitReadable_",A.destroyed,A.length,A.ended),A.destroyed||!A.length&&!A.ended||(I.emit("readable"),A.emittedReadable=!1),A.needReadable=!A.flowing&&!A.ended&&A.length<=A.highWaterMark,Y(I)}function z(I,A){A.readingMore||(A.readingMore=!0,o.nextTick(D,I,A))}function D(I,A){for(;!A.reading&&!A.ended&&(A.length<A.highWaterMark||A.flowing&&A.length===0);){var F=A.length;if(v("maybeReadMore read 0"),I.read(0),F===A.length)break}A.readingMore=!1}function U(I){var A=I._readableState;A.readableListening=I.listenerCount("readable")>0,A.resumeScheduled&&!A.paused?A.flowing=!0:I.listenerCount("data")>0&&I.resume()}function W(I){v("readable nexttick read 0"),I.read(0)}function X(I,A){v("resume",A.reading),A.reading||I.read(0),A.resumeScheduled=!1,I.emit("resume"),Y(I),A.flowing&&!A.reading&&I.read(0)}function Y(I){var A=I._readableState;for(v("flow",A.flowing);A.flowing&&I.read()!==null;);}function Q(I,A){return A.length===0?null:(A.objectMode?F=A.buffer.shift():!I||I>=A.length?(F=A.decoder?A.buffer.join(""):A.buffer.length===1?A.buffer.first():A.buffer.concat(A.length),A.buffer.clear()):F=A.buffer.consume(I,A.decoder),F);var F}function ne(I){var A=I._readableState;v("endReadable",A.endEmitted),A.endEmitted||(A.ended=!0,o.nextTick(ie,A,I))}function ie(I,A){if(v("endReadableNT",I.endEmitted,I.length),!I.endEmitted&&I.length===0&&(I.endEmitted=!0,A.readable=!1,A.emit("end"),I.autoDestroy)){var F=A._writableState;(!F||F.autoDestroy&&F.finished)&&A.destroy()}}function re(I,A){for(var F=0,G=I.length;F<G;F++)if(I[F]===A)return F;return-1}T.prototype.read=function(I){v("read",I),I=parseInt(I,10);var A=this._readableState,F=I;if(I!==0&&(A.emittedReadable=!1),I===0&&A.needReadable&&((A.highWaterMark!==0?A.length>=A.highWaterMark:A.length>0)||A.ended))return v("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?ne(this):J(this),null;if((I=q(I,A))===0&&A.ended)return A.length===0&&ne(this),null;var G,ee=A.needReadable;return v("need readable",ee),(A.length===0||A.length-I<A.highWaterMark)&&v("length less than watermark",ee=!0),A.ended||A.reading?v("reading or ended",ee=!1):ee&&(v("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(I=q(F,A))),(G=I>0?Q(I,A):null)===null?(A.needReadable=A.length<=A.highWaterMark,I=0):(A.length-=I,A.awaitDrain=0),A.length===0&&(A.ended||(A.needReadable=!0),F!==I&&A.ended&&ne(this)),G!==null&&this.emit("data",G),G},T.prototype._read=function(I){B(this,new _("_read()"))},T.prototype.pipe=function(I,A){var F=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=I;break;case 1:G.pipes=[G.pipes,I];break;default:G.pipes.push(I)}G.pipesCount+=1,v("pipe count=%d opts=%j",G.pipesCount,A);var ee=(!A||A.end!==!1)&&I!==o.stdout&&I!==o.stderr?ae:Me;function te(Re,be){v("onunpipe"),Re===F&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,v("cleanup"),I.removeListener("close",_e),I.removeListener("finish",$e),I.removeListener("drain",de),I.removeListener("error",we),I.removeListener("unpipe",te),F.removeListener("end",ae),F.removeListener("end",Me),F.removeListener("data",pe),he=!0,!G.awaitDrain||I._writableState&&!I._writableState.needDrain||de())}function ae(){v("onend"),I.end()}G.endEmitted?o.nextTick(ee):F.once("end",ee),I.on("unpipe",te);var de=function(Re){return function(){var be=Re._readableState;v("pipeOnDrain",be.awaitDrain),be.awaitDrain&&be.awaitDrain--,be.awaitDrain===0&&s(Re,"data")&&(be.flowing=!0,Y(Re))}}(F);I.on("drain",de);var he=!1;function pe(Re){v("ondata");var be=I.write(Re);v("dest.write",be),be===!1&&((G.pipesCount===1&&G.pipes===I||G.pipesCount>1&&re(G.pipes,I)!==-1)&&!he&&(v("false write response, pause",G.awaitDrain),G.awaitDrain++),F.pause())}function we(Re){v("onerror",Re),Me(),I.removeListener("error",we),s(I,"error")===0&&B(I,Re)}function _e(){I.removeListener("finish",$e),Me()}function $e(){v("onfinish"),I.removeListener("close",_e),Me()}function Me(){v("unpipe"),F.unpipe(I)}return F.on("data",pe),function(Re,be,Le){if(typeof Re.prependListener=="function")return Re.prependListener(be,Le);Re._events&&Re._events[be]?Array.isArray(Re._events[be])?Re._events[be].unshift(Le):Re._events[be]=[Le,Re._events[be]]:Re.on(be,Le)}(I,"error",we),I.once("close",_e),I.once("finish",$e),I.emit("pipe",F),G.flowing||(v("pipe resume"),F.resume()),I},T.prototype.unpipe=function(I){var A=this._readableState,F={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return I&&I!==A.pipes?this:(I||(I=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,I&&I.emit("unpipe",this,F),this);if(!I){var G=A.pipes,ee=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var te=0;te<ee;te++)G[te].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=re(A.pipes,I);return ae===-1?this:(A.pipes.splice(ae,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),I.emit("unpipe",this,F),this)},T.prototype.on=function(I,A){var F=u.prototype.on.call(this,I,A),G=this._readableState;return I==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):I==="readable"&&(G.endEmitted||G.readableListening||(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,v("on readable",G.length,G.reading),G.length?J(this):G.reading||o.nextTick(W,this))),F},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(I,A){var F=u.prototype.removeListener.call(this,I,A);return I==="readable"&&o.nextTick(U,this),F},T.prototype.removeAllListeners=function(I){var A=u.prototype.removeAllListeners.apply(this,arguments);return I!=="readable"&&I!==void 0||o.nextTick(U,this),A},T.prototype.resume=function(){var I=this._readableState;return I.flowing||(v("resume"),I.flowing=!I.readableListening,function(A,F){F.resumeScheduled||(F.resumeScheduled=!0,o.nextTick(X,A,F))}(this,I)),I.paused=!1,this},T.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(I){var A=this,F=this._readableState,G=!1;for(var ee in I.on("end",function(){if(v("wrapped end"),F.decoder&&!F.ended){var ae=F.decoder.end();ae&&ae.length&&A.push(ae)}A.push(null)}),I.on("data",function(ae){v("wrapped data"),F.decoder&&(ae=F.decoder.write(ae)),(!F.objectMode||ae!=null)&&(F.objectMode||ae&&ae.length)&&(A.push(ae)||(G=!0,I.pause()))}),I)this[ee]===void 0&&typeof I[ee]=="function"&&(this[ee]=function(ae){return function(){return I[ae].apply(I,arguments)}}(ee));for(var te=0;te<H.length;te++)I.on(H[te],this.emit.bind(this,H[te]));return this._read=function(ae){v("wrapped _read",ae),G&&(G=!1,I.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return y===void 0&&(y=n("./internal/streams/async_iterator")),y(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(I){this._readableState&&(this._readableState.flowing=I)}}),T._fromList=Q,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(T.from=function(I,A){return p===void 0&&(p=n("./internal/streams/from")),p(T,I,A)})}).call(this)}).call(this,n("_process"),typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(n,r,i){r.exports=f;var o=n("../errors").codes,a=o.ERR_METHOD_NOT_IMPLEMENTED,l=o.ERR_MULTIPLE_CALLBACK,s=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=o.ERR_TRANSFORM_WITH_LENGTH_0,c=n("./_stream_duplex");function f(m){if(!(this instanceof f))return new f(m);c.call(this,m),this._transformState={afterTransform:(function(y,p){var C=this._transformState;C.transforming=!1;var x=C.writecb;if(x===null)return this.emit("error",new l);C.writechunk=null,C.writecb=null,p!=null&&this.push(p),x(y);var S=this._readableState;S.reading=!1,(S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}).bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",v)}function v(){var m=this;typeof this._flush!="function"||this._readableState.destroyed?g(this,null,null):this._flush(function(y,p){g(m,y,p)})}function g(m,y,p){if(y)return m.emit("error",y);if(p!=null&&m.push(p),m._writableState.length)throw new u;if(m._transformState.transforming)throw new s;return m.push(null)}n("inherits")(f,c),f.prototype.push=function(m,y){return this._transformState.needTransform=!1,c.prototype.push.call(this,m,y)},f.prototype._transform=function(m,y,p){p(new a("_transform()"))},f.prototype._write=function(m,y,p){var C=this._transformState;if(C.writecb=p,C.writechunk=m,C.writeencoding=y,!C.transforming){var x=this._readableState;(C.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},f.prototype._read=function(m){var y=this._transformState;y.writechunk===null||y.transforming?y.needTransform=!0:(y.transforming=!0,this._transform(y.writechunk,y.writeencoding,y.afterTransform))},f.prototype._destroy=function(m,y){c.prototype._destroy.call(this,m,function(p){y(p)})}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(n,r,i){(function(o,a){(function(){function l(z){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(U,W,X){var Y=U.entry;for(U.entry=null;Y;){var Q=Y.callback;W.pendingcb--,Q(X),Y=Y.next}W.corkedRequestsFree.next=U})(D,z)}}var s;r.exports=T,T.WritableState=k;var u={deprecate:n("util-deprecate")},c=n("./internal/streams/stream"),f=n("buffer").Buffer,v=a.Uint8Array||function(){},g,m=n("./internal/streams/destroy"),y=n("./internal/streams/state").getHighWaterMark,p=n("../errors").codes,C=p.ERR_INVALID_ARG_TYPE,x=p.ERR_METHOD_NOT_IMPLEMENTED,S=p.ERR_MULTIPLE_CALLBACK,E=p.ERR_STREAM_CANNOT_PIPE,P=p.ERR_STREAM_DESTROYED,$=p.ERR_STREAM_NULL_VALUES,_=p.ERR_STREAM_WRITE_AFTER_END,M=p.ERR_UNKNOWN_ENCODING,B=m.errorOrDestroy;function H(){}function k(z,D,U){s=s||n("./_stream_duplex"),z=z||{},typeof U!="boolean"&&(U=D instanceof s),this.objectMode=!!z.objectMode,U&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=y(this,z,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var W=z.decodeStrings===!1;this.decodeStrings=!W,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){(function(Y,Q){var ne=Y._writableState,ie=ne.sync,re=ne.writecb;if(typeof re!="function")throw new S;if(function(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}(ne),Q)(function(A,F,G,ee,te){--F.pendingcb,G?(o.nextTick(te,ee),o.nextTick(V,A,F),A._writableState.errorEmitted=!0,B(A,ee)):(te(ee),A._writableState.errorEmitted=!0,B(A,ee),V(A,F))})(Y,ne,ie,Q,re);else{var I=q(ne)||Y.destroyed;I||ne.corked||ne.bufferProcessing||!ne.bufferedRequest||K(Y,ne),ie?o.nextTick(L,Y,ne,I,re):L(Y,ne,I,re)}})(D,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function T(z){var D=this instanceof(s=s||n("./_stream_duplex"));if(!D&&!g.call(T,this))return new T(z);this._writableState=new k(z,this,D),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),c.call(this)}function O(z,D,U,W,X,Y,Q){D.writelen=W,D.writecb=Q,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new P("write")):U?z._writev(X,D.onwrite):z._write(X,Y,D.onwrite),D.sync=!1}function L(z,D,U,W){U||function(X,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,X.emit("drain"))}(z,D),D.pendingcb--,W(),V(z,D)}function K(z,D){D.bufferProcessing=!0;var U=D.bufferedRequest;if(z._writev&&U&&U.next){var W=D.bufferedRequestCount,X=new Array(W),Y=D.corkedRequestsFree;Y.entry=U;for(var Q=0,ne=!0;U;)X[Q]=U,U.isBuf||(ne=!1),U=U.next,Q+=1;X.allBuffers=ne,O(z,D,!0,D.length,X,"",Y.finish),D.pendingcb++,D.lastBufferedRequest=null,Y.next?(D.corkedRequestsFree=Y.next,Y.next=null):D.corkedRequestsFree=new l(D),D.bufferedRequestCount=0}else{for(;U;){var ie=U.chunk,re=U.encoding,I=U.callback;if(O(z,D,!1,D.objectMode?1:ie.length,ie,re,I),U=U.next,D.bufferedRequestCount--,D.writing)break}U===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=U,D.bufferProcessing=!1}function q(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function J(z,D){z._final(function(U){D.pendingcb--,U&&B(z,U),D.prefinished=!0,z.emit("prefinish"),V(z,D)})}function V(z,D){var U=q(D);if(U&&(function(X,Y){Y.prefinished||Y.finalCalled||(typeof X._final!="function"||Y.destroyed?(Y.prefinished=!0,X.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,o.nextTick(J,X,Y)))}(z,D),D.pendingcb===0&&(D.finished=!0,z.emit("finish"),D.autoDestroy))){var W=z._readableState;(!W||W.autoDestroy&&W.endEmitted)&&z.destroy()}return U}n("inherits")(T,c),k.prototype.getBuffer=function(){for(var z=this.bufferedRequest,D=[];z;)D.push(z),z=z.next;return D},function(){try{Object.defineProperty(k.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(z){return!!g.call(this,z)||this===T&&z&&z._writableState instanceof k}})):g=function(z){return z instanceof this},T.prototype.pipe=function(){B(this,new E)},T.prototype.write=function(z,D,U){var W,X=this._writableState,Y=!1,Q=!X.objectMode&&(W=z,f.isBuffer(W)||W instanceof v);return Q&&!f.isBuffer(z)&&(z=function(ne){return f.from(ne)}(z)),typeof D=="function"&&(U=D,D=null),Q?D="buffer":D||(D=X.defaultEncoding),typeof U!="function"&&(U=H),X.ending?function(ne,ie){var re=new _;B(ne,re),o.nextTick(ie,re)}(this,U):(Q||function(ne,ie,re,I){var A;return re===null?A=new $:typeof re=="string"||ie.objectMode||(A=new C("chunk",["string","Buffer"],re)),!A||(B(ne,A),o.nextTick(I,A),!1)}(this,X,z,U))&&(X.pendingcb++,Y=function(ne,ie,re,I,A,F){if(!re){var G=function(de,he,pe){return de.objectMode||de.decodeStrings===!1||typeof he!="string"||(he=f.from(he,pe)),he}(ie,I,A);I!==G&&(re=!0,A="buffer",I=G)}var ee=ie.objectMode?1:I.length;ie.length+=ee;var te=ie.length<ie.highWaterMark;if(te||(ie.needDrain=!0),ie.writing||ie.corked){var ae=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:I,encoding:A,isBuf:re,callback:F,next:null},ae?ae.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else O(ne,ie,!1,ee,I,A,F);return te}(this,X,Q,z,D,U)),Y},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||K(this,z))},T.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new M(z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(z,D,U){U(new x("_write()"))},T.prototype._writev=null,T.prototype.end=function(z,D,U){var W=this._writableState;return typeof z=="function"?(U=z,z=null,D=null):typeof D=="function"&&(U=D,D=null),z!=null&&this.write(z,D),W.corked&&(W.corked=1,this.uncork()),W.ending||function(X,Y,Q){Y.ending=!0,V(X,Y),Q&&(Y.finished?o.nextTick(Q):X.once("finish",Q)),Y.ended=!0,X.writable=!1}(this,W,U),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),T.prototype.destroy=m.destroy,T.prototype._undestroy=m.undestroy,T.prototype._destroy=function(z,D){D(z)}}).call(this)}).call(this,n("_process"),typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(n,r,i){(function(o){(function(){var a;function l(E,P,$){return P in E?Object.defineProperty(E,P,{value:$,enumerable:!0,configurable:!0,writable:!0}):E[P]=$,E}var s=n("./end-of-stream"),u=Symbol("lastResolve"),c=Symbol("lastReject"),f=Symbol("error"),v=Symbol("ended"),g=Symbol("lastPromise"),m=Symbol("handlePromise"),y=Symbol("stream");function p(E,P){return{value:E,done:P}}function C(E){var P=E[u];if(P!==null){var $=E[y].read();$!==null&&(E[g]=null,E[u]=null,E[c]=null,P(p($,!1)))}}var x=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((l(a={get stream(){return this[y]},next:function(){var E=this,P=this[f];if(P!==null)return Promise.reject(P);if(this[v])return Promise.resolve(p(void 0,!0));if(this[y].destroyed)return new Promise(function(B,H){o.nextTick(function(){E[f]?H(E[f]):B(p(void 0,!0))})});var $,_=this[g];if(_)$=new Promise(function(B,H){return function(k,T){B.then(function(){H[v]?k(p(void 0,!0)):H[m](k,T)},T)}}(_,this));else{var M=this[y].read();if(M!==null)return Promise.resolve(p(M,!1));$=new Promise(this[m])}return this[g]=$,$}},Symbol.asyncIterator,function(){return this}),l(a,"return",function(){var E=this;return new Promise(function(P,$){E[y].destroy(null,function(_){_?$(_):P(p(void 0,!0))})})}),a),x);r.exports=function(E){var P,$=Object.create(S,(l(P={},y,{value:E,writable:!0}),l(P,u,{value:null,writable:!0}),l(P,c,{value:null,writable:!0}),l(P,f,{value:null,writable:!0}),l(P,v,{value:E._readableState.endEmitted,writable:!0}),l(P,m,{value:function(_,M){var B=$[y].read();B?($[g]=null,$[u]=null,$[c]=null,_(p(B,!1))):($[u]=_,$[c]=M)},writable:!0}),P));return $[g]=null,s(E,function(_){if(_&&_.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=$[c];return M!==null&&($[g]=null,$[u]=null,$[c]=null,M(_)),void($[f]=_)}var B=$[u];B!==null&&($[g]=null,$[u]=null,$[c]=null,B(p(void 0,!0))),$[v]=!0}),E.on("readable",(function(_){o.nextTick(C,_)}).bind(null,$)),$}}).call(this)}).call(this,n("_process"))},{"./end-of-stream":64,_process:50}],62:[function(n,r,i){function o(f,v){var g=Object.keys(f);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(f);v&&(m=m.filter(function(y){return Object.getOwnPropertyDescriptor(f,y).enumerable})),g.push.apply(g,m)}return g}function a(f,v,g){return v in f?Object.defineProperty(f,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):f[v]=g,f}function l(f,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var s=n("buffer").Buffer,u=n("util").inspect,c=u&&u.custom||"inspect";r.exports=function(){function f(){(function(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}var v,g;return v=f,(g=[{key:"push",value:function(m){var y={data:m,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(m){var y={data:m,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var y=this.head,p=""+y.data;y=y.next;)p+=m+y.data;return p}},{key:"concat",value:function(m){if(this.length===0)return s.alloc(0);for(var y,p,C,x=s.allocUnsafe(m>>>0),S=this.head,E=0;S;)y=S.data,p=x,C=E,s.prototype.copy.call(y,p,C),E+=S.data.length,S=S.next;return x}},{key:"consume",value:function(m,y){var p;return m<this.head.data.length?(p=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):p=m===this.head.data.length?this.shift():y?this._getString(m):this._getBuffer(m),p}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var y=this.head,p=1,C=y.data;for(m-=C.length;y=y.next;){var x=y.data,S=m>x.length?x.length:m;if(S===x.length?C+=x:C+=x.slice(0,m),(m-=S)===0){S===x.length?(++p,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=x.slice(S));break}++p}return this.length-=p,C}},{key:"_getBuffer",value:function(m){var y=s.allocUnsafe(m),p=this.head,C=1;for(p.data.copy(y),m-=p.data.length;p=p.next;){var x=p.data,S=m>x.length?x.length:m;if(x.copy(y,y.length-m,0,S),(m-=S)===0){S===x.length?(++C,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=x.slice(S));break}++C}return this.length-=C,y}},{key:c,value:function(m,y){return u(this,function(p){for(var C=1;C<arguments.length;C++){var x=arguments[C]!=null?arguments[C]:{};C%2?o(Object(x),!0).forEach(function(S){a(p,S,x[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(x)):o(Object(x)).forEach(function(S){Object.defineProperty(p,S,Object.getOwnPropertyDescriptor(x,S))})}return p}({},y,{depth:0,customInspect:!1}))}}])&&l(v.prototype,g),f}()},{buffer:17,util:16}],63:[function(n,r,i){(function(o){(function(){function a(u,c){s(u,c),l(u)}function l(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function s(u,c){u.emit("error",c)}r.exports={destroy:function(u,c){var f=this,v=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return v||g?(c?c(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(s,this,u)):o.nextTick(s,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(m){!c&&m?f._writableState?f._writableState.errorEmitted?o.nextTick(l,f):(f._writableState.errorEmitted=!0,o.nextTick(a,f,m)):o.nextTick(a,f,m):c?(o.nextTick(l,f),c(m)):o.nextTick(l,f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,c){var f=u._readableState,v=u._writableState;f&&f.autoDestroy||v&&v.autoDestroy?u.destroy(c):u.emit("error",c)}}}).call(this)}).call(this,n("_process"))},{_process:50}],64:[function(n,r,i){var o=n("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}r.exports=function l(s,u,c){if(typeof u=="function")return l(s,null,u);u||(u={}),c=function(P){var $=!1;return function(){if(!$){$=!0;for(var _=arguments.length,M=new Array(_),B=0;B<_;B++)M[B]=arguments[B];P.apply(this,M)}}}(c||a);var f=u.readable||u.readable!==!1&&s.readable,v=u.writable||u.writable!==!1&&s.writable,g=function(){s.writable||y()},m=s._writableState&&s._writableState.finished,y=function(){v=!1,m=!0,f||c.call(s)},p=s._readableState&&s._readableState.endEmitted,C=function(){f=!1,p=!0,v||c.call(s)},x=function(P){c.call(s,P)},S=function(){var P;return f&&!p?(s._readableState&&s._readableState.ended||(P=new o),c.call(s,P)):v&&!m?(s._writableState&&s._writableState.ended||(P=new o),c.call(s,P)):void 0},E=function(){s.req.on("finish",y)};return function(P){return P.setHeader&&typeof P.abort=="function"}(s)?(s.on("complete",y),s.on("abort",S),s.req?E():s.on("request",E)):v&&!s._writableState&&(s.on("end",g),s.on("close",g)),s.on("end",C),s.on("finish",y),u.error!==!1&&s.on("error",x),s.on("close",S),function(){s.removeListener("complete",y),s.removeListener("abort",S),s.removeListener("request",E),s.req&&s.req.removeListener("finish",y),s.removeListener("end",g),s.removeListener("close",g),s.removeListener("finish",y),s.removeListener("end",C),s.removeListener("error",x),s.removeListener("close",S)}}},{"../../../errors":55}],65:[function(n,r,i){r.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(n,r,i){var o,a=n("../../../errors").codes,l=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function u(v){if(v)throw v}function c(v){v()}function f(v,g){return v.pipe(g)}r.exports=function(){for(var v=arguments.length,g=new Array(v),m=0;m<v;m++)g[m]=arguments[m];var y,p=function(x){return x.length?typeof x[x.length-1]!="function"?u:x.pop():u}(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new l("streams");var C=g.map(function(x,S){var E=S<g.length-1;return function(P,$,_,M){M=function(k){var T=!1;return function(){T||(T=!0,k.apply(void 0,arguments))}}(M);var B=!1;P.on("close",function(){B=!0}),o===void 0&&(o=n("./end-of-stream")),o(P,{readable:$,writable:_},function(k){if(k)return M(k);B=!0,M()});var H=!1;return function(k){if(!B&&!H)return H=!0,function(T){return T.setHeader&&typeof T.abort=="function"}(P)?P.abort():typeof P.destroy=="function"?P.destroy():void M(k||new s("pipe"))}}(x,E,S>0,function(P){y||(y=P),P&&C.forEach(c),E||(C.forEach(c),p(y))})});return g.reduce(f)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(n,r,i){var o=n("../../../errors").codes.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(a,l,s,u){var c=function(f,v,g){return f.highWaterMark!=null?f.highWaterMark:v?f[g]:null}(l,u,s);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new o(u?s:"highWaterMark",c);return Math.floor(c)}return a.objectMode?16:16384}}},{"../../../errors":55}],68:[function(n,r,i){r.exports=n("events").EventEmitter},{events:22}],69:[function(n,r,i){(i=r.exports=n("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=n("./lib/_stream_writable.js"),i.Duplex=n("./lib/_stream_duplex.js"),i.Transform=n("./lib/_stream_transform.js"),i.PassThrough=n("./lib/_stream_passthrough.js"),i.finished=n("./lib/internal/streams/end-of-stream.js"),i.pipeline=n("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(n,r,i){r.exports=function(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var o;if(arguments.length>0){o=new Array(arguments.length-2);for(var a=0;a<o.length;a++)o[a]=arguments[a+2]}return new function(l,s,u){var c=this;this._callback=l,this._args=u,this._interval=setInterval(l,s,this._args),this.reschedule=function(f){f||(f=c._interval),c._interval&&clearInterval(c._interval),c._interval=setInterval(c._callback,f,c._args)},this.clear=function(){c._interval&&(clearInterval(c._interval),c._interval=void 0)},this.destroy=function(){c._interval&&clearInterval(c._interval),c._callback=void 0,c._interval=void 0,c._args=void 0}}(arguments[0],arguments[1],o)}},{}],71:[function(n,r,i){r.exports=n("./index.js")()},{"./index.js":72}],72:[function(n,r,i){(function(o){(function(){function a(l){return l instanceof o?o.from(l):new l.constructor(l.buffer.slice(),l.byteOffset,l.length)}r.exports=function(l){return(l=l||{}).circles?function(u){var c=[],f=[];return u.proto?function g(m){if(typeof m!="object"||m===null)return m;if(m instanceof Date)return new Date(m);if(Array.isArray(m))return v(m,g);if(m instanceof Map)return new Map(v(Array.from(m),g));if(m instanceof Set)return new Set(v(Array.from(m),g));var y={};for(var p in c.push(m),f.push(y),m){var C=m[p];if(typeof C!="object"||C===null)y[p]=C;else if(C instanceof Date)y[p]=new Date(C);else if(C instanceof Map)y[p]=new Map(v(Array.from(C),g));else if(C instanceof Set)y[p]=new Set(v(Array.from(C),g));else if(ArrayBuffer.isView(C))y[p]=a(C);else{var x=c.indexOf(C);y[p]=x!==-1?f[x]:g(C)}}return c.pop(),f.pop(),y}:function g(m){if(typeof m!="object"||m===null)return m;if(m instanceof Date)return new Date(m);if(Array.isArray(m))return v(m,g);if(m instanceof Map)return new Map(v(Array.from(m),g));if(m instanceof Set)return new Set(v(Array.from(m),g));var y={};for(var p in c.push(m),f.push(y),m)if(Object.hasOwnProperty.call(m,p)!==!1){var C=m[p];if(typeof C!="object"||C===null)y[p]=C;else if(C instanceof Date)y[p]=new Date(C);else if(C instanceof Map)y[p]=new Map(v(Array.from(C),g));else if(C instanceof Set)y[p]=new Set(v(Array.from(C),g));else if(ArrayBuffer.isView(C))y[p]=a(C);else{var x=c.indexOf(C);y[p]=x!==-1?f[x]:g(C)}}return c.pop(),f.pop(),y};function v(g,m){for(var y=Object.keys(g),p=new Array(y.length),C=0;C<y.length;C++){var x=y[C],S=g[x];if(typeof S!="object"||S===null)p[x]=S;else if(S instanceof Date)p[x]=new Date(S);else if(ArrayBuffer.isView(S))p[x]=a(S);else{var E=c.indexOf(S);p[x]=E!==-1?f[E]:m(S)}}return p}}(l):l.proto?function u(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return s(c,u);if(c instanceof Map)return new Map(s(Array.from(c),u));if(c instanceof Set)return new Set(s(Array.from(c),u));var f={};for(var v in c){var g=c[v];typeof g!="object"||g===null?f[v]=g:g instanceof Date?f[v]=new Date(g):g instanceof Map?f[v]=new Map(s(Array.from(g),u)):g instanceof Set?f[v]=new Set(s(Array.from(g),u)):ArrayBuffer.isView(g)?f[v]=a(g):f[v]=u(g)}return f}:function u(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return s(c,u);if(c instanceof Map)return new Map(s(Array.from(c),u));if(c instanceof Set)return new Set(s(Array.from(c),u));var f={};for(var v in c)if(Object.hasOwnProperty.call(c,v)!==!1){var g=c[v];typeof g!="object"||g===null?f[v]=g:g instanceof Date?f[v]=new Date(g):g instanceof Map?f[v]=new Map(s(Array.from(g),u)):g instanceof Set?f[v]=new Set(s(Array.from(g),u)):ArrayBuffer.isView(g)?f[v]=a(g):f[v]=u(g)}return f};function s(u,c){for(var f=Object.keys(u),v=new Array(f.length),g=0;g<f.length;g++){var m=f[g],y=u[m];typeof y!="object"||y===null?v[m]=y:y instanceof Date?v[m]=new Date(y):ArrayBuffer.isView(y)?v[m]=a(y):v[m]=c(y)}return v}}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:17}],73:[function(n,r,i){var o=n("buffer"),a=o.Buffer;function l(u,c){for(var f in u)c[f]=u[f]}function s(u,c,f){return a(u,c,f)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?r.exports=o:(l(o,i),i.Buffer=s),s.prototype=Object.create(a.prototype),l(a,s),s.from=function(u,c,f){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,c,f)},s.alloc=function(u,c,f){if(typeof u!="number")throw new TypeError("Argument must be a number");var v=a(u);return c!==void 0?typeof f=="string"?v.fill(c,f):v.fill(c):v.fill(0),v},s.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},s.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(u)}},{buffer:17}],74:[function(n,r,i){r.exports=function(o){var a=o._readableState;return a?a.objectMode||typeof o._duplexState=="number"?o.read():o.read((l=a,l.buffer.length?l.buffer.head?l.buffer.head.data.length:l.buffer[0].length:l.length)):null;var l}},{}],75:[function(n,r,i){var o=n("safe-buffer").Buffer,a=o.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(p){var C;switch(this.encoding=function(x){var S=function(E){if(!E)return"utf8";for(var P;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(P)return;E=(""+E).toLowerCase(),P=!0}}(x);if(typeof S!="string"&&(o.isEncoding===a||!a(x)))throw new Error("Unknown encoding: "+x);return S||x}(p),this.encoding){case"utf16le":this.text=c,this.end=f,C=4;break;case"utf8":this.fillLast=u,C=4;break;case"base64":this.text=v,this.end=g,C=3;break;default:return this.write=m,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(C)}function s(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function u(p){var C=this.lastTotal-this.lastNeed,x=function(S,E,P){if((192&E[0])!=128)return S.lastNeed=0,"�";if(S.lastNeed>1&&E.length>1){if((192&E[1])!=128)return S.lastNeed=1,"�";if(S.lastNeed>2&&E.length>2&&(192&E[2])!=128)return S.lastNeed=2,"�"}}(this,p);return x!==void 0?x:this.lastNeed<=p.length?(p.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,C,0,p.length),void(this.lastNeed-=p.length))}function c(p,C){if((p.length-C)%2==0){var x=p.toString("utf16le",C);if(x){var S=x.charCodeAt(x.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",C,p.length-1)}function f(p){var C=p&&p.length?this.write(p):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,x)}return C}function v(p,C){var x=(p.length-C)%3;return x===0?p.toString("base64",C):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",C,p.length-x))}function g(p){var C=p&&p.length?this.write(p):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function m(p){return p.toString(this.encoding)}function y(p){return p&&p.length?this.write(p):""}i.StringDecoder=l,l.prototype.write=function(p){if(p.length===0)return"";var C,x;if(this.lastNeed){if((C=this.fillLast(p))===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<p.length?C?C+this.text(p,x):this.text(p,x):C||""},l.prototype.end=function(p){var C=p&&p.length?this.write(p):"";return this.lastNeed?C+"�":C},l.prototype.text=function(p,C){var x=function(E,P,$){var _=P.length-1;if(_<$)return 0;var M=s(P[_]);return M>=0?(M>0&&(E.lastNeed=M-1),M):--_<$||M===-2?0:(M=s(P[_]))>=0?(M>0&&(E.lastNeed=M-2),M):--_<$||M===-2?0:(M=s(P[_]))>=0?(M>0&&(M===2?M=0:E.lastNeed=M-3),M):0}(this,p,C);if(!this.lastNeed)return p.toString("utf8",C);this.lastTotal=x;var S=p.length-(x-this.lastNeed);return p.copy(this.lastChar,0,S),p.toString("utf8",C,S)},l.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},{"safe-buffer":73}],76:[function(n,r,i){var o=n("punycode"),a=n("./util");function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=P,i.resolve=function($,_){return P($,!1,!0).resolve(_)},i.resolveObject=function($,_){return $?P($,!1,!0).resolveObject(_):_},i.format=function($){return a.isString($)&&($=P($)),$ instanceof l?$.format():l.prototype.format.call($)},i.Url=l;var s=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),v=["'"].concat(f),g=["%","/","?",";","#"].concat(v),m=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n("querystring");function P($,_,M){if($&&a.isObject($)&&$ instanceof l)return $;var B=new l;return B.parse($,_,M),B}l.prototype.parse=function($,_,M){if(!a.isString($))throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var B=$.indexOf("?"),H=B!==-1&&B<$.indexOf("#")?"?":"#",k=$.split(H);k[0]=k[0].replace(/\\/g,"/");var T=$=k.join(H);if(T=T.trim(),!M&&$.split("#").length===1){var O=c.exec(T);if(O)return this.path=T,this.href=T,this.pathname=O[1],O[2]?(this.search=O[2],this.query=_?E.parse(this.search.substr(1)):this.search.substr(1)):_&&(this.search="",this.query={}),this}var L=s.exec(T);if(L){var K=(L=L[0]).toLowerCase();this.protocol=K,T=T.substr(L.length)}if(M||L||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var q=T.substr(0,2)==="//";!q||L&&x[L]||(T=T.substr(2),this.slashes=!0)}if(!x[L]&&(q||L&&!S[L])){for(var J,V,z=-1,D=0;D<m.length;D++)(U=T.indexOf(m[D]))!==-1&&(z===-1||U<z)&&(z=U);for((V=z===-1?T.lastIndexOf("@"):T.lastIndexOf("@",z))!==-1&&(J=T.slice(0,V),T=T.slice(V+1),this.auth=decodeURIComponent(J)),z=-1,D=0;D<g.length;D++){var U;(U=T.indexOf(g[D]))!==-1&&(z===-1||U<z)&&(z=U)}z===-1&&(z=T.length),this.host=T.slice(0,z),T=T.slice(z),this.parseHost(),this.hostname=this.hostname||"";var W=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!W)for(var X=this.hostname.split(/\./),Y=(D=0,X.length);D<Y;D++){var Q=X[D];if(Q&&!Q.match(y)){for(var ne="",ie=0,re=Q.length;ie<re;ie++)Q.charCodeAt(ie)>127?ne+="x":ne+=Q[ie];if(!ne.match(y)){var I=X.slice(0,D),A=X.slice(D+1),F=Q.match(p);F&&(I.push(F[1]),A.unshift(F[2])),A.length&&(T="/"+A.join(".")+T),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),W||(this.hostname=o.toASCII(this.hostname));var G=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+G,this.href+=this.host,W&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),T[0]!=="/"&&(T="/"+T))}if(!C[K])for(D=0,Y=v.length;D<Y;D++){var te=v[D];if(T.indexOf(te)!==-1){var ae=encodeURIComponent(te);ae===te&&(ae=escape(te)),T=T.split(te).join(ae)}}var de=T.indexOf("#");de!==-1&&(this.hash=T.substr(de),T=T.slice(0,de));var he=T.indexOf("?");if(he!==-1?(this.search=T.substr(he),this.query=T.substr(he+1),_&&(this.query=E.parse(this.query)),T=T.slice(0,he)):_&&(this.search="",this.query={}),T&&(this.pathname=T),S[K]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var pe=this.search||"";this.path=G+pe}return this.href=this.format(),this},l.prototype.format=function(){var $=this.auth||"";$&&($=($=encodeURIComponent($)).replace(/%3A/i,":"),$+="@");var _=this.protocol||"",M=this.pathname||"",B=this.hash||"",H=!1,k="";this.host?H=$+this.host:this.hostname&&(H=$+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(H+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(k=E.stringify(this.query));var T=this.search||k&&"?"+k||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||S[_])&&H!==!1?(H="//"+(H||""),M&&M.charAt(0)!=="/"&&(M="/"+M)):H||(H=""),B&&B.charAt(0)!=="#"&&(B="#"+B),T&&T.charAt(0)!=="?"&&(T="?"+T),_+H+(M=M.replace(/[?#]/g,function(O){return encodeURIComponent(O)}))+(T=T.replace("#","%23"))+B},l.prototype.resolve=function($){return this.resolveObject(P($,!1,!0)).format()},l.prototype.resolveObject=function($){if(a.isString($)){var _=new l;_.parse($,!1,!0),$=_}for(var M=new l,B=Object.keys(this),H=0;H<B.length;H++){var k=B[H];M[k]=this[k]}if(M.hash=$.hash,$.href==="")return M.href=M.format(),M;if($.slashes&&!$.protocol){for(var T=Object.keys($),O=0;O<T.length;O++){var L=T[O];L!=="protocol"&&(M[L]=$[L])}return S[M.protocol]&&M.hostname&&!M.pathname&&(M.path=M.pathname="/"),M.href=M.format(),M}if($.protocol&&$.protocol!==M.protocol){if(!S[$.protocol]){for(var K=Object.keys($),q=0;q<K.length;q++){var J=K[q];M[J]=$[J]}return M.href=M.format(),M}if(M.protocol=$.protocol,$.host||x[$.protocol])M.pathname=$.pathname;else{for(var V=($.pathname||"").split("/");V.length&&!($.host=V.shift()););$.host||($.host=""),$.hostname||($.hostname=""),V[0]!==""&&V.unshift(""),V.length<2&&V.unshift(""),M.pathname=V.join("/")}if(M.search=$.search,M.query=$.query,M.host=$.host||"",M.auth=$.auth,M.hostname=$.hostname||$.host,M.port=$.port,M.pathname||M.search){var z=M.pathname||"",D=M.search||"";M.path=z+D}return M.slashes=M.slashes||$.slashes,M.href=M.format(),M}var U=M.pathname&&M.pathname.charAt(0)==="/",W=$.host||$.pathname&&$.pathname.charAt(0)==="/",X=W||U||M.host&&$.pathname,Y=X,Q=M.pathname&&M.pathname.split("/")||[],ne=(V=$.pathname&&$.pathname.split("/")||[],M.protocol&&!S[M.protocol]);if(ne&&(M.hostname="",M.port=null,M.host&&(Q[0]===""?Q[0]=M.host:Q.unshift(M.host)),M.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(V[0]===""?V[0]=$.host:V.unshift($.host)),$.host=null),X=X&&(V[0]===""||Q[0]==="")),W)M.host=$.host||$.host===""?$.host:M.host,M.hostname=$.hostname||$.hostname===""?$.hostname:M.hostname,M.search=$.search,M.query=$.query,Q=V;else if(V.length)Q||(Q=[]),Q.pop(),Q=Q.concat(V),M.search=$.search,M.query=$.query;else if(!a.isNullOrUndefined($.search))return ne&&(M.hostname=M.host=Q.shift(),(F=!!(M.host&&M.host.indexOf("@")>0)&&M.host.split("@"))&&(M.auth=F.shift(),M.host=M.hostname=F.shift())),M.search=$.search,M.query=$.query,a.isNull(M.pathname)&&a.isNull(M.search)||(M.path=(M.pathname?M.pathname:"")+(M.search?M.search:"")),M.href=M.format(),M;if(!Q.length)return M.pathname=null,M.search?M.path="/"+M.search:M.path=null,M.href=M.format(),M;for(var ie=Q.slice(-1)[0],re=(M.host||$.host||Q.length>1)&&(ie==="."||ie==="..")||ie==="",I=0,A=Q.length;A>=0;A--)(ie=Q[A])==="."?Q.splice(A,1):ie===".."?(Q.splice(A,1),I++):I&&(Q.splice(A,1),I--);if(!X&&!Y)for(;I--;I)Q.unshift("..");!X||Q[0]===""||Q[0]&&Q[0].charAt(0)==="/"||Q.unshift(""),re&&Q.join("/").substr(-1)!=="/"&&Q.push("");var F,G=Q[0]===""||Q[0]&&Q[0].charAt(0)==="/";return ne&&(M.hostname=M.host=G?"":Q.length?Q.shift():"",(F=!!(M.host&&M.host.indexOf("@")>0)&&M.host.split("@"))&&(M.auth=F.shift(),M.host=M.hostname=F.shift())),(X=X||M.host&&Q.length)&&!G&&Q.unshift(""),Q.length?M.pathname=Q.join("/"):(M.pathname=null,M.path=null),a.isNull(M.pathname)&&a.isNull(M.search)||(M.path=(M.pathname?M.pathname:"")+(M.search?M.search:"")),M.auth=$.auth||M.auth,M.slashes=M.slashes||$.slashes,M.href=M.format(),M},l.prototype.parseHost=function(){var $=this.host,_=u.exec($);_&&((_=_[0])!==":"&&(this.port=_.substr(1)),$=$.substr(0,$.length-_.length)),$&&(this.hostname=$)}},{"./util":77,punycode:51,querystring:54}],77:[function(n,r,i){r.exports={isString:function(o){return typeof o=="string"},isObject:function(o){return typeof o=="object"&&o!==null},isNull:function(o){return o===null},isNullOrUndefined:function(o){return o==null}}},{}],78:[function(n,r,i){(function(o){(function(){function a(l){try{if(!o.localStorage)return!1}catch{return!1}var s=o.localStorage[l];return s!=null&&String(s).toLowerCase()==="true"}r.exports=function(l,s){if(a("noDeprecation"))return l;var u=!1;return function(){if(!u){if(a("throwDeprecation"))throw new Error(s);a("traceDeprecation")?console.trace(s):console.warn(s),u=!0}return l.apply(this,arguments)}}}).call(this)}).call(this,typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(n,r,i){r.exports=function o(a,l){if(a&&l)return o(a)(l);if(typeof a!="function")throw new TypeError("need wrapper function");return Object.keys(a).forEach(function(u){s[u]=a[u]}),s;function s(){for(var u=new Array(arguments.length),c=0;c<u.length;c++)u[c]=arguments[c];var f=a.apply(this,u),v=u[u.length-1];return typeof f=="function"&&f!==v&&Object.keys(v).forEach(function(g){f[g]=v[g]}),f}}},{}],80:[function(n,r,i){r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(n,r,i){r.exports=function(){for(var a={},l=0;l<arguments.length;l++){var s=arguments[l];for(var u in s)o.call(s,u)&&(a[u]=s[u])}return a};var o=Object.prototype.hasOwnProperty},{}],82:[function(n,r,i){r.exports=function(o){o.prototype[Symbol.iterator]=function*(){for(let a=this.head;a;a=a.next)yield a.value}}},{}],83:[function(n,r,i){function o(c){var f=this;if(f instanceof o||(f=new o),f.tail=null,f.head=null,f.length=0,c&&typeof c.forEach=="function")c.forEach(function(m){f.push(m)});else if(arguments.length>0)for(var v=0,g=arguments.length;v<g;v++)f.push(arguments[v]);return f}function a(c,f,v){var g=f===c.head?new u(v,null,f,c):new u(v,f,f.next,c);return g.next===null&&(c.tail=g),g.prev===null&&(c.head=g),c.length++,g}function l(c,f){c.tail=new u(f,c.tail,null,c),c.head||(c.head=c.tail),c.length++}function s(c,f){c.head=new u(f,null,c.head,c),c.tail||(c.tail=c.head),c.length++}function u(c,f,v,g){if(!(this instanceof u))return new u(c,f,v,g);this.list=g,this.value=c,f?(f.next=this,this.prev=f):this.prev=null,v?(v.prev=this,this.next=v):this.next=null}r.exports=o,o.Node=u,o.create=o,o.prototype.removeNode=function(c){if(c.list!==this)throw new Error("removing node which does not belong to this list");var f=c.next,v=c.prev;return f&&(f.prev=v),v&&(v.next=f),c===this.head&&(this.head=f),c===this.tail&&(this.tail=v),c.list.length--,c.next=null,c.prev=null,c.list=null,f},o.prototype.unshiftNode=function(c){if(c!==this.head){c.list&&c.list.removeNode(c);var f=this.head;c.list=this,c.next=f,f&&(f.prev=c),this.head=c,this.tail||(this.tail=c),this.length++}},o.prototype.pushNode=function(c){if(c!==this.tail){c.list&&c.list.removeNode(c);var f=this.tail;c.list=this,c.prev=f,f&&(f.next=c),this.tail=c,this.head||(this.head=c),this.length++}},o.prototype.push=function(){for(var c=0,f=arguments.length;c<f;c++)l(this,arguments[c]);return this.length},o.prototype.unshift=function(){for(var c=0,f=arguments.length;c<f;c++)s(this,arguments[c]);return this.length},o.prototype.pop=function(){if(this.tail){var c=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,c}},o.prototype.shift=function(){if(this.head){var c=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,c}},o.prototype.forEach=function(c,f){f=f||this;for(var v=this.head,g=0;v!==null;g++)c.call(f,v.value,g,this),v=v.next},o.prototype.forEachReverse=function(c,f){f=f||this;for(var v=this.tail,g=this.length-1;v!==null;g--)c.call(f,v.value,g,this),v=v.prev},o.prototype.get=function(c){for(var f=0,v=this.head;v!==null&&f<c;f++)v=v.next;if(f===c&&v!==null)return v.value},o.prototype.getReverse=function(c){for(var f=0,v=this.tail;v!==null&&f<c;f++)v=v.prev;if(f===c&&v!==null)return v.value},o.prototype.map=function(c,f){f=f||this;for(var v=new o,g=this.head;g!==null;)v.push(c.call(f,g.value,this)),g=g.next;return v},o.prototype.mapReverse=function(c,f){f=f||this;for(var v=new o,g=this.tail;g!==null;)v.push(c.call(f,g.value,this)),g=g.prev;return v},o.prototype.reduce=function(c,f){var v,g=this.head;if(arguments.length>1)v=f;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");g=this.head.next,v=this.head.value}for(var m=0;g!==null;m++)v=c(v,g.value,m),g=g.next;return v},o.prototype.reduceReverse=function(c,f){var v,g=this.tail;if(arguments.length>1)v=f;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");g=this.tail.prev,v=this.tail.value}for(var m=this.length-1;g!==null;m--)v=c(v,g.value,m),g=g.prev;return v},o.prototype.toArray=function(){for(var c=new Array(this.length),f=0,v=this.head;v!==null;f++)c[f]=v.value,v=v.next;return c},o.prototype.toArrayReverse=function(){for(var c=new Array(this.length),f=0,v=this.tail;v!==null;f++)c[f]=v.value,v=v.prev;return c},o.prototype.slice=function(c,f){(f=f||this.length)<0&&(f+=this.length),(c=c||0)<0&&(c+=this.length);var v=new o;if(f<c||f<0)return v;c<0&&(c=0),f>this.length&&(f=this.length);for(var g=0,m=this.head;m!==null&&g<c;g++)m=m.next;for(;m!==null&&g<f;g++,m=m.next)v.push(m.value);return v},o.prototype.sliceReverse=function(c,f){(f=f||this.length)<0&&(f+=this.length),(c=c||0)<0&&(c+=this.length);var v=new o;if(f<c||f<0)return v;c<0&&(c=0),f>this.length&&(f=this.length);for(var g=this.length,m=this.tail;m!==null&&g>f;g--)m=m.prev;for(;m!==null&&g>c;g--,m=m.prev)v.push(m.value);return v},o.prototype.splice=function(c,f,...v){c>this.length&&(c=this.length-1),c<0&&(c=this.length+c);for(var g=0,m=this.head;m!==null&&g<c;g++)m=m.next;var y=[];for(g=0;m&&g<f;g++)y.push(m.value),m=this.removeNode(m);for(m===null&&(m=this.tail),m!==this.head&&m!==this.tail&&(m=m.prev),g=0;g<v.length;g++)m=a(this,m,v[g]);return y},o.prototype.reverse=function(){for(var c=this.head,f=this.tail,v=c;v!==null;v=v.prev){var g=v.prev;v.prev=v.next,v.next=g}return this.head=f,this.tail=c,this};try{n("./iterator.js")(o)}catch{}},{"./iterator.js":82}]},{},[12])(12)})}(Mv)),Mv.exports}var ud=D$();const Db={success:{color:"#2ba471",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 23a11 11 0 100-22 11 11 0 000 22zM7.5 10.59l3 3 6-6L17.91 9l-7.41 7.41L6.09 12l1.41-1.41z"></path></svg>'},info:{color:"#0052d9",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 23a11 11 0 100-22 11 11 0 000 22zM11 8.5v-2h2v2h-2zm2 1.5v7.5h-2V10h2z"></path></svg>'},warning:{color:"#e37318",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 1a11 11 0 110 22 11 11 0 010-22zm-1 13h2V6.5h-2V14zm2 1.5h-2v2h2v-2z"></path></svg>'},error:{color:"#d54941",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 1a11 11 0 110 22 11 11 0 010-22zm-1 13h2V6.5h-2V14zm2 1.5h-2v2h2v-2z"></path></svg>'},question:{color:"#0052d9",icon:'<svg fill="none" viewBox="0 0 24 24"><path d="M12 23a11 11 0 100-22 11 11 0 000 22zm-.17-11.11c.43-.53.97-.97 1.4-1.32A2 2 0 0012 7a2 2 0 00-1.89 1.33l-.33.95L7.9 8.6l.34-.94a4 4 0 116.24 4.47 7 7 0 00-1.1 1.01c-.27.34-.37.61-.37.85v1.25h-2V14c0-.87.39-1.57.83-2.11zM11 18.25v-2h2v2h-2z"></path></svg>'}},di={};class F${constructor(e,n){se(this,"parentElement");se(this,"box");se(this,"icon");se(this,"text");se(this,"closeBtn");se(this,"duration");se(this,"content");se(this,"theme");se(this,"placement");se(this,"height");se(this,"id");this.parentElement=e,this.box=document.createElement("div"),this.icon=document.createElement("div"),this.text=document.createElement("div"),this.box.className="meta2d-message",this.icon.className="icon",this.text.className="text",this.icon.innerHTML=Db[n.theme||"info"].icon,this.text.innerHTML=n.content,this.box.appendChild(this.icon),this.box.appendChild(this.text),n.closeBtn&&(this.closeBtn=document.createElement("div"),this.closeBtn.className="close",this.closeBtn.innerHTML="x",this.closeBtn.onclick=()=>{this.close()},this.box.appendChild(this.closeBtn)),e.appendChild(this.box);let r;for(let i=0;i<document.styleSheets.length;i++)document.styleSheets[i].title==="le5le.com/message"&&(r=document.styleSheets[i]);if(!r){let i=document.createElement("style");i.type="text/css",i.title="le5le.com/message",document.head.appendChild(i),i=document.createElement("style"),i.type="text/css",document.head.appendChild(i),r=i.sheet,r.insertRule(`.meta2d-message{
           position:absolute;
           z-index:999;
           transform: translateX(-50%); 
           padding:12px 16px;
           max-width:400px;
           background:#fff;
           border-radius:6px;
           box-shadow:0 3px 14px 2px rgba(0, 0, 0, .05),0 8px 10px 1px rgba(0, 0, 0, 6%),0 5px 5px -3px rgba(0, 0, 0, 10%);
           display:flex;
           animation: fadein .5s;}`),r.insertRule(`
        @keyframes fadein {
          0% {
              transform: translate(-50%, -100%);
          }
          100% {
              transform: translate(-50%,0);
          }
      }`),r.insertRule(".meta2d-message .icon{width:20px;height:20px;}"),r.insertRule(".meta2d-message .text{color:rgba(0, 0, 0, 0.9);font-size:12px;margin-left:8px;line-height:20px;}"),r.insertRule(".meta2d-message .close{width:20px;height:20px;padding-left: 16px; cursor: pointer;}")}this.id=n.id||Wt(),this.duration=n.duration??3e3,this.placement=n.placement||"top",this.theme=n.theme||"info",this.height=n.height}init(){di[this.id]=this,this.duration&&setTimeout(()=>{this.close()},this.duration);let e=-1;Object.keys(di).forEach(n=>{var r;((r=di[n])==null?void 0:r.placement)===this.placement&&e++}),this.setPosition(this.placement,e),this.icon.children[0].style.fill=Db[this.theme].color}setPosition(e,n=0){switch(e){case"top":this.box.style.top=`${30+n*(this.height||60)}px`,this.box.style.left="50%";break;case"bottom":this.box.style.bottom=`${30+n*(this.height||60)}px`,this.box.style.left="50%";break;case"left":this.box.style.top=`${30+n*(this.height||60)}px`,this.box.style.left="30px";break;case"right":this.box.style.top=`${30+n*(this.height||60)}px`,this.box.style.right="30px";break}}close(){Object.keys(di).forEach(e=>{var n;if(((n=di[e])==null?void 0:n.placement)===this.placement)switch(this.placement){case"top":case"left":case"right":di[e].box.style.top=parseInt(di[e].box.style.top)-60+"px";break;case"bottom":di[e].box.style.bottom=parseInt(di[e].box.style.bottom)-60+"px";break}}),di[this.id]=null,delete di[this.id],this.box.remove()}}function B$(t,e){if(t.jetLinksList.length){let n=e.url;n.startsWith("/")&&(n=(location.protocol==="https:"?"wss://":"ws://")+window.location.host+n),t.jetLinksClient=new WebSocket(`${n}/${localStorage.getItem("X-Access-Token")||Cc("X-Access-Token")||new URLSearchParams(location.search).get("X-Access-Token")||""}`),t.jetLinksClient.onmessage=r=>{var o;const i=JSON.parse(r.data);if(i.payload)if((o=i.payload)!=null&&o.properties){const a=[];for(let l in i.payload.properties)a.push({id:`${i.payload.headers.productId}#${i.payload.deviceId}#${l}`,value:i.payload.properties[l]});t.setDatas(a,{history:!1})}else i.topic.startsWith("/notifications")&&fC(t,i)},t.jetLinksClient.onopen=()=>{t.jetLinksList.forEach(r=>{t.jetLinksClient.send(JSON.stringify({type:"sub",topic:`/device${r.topic}/message/property/report`,parameter:{deviceId:r.deviceId,properties:r.properties,history:1},id:r.topic+"-"+Wt()}))}),e.notification&&t.jetLinksClient.send(JSON.stringify({type:"sub",topic:"/notifications",id:"notification",parameter:{}}))}}}function fC(t,e){var a,l;let n=e.payload.topicName,r=e.payload.message,i=e.payload.notifyTime,o=`<div style="padding:0px 12px 0px 0px;width:300px;">
      <div style="display:flex;height: 20px;justify-content: space-between">
        <div style="color: #000000d9;
      font-size: 14px;
      font-weight: 700;">${n}</div><div style="color: #00000073;">${j$(i)}</div>
      </div>
      <span>${r}</span>
   </div>`;t.message({content:o,duration:0,closeBtn:!0,placement:"right",height:75}),(a=e.payload.detail)!=null&&a.alarmConfigId&&W$(t,(l=e.payload.detail)==null?void 0:l.alarmConfigId)}globalThis.doWarning=fC;function j$(t){const e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1+"").padStart(2,"0"),i=(e.getDate()+"").padStart(2,"0"),o=(e.getHours()+"").padStart(2,"0"),a=(e.getMinutes()+"").padStart(2,"0"),l=(e.getSeconds()+"").padStart(2,"0");return n+"-"+r+"-"+i+" "+o+":"+a+":"+l}function z$(t){t.jetLinksClient&&(t.jetLinksClient.close(),t.jetLinksClient=void 0)}function H$(t,e,n){const r=[];return n.list.forEach((i,o)=>{var l,s;const a=i.params?t.findOne(i.params):e;r[o]={deviceId:a.deviceId,productId:a.productId,properties:{}};for(let u in i.value)if(i.value[u]===void 0||i.value[u]===""){const c=(l=a.realTimes)==null?void 0:l.find(f=>f.propertyId===u);c&&(r[o].properties[u]=a[c.key])}else if(typeof i.value[u]=="string"&&((s=i.value[u])==null?void 0:s.indexOf("${"))>-1){let c=i.value[u].match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));c!=null&&c.length&&(r[o].properties[u]=a[c[0]]??t.getDynamicParam(c[0]))}else r[o].properties[u]=i.value[u]}),r}async function V$(t,e){e.forEach(async n=>{let r=n.deviceId;if(r&&r.indexOf("${")>-1){let o=r.match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));o!=null&&o.length&&(r=t.getDynamicParam(o[0])||r)}(await fetch(`/api/device-instance/${r}/property`,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")||new URLSearchParams(location.search).get("X-Access-Token")||"","Content-Type":"application/json"},method:"put",body:JSON.stringify(n.properties)})).ok?(console.info("发送成功"),t.message({theme:"success",content:"下发成功"})):t.message({theme:"error",content:"下发失败"})})}async function W$(t,e){const n=await fetch(`/api/alarm/config/${e}`,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")||new URLSearchParams(location.search).get("X-Access-Token")||"","Content-Type":"application/json"},method:"GET"});if(n.ok){let r=await n.json();r.result.media&&hC(t,r.result.media,r.result.playTimes)}}function hC(t,e,n){if(t.store.globalAudio||(t.store.globalAudio=document.createElement("audio")),t.store.globalAudio.src=e,t.store.globalAudio.play(),n===-1)t.store.globalAudio.loop=!0;else{t.store.globalAudio.loop=!1;let r=0;t.store.globalAudio.onended=()=>{r++,r<n&&t.store.globalAudio.play()}}}globalThis.createAudio=hC;class vC{constructor(e,n={}){se(this,"store");se(this,"canvas");se(this,"websocket");se(this,"mqttClient");se(this,"websockets");se(this,"mqttClients");se(this,"eventSources");se(this,"penPluginMap",new Map);se(this,"socketFn");se(this,"events",{});se(this,"map");se(this,"mapTimer");se(this,"facePen",cl);se(this,"getWords",T1);se(this,"calcTextLines",pf);se(this,"calcTextRect",ca);se(this,"calcTextDrawRect",$1);se(this,"jetLinksList",[]);se(this,"jetLinksClient");se(this,"register",GI);se(this,"registerCanvasDraw",XI);se(this,"registerAnchors",YI);se(this,"registerLineAnimateDraws",(e,n)=>{this.store.data.lineAnimateDraws[e]=n,Tt.lineAnimateDraws[e]=new Function("ctx","pen","state","index",n)});se(this,"websocketTimes",0);se(this,"mqttTimes",0);se(this,"httpTimer");se(this,"httpTimerList",[]);se(this,"updateTimer");se(this,"updateTimerList",[]);se(this,"sqlTimerList",[]);se(this,"iotMqttClient");se(this,"iotTimer");se(this,"iotWebsocketClient");se(this,"onEvent",(e,n)=>{switch(e){case"add":n.forEach(r=>{var i;(i=r.onAdd)==null||i.call(r,r)}),this.onSizeUpdate();break;case"enter":n&&n.onMouseEnter&&n.onMouseEnter(n,this.canvas.mousePos),this.store.data.locked&&this.doEvent(n,e);break;case"leave":n&&n.onMouseLeave&&n.onMouseLeave(n,this.canvas.mousePos),this.store.data.locked&&this.doEvent(n,e);break;case"active":case"inactive":this.store.data.locked&&n.forEach(r=>{this.doEvent(r,e)});break;case"click":if(this.store.data.locked&&n.pen&&!n.pen.disabled&&n.pen.switch&&(n.pen.checked=!n.pen.checked,n.pen.calculative.checked=n.pen.checked,n.pen.calculative.gradient=void 0,n.pen.calculative.radialGradient=void 0),n.pen&&n.pen.formId){const r=this.store.pens[n.pen.formId];n.pen.formType==="submit"?this.store.data.locked&&r&&!r.disabled&&this.doEvent(r,"submit"):n.pen.formType==="reset"&&(S$(n.pen),this.store.data.locked&&r&&!r.disabled&&this.doEvent(r,"reset"))}n.pen&&n.pen.onClick&&!n.pen.disabled&&n.pen.onClick(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"contextmenu":n.pen&&n.pen.onContextmenu&&!n.pen.disabled&&n.pen.onContextmenu(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"mousedown":n.pen&&n.pen.onMouseDown&&!n.pen.disabled&&n.pen.onMouseDown(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"mouseup":n.pen&&n.pen.onMouseUp&&!n.pen.disabled&&n.pen.onMouseUp(n.pen,this.canvas.mousePos),this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"dblclick":this.store.data.locked&&n.pen&&!n.pen.disabled&&this.doEvent(n.pen,e);break;case"valueUpdate":n&&Mb(n,n.formValue),this.store.data.locked&&this.doEvent(n,e),this.canvas.tooltip.updateText(n);break;case"update":case"delete":case"translatePens":case"rotatePens":case"resizePens":this.onSizeUpdate();break;case"navigator":this.store.data.id||console.warn("请先保存当前图纸"),this.navigatorTo(n.params);break;case"input":this.store.data.locked&&n&&!n.disabled&&this.doEvent(n,e);break;case"change":n.pen&&Mb(n.pen),n.pen?this.store.data.locked&&!n.pen.disabled&&this.doEvent(n.pen,e):this.store.data.locked&&n&&!n.disabled&&this.doEvent(n,e);break}this.doMessageEvent(e,n)});se(this,"doEvent",(e,n)=>{var o,a,l,s,u,c,f,v,g,m;if(!e)return;let r=!1,i=[];if((o=e.events)==null||o.forEach((y,p)=>{var C;if(y.actions&&y.actions.length){if(y.name===n){let x=!1;y.conditions&&y.conditions.length?y.conditionType==="and"?x=y.conditions.every(S=>this.judgeCondition(e,S.key,S)):y.conditionType==="or"&&(x=y.conditions.some(S=>this.judgeCondition(e,S.key,S))):x=!0,x&&i.push(p)}}else if(r=!0,this.events[y.action]&&y.name===n){let x=!((C=y.where)!=null&&C.type);if(y.where){const{fn:S,fnJs:E,comparison:P,key:$,value:_}=y.where;if(S)x=S(e,{meta2d:this});else if(E){try{y.where.fn=new Function("pen","context",E)}catch(M){console.error("Error: make function:",M)}y.where.fn&&(x=y.where.fn(e,{meta2d:this}))}else{let M=e[$];switch(["x","y","width","height"].includes($)&&(M=this.getPenRect(e)[$]),P){case">":x=M>+_;break;case">=":x=M>=+_;break;case"<":x=M<+_;break;case"<=":x=M<=+_;break;case"=":case"==":x=M==_;break;case"!=":x=M!=_;break;case"[)":x=_s(+M,_);break;case"![)":x=!_s(+M,_);break;case"[]":x=As(M,_);break;case"![]":x=!As(M,_);break}}}x&&i.push(p)}}),r?(a=e.events)==null||a.forEach((y,p)=>{i.includes(p)&&this.events[y.action](e,y)}):(l=e.events)==null||l.forEach(async(y,p)=>{if(i.includes(p)){if(y.confirm&&!await this.canvas.popconfirm.showModal(e,this.canvas.mousePos,y.confirmTitle))return;y.actions.forEach(C=>{if(C.timeout){let x=setTimeout(()=>{this.events[C.action]&&(this.events[C.action](e,C),clearTimeout(x),x=null)},C.timeout)}else this.events[C.action]&&this.events[C.action](e,C)})}}),n==="valueUpdate"){(s=e.realTimes)==null||s.forEach(p=>{var x,S;let C=[];(x=p.triggers)==null||x.forEach((E,P)=>{var _;let $=!1;(_=E.conditions)!=null&&_.length?E.conditionType==="and"?$=E.conditions.every(M=>this.judgeCondition(e,p.key,M)):E.conditionType==="or"&&($=E.conditions.some(M=>this.judgeCondition(e,p.key,M))):$=!0,$&&C.push(P)}),(S=p.triggers)==null||S.forEach((E,P)=>{var $;C.includes(P)&&(($=E.actions)==null||$.forEach(_=>{if(_.timeout){let M=setTimeout(()=>{this.events[_.action]&&(this.events[_.action](e,_),clearTimeout(M),M=null)},_.timeout)}else this.events[_.action](e,_)}))})});let y=[];if((u=this.store.globalTriggers[e.id])==null||u.forEach((p,C)=>{var S;let x=!1;(S=p.conditions)!=null&&S.length?p.conditionType==="and"?x=p.conditions.every(E=>this.judgeCondition(this.store.pens[E.source],E.key,E)):p.conditionType==="or"&&(x=p.conditions.some(E=>this.judgeCondition(this.store.pens[E.source],E.key,E))):x=!0,x&&y.push(C)}),(c=this.store.globalTriggers[e.id])==null||c.forEach((p,C)=>{var x;y.includes(C)&&((x=p.actions)==null||x.forEach(S=>{if(S.timeout){let E=setTimeout(()=>{this.events[S.action]&&(this.events[S.action](e,S),clearTimeout(E),E=null)},S.timeout)}else this.events[S.action](e,S)}))}),(f=e.triggers)!=null&&f.length){for(let p of e.triggers)if((v=p.status)!=null&&v.length)for(let C of p.status){let x=!1;if((g=C.conditions)!=null&&g.length?C.conditionType==="and"?x=C.conditions.every(S=>this.judgeCondition(e,S.key,S)):C.conditionType==="or"&&(x=C.conditions.some(S=>this.judgeCondition(e,S.key,S))):x=!0,x){(m=C.actions)==null||m.forEach(S=>{if(S.timeout){let E=setTimeout(()=>{this.events[S.action]&&(this.events[S.action](e,S),clearTimeout(E),E=null)},S.timeout)}else this.events[S.action](e,S)});break}}}}this.doEvent(this.store.pens[e.parentId],n)});se(this,"doDataEvent",e=>{var i,o,a;if(!((i=this.store.data.dataEvents)!=null&&i.length))return;const n=e.reduce((l,{dataId:s,id:u,value:c})=>(l[u||s]=c,l),{});let r=[];(o=this.store.data.dataEvents)==null||o.forEach((l,s)=>{let u=!1;l.conditions&&l.conditions.length?l.conditionType==="and"?u=l.conditions.every(c=>this.dataJudegeCondition(n,c.key,c)):l.conditionType==="or"&&(u=l.conditions.some(c=>this.dataJudegeCondition(n,c.key,c))):u=!0,u&&r.push(s)}),(a=this.store.data.dataEvents)==null||a.forEach((l,s)=>{var u;r.includes(s)&&((u=l.actions)==null||u.forEach(c=>{this.events[c.action](n,c)}))})});se(this,"renderPenRaw",Kd);se(this,"setElemPosition",mi);se(this,"setLifeCycleFunc",ek);this.store=nP(Wt()),this.setOptions(n),this.setDatabyOptions(n),this.init(e),this.register(M$()),this.registerCanvasDraw({cube:Ok}),this.registerAnchors(N$()),globalThis.meta2d=this,this.initEventFns(),this.store.emitter.on("*",this.onEvent)}get beforeAddPen(){return this.canvas.beforeAddPen}set beforeAddPen(e){this.canvas.beforeAddPen=e}get beforeAddPens(){return this.canvas.beforeAddPens}set beforeAddPens(e){this.canvas.beforeAddPens=e}get beforeAddAnchor(){return this.canvas.beforeAddAnchor}set beforeAddAnchor(e){this.canvas.beforeAddAnchor=e}get beforeRemovePens(){return this.canvas.beforeRemovePens}set beforeRemovePens(e){this.canvas.beforeRemovePens=e}get beforeRemoveAnchor(){return this.canvas.beforeRemoveAnchor}set beforeRemoveAnchor(e){this.canvas.beforeRemoveAnchor=e}setOptions(e={}){var n,r;(e.grid!==void 0||e.gridColor!==void 0||e.gridSize!==void 0)&&this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0),(e.rule!==void 0||e.ruleColor!==void 0||e.ruleOptions!==void 0)&&(this.store.patchFlagsTop=!0,e.ruleOptions&&(n=this.store.options)!=null&&n.ruleOptions&&(Object.assign(this.store.options.ruleOptions,e.ruleOptions),e.ruleOptions=this.store.options.ruleOptions)),e.background!==void 0&&this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0),e.resizeMode!==void 0&&(e.resizeMode||(this.canvas.hotkeyType=Sn.None)),(e.width!==void 0||e.height!==void 0)&&(this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0),this.canvas&&this.canvas.canvasTemplate.canvas.style.backgroundImage&&(this.canvas.canvasTemplate.canvas.style.backgroundImage="")),this.store.options=Object.assign(this.store.options,e),this.canvas&&e.scroll!==void 0&&(e.scroll?(!this.canvas.scroll&&(this.canvas.scroll=new lC(this.canvas)),this.canvas.scroll.show()):this.canvas.scroll&&this.canvas.scroll.hide()),(r=this.canvas)==null||r.initGlobalStyle()}getOptions(){return this.store.options}registerTheme(e,n){if(!Array.isArray(n))return;const r=/^\s*\S+\s*:\s*\S+\s*$/;if(!n.every(l=>r.test(l)))return;const o={},a=[];for(let l=0;l<n.length;l++){const u=n[l].split(":"),c=u[0].trim(),f=u[1].trim();a.push([c,f].join(":")),o[c]=f}sc.addTheme(e,a),this.store.theme[e]=o}setTheme(e){if(this.store.data.theme=e,this.setBackgroundColor(this.store.theme[e].background),this.canvas.parentElement.style.background=this.store.theme[e].parentBackground,this.setOptions({ruleColor:this.store.theme[e].ruleColor,ruleOptions:this.store.theme[e].ruleOptions}),!(this.store.options.themeOnlyCanvas||this.store.data.themeOnlyCanvas)){this.store.data.color=this.store.theme[e].color,sc.updateCssRule(this.store.id,e),this.canvas.initGlobalStyle();for(let n=0;n<this.store.data.pens.length;n++){const r=this.store.data.pens[n];r.setTheme&&r.setTheme(r,this.store.styles)}}this.render()}setDatabyOptions(e={}){const{color:n,activeColor:r,activeBackground:i,grid:o,gridColor:a,gridSize:l,fromArrow:s,toArrow:u,rule:c,ruleColor:f,textColor:v,x:g=0,y:m=0}=e;this.setRule({rule:c,ruleColor:f}),this.setGrid({grid:o,gridColor:a,gridSize:l}),this.store.data=Object.assign(this.store.data,{textColor:v,color:n,activeColor:r,activeBackground:i,fromArrow:s,toArrow:u,x:g,y:m})}init(e){typeof e=="string"?this.canvas=new Ab(this,document.getElementById(e),this.store):this.canvas=new Ab(this,e,this.store),this.canvas.initGlobalStyle(),this.resize(),this.canvas.listen(),sc.createThemeSheet(this.store.data.theme,this.store.id)}initEventFns(){this.events[Jn.Link]=(e,n)=>{var r;if(window&&n.value&&typeof n.value=="string"){let i=n.value;if(i.includes("${")){let o=(r=i.match(/\$\{([^}]+)\}/g))==null?void 0:r.map(a=>a.slice(2,-1));o&&(o==null||o.forEach(a=>{i=i.replace(`\${${a}}`,e[a]||this.getDynamicParam(a))}))}window.open(i,n.params??"_blank");return}console.warn("[meta2d] Link param is not a string")},this.events[Jn.SetProps]=(e,n)=>{var i,o,a;const r=n.value;if(r&&typeof r=="object"){const l=n.params?this.find(n.params):this.find(e.id),s={};for(let u in r)if((i=r[u])!=null&&i.id)s[u]=(o=this.store.pens[r[u].id])==null?void 0:o[r[u].key];else if(typeof r[u]=="string"&&r[u].includes("${")){let c=r[u],f=(a=c.match(/\$\{([^}]+)\}/g))==null?void 0:a.map(v=>v.slice(2,-1));f&&f.forEach(v=>{c=c.replace(`\${${v}}`,e[v]||this.getDynamicParam(v))}),s[u]=c}else s[u]=r[u];l.forEach(u=>{s.hasOwnProperty("visible")&&u.visible!==s.visible&&this.setVisible(u,s.visible),this.setValue({id:u.id,...s},{render:!1,doEvent:!1})}),this.render();return}console.warn("[meta2d] SetProps value is not an object")},this.events[Jn.StartAnimate]=(e,n)=>{let r=e;if(n.value&&(r=this.findOne(n.value)),!(this.store.animates.has(r)&&!r.calculative.pause&&r.animateName===n.params)){if(n.targetType&&n.params){this.startAnimate(n.value||[e],n.params);return}if(!n.value||typeof n.value=="string"){this.startAnimate(n.value||[e]);return}console.warn("[meta2d] StartAnimate value is not a string")}},this.events[Jn.PauseAnimate]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.pauseAnimate(n.value||[e]);return}console.warn("[meta2d] PauseAnimate value is not a string")},this.events[Jn.StopAnimate]=(e,n)=>{if(!n.value||typeof n.value=="string"){if(n.value){let r=this.findOne(n.value);if(!this.store.animates.has(r))return}else if(!this.store.animates.has(e))return;this.stopAnimate(n.value||[e]);return}console.warn("[meta2d] StopAnimate event value is not a string")},this.events[Jn.StartVideo]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.startVideo(n.value||[e]);return}console.warn("[meta2d] StartVideo value is not a string")},this.events[Jn.PauseVideo]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.pauseVideo(n.value||[e]);return}console.warn("[meta2d] PauseVideo value is not a string")},this.events[Jn.StopVideo]=(e,n)=>{if(!n.value||typeof n.value=="string"){this.stopVideo(n.value||[e]);return}console.warn("[meta2d] StopVideo event value is not a string")},this.events[Jn.JS]=(e,n,r)=>{var i;if(n.value&&!n.fn)try{if(typeof n.value!="string")throw new Error("[meta2d] Function value must be string");const o=n.value;n.fn=new Function("pen","params","context",o)}catch(o){console.error("[meta2d]: Error on make a function:",o)}(i=n.fn)==null||i.call(n,e,r||n.params,{meta2d:this,eventName:n.name})},this.events[Jn.GlobalFn]=(e,n)=>{if(typeof n.value!="string"){console.warn("[meta2d] GlobalFn value must be a string");return}globalThis[n.value]&&globalThis[n.value](e,n.params)},this.events[Jn.Emit]=(e,n)=>{if(typeof n.value!="string"){console.warn("[meta2d] Emit value must be a string");return}this.store.emitter.emit(n.value,{pen:e,params:n.params,eventName:n.name})},this.events[Jn.SendPropData]=(e,n)=>{const r=Pe(n.value);if(r&&typeof r=="object"){const i=n.params?this.findOne(n.params):e;for(let o in r)(r[o]===void 0||r[o]==="")&&(r[o]=i[o]);r.id=i.id,this.doSendDataEvent(r,n.extend);return}console.warn("[meta2d] SendPropData value is not an object")},this.events[Jn.SendVarData]=(e,n)=>{const r=Pe(n.value);if(r&&typeof r=="object"){const i=n.params?this.findOne(n.params):e;let o=[];for(let a in r){let l={dataId:a,value:r[a]};if(!l.value){let s=i.form.find(u=>u.dataIds&&u.dataIds.dataId===l.dataId);s&&(l.value=i[s.key])}o.push(l)}this.doSendDataEvent(o,n.extend);return}console.warn("[meta2d] SendVarData value is not an object")},this.events[Jn.Navigator]=(e,n)=>{n.value&&typeof n.value=="string"&&this.navigatorTo(n.value)},this.events[Jn.Dialog]=(e,n)=>{var r;if(n.params&&typeof n.params=="string"){let i=n.params;if(n.params.includes("${")){let a=(r=n.params.match(/\$\{([^}]+)\}/g))==null?void 0:r.map(l=>l.slice(2,-1));a&&(a==null||a.forEach(l=>{i=i.replace(`\${${l}}`,e[l]||this.getDynamicParam(l))}))}Object.keys(n.extend).forEach(a=>{["x","y","width","height"].includes(a)||(i.indexOf("?")!==-1?i+=`&${a}=${n.extend[a]}`:i+=`?${a}=${n.extend[a]}`)});let o=this.getEventData(n.list,e);Object.keys(o).length&&(o=null),this.canvas.dialog.show(n.value,i,n.extend,o)}},this.events[Jn.SendData]=(e,n)=>{var i,o,a,l;if((i=n.data)!=null&&i.length){const s=this.getSendData(n.data);e.formId&&e.formData&&Object.assign(s,e.formData),this.sendDataToNetWork(s,e,n);return}if((o=n.list)!=null&&o.length){if(n.network&&n.network.protocol==="ADIIOT"){const u=H$(this,e,n);u.length&&V$(this,u);return}const s=this.getEventData(n.list,e);e.deviceId&&(s.deviceId=e.deviceId),e.formId&&e.formData&&Object.assign(s,e.formData),this.sendDataToNetWork(s,e,n);return}const r=Pe(n.value);if(r&&typeof r=="object"&&n.targetType==="id"){const s=n.params?this.findOne(n.params):e;for(let u in r)if(r[u]===void 0||r[u]==="")r[u]=s[u];else if(typeof r[u]=="string"&&((a=r[u])==null?void 0:a.indexOf("${"))>-1){let c=(l=r[u].match(/\$\{([^}]+)\}/g))==null?void 0:l.map(f=>f.slice(2,-1));c!=null&&c.length&&(r[u]=s[c[0]]??this.getDynamicParam(c[0]))}s.deviceId&&(r.deviceId=s.deviceId),this.sendDataToNetWork(r,e,n);return}},this.events[Jn.PostMessage]=(e,n)=>{if(typeof n.value!="string"){console.warn("[meta2d] Emit value must be a string");return}const r=n.params?this.findOne(n.params):e;if(r.name!=="iframe"||!r.iframe){console.warn("不是嵌入页面");return}let i=Gs(r.iframe.split("?")[1]);const o=this.getEventData(n.list,r);r.calculative.singleton.div.children[0].contentWindow.postMessage(JSON.stringify({name:n.value,id:i.id,data:o}),"*")},this.events[Jn.PostMessageToParent]=(e,n)=>{if(typeof n.value!="string"){console.warn("[meta2d] Emit value must be a string");return}const r=this.getEventData(n.list,e);window.parent.postMessage(JSON.stringify({name:n.value,data:r}),"*")},this.events[Jn.Message]=(e,n)=>{this.message({theme:n.params,content:n.value,...n.extend})}}getSendData(e){const n={};return e.forEach(r=>{var i;if(r.prop)if(r.id&&r.id!=="固定值"){const o=this.findOne(r.id);n[r.prop]=o[r.key]}else if(typeof r.value=="string"&&r.value.includes("${")){let o=r.value,a=(i=o.match(/\$\{([^}]+)\}/g))==null?void 0:i.map(l=>l.slice(2,-1));a&&a.forEach(l=>{o=o.replace(`\${${l}}`,this.getDynamicParam(l))}),n[r.prop]=o}else n[r.prop]=this.convertType(r.value,r.type)}),n}convertType(e,n){if(typeof e=="string"){if(["switch","bool","boolean"].includes(n)){if(e==="false")return!1;if(e==="true")return!0}else if(["integer","number","int","enum","double","float"].includes(n)&&!isNaN(Number(e)))return Number(e)}return e}getEventData(e,n){const r={};return e!=null&&e.length&&e.forEach(i=>{var a,l;const o=i.params?this.findOne(i.params):n;for(let s in i.value)if(i.value[s]===void 0||i.value[s]==="")r[s]=o[s];else if(typeof i.value[s]=="string"&&((a=i.value[s])==null?void 0:a.indexOf("${"))>-1){let u=(l=i.value[s].match(/\$\{([^}]+)\}/g))==null?void 0:l.map(c=>c.slice(2,-1));u!=null&&u.length&&(r[s]=o[u[0]]??this.getDynamicParam(u[0]))}else r[s]=i.value[s]}),Object.keys(r).length?r:{}}message(e){new F$(this.canvas.parentElement,e).init()}closeAll(){for(let e in di)di[e].close()}async navigatorTo(e){var i;if(!e)return;if((i=Gs())==null?void 0:i.id){const o=new URL(window.location);o.searchParams.set("id",e),history.pushState({},"",o)}const r=await O1(this.store,e);r&&(this.open(r),this.lock(1),this.fitView(!0,10))}doSendDataEvent(e,n){let r=JSON.stringify(e);this.mqttClient&&this.mqttClient.connected&&(n?n.split(",").forEach(i=>{this.mqttClient.publish(i,r)}):this.store.data.mqttTopics&&this.store.data.mqttTopics.split(",").forEach(i=>{this.mqttClient.publish(i,r)})),this.websocket&&this.websocket.readyState===1&&this.websocket.send(r),(this.store.data.https||this.store.data.http)&&this.sendDatabyHttp(r),this.store.emitter.emit("sendData",r)}async sendDataToNetWork(e,n,r){var o,a,l,s,u,c;const i=Pe(r.network);if(i.data&&(Object.assign(i,i.data),delete i.data),i.protocol==="iot"){this.iotMqttClient&&this.iotMqttClient.publish(`le5le-iot/property/set/${(o=this.store.data.iot)==null?void 0:o.token}`,JSON.stringify(e));return}if(i.url){if(i.protocol==="http"){if(typeof i.headers=="object"){for(let m in i.headers)if(typeof i.headers[m]=="string"){let y=(a=i.headers[m].match(/\$\{([^}]+)\}/g))==null?void 0:a.map(p=>p.slice(2,-1));y&&(i.headers[m]=i.headers[m].replace(`\${${y[0]}}`,this.getDynamicParam(y[0])))}}let f,v=i.url;if(i.method==="GET"&&(f="?"+Object.keys(e).map(m=>m+"="+e[m]).join("&")),i.method==="POST"&&v.indexOf("${")>-1){let m=(l=v.match(/\$\{([^}]+)\}/g))==null?void 0:l.map(y=>y.slice(2,-1));m&&m.forEach(y=>{v=v.replace(`\${${y}}`,$v(n,y)||this.getDynamicParam(y))})}const g=await fetch(v+(f||""),{headers:i.headers||{},method:i.method,body:i.method==="POST"?JSON.stringify(e):void 0});if(g.ok){if(r.callback){const m=await g.text();if(!r.fn)try{if(typeof r.callback!="string")throw new Error("[meta2d] Function callback must be string");const y=r.callback;r.fn=new Function("pen","data","context",y)}catch(y){console.error("[meta2d]: Error on make a function:",y)}(s=r.fn)==null||s.call(r,n,m,{meta2d:this,e:r})}console.info("http消息发送成功")}}else if(i.protocol==="mqtt"){const f=(u=this.mqttClients)==null?void 0:u.filter(v=>v.options.href===i.url);if(f&&f.length)f[0].connected&&i.topics.split(",").forEach(v=>{f[0].publish(v,JSON.stringify(e))});else{let v=ud.connect(i.url,i.options);v.on("connect",()=>{console.info("mqtt连接成功"),i.topics.split(",").forEach(g=>{v.publish(g,JSON.stringify(e)),setTimeout(()=>{v==null||v.end()},1e3)})})}}else if(i.protocol==="websocket"){const f=(c=this.websockets)==null?void 0:c.filter(v=>v.url===i.url);if(f&&f.length)f[0].readyState===1&&f[0].send(JSON.stringify(e));else{let v=new WebSocket(i.url,i.protocols||void 0);v.onopen=function(){console.info("websocket连接成功"),v.send(JSON.stringify(e)),setTimeout(()=>{v.close()},100)}}}}}resize(e,n){this.canvas.resize(e,n),this.render(),this.store.emitter.emit("resize",{width:e,height:n}),this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.init()}async addPen(e,n,r=!0,i=!1){return await this.canvas.addPen(e,n,r,i)}async addPens(e,n,r=!1){return await this.canvas.addPens(e,n,r)}render(e){var n;(n=this.canvas)==null||n.render(e)}async setBackgroundImage(e,n){var l,s,u,c;let r=this;async function i(f){return new Promise(v=>{const g=new Image;g.src=f,r.store.options.cdn&&!(f.startsWith("http")||f.startsWith("//")||f.startsWith("data:image"))&&(g.src=r.store.options.cdn+f),g.crossOrigin="anonymous",g.onload=()=>{v(g)}})}this.store.data.bkImage=e;const o=(n==null?void 0:n.width)||((l=this.store.data)==null?void 0:l.width)||((s=this.store.options)==null?void 0:s.width),a=(n==null?void 0:n.height)||((u=this.store.data)==null?void 0:u.height)||((c=this.store.options)==null?void 0:c.height);if(o&&a?(this.canvas.canvasTemplate.canvas.style.backgroundImage=null,this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0)):this.canvas.canvasTemplate.canvas.style.backgroundImage=e?`url('${e}')`:"",e){const f=await i(e);this.store.bkImg=f,o&&a&&this.canvas&&(this.canvas.canvasTemplate.init(),this.render())}else this.store.bkImg=null}setBackgroundColor(e=this.store.data.background){this.store.data.background=e,this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0)}setGrid({grid:e=this.store.data.grid,gridColor:n=this.store.data.gridColor,gridSize:r=this.store.data.gridSize,gridRotate:i=this.store.data.gridRotate}={}){this.store.data.grid=e,this.store.data.gridColor=n,this.store.data.gridSize=r<0?0:r,this.store.data.gridRotate=i,this.canvas&&(this.canvas.canvasTemplate.bgPatchFlags=!0)}setRule({rule:e=this.store.data.rule,ruleColor:n=this.store.data.ruleColor}={}){this.store.data.rule=e,this.store.data.ruleColor=n,this.store.patchFlagsTop=!0}open(e,n=!0){if(this.clear(!1,e==null?void 0:e.template),this.canvas.autoPolylineFlag=!0,e){e.theme&&this.setTheme(e.theme),this.setBackgroundImage(e.bkImage,e),Object.assign(this.store.data,e),this.store.data.pens=[];for(const r of e.pens)r.id||(r.id=Wt()),!r.calculative&&(r.calculative={canvas:this.canvas}),this.store.pens[r.id]=r;for(const r of e.pens)this.canvas.makePen(r)}if(this.canvas.patchFlagsLines.forEach(r=>{r.type&&this.canvas.initLineRect(r)}),this.store.data.template||(this.store.data.template=Wt()),n||(this.canvas.opening=!0),this.doInitJS(),this.initBindDatas(),this.initBinds(),this.doInitFn(),this.loadLineAnimateDraws(),this.initMessageEvents(),this.initGlobalTriggers(),this.startAnimate(),this.startVideo(),this.listenSocket(),this.connectSocket(),this.connectNetwork(),this.startDataMock(),this.canvas.initGlobalStyle(),this.render(),setTimeout(()=>{const r=this.store.data.pens.find(i=>i.autofocus);r&&this.focus(r.id)},100),this.store.data.iconUrls)for(const r of this.store.data.iconUrls)cP(r,()=>{this.render()});this.canvas.autoPolylineFlag=!1,this.store.emitter.emit("opened"),this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.init()}cacheData(e){if(e&&this.store.options.cacheLength){let n=this.store.cacheDatas.findIndex(r=>r.data&&r.data._id===e);if(n===-1)this.store.cacheDatas.push({data:Pe(this.store.data,!0)}),this.store.cacheDatas.length>this.store.options.cacheLength&&this.store.cacheDatas.shift();else{let r=this.store.cacheDatas.splice(n,1)[0];this.store.cacheDatas.push(r)}}}loadCacheData(e){let n=this.store.cacheDatas.findIndex(r=>r.data&&r.data._id===e);n!==-1&&(this.store.data=this.store.cacheDatas[n].data,this.setBackgroundImage(this.store.data.bkImage),this.store.pens={},this.store.data.pens.forEach(r=>{r.calculative.canvas=this.canvas,this.store.pens[r.id]=r,Tt.path2dDraws[r.name]&&this.store.path2dMap.set(r,Tt.path2dDraws[r.name](r)),r.type&&this.store.path2dMap.set(r,Tt.path2dDraws[r.name](r)),r.image&&(r.calculative.imageDrawed=!1,this.canvas.loadImage(r))}),this.render())}loadLineAnimateDraws(){Tt.lineAnimateDraws={},Object.entries(this.store.data.lineAnimateDraws).forEach(([e,n])=>{Tt.lineAnimateDraws[e]=new Function("ctx","pen","state","index",n)})}statistics(){const e=this.store.data.pens.length,n=this.store.data.pens.filter(l=>l.image).length,r=this.store.data.pens.filter(l=>l.image&&l.calculative.inView).length,i=this.store.data.pens.filter(l=>l.name.endsWith("Dom")||I1.includes(l.name)||this.store.options.domShapes.includes(l.name)||l.externElement).length,o=this.store.animates.size;let a=0;return Object.keys(this.store.bind).forEach(l=>{a+=this.store.bind[l].length}),Object.keys(this.store.bindDatas).forEach(l=>{a+=this.store.bindDatas[l].length}),{图元总数量:e,图片图元数量:n,图片图元绘制数量:r,dom图元数量:i,正在执行的动画数量:o,数据点数量:a}}initBindDatas(){this.store.bindDatas={},this.store.data.pens.forEach(e=>{var n;(n=e.form)==null||n.forEach(r=>{let i;r.dataIds&&(Array.isArray(r.dataIds)?i=r.dataIds:i=[r.dataIds]),i==null||i.forEach(o=>{this.store.bindDatas[o.dataId]||(this.store.bindDatas[o.dataId]=[]),this.store.bindDatas[o.dataId].push({id:e.id,formItem:r})})})})}initBinds(){this.jetLinksList=[],this.store.bind={};const e=[],n=[];this.store.data.pens.forEach(r=>{var i,o;(i=r.realTimes)==null||i.forEach(a=>{if(a.bind&&a.bind.id){let l=a.productId||r.productId,s=a.deviceId||r.deviceId,u=a.propertyId,c=!1;if(l&&l.indexOf("${")>-1){let f=l.match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));f!=null&&f.length&&(l=this.getDynamicParam(f[0])||l),c=!0}if(s&&s.indexOf("${")>-1){let f=s.match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));f!=null&&f.length&&(s=this.getDynamicParam(f[0])||s),c=!0}if(u&&u.indexOf("${")>-1){let f=u.match(new RegExp("(?<=\\$\\{).*?(?=\\})","g"));f!=null&&f.length&&(u=this.getDynamicParam(f[0])||u),c=!0}if(c&&a.bind&&(a.bind.id=l+"#"+s+"#"+u),this.store.bind[a.bind.id]||(this.store.bind[a.bind.id]=[]),this.store.bind[a.bind.id].push({id:r.id,key:a.key}),l&&s&&u){const f=this.jetLinksList.findIndex(v=>v.topic.startsWith(`/${l}/${s}`));f>-1?this.jetLinksList[f].properties.includes(a.propertyId)||this.jetLinksList[f].properties.push(a.propertyId):this.jetLinksList.push({topic:`/${l}/${s}`,deviceId:s,properties:[a.propertyId]})}if(a.bind.class==="iot"){let f=a.bind.id.split("#"),v=e.findIndex(m=>m.deviceId===f[0]);v>-1?e[v].properties.includes(f[1])||e[v].properties.push(f[1]):e.push({deviceId:f[0],properties:[f[1]],token:a.bind.token}),n.findIndex(m=>m.key===a.bind.id)===-1&&n.push({key:a.bind.id,label:a.bind.label})}else if(a.bind.class==="sql"){let f=a.bind.id.split("#");const v=this.store.data.sqls.find(g=>g.bindId===f[0]);if(v){v.keys||(v.keys=[]),f.shift();const g=f.join("#");v.keys.includes(g)||v.keys.push(g)}}}}),(o=r.events)==null||o.forEach(a=>{var s;const l=(s=a.actions)==null?void 0:s.filter(u=>u.action===Jn.SendData);l==null||l.forEach(u=>{var c;(c=u.data)==null||c.forEach(f=>{if(f.class==="iot"){let v=f.prop.split("#"),g=e.findIndex(m=>m.deviceId===v[0]);g>-1?e[g].properties.includes(v[1])||e[g].properties.push(v[1]):e.push({deviceId:v[0],properties:[v[1]],token:f.token})}})})})}),e.length&&(this.store.data.iot||(this.store.data.iot={}),this.store.data.iot.devices=e),n.length&&(this.store.data.iot.list=n)}connectSocket(){this.connectWebsocket(),this.connectMqtt(),this.connectHttp()}doInitJS(){const e=this.store.data.initJs;if(e&&e.trim())try{new Function("context",e)({meta2d:this})}catch(n){console.warn("initJs error",n)}}doInitFn(){let e=Gs(),n=[];for(let r in e)e.hasOwnProperty(r)&&r.startsWith("bind-")&&n.push({id:r.replace("bind-",""),dataId:r.replace("bind-",""),value:e[r]});n.length&&this.setDatas(n,{history:!1})}drawLine(e){e&&cC(this.store),this.canvas.drawingLineName=e}alignPenToGrid(e){this.canvas.alignPenToGrid(e)}drawingPencil(){this.canvas.drawingPencil()}stopPencil(){this.canvas.stopPencil()}lock(e){this.store.data.locked=e,this.finishDrawLine(!0),this.canvas.drawingLineName="",this.stopPencil(),this.store.data.pens.forEach(n=>{var r;n.externElement===!0&&(r=n.calculative.singleton)!=null&&r.div&&mi(n,n.calculative.singleton.div)}),e>0&&this.initMessageEvents()}async finishDrawLine(e){await this.canvas.finishDrawline(e)}async finishPencil(){await this.canvas.finishPencil()}updateLineType(e,n){if(!e||e.name!="line"||!n||!this.canvas[n])return;e.lineName=n;const r=Gn(e),i=gn(e);r.prev=void 0,r.next=void 0,i.prev=void 0,i.next=void 0,e.calculative.worldAnchors=[r,i],e.calculative.activeAnchor=r,this.canvas[n](this.store,e,i),e.lineName==="curve"&&(r.prev={penId:r.penId,x:r.x-50,y:r.y},r.next={penId:r.penId,x:r.x+50,y:r.y},i.prev={penId:i.penId,x:i.x-50,y:i.y},i.next={penId:i.penId,x:i.x+50,y:i.y}),e.calculative.activeAnchor=void 0,this.canvas.initLineRect(e),this.render()}addDrawLineFn(e,n){this.canvas[e]=n,this.canvas.drawLineFns.push(e)}removeDrawLineFn(e){const n=this.canvas.drawLineFns.indexOf(e);n>-1&&this.canvas.drawLineFns.splice(n,1)}showMagnifier(){this.canvas.showMagnifier()}hideMagnifier(){this.canvas.hideMagnifier()}toggleMagnifier(){this.canvas.toggleMagnifier()}clear(e=!0,n){var r;for(const i of this.store.data.pens)(r=i.onDestroy)==null||r.call(i,i);rP(this.store,n),this.hideInput(),this.canvas.tooltip.hide(),this.map&&this.map.isShow&&(this.map.show(),this.map.setView()),this.canvas.clearCanvas(),sessionStorage.removeItem("page"),this.store.clipboard=void 0,this.store.sameTemplate||(this.canvas.canvasTemplate.bgPatchFlags=!0),this.store.patchFlagsBackground=!0,this.store.patchFlagsTop=!0,this.setBackgroundImage(void 0),e&&this.render()}emit(e,n){this.store.emitter.emit(e,n)}on(e,n){return this.store.emitter.on(e,n),this}off(e,n){return this.store.emitter.off(e,n),this}updateLineAnimateDraws(e,n){n&&(delete this.store.data.lineAnimateDraws[e],delete Tt.lineAnimateDraws[e],n!==-1&&this.registerLineAnimateDraws(n.name||e,n.code))}registerMoveDock(e){this.canvas.customMoveDock=e}registerResizeDock(e){this.canvas.customResizeDock=e}find(e){return this.canvas.find(e)}findOne(e){return this.canvas.findOne(e)}getPenRect(e){return this.canvas.getPenRect(e)}setPenRect(e,n,r=!0){this.canvas.setPenRect(e,n,r)}startAnimate(e,n){this.stopAnimate(e);let r;e?typeof e=="string"?r=this.find(e):r=e:r=this.store.data.pens.filter(i=>(i.type||i.frames)&&i.autoPlay||i.animations&&i.animations.length&&i.animations.findIndex(o=>o.autoPlay)!==-1),r.length&&(r.forEach(i=>{var o,a;if(i.calculative.pause){const l=Date.now()-i.calculative.pause;i.calculative.pause=void 0,i.calculative.frameStart+=l,i.calculative.frameEnd+=l}else{let l=-1;if(n!==void 0&&i.animations){if(typeof n=="string"){if(l=i.animations.findIndex(s=>s.name===n),l===-1)return}else if(typeof n=="number")if(i.animations.length>n)l=n;else return}else n===void 0&&(l=(o=i.animations)==null?void 0:o.findIndex(s=>s.autoPlay),l===-1&&((a=i.animations)!=null&&a.length)&&(l=0));if(l!==-1&&l!==void 0){const s=Pe(i.animations[l]);s.animateName=s.name,delete s.name,s.currentAnimation=l,!i.type&&s.frames&&(s.showDuration=this.calcAnimateDuration(s)),this.setValue({id:i.id,...s},{doEvent:!1,history:!1})}this.store.animates.add(i),i.type||this.store.animateMap.set(i,i.calculative.canvas.getFrameProps(i))}}),this.initImageCanvas(r),this.canvas.animate())}pauseAnimate(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:this.store.animates.forEach(r=>{n.push(r)}),n.forEach(r=>{r.calculative.pause||(r.calculative.pause=Date.now())})}stopAnimate(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:this.store.animates.forEach(r=>{n.push(r)}),n.forEach(r=>{r.currentAnimation=void 0,r.calculative.pause=void 0,r.calculative.start=void 0,r.calculative.cycleStart=void 0,r.calculative.duration=void 0,r.calculative.animatePos=0,this.store.animates.delete(r),this.canvas.restoreNodeAnimate(r),this.canvas.updateLines(r),this.store.animateMap.delete(r)}),this.initImageCanvas(n),setTimeout(()=>{var r;(r=this.canvas)==null||r.calcActiveRect(),this.render()},20)}startVideo(e){let n;e?typeof e=="string"?n=this.find(e):n=e:n=this.store.data.pens.filter(r=>(r.video||r.audio)&&r.autoPlay),n.forEach(r=>{var i,o;(i=r.calculative.media)==null||i.play(),(o=r.onStartVideo)==null||o.call(r,r)})}pauseVideo(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:n=this.store.data.pens.filter(r=>(r.video||r.audio)&&r.autoPlay),n.forEach(r=>{var i,o;(i=r.calculative.media)==null||i.pause(),(o=r.onPauseVideo)==null||o.call(r,r)})}stopVideo(e){let n=[];e?typeof e=="string"?n=this.find(e):n=e:n=this.store.data.pens.filter(r=>(r.video||r.audio)&&r.autoPlay),n.forEach(r=>{var i;r.calculative.media&&(r.calculative.media.currentTime=0,r.calculative.media.pause()),(i=r.onStopVideo)==null||i.call(r,r)})}calcAnimateDuration(e){return e.frames.reduce((n,r)=>n+r.duration,0)}combine(e=this.store.active,n,r=!0){if(!e||!e.length)return;const i=Pe(e);if(e.length===1&&e[0].type){e[0].type=mn.Node,this.canvas.active(e),this.pushHistory({type:Pt.Update,initPens:i,pens:Pe(e,!0)}),this.render();return}const o=Wi(e);let a={id:Wt(),name:"combine",...o,children:[],showChild:n};this.canvas.makePen(a);const l=Pe(a);let s=1/0;return e.forEach(u=>{const c=this.store.data.pens.findIndex(v=>v.id===u.id);if(c<s&&(s=c),u===a||u.parentId===a.id||u.id===a.id)return;a.children.push(u.id),u.parentId=a.id;const f=oa(u.calculative.worldRect,o);Object.assign(u,f),u.locked=u.lockedOnCombine??Xt.None,u.locked=u.interaction||Iv.includes(u.name)?0:u.locked}),this.store.data.pens.splice(s,0,a),this.store.data.pens.pop(),r&&this.canvas.active([a]),this.pushHistory({type:Pt.Add,pens:[l],step:3}),this.pushHistory({type:Pt.Update,initPens:[l],pens:[a],step:3}),this.pushHistory({type:Pt.Update,initPens:i,pens:e,step:3}),n!=null&&(e.forEach(u=>{To(u,!0)}),this.initImageCanvas([a])),this.store.emitter.emit("combine",[a]),this.render(),a}uncombine(e){if(!e&&this.store.active&&(e=this.store.active[0]),!e||!e.children)return;const n=e.children.map(o=>this.store.pens[o]);let r=Pe(n);n.forEach(o=>{o.parentId=void 0,o.x=o.calculative.worldRect.x,o.y=o.calculative.worldRect.y,o.width=o.calculative.worldRect.width,o.height=o.calculative.worldRect.height,o.locked=Xt.None,o.calculative.active=void 0,o.calculative.hover=!1,this.setVisible(o,!0)});const i=this.isCombine(e)?3:2;this.pushHistory({type:Pt.Update,initPens:r,pens:n,step:i}),r=[Pe(e)],e.children=void 0,this.pushHistory({type:Pt.Update,initPens:r,pens:[e],step:i}),this.isCombine(e)&&(this.delete([e]),this.store.histories[this.store.histories.length-1].step=i),this.inactive()}clearCombine(e){if(!e&&this.store.active&&(e=this.store.active[0]),!e||!e.children)return;const n=fi(e,this.store);n.forEach(i=>{i.parentId=void 0,i.x=i.calculative.worldRect.x,i.y=i.calculative.worldRect.y,i.width=i.calculative.worldRect.width,i.height=i.calculative.worldRect.height,i.locked=Xt.None,i.calculative.active=void 0,i.calculative.hover=!1,i.showChild!==void 0&&this.setVisible(i,!0),i.children=void 0});const r=[];n.forEach((i,o)=>{i.name==="combine"&&(i.children=void 0,r.push(i))}),this.delete(r,!0,!1),e.children=void 0,this.isCombine(e)&&this.delete([e],!0,!1),this.inactive()}appendChild(e=this.store.active){if(!e||e.length<2)return;const n=e.findIndex(r=>r.name==="combine"&&r.showChild!==void 0);if(n!==-1){let r=e[n];const i=Wi(e);Object.assign(r,i),Object.assign(r.calculative.worldRect,i),tl(r),r.children.forEach(o=>{const a=this.store.pens[o],l=oa(a.calculative.worldRect,i);Object.assign(a,l)}),e.forEach(o=>{if(o.id!==r.id){r.children.push(o.id),o.parentId=r.id;const a=oa(o.calculative.worldRect,i);Object.assign(o,a),o.locked=o.lockedOnCombine??Xt.DisableMove,o.locked=o.interaction||Iv.includes(o.name)?0:o.locked,To(o,!0)}}),this.initImageCanvas(e),this.render()}else console.warn("Invalid operation!")}updateRectbyChild(e,n,r){if(hr(e),Dn(e),n.calculative.worldRect=e,Ao(e,r.calculative.worldRect,!0)){const i=oa(e,r.calculative.worldRect);Object.assign(n,i)}else{let i=Math.min(e.x,r.calculative.worldRect.x),o=Math.min(e.y,r.calculative.worldRect.y),a=Math.max(e.ex,r.calculative.worldRect.ex),l=Math.max(e.ey,r.calculative.worldRect.ey);r.calculative.worldRect={x:i,y:o,width:a-i,height:l-o,ex:a,ey:l},r.parentId||Object.assign(r,r.calculative.worldRect),Dn(r.calculative.worldRect),r.children.forEach(s=>{const u=this.store.pens[s],c=oa(u.calculative.worldRect,r.calculative.worldRect);Object.assign(u,c)}),r.parentId&&this.updateRectbyChild(r.calculative.worldRect,r,this.store.pens[r.parentId])}this.canvas.updatePenRect(r),this.render()}isCombine(e){return!!(e.name==="combine"||e.children&&e.children.length>0)}active(e,n=!0){this.canvas.active(e,n)}inactive(){this.canvas.inactive()}activeAll(){this.canvas.active(this.store.data.pens.filter(e=>!e.parentId&&e.locked!==Xt.Disable)),this.render()}focus(e){const n=this.findOne(e);n&&(this.store.hover=n,this.store.hover.calculative.hover=!0,this.showInput(n))}delete(e,n=!1,r=!0){this.canvas.delete(e,n,r)}scale(e,n={x:0,y:0}){this.canvas.scale(e,n)}translate(e,n){this.canvas.translate(e,n)}translatePens(e,n,r){this.canvas.translatePens(e,n,r)}getParent(e,n){return hi(e,n)}getAllChildren(e){return fi(e,this.store)}getAllFollowers(e){return Lm(e,this.store)}data(){const e=Pe(this.store.data),{pens:n,paths:r}=this.store.data;e.version=k1.version,e.paths={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.find(o=>o.pathId===i)&&(e.paths[i]=r[i]);return e.dataPoints=[...Object.keys(this.store.bind),...Object.keys(this.store.bindDatas)],e}copy(e){this.canvas.copy(e)}cut(e){this.canvas.cut(e)}paste(){this.canvas.paste()}undo(){this.canvas.undo()}redo(){this.canvas.redo()}listenSocket(){try{let e;const n=this.store.data.socketCbJs;if(n&&(e=new Function("e","context",n)),!e)return this.socketFn=null,!1;this.socketFn=e}catch(e){return console.error("Create the function for socket:",e),!1}return!0}connectWebsocket(e){this.closeWebsocket(),e&&(this.store.data.websocket=e),this.store.data.websocket&&(this.websocket=new WebSocket(this.store.data.websocket,this.store.data.websocketProtocols||void 0),this.websocket.onmessage=n=>{this.socketCallback(n.data,{type:"websocket",url:this.store.data.websocket})},this.websocket.onerror=n=>{this.store.emitter.emit("error",{type:"websocket",error:n})},this.websocket.onclose=()=>{if(this.store.options.reconnetTimes&&(this.websocketTimes++,this.websocketTimes>=this.store.options.reconnetTimes)){this.websocketTimes=0,this.closeWebsocket();return}console.info("Canvas websocket closed and reconneting..."),this.connectWebsocket()})}closeWebsocket(){this.websocket&&(this.websocket.onclose=void 0,this.websocket.close(),this.websocket=void 0)}connectMqtt(e){if(this.closeMqtt(),e&&(this.store.data.mqtt=e.mqtt,this.store.data.mqttTopics=e.mqttTopics,this.store.data.mqttOptions=e.mqttOptions),this.store.data.mqtt){this.store.data.mqttOptions.clientId&&!this.store.data.mqttOptions.customClientId&&(this.store.data.mqttOptions.clientId=Wt());const n={...this.store.data.mqttOptions};n.username||delete n.username,n.password||delete n.password;const{username:r,password:i}=n;r&&i||!r&&!i?(this.mqttClient=ud.connect(this.store.data.mqtt,n),this.mqttClient.on("message",(o,a)=>{this.socketCallback(a.toString(),{topic:o,type:"mqtt",url:this.store.data.mqtt})}),this.mqttClient.on("error",o=>{this.store.emitter.emit("error",{type:"mqtt",error:o})}),this.mqttClient.on("close",()=>{this.store.options.reconnetTimes&&(this.mqttTimes++,this.mqttTimes>=this.store.options.reconnetTimes&&(this.mqttTimes=0,this.closeMqtt()))}),this.store.data.mqttTopics&&this.mqttClient.subscribe(this.store.data.mqttTopics.split(","))):console.warn("缺少用户名或密码")}}closeMqtt(){var e;(e=this.mqttClient)==null||e.end()}connectHttp(){this.closeHttp();const{https:e}=this.store.data;if(e)this.store.data.cancelFirstConnect||e.forEach(async n=>{this.oldRequestHttp(n)}),e.forEach((n,r)=>{n.http&&n.httpTimeInterval!==0&&(n.times=0,this.httpTimerList[r]=setInterval(async()=>{this.oldRequestHttp(n),this.store.options.reconnetTimes&&n.times>=this.store.options.reconnetTimes&&(n.times=0,clearInterval(this.httpTimerList[r]),this.httpTimerList[r]=void 0)},n.httpTimeInterval||1e3))});else{const{http:n,httpTimeInterval:r,httpHeaders:i}=this.store.data;n&&(this.httpTimer=setInterval(async()=>{const o=await fetch(n,{headers:i});if(o.ok){const a=await o.text();this.socketCallback(a,{type:"http",url:n})}},r||1e3))}}async oldRequestHttp(e){let n=Pe(e);if(n.http){const r=await fetch(n.http,{headers:n.httpHeaders,method:n.method||"GET",body:n.method==="POST"?JSON.stringify(n.body):void 0});if(r.ok){const i=await r.text();this.socketCallback(i,{type:"http",url:n.http})}else e.times++,this.store.emitter.emit("error",{type:"http",error:r})}}async sendDatabyHttp(e){const{https:n}=this.store.data;if(n)n.forEach(async r=>{r.http&&(await fetch(r.http,{method:"post",body:e,headers:r.httpHeaders})).ok&&console.info("http消息发送成功")});else{const{http:r,httpHeaders:i}=this.store.data;r&&(await fetch(r,{method:"post",body:e,headers:i})).ok&&console.info("http消息发送成功")}}closeHttp(){clearInterval(this.httpTimer),this.httpTimer=void 0,this.httpTimerList&&this.httpTimerList.forEach(e=>{clearInterval(e),e=void 0})}connectNetwork(){this.closeNetwork();const{networks:e}=this.store.data,n=[];if(e){let r=0,i=0,o=0,a=0;this.mqttClients=[],this.websockets=[],this.eventSources=[],e.forEach(async l=>{l.protocol==="mqtt"?(l.index=r,this.connectNetMqtt(l),r+=1):l.protocol==="websocket"?(l.index=o,this.connectNetWebSocket(l),o+=1):l.protocol==="http"?(l.index=i,n.push({url:l.url,interval:l.interval,headers:l.headers||void 0,method:l.method,body:l.body,enable:l.enable,index:l.index,once:l.once}),i+=1):l.protocol==="ADIIOT"?B$(this,l):l.protocol==="SSE"&&(l.index=a,this.connectSSE(l),a+=1)})}this.onNetworkConnect(n),this.connectIot(),this.connectSqls()}reconnectNetwork(e){var r,i;const n=this.store.data.networks[e];if(n.protocol==="mqtt")this.mqttClients&&((r=this.mqttClients[n.index])==null||r.end()),this.connectNetMqtt(n);else if(n.protocol==="websocket")this.websockets&&this.websockets[n.index]&&(this.websockets[n.index].onclose=void 0,this.websockets[n.index].close(),this.websockets[n.index]=void 0),this.connectNetWebSocket(n);else if(n.protocol==="http"){this.updateTimerList&&(clearInterval(this.updateTimerList[n.index]),this.updateTimerList[n.index]=void 0);const o=Pe(n);this.store.data.cancelFirstConnect||this.requestHttp(o),this.updateTimerList[n.index]=setInterval(async()=>{this.requestHttp(o)},o.interval||1e3)}else n.protocol==="SSE"&&(this.eventSources&&((i=this.eventSources[n.index])==null||i.close(),this.eventSources[n.index]=void 0),this.connectSSE(n))}async connectIot(){var i;const{iot:e}=this.store.data;if(!(e&&((i=e==null?void 0:e.devices)!=null&&i.length))||e&&e.enable===!1)return;const n=globalThis.iotUrl||await this.getMqttUrl();if(!n){console.warn("iot Request address error");return}const r=await this.getIotToken(e.devices,e.protocol==="websocket"?1:void 0);e.token=r,this.iotMqttClient=ud.connect(n),this.iotMqttClient.on("message",(o,a)=>{this.socketCallback(a.toString(),{topic:`le5le-iot/properties/${r}`,type:"iot",url:n,method:"mqtt"})}),this.iotMqttClient.on("error",o=>{this.store.emitter.emit("error",{type:"mqtt",error:o})}),this.iotMqttClient.subscribe(`le5le-iot/properties/${r}`),this.iotTimer=setInterval(()=>{this.iotMqttClient&&this.iotMqttClient.publish("le5le-iot/subscribe/ping",r)},3e5)}closeIot(){if(this.iotMqttClient){const{iot:e}=this.store.data;e!=null&&e.token&&this.unsubscribeIot(e.token),this.iotMqttClient.end(),this.iotMqttClient=void 0}clearInterval(this.iotTimer),this.iotTimer=void 0}connectSqls(){const{sqls:e}=this.store.data;e&&e.length&&e.forEach(async(n,r)=>{n.enable!==!1&&(await this.doSqlCode(n),n.interval&&(n.index=r,this.sqlTimerList[r]=setInterval(async()=>{await this.doSqlCode(n)},n.interval)))})}connectSSE(e){e.enable!==!1&&(this.eventSources[e.index]=new EventSource(e.url,{withCredentials:e.withCredentials}),this.eventSources[e.index].onmessage=n=>{this.socketCallback(n.data,{type:"SSE",url:e.url,name:e.name,net:e})},this.eventSources[e.index].onerror=n=>{this.store.emitter.emit("error",{type:"SSE",error:n})})}closeSSE(){this.eventSources&&this.eventSources.forEach(e=>{e&&(e.close(),e=void 0)})}connectNetMqtt(e){var i,o,a,l;if(e.enable===!1)return;e.options.clientId&&!e.options.customClientId&&(e.options.clientId=Wt());let n=e.url;if(n.indexOf("${")>-1){let s=(i=n.match(/\$\{([^}]+)\}/g))==null?void 0:i.map(u=>u.slice(2,-1));s&&s.forEach(u=>{n=n.replace(`\${${u}}`,this.getDynamicParam(u))})}e.times=0;let r=Pe(e.options);if(r!=null&&r.username&&r.username.includes("${")){let s=(o=r.username.match(/\$\{([^}]+)\}/g))==null?void 0:o.map(u=>u.slice(2,-1));s&&s.forEach(u=>{r.username=r.username.replace(`\${${u}}`,this.getDynamicParam(u))})}if(r!=null&&r.password&&r.password.includes("${")){let s=(a=r.password.match(/\$\{([^}]+)\}/g))==null?void 0:a.map(u=>u.slice(2,-1));s&&s.forEach(u=>{r.password=r.password.replace(`\${${u}}`,this.getDynamicParam(u))})}if(this.mqttClients[e.index]=ud.connect(n,r),this.mqttClients[e.index].on("message",(s,u)=>{this.socketCallback(u.toString(),{topic:s,type:"mqtt",url:e.url,name:e.name,net:e})}),this.mqttClients[e.index].on("error",s=>{this.store.emitter.emit("error",{type:"mqtt",error:s})}),this.mqttClients[e.index].on("close",()=>{var s;this.store.options.reconnetTimes&&(e.times++,e.times>=this.store.options.reconnetTimes&&(e.times=0,this.mqttClients&&((s=this.mqttClients[e.index])==null||s.end())))}),e.topics){let s=e.topics;if(s.indexOf("${")>-1){let u=(l=s.match(/\$\{([^}]+)\}/g))==null?void 0:l.map(c=>c.slice(2,-1));u&&u.forEach(c=>{s=s.replace(`\${${c}}`,this.getDynamicParam(c))})}this.mqttClients[e.index].subscribe(s.split(","))}}connectNetWebSocket(e){var r,i;if(this.websockets[e.index]&&(this.websockets[e.index].onclose=void 0,(r=this.websockets[e.index])==null||r.close(),this.websockets[e.index]=void 0),e.enable===!1)return;let n=e.url;if(n.indexOf("${")>-1){let o=(i=n.match(/\$\{([^}]+)\}/g))==null?void 0:i.map(a=>a.slice(2,-1));o&&o.forEach(a=>{n=n.replace(`\${${a}}`,this.getDynamicParam(a))})}this.websockets[e.index]=new WebSocket(n,e.protocols||void 0),this.websockets[e.index].onmessage=o=>{this.socketCallback(o.data,{type:"websocket",url:e.url,name:e.name,net:e})},this.websockets[e.index].onerror=o=>{this.store.emitter.emit("error",{type:"websocket",error:o})},this.websockets[e.index].onclose=()=>{var o;if(this.store.options.reconnetTimes&&(e.times++,e.times>=this.store.options.reconnetTimes)){e.times=0,this.websockets[e.index].onclose=void 0,(o=this.websockets[e.index])==null||o.close(),this.websockets[e.index]=void 0;return}setTimeout(()=>{console.info("Canvas websocket closed and reconneting..."),this.connectNetWebSocket(e)},2e3)}}async getMqttUrl(){const e=await fetch("/api/iot/app/mqtt",{method:"GET",headers:{Authorization:`Bearer ${Rd()}`}});if(e.ok){const n=await e.text();let r=JSON.parse(n);return r.wssPort||r.wsPort?`${location.protocol==="https:"?"wss":"ws"}://${r.host}:${location.protocol==="https:"?r.wssPort:r.wsPort}${r.path}`:void 0}}async getIotToken(e,n){const r=await fetch("/api/iot/subscribe/properties",{method:"POST",headers:{Authorization:`Bearer ${Rd()}`},body:JSON.stringify({devices:e,type:n})});if(r.ok){const i=await r.text();return JSON.parse(i).token}}async unsubscribeIot(e){return await fetch("/api/iot/unsubscribe/properties",{method:"POST",headers:{Authorization:`Bearer ${Rd()}`},body:JSON.stringify({token:e})})}async doSqlCode(e){var o;const n=e.method||"get";let r=e.sql;n==="list"&&(e.dbType==="oracle"?r.includes("OFFSET")||(r+=` OFFSET ${(e.current||0)*(e.pageSize||20)} ROWS FETCH NEXT ${e.pageSize||20} ROWS ONLY`):r.includes("LIMIT")||(r+=` LIMIT ${e.pageSize||20}`+(e.current>1?" OFFSET "+(e.current-1)*(e.pageSize||20):"")));const i=await fetch(`/api/iot/data/sql/${n}`,{method:"POST",headers:{Authorization:`Bearer ${Cc("token")||localStorage.getItem("token")||new URLSearchParams(location.search).get("token")||""}`},body:JSON.stringify({dbId:e.dbId||e.dbid,sql:r})});if(i.ok){let a=await i.text();if(a){const l=[];if(a=JSON.parse(a),a.error){this.store.emitter.emit("error",{type:"sql",error:a.error});return}(o=e.keys)==null||o.forEach(s=>{l.push({id:e.bindId+"#"+s,value:$v(a,s.split("#").join("."))})}),l.push({id:e.bindId,value:a}),this.socketCallback(JSON.stringify(l),{type:"sql",url:`/api/iot/data/sql/${n}`,method:n})}}}randomString(e){e=e||32;let n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r=n.length,i="";for(let o=0;o<e;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}mockValue(e){let n;if(e.enableMock&&e.mock!==void 0)if(e.type==="float")if(e.mock&&e.mock.indexOf(",")!==-1){let r=e.mock.split(","),i=Math.floor(Math.random()*r.length);n=parseFloat(r[i])}else if(e.mock&&e.mock.indexOf("-")!==-1){let r,i,o,a=e.mock.split("-");if(e.mock.charAt(0)==="-"?a.length===4?(r=-parseFloat(a[3]),i=-parseFloat(a[1]),o=a[3]):(r=parseFloat(a[2]),i=-parseFloat(a[1]),o=a[2]):(r=parseFloat(a[1]),i=parseFloat(a[0]),o=a[1]),(o+"").indexOf(".")!==-1){let l=(o+"").split(".")[1].length;n=(Math.random()*(r-i)+i).toFixed(l)}else n=Math.random()*(r-i)+i}else n=parseFloat(e.mock);else if(e.type==="integer")if(e.mock&&e.mock.indexOf(",")!==-1){let r=e.mock.split(","),i=Math.floor(Math.random()*r.length);n=parseInt(r[i])}else if(e.mock&&e.mock.indexOf("-")!==-1){let r,i,o=e.mock.split("-");e.mock.charAt(0)==="-"?o.length===4?(r=-parseFloat(o[3]),i=-parseFloat(o[1])):(r=parseFloat(o[2]),i=-parseFloat(o[1])):(r=parseInt(o[1]),i=parseInt(o[0])),n=parseInt(Math.random()*(r-i)+i+"")}else n=parseInt(e.mock);else if(e.type==="bool")typeof e.mock=="boolean"?n=e.mock:e.mock==="true"?n=!0:e.mock==="false"?n=!1:n=Math.random()<.5;else if(e.type==="object"||e.type==="array")e.mock;else if(e.mock&&e.mock.indexOf(",")!==-1){let r=e.mock.split(","),i=Math.floor(Math.random()*r.length);n=r[i]}else if(e.mock&&e.mock.startsWith("[")&&e.mock.endsWith("]")){let r=parseInt(e.mock.substring(1,e.mock.length-1));n=this.randomString(r)}else n=e.mock;return n}dataMock(){var n,r;let e=[];(r=(n=this.store.data.dataset)==null?void 0:n.devices)==null||r.forEach(i=>{let o=this.mockValue(i);o!==void 0&&e.push({id:i.id,value:o})}),e.length&&this.setDatas(e,{render:!0,doEvent:!0,history:!1})}networkMock(){if(this.store.data.networks&&this.store.data.networks.length){let e=[];this.store.data.networks.forEach(n=>{var r;n.enable===!1&&((r=n.children)==null||r.forEach(i=>{let o=Pe(i);o.enableMock=!0;let a=this.mockValue(o);a!==void 0&&e.push({id:i.id,value:a})}))}),e.length&&this.setDatas(e,{render:!0,doEvent:!0,history:!1})}}startDataMock(){this.store.data.enableMock?(this.stopDataMock(),this.initBinds(),this.updateTimer=setInterval(()=>{this.store.data.pens.forEach(n=>{this.penMock(n)}),this.networkMock(),this.render()},this.store.data.networkInterval||1e3)):this.stopDataMock()}stopDataMock(){clearInterval(this.updateTimer),this.updateTimer=void 0}penMock(e){var n;if(e.realTimes){let r={};if(e.realTimes.forEach(i=>{let o=this.mockValue(i);o!==void 0&&(r[i.key]=o)}),Object.keys(r).length){let i=e.onBeforeValue?e.onBeforeValue(e,r):r;this.canvas.updateValue(e,i),(n=e.onValue)==null||n.call(e,e),this.store.emitter.emit("valueUpdate",e)}}}penNetwork(e){const n={url:e.apiUrl,method:e.apiMethod,headers:e.apiHeaders,body:e.apiBody};this.requestHttp(n),e.apiEnable?(this.store.pensNetwork||(this.store.pensNetwork={}),this.store.pensNetwork[e.id]=n):delete this.store.pensNetwork[e.id]}getDynamicParam(e){return Gs()[e]||localStorage[e]||Cc(e)||globalThis[e]||""}onNetworkConnect(e){if(e&&e.length){if(this.store.pensNetwork)for(let n in this.store.pensNetwork)e.push(this.store.pensNetwork[n]);this.store.data.cancelFirstConnect||e.forEach(async n=>{n.enable!==!1&&this.requestHttp(n)}),e.forEach((n,r)=>{n.times=0,n.interval!==0&&n.enable!==!1&&(n.once?setTimeout(async()=>{this.requestHttp(n)},n.interval||1e3):this.updateTimerList[r]=setInterval(async()=>{this.requestHttp(n),this.store.options.reconnetTimes&&n.times>=this.store.options.reconnetTimes&&(n.times=0,clearInterval(this.updateTimerList[r]),this.updateTimerList[r]=void 0)},n.interval||1e3))})}}async requestHttp(e){var r,i,o;let n=Pe(e);if(n.url){if(n.url.indexOf("${")>-1){let l=(r=n.url.match(/\$\{([^}]+)\}/g))==null?void 0:r.map(s=>s.slice(2,-1));l&&l.forEach(s=>{n.url=n.url.replace(`\${${s}}`,this.getDynamicParam(s))})}if(typeof n.headers=="object"){for(let l in n.headers)if(typeof n.headers[l]=="string"){let s=(i=n.headers[l].match(/\$\{([^}]+)\}/g))==null?void 0:i.map(u=>u.slice(2,-1));s&&(n.headers[l]=n.headers[l].replace(`\${${s[0]}}`,this.getDynamicParam(s[0])))}}if(typeof n.body=="object"){for(let l in n.body)if(typeof n.body[l]=="string"){let s=(o=n.body[l].match(/\$\{([^}]+)\}/g))==null?void 0:o.map(u=>u.slice(2,-1));s&&(n.body[l]=n.body[l].replace(`\${${s[0]}}`,this.getDynamicParam(s[0])))}}const a=await fetch(n.url,{headers:n.headers,method:n.method,body:n.method==="GET"?void 0:JSON.stringify(n.body)});if(a.ok){const l=await a.text(),s=this.store.data.networks.filter(u=>u.protocol==="http")[n.index];this.socketCallback(l,{type:"http",url:n.url,name:n.name,net:s})}else e.times++,this.store.emitter.emit("error",{type:"http",error:a})}}closeNetwork(){this.mqttClients&&this.mqttClients.forEach(e=>{e.end()}),this.websockets&&this.websockets.forEach(e=>{e&&(e.onclose=void 0,e.close(),e=void 0)}),this.mqttClients=void 0,this.websockets=void 0,this.updateTimerList&&this.updateTimerList.forEach(e=>{clearInterval(e),e=void 0}),this.sqlTimerList&&this.sqlTimerList.forEach(e=>{clearInterval(e),e=void 0}),this.closeIot(),z$(this),this.closeSSE()}socketCallback(e,n){var o,a;this.store.emitter.emit("socket",{message:e,context:n});let r=e;if((o=n.net)!=null&&o.socketCbJs&&((a=n.net)!=null&&a.socketFn||(n.net.socketFn=new Function("e","context",n.net.socketCbJs)),n.net.socketFn)){if(r=n.net.socketFn(e,{meta2d:this,type:n.type,topic:n.topic,url:n.url,method:n.method}),!r)return;r&&r!==!0&&(e=r)}if(this.socketFn&&(r=this.socketFn(e,{meta2d:this,type:n.type,topic:n.topic,url:n.url,method:n.method}),!r))return;r===!0&&(r=e);let i;if(r.constructor===Object||r.constructor===Array)i=r;else if(typeof r=="string")try{i=JSON.parse(r)}catch(l){console.warn("Invalid socket data:",i,l)}else return;i&&(Array.isArray(i)||(i=[i]),i.length&&(i[0].dataId?this.setDatas(i):i.forEach(l=>{this.setValue(l)})))}setDatas(e,{render:n=!0,doEvent:r=!0,history:i}={}){const o=new Map;e.forEach(s=>{var u,c;(u=this.store.bindDatas[s.dataId])==null||u.forEach(f=>{const v=this.store.pens[f.id];if(!v)return;let g=o.get(v);if(!v.noOnBinds&&typeof v.onBinds=="function"){if(g)return;o.set(v,v.onBinds(v,e,f.formItem));return}g?g[f.formItem.key]=s.value:(g={id:f.id,[f.formItem.key]:s.value},o.set(v,g))}),(c=this.store.bind[s.id||s.dataId])==null||c.forEach(f=>{const v=this.store.pens[f.id];if(!v)return;let g=o.get(v);g?g[f.key]=s.value:(g={id:f.id,[f.key]:s.value},o.set(v,g))})}),this.store.data.locked&&this.doDataEvent(e);let a,l;i&&(a=[]),o.forEach((s,u)=>{this.setValue(s,{render:!1,doEvent:r,history:!1}),i&&(a.push(Pe(u,!0)),l.push(u))}),n&&this.render(),i&&this.pushHistory({type:Pt.Update,initPens:a,pens:l})}setValue(e,{render:n=!0,doEvent:r=!0,history:i}={}){let o=[];if(!e)return;if(e.id){if(e.id===this.store.data.id){this.setDatabyOptions(e),e.bkImage&&this.setBackgroundImage(e.bkImage),e.background&&this.setBackgroundColor(e.background),this.render();return}const l=this.store.pens[e.id];if(l)o=[l];else{let s=this.store.bind[e.id];if(s&&s.length){o=[],this.setDatas([e],{render:n,doEvent:r,history:i});return}}}else if(e.dataId){o=[],this.setDatas([e],{render:n,doEvent:r,history:i});return}else if(e.tag)o=this.find(e.tag);else{let l=[];for(let s in e)l.push({dataId:s,id:s,value:e[s]});l.length&&this.setDatas(l,{render:n,doEvent:r,history:i});return}i=i&&!this.store.data.locked;let a;if(i&&(a=Pe(o)),o.forEach(l=>{var u;const s=l.onBeforeValue?l.onBeforeValue(l,e):e;e.frames&&(this.stopAnimate([l]),e.showDuration||(e.showDuration=e.frames.reduce((c,f)=>c+f.duration,0))),zm(l,s),this.canvas.updateValue(l,s),(u=l.onValue)==null||u.call(l,l)}),!this.store.data.locked&&this.store.active.length&&!this.canvas.movingPens&&this.canvas.calcActiveRect(),i){let l=Pe(o);this.pushHistory({type:Pt.Update,initPens:a,pens:l})}r&&o.forEach(l=>{this.store.emitter.emit("valueUpdate",l)}),n&&this.render()}_setValue(e,n=!1){this.setValue(e,{history:n,render:!1,doEvent:!1})}pushHistory(e){this.canvas.pushHistory(e)}showInput(e,n){this.canvas.showInput(e,n)}hideInput(){this.canvas.hideInput()}clearDropdownList(){this.canvas.clearDropdownList()}clearRuleLines(){this.canvas.clearRuleLines()}doMessageEvent(e,n){this.store.messageEvents[e]&&this.store.messageEvents[e].forEach(r=>{let i=!1;r.event.conditions&&r.event.conditions.length?r.event.conditionType==="and"?i=r.event.conditions.every(o=>this.judgeCondition(r.pen,o.key,o)):r.event.conditionType==="or"&&(i=r.event.conditions.some(o=>this.judgeCondition(r.pen,o.key,o))):i=!0,i&&r.event.actions.forEach(o=>{this.events[o.action](r.pen,o,n)})})}initGlobalTriggers(){var e;this.store.globalTriggers={},(e=this.store.data.triggers)==null||e.forEach(n=>{n.conditions.forEach(r=>{r.source&&(this.store.globalTriggers[r.source]||(this.store.globalTriggers[r.source]=[]),this.store.globalTriggers[r.source].includes(n)||this.store.globalTriggers[r.source].push(n))})})}initMessageEvents(){this.store.messageEvents={},this.store.data.pens.forEach(e=>{var n;(n=e.events)==null||n.forEach(r=>{r.name==="message"&&r.message&&(this.store.messageEvents[r.message]||(this.store.messageEvents[r.message]=[]),this.store.messageEvents[r.message].push({pen:e,event:r}))})})}dataJudegeCondition(e,n,r){const{type:i,target:o,fnJs:a,fn:l,operator:s,valueType:u}=r;let c=!1;if(i==="fn"){if(l)c=l(e,{meta2d:this});else if(a){try{r.fn=new Function("data","context",a)}catch(f){console.error("Error: make function:",f)}r.fn&&(c=r.fn(e,{meta2d:this}))}}else{let f=r.value;u==="prop"&&(f=e[r.value]);let v=e[n];switch(s){case">":c=v>+f;break;case">=":c=v>=+f;break;case"<":c=v<+f;break;case"<=":c=v<=+f;break;case"=":case"==":c=v==f;break;case"!=":c=v!=f;break;case"[)":c=_s(+v,f);break;case"![)":c=!_s(+v,f);break;case"[]":c=As(v,f);break;case"![]":c=!As(v,f);break}}return c}judgeCondition(e,n,r){const{type:i,target:o,fnJs:a,fn:l,operator:s,valueType:u}=r;let c=!1;if(i==="fn"){if(l)c=l(e,{meta2d:this});else if(a){try{r.fn=new Function("pen","context",a)}catch(f){console.error("Error: make function:",f)}r.fn&&(c=r.fn(e,{meta2d:this}))}}else{let f=r.value;u==="prop"&&(f=this.store.pens[o][r.value]);let v=$v(e,n);switch(["x","y","width","height"].includes(n)&&(v=this.getPenRect(e)[n]),s){case">":c=v>+f;break;case">=":c=v>=+f;break;case"<":c=v<+f;break;case"<=":c=v<=+f;break;case"=":case"==":c=v==f;break;case"!=":c=v!=f;break;case"[)":c=_s(+v,f);break;case"![)":c=!_s(+v,f);break;case"[]":c=As(v,f);break;case"![]":c=!As(v,f);break}}return c}pushChildren(e,n){const r=[Pe(e,!0)],i=[];e.children||(e.children=[]);const o=[];n.forEach(l=>{let s=Pe(l,!0);if((!l.id||!this.store.pens[l.id])&&(this.canvas.makePen(l),s=null),l.parentId){const c=this.store.pens[l.parentId],f=c.children.findIndex(v=>v===l.id);r.push(Pe(c,!0)),c.children.splice(f,1),o.push(Pe(c,!0))}e.children.push(l.id),l.parentId=e.id;const u=oa(l.calculative.worldRect,e.calculative.worldRect);Object.assign(l,u),l.locked=l.lockedOnCombine??Xt.DisableMove,l.locked=l.interaction||Iv.includes(l.name)?0:l.locked,s?(r.push(s),o.push(Pe(l,!0))):i.push(Pe(l,!0))}),o.push(Pe(e,!0));let a=1;i.length&&(a=2,this.pushHistory({type:Pt.Add,pens:i,step:a})),this.pushHistory({type:Pt.Update,initPens:r,pens:o,step:a})}toPng(e,n,r=!1,i){return this.canvas.toPng(e,n,r,i)}activeToPng(e,n){return this.canvas.activeToPng(e,n)}pensToPng(e=this.store.active,n,r){return this.canvas.pensToPng(e,n,r)}downloadPng(e,n,r){var i;for(const o of this.store.data.pens)(o.calculative.img||["iframe"].includes(o.name))&&((i=o.onRenderPenRaw)==null||i.call(o,o));setTimeout(()=>{const o=document.createElement("a");o.setAttribute("download",(e||this.store.data.name||"le5le.meta2d")+".png"),o.setAttribute("href",this.toPng(n,void 0,!0,r));const a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),o.dispatchEvent(a)},1e3)}downloadSvg(e){if(!window.C2S)throw console.error("请先加载乐吾乐官网下的canvas2svg.js","https://assets.le5lecdn.com/2d/canvas2svg.js"),new Error("请先加载乐吾乐官网下的canvas2svg.js");let n=!1;const r=this.store.data.width||this.store.options.width,i=this.store.data.height||this.store.options.height;r&&i&&!this.store.data.component&&(n=!0);const o=this.getRect();n&&(o.x=this.store.data.origin.x,o.y=this.store.data.origin.y,o.width=r*this.store.data.scale,o.height=i*this.store.data.scale),o.x-=10,o.y-=10;const a=new window.C2S(o.width+20,o.height+20);a.textBaseline="middle",a.strokeStyle=this.store.styles.color;const l=this.store.options.downloadBgTransparent?void 0:this.store.data.background||this.store.styles.background;l&&n&&(a.save(),a.fillStyle=l,a.fillRect(0,0,o.width,o.height),a.restore()),this.store.bkImg&&n&&a.drawImage(this.store.bkImg,0,0,o.width,o.height),l&&!n&&(a.save(),a.fillStyle=l,a.fillRect(0,0,o.width+20,o.height+20),a.restore());for(const m of this.store.data.pens)m.visible==!1||!Gd(m,this.store)||Kd(a,m,o,!0);let s=a.getSerializedSvg();e!=null&&e.length&&(s=s.replace("<defs/>",`<defs>
          <style type="text/css">
            ${e.join(`
`)}
          </style>
          {{bk}}
        </defs>
        {{bkRect}}`)),l?(s=s.replace("{{bk}}",""),s=s.replace("{{bkRect}}",`<rect x="0" y="0" width="100%" height="100%" fill="${l}"></rect>`)):(s=s.replace("{{bk}}",""),s=s.replace("{{bkRect}}","")),s=s.replace(/--le5le--/g,"&#x");const u=window.URL,c=new Blob([s]),f=u.createObjectURL(c),v=document.createElement("a");v.setAttribute("download",`${this.store.data.name||"le5le.meta2d"}.svg`),v.setAttribute("href",f);const g=document.createEvent("MouseEvents");g.initEvent("click",!0,!0),v.dispatchEvent(g)}getRect(e=this.store.data.pens){return Wi(e)}hiddenTemplate(){this.canvas.canvasTemplate.hidden()}showTemplate(){this.canvas.canvasTemplate.show()}lockTemplate(e){this.store.data.pens.forEach(n=>{n.canvasLayer===on.CanvasTemplate&&(n.locked=e)})}fitView(e=!0,n=10){var f,v;if(!this.hasView())return;const{canvas:r}=this.canvas,{offsetWidth:i,offsetHeight:o}=r;this.resize(i,o);const a=$o(n),l=this.getRect(),s=(i-a[1]-a[3])/l.width,u=(o-a[0]-a[2])/l.height;let c=s;e?c=s>u?u:s:c=s>u?s:u,(f=this.store.data.fits)!=null&&f.length&&(this.canvas.opening=!0),this.scale(c*this.store.data.scale),this.centerView(),(v=this.store.data.fits)!=null&&v.length&&this.fillView()}fillView(){var i,o;const e=this.getRect(),n=this.canvas.width-e.width,r=this.canvas.height-e.height;if(Math.abs(n)>10){(i=this.store.data.fits)==null||i.forEach(s=>{let u=[];s.children.forEach(f=>{this.store.pens[f]&&(this.store.pens[f].locked=Xt.None,u.push(this.store.pens[f]))});let c=n/2;if(s.left&&s.right){let f=s.leftValue,v=s.rightValue;f?f=Math.abs(f)<1?f*this.canvas.width:f:f=0,v?v=Math.abs(v)<1?v*this.canvas.width:v:v=0;let g=(this.canvas.width-f-v)/(e.width-f-v);u.forEach(m=>{var y,p;m.image&&m.imageRatio&&m.calculative.worldRect.width/this.canvas.width>.1&&(m.imageRatio=!1),m.calculative.worldRect.x=e.x-n/2+f+(m.calculative.worldRect.x-e.x)*g,m.calculative.worldRect.width*=g,m.calculative.worldRect.ex=m.calculative.worldRect.x+m.calculative.worldRect.width,m.calculative.width=m.calculative.worldRect.width,m.calculative.x=m.calculative.worldRect.x,m.width=m.calculative.worldRect.width,m.x=m.calculative.worldRect.x,this.canvas.updatePenRect(m,{worldRectIsReady:!1}),m.externElement&&((y=m.onResize)==null||y.call(m,m)),(p=m.children)!=null&&p.length&&fi(m,this.store).forEach(x=>{var S;x.externElement&&((S=x.onResize)==null||S.call(x,x))})})}else s.left?(c=-c,s.leftValue&&(c+=Math.abs(s.leftValue)<1?s.leftValue*this.canvas.width:s.leftValue),this.translatePens(u,c,0)):s.right&&(s.rightValue&&(c=c-(Math.abs(s.rightValue)<1?s.rightValue*this.canvas.width:s.rightValue)),this.translatePens(u,c,0))});const a=this.store.data.pens.filter(s=>s.name==="iframe");a==null||a.forEach(s=>{var c,f;const u=s.calculative.worldRect;if(u.width/this.store.data.scale>e.width*.8){let v=u.width;s.calculative.worldRect.x=u.x-n/2,s.calculative.worldRect.width=u.width+n,s.calculative.worldRect.ex=u.ex+n,s.operationalRect.x=s.operationalRect.x*v/s.calculative.worldRect.width,s.operationalRect.width=(s.calculative.worldRect.width-(1-s.operationalRect.width)*v)/s.calculative.worldRect.width,(c=s.onBeforeValue)==null||c.call(s,s,{operationalRect:s.operationalRect}),(f=s.onResize)==null||f.call(s,s)}});const l=this.store.data.pens.filter(s=>s.name==="video");l==null||l.forEach(s=>{var c;const u=s.calculative.worldRect;u.width/this.store.data.scale>e.width*.8&&(s.calculative.worldRect.x=u.x-n/2,s.calculative.worldRect.width=u.width+n,s.calculative.worldRect.ex=u.ex+n,(c=s.onResize)==null||c.call(s,s))})}if(Math.abs(r)>10){(o=this.store.data.fits)==null||o.forEach(s=>{let u=[];s.children.forEach(f=>{this.store.pens[f]&&(this.store.pens[f].locked=Xt.None,u.push(this.store.pens[f]))});let c=r/2;if(s.top&&s.bottom){let f=s.topValue,v=s.bottomValue;f?f=Math.abs(f)<1?f*this.canvas.height:f:f=0,v?v=Math.abs(v)<1?v*this.canvas.height:v:v=0;let g=(this.canvas.height-f-v)/e.height;u.forEach(m=>{var y,p;m.image&&m.imageRatio&&m.calculative.worldRect.height/this.canvas.height>.1&&(m.imageRatio=!1),m.calculative.worldRect.y=e.y-r/2+f+(m.calculative.worldRect.y-e.y)*g,m.calculative.worldRect.height*=g,m.calculative.worldRect.ey=m.calculative.worldRect.y+m.calculative.worldRect.height,m.calculative.height=m.calculative.worldRect.height,m.calculative.y=m.calculative.worldRect.y,m.height=m.calculative.worldRect.height,m.y=m.calculative.worldRect.y,this.canvas.updatePenRect(m,{worldRectIsReady:!1}),m.externElement&&((y=m.onResize)==null||y.call(m,m)),(p=m.children)!=null&&p.length&&fi(m,this.store).forEach(x=>{var S;x.externElement&&((S=x.onResize)==null||S.call(x,x))})})}else s.top?(c=-c,s.topValue&&(c+=Math.abs(s.topValue)<1?s.topValue*this.canvas.height:s.topValue),this.translatePens(u,0,c)):s.bottom&&(s.bottomValue&&(c=c-(Math.abs(s.bottomValue)<1?s.bottomValue*this.canvas.height:s.bottomValue)),this.translatePens(u,0,c))});const a=this.store.data.pens.filter(s=>s.name==="iframe");a==null||a.forEach(s=>{var c,f;const u=s.calculative.worldRect;if(u.height/this.store.data.scale>e.height*.8){let v=u.height;s.calculative.worldRect.y=u.y-r/2,s.calculative.worldRect.height=u.height+r,s.calculative.worldRect.ey=u.ey+r,s.operationalRect.y=s.operationalRect.y*v/s.calculative.worldRect.width,s.operationalRect.height=(s.calculative.worldRect.height-(1-s.operationalRect.height)*v)/s.calculative.worldRect.height,(c=s.onBeforeValue)==null||c.call(s,s,{operationalRect:s.operationalRect}),(f=s.onResize)==null||f.call(s,s)}});const l=this.store.data.pens.filter(s=>s.name==="video");l==null||l.forEach(s=>{var c;const u=s.calculative.worldRect;u.height/this.store.data.scale>e.height*.8&&(s.calculative.worldRect.y=u.y-r/2,s.calculative.worldRect.height=u.height+r,s.calculative.worldRect.ey=u.ey+r,(c=s.onResize)==null||c.call(s,s))})}this.canvas.canvasTemplate.fit=!0,this.canvas.canvasTemplate.init(),this.canvas.canvasImage.init(),this.canvas.canvasImageBottom.init(),this.render(!0)}trimPens(){let e=this.store.data.pens.filter(n=>n.name==="line"&&n.anchors.length<2);this.delete(e)}fitTemplateView(e=!0,n=10){if(!this.hasView())return;const{canvas:r}=this.canvas,{offsetWidth:i,offsetHeight:o}=r,a=$o(n),l=this.getRect(),s=(i-a[1]-a[3])/l.width,u=(o-a[0]-a[2])/l.height;let c=s;e?c=s>u?u:s:c=s>u?s:u,this.canvas.templateScale(c*this.store.data.scale);let f=this.getRect(),v=this.store.data.pens.filter(g=>!g.parentId);this.canvas.templateTranslatePens(v,-f.x,-f.y),this.store.data.pens.forEach(g=>{g.type?this.canvas.initLineRect(g):this.canvas.updateLines(g)}),this.centerView()}fitSizeView(e=!0,n=10){var v,g;const{canvas:r}=this.canvas,{offsetWidth:i,offsetHeight:o}=r;this.resize(i,o);const a=$o(n),l=(this.store.data.width||this.store.options.width)*this.store.data.scale,s=(this.store.data.height||this.store.options.height)*this.store.data.scale,u=(i-a[1]-a[3])/l,c=(o-a[0]-a[2])/s;let f=u;e==="width"?f=u:e==="height"?f=c:e?f=u>c?c:u:f=u>c?u:c,(v=this.store.data.fits)!=null&&v.length&&(this.canvas.opening=!0),this.scale(f*this.store.data.scale),this.centerSizeView(),(g=this.store.data.fits)!=null&&g.length&&this.fillView()}centerSizeView(){const e=this.getViewCenter(),n=this.store.data.width||this.store.options.width,r=this.store.data.height||this.store.options.height,i={x:0,y:0,width:n,height:r};Dn(i);const{center:o}=i,{scale:a,origin:l,x:s,y:u}=this.store.data;this.translate((e.x-l.x)/a-o.x-s/a,(e.y-l.y)/a-o.y-u/a);const{canvas:c}=this.canvas,f=(c.scrollWidth-c.offsetWidth)/2,v=(c.scrollHeight-c.offsetHeight)/2;c.scrollTo(f,v)}scrollView(e=10,n=!1){if(!this.hasView()||!this.canvas.scroll)return;const{canvas:r}=this.canvas,{offsetWidth:i,offsetHeight:o}=r;this.resize(i,o);const a=$o(e),l=this.getRect(),s=(i-a[1]-a[3])/l.width;this.scale(s*this.store.data.scale),this.topView(a[0]),n&&this.canvas.scroll.changeMode()}screenView(e=10,n=!0){if(!this.hasView())return;const{canvas:r}=this.canvas,{offsetWidth:i,offsetHeight:o}=r;this.resize(i,o);const a=$o(e),l=this.getRect();let s=(i-a[1]-a[3])/l.width;n||(s=(o-a[0]-a[2])/l.height),this.scale(s*this.store.data.scale),this.topView(a[0])}topView(e=10){if(!this.hasView())return;const n=this.getRect(),r=this.getViewCenter(),i=this.getPenRect(n);Dn(i);const{center:o}=i,{scale:a,origin:l,x:s,y:u}=this.store.data;this.translate((r.x-l.x)/a-o.x-s/a,(e-l.y)/a-i.y-u/a);const{canvas:c}=this.canvas,f=(c.scrollWidth-c.offsetWidth)/2,v=(c.scrollHeight-c.offsetHeight)/2;c.scrollTo(f,v)}centerView(){if(!this.hasView())return;const e=this.getRect(),n=this.getViewCenter(),r=this.getPenRect(e);Dn(r);const{center:i}=r,{scale:o,origin:a,x:l,y:s}=this.store.data;this.translate((n.x-a.x)/o-i.x-l/o,(n.y-a.y)/o-i.y-s/o);const{canvas:u}=this.canvas,c=(u.scrollWidth-u.offsetWidth)/2,f=(u.scrollHeight-u.offsetHeight)/2;u.scrollTo(c,f)}hasView(){return!!this.store.data.pens.filter(e=>!e.isRuleLine).length}getViewCenter(){const{width:e,height:n}=this.canvas;return{x:e/2,y:n/2}}beSameByFirst(e=this.store.data.pens,n){const r=Pe(e),i=e[0],{width:o,height:a}=this.getPenRect(i);for(let l=1;l<e.length;l++){const s=e[l];n==="width"?this.setValue({id:s.id,width:o},{render:!1,doEvent:!1}):n==="height"?this.setValue({id:s.id,height:a},{render:!1,doEvent:!1}):this.setValue({id:s.id,width:o,height:a},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:Pt.Update,initPens:r,pens:e})}beSameByLast(e=this.store.data.pens,n){const r=Pe(e),i=e[e.length-1],{width:o,height:a}=this.getPenRect(i);for(let l=0;l<e.length-1;l++){const s=e[l];n==="width"?this.setValue({id:s.id,width:o},{render:!1,doEvent:!1}):n==="height"?this.setValue({id:s.id,height:a},{render:!1,doEvent:!1}):this.setValue({id:s.id,width:o,height:a},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:Pt.Update,initPens:r,pens:e})}formatPainterByFirst(e=this.store.data.pens){const n=Pe(e),r=e[0],i={};Jl.forEach(o=>{i[o]=r[o]});for(let o=1;o<e.length;o++){const a=e[o];this.setValue({id:a.id,...i},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:Pt.Update,initPens:n,pens:e})}formatPainterByLast(e=this.store.data.pens){const n=Pe(e),r=e[e.length-1],i={};Jl.forEach(o=>{i[o]=r[o]});for(let o=0;o<e.length-1;o++){const a=e[o];this.setValue({id:a.id,...i},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:Pt.Update,initPens:n,pens:e})}setFormatPainter(){const e=this.store.active,n={};if(e.length>0){const r=e[0];Jl.forEach(i=>{n[i]=r[i]!==void 0?r[i]:this.store.options.defaultFormat[i]||this.store.data[i]||this.store.options[i]})}else Jl.forEach(r=>{this.store.options.defaultFormat[r]||this.store.data[r]||this.store.options[r]});localStorage.setItem("meta2d-formatPainter",JSON.stringify(n))}formatPainter(){const e=this.store.active,n=Pe(e),r=JSON.parse(localStorage.getItem("meta2d-formatPainter"));for(let i=0;i<e.length;i++){const o=e[i];this.setValue({id:o.id,...r},{render:!1,doEvent:!1})}this.render(),this.pushHistory({type:Pt.Update,initPens:n,pens:e})}clearFormatPainter(){const e=this.store.active,n=Pe(e);Jl.forEach(r=>{for(let i=0;i<e.length;i++){const o=e[i],{fontSize:a,lineHeight:l}=this.store.options;r==="lineWidth"?(o.lineWidth=1,o.calculative.lineWidth=1):r==="fontSize"?(o.fontSize=a,o.calculative.fontSize=a):r==="lineHeight"?(o.lineHeight=l,o.calculative.lineHeight=l):(delete o[r],delete o.calculative[r])}}),this.render(),this.pushHistory({type:Pt.Update,initPens:n,pens:e})}alignNodes(e,n=this.store.data.pens,r){!r&&(r=this.getPenRect(this.getRect(n)));const i=Pe(n);for(const o of n)this.alignPen(e,o,r);this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:Pt.Update,initPens:i,pens:n})}alignNodesV(e,n=this.store.data.pens,r=!1){const i=this.store.data.width||this.store.options.width,o=this.store.data.height||this.store.options.height;let a={x:0,y:0,width:i,height:o};const l=Pe(n);if(r){const s=this.store.data.scale,u=this.getRect(n),c=(u.x-this.store.data.origin.x)/s,f=(u.y-this.store.data.origin.y)/s,v=u.width/s,g=u.height/s;let m=0,y=0;switch(e){case"left":m=-c;break;case"right":m=i-(c+v);break;case"top":y=-f;break;case"bottom":y=o-(f+g);break;case"center":m=i/2-(c+v/2);break;case"middle":y=o/2-(f+g/2);break}this.translatePens(n,m*s,y*s)}else for(const s of n)this.alignPen(e,s,a);this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:Pt.Update,initPens:l,pens:n})}alignNodesByFirst(e,n=this.store.data.pens){const r=Pe(n),i=n[0],o=this.getPenRect(i);for(let a=1;a<n.length;a++){const l=n[a];this.alignPen(e,l,o)}this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:Pt.Update,initPens:r,pens:n})}alignNodesByLast(e,n=this.store.data.pens){const r=Pe(n),i=n[n.length-1],o=this.getPenRect(i);for(let a=0;a<n.length-1;a++){const l=n[a];this.alignPen(e,l,o)}this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:Pt.Update,initPens:r,pens:n})}alignPen(e,n,r){const i=this.getPenRect(n);switch(e){case"left":i.x=r.x;break;case"right":i.x=r.x+r.width-i.width;break;case"top":i.y=r.y;break;case"bottom":i.y=r.y+r.height-i.height;break;case"center":i.x=r.x+r.width/2-i.width/2;break;case"middle":i.y=r.y+r.height/2-i.height/2;break}this.setValue({id:n.id,...i},{render:!1,doEvent:!1})}spaceBetweenByDirection(e,n=this.store.data.pens,r){if(!r){let u=1/0,c=-1/0,f=e==="width"?"x":"y";n.forEach(v=>{u=Math.min(u,v.calculative.worldRect[f]),c=Math.max(c,v.calculative.worldRect["e"+f])}),r=(c-u)/this.store.data.scale}if(n=n.filter(u=>!u.parentId),n.length<=2)return;const i=Pe(n),o=n.reduce((u,c)=>{const f=this.getPenRect(c);return u+f[e]},0),a=(r-o)/(n.length-1);n=n.sort((u,c)=>e==="width"?u.x-c.x:u.y-c.y);const l=this.getPenRect(n[0]);let s=e==="width"?l.x:l.y;for(const u of n){const c=this.getPenRect(u);e==="width"?c.x=s:c.y=s,s+=c[e]+a,this.setValue({id:u.id,...c},{render:!1,doEvent:!1})}this.initImageCanvas(n),this.initTemplateCanvas(n),this.render(),this.pushHistory({type:Pt.Update,initPens:i,pens:n})}spaceBetween(e,n){this.spaceBetweenByDirection("width",e,n)}spaceBetweenColumn(e,n){this.spaceBetweenByDirection("height",e,n)}layout(e=this.store.data.pens,n,r=30){const i=this.getPenRect(Wi(e));!n&&(n=i.width),e=e.filter(u=>!u.type&&!u.parentId);const o=Pe(e);let a=0;e.forEach(u=>{const c=this.getPenRect(u);c.height>a&&(a=c.height)});let l=i.x,s=i.y;e.forEach((u,c)=>{const f=this.getPenRect(u);if(f.x=l,f.y=s+a/2-f.height/2,this.setValue({id:u.id,...f},{render:!1,doEvent:!1}),c===e.length-1)return;const v=l+f.width-i.x,g=this.getPenRect(e[c+1]);Math.round(n-v)>=Math.round(g.width+r)?l+=f.width+r:(l=i.x,s+=a+r)}),this.initImageCanvas(e),this.initTemplateCanvas(e),this.render(),this.pushHistory({type:Pt.Update,initPens:o,pens:e})}gotoView(e){const n=this.getViewCenter(),r=n.x-e.calculative.worldRect.x-e.calculative.worldRect.width/2,i=n.y-e.calculative.worldRect.y-e.calculative.worldRect.height/2;this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.translate(r-this.store.data.x,i-this.store.data.y),this.store.data.x=r,this.store.data.y=i;for(const o of this.store.data.pens)To(o);this.canvas.canvasImage.init(),this.canvas.canvasImageBottom.init(),this.render()}showMap(){this.map||(this.map=new L$(this.canvas)),this.map.show()}hideMap(){this.map.hide()}onSizeUpdate(){this.mapTimer&&(clearTimeout(this.mapTimer),this.mapTimer=void 0),this.mapTimer=setTimeout(()=>{this.map&&this.map.isShow&&this.map.show(),this.canvas&&this.canvas.scroll&&this.canvas.scroll.isShow&&this.canvas.scroll.resize()},500)}toggleAnchorMode(){this.canvas.toggleAnchorMode()}addAnchorHand(){this.canvas.addAnchorHand()}removeAnchorHand(){this.canvas.removeAnchorHand()}toggleAnchorHand(){this.canvas.toggleAnchorHand()}top(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens,i=[...fi(n,this.store),n].map(a=>a.id);r.filter(a=>i.includes(a.id)).forEach(a=>{const l=r.findIndex(s=>s.id===a.id);l>-1&&(r.push(r[l]),r.splice(l,1),this.initTemplateCanvas([a]),this.initImageCanvas([a])),this.specificLayerMove(a,"top")})}this.store.emitter.emit("layer",{type:"top",pens:e})}initImageCanvas(e){this.canvas&&this.canvas.initImageCanvas(e)}initTemplateCanvas(e){this.canvas&&this.canvas.initTemplateCanvas(e)}bottom(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens,i=[...fi(n,this.store),n].map(a=>a.id),o=r.filter(a=>i.includes(a.id));for(let a=o.length-1;a>=0;a--){const l=o[a],s=r.findIndex(u=>u.id===l.id);s>-1&&(r.unshift(r[s]),r.splice(s+1,1),this.initTemplateCanvas([l]),this.initImageCanvas([l])),this.specificLayerMove(l,"bottom")}}this.store.emitter.emit("layer",{type:"bottom",pens:e})}upByArea(e){if(this.store.data.pens.findIndex(s=>s.id===e.id)===-1){console.warn("upByArea: pen not in canvas");return}const r=[e,...fi(e,this.store)];let i=r.map(s=>this.store.data.pens.findIndex(u=>u.id===s.id));i.includes(-1)&&(console.warn("upByArea: pen children not in canvas"),i=i.filter(s=>s!==-1));const o=Math.min(...i),a=e.calculative.worldRect,l=this.store.data.pens.findIndex((s,u)=>{if(u<=o||s.id===e.id||fP(s,e))return!1;const c=s.calculative.worldRect;return Ao(a,c)});if(l===-1){this.up(e);return}this.store.data.pens.splice(l+1,0,...r);for(const s of r){const u=this.store.data.pens.findIndex(c=>c.id===s.id);u>-1&&this.store.data.pens.splice(u,1)}this.initImageCanvas([e])}specificLayerMove(e,n){var r;if(e.image&&e.name!=="gif"){let i=on.CanvasImageBottom;n==="top"?i=on.CanvasImage:(n==="up"||n==="down")&&(i=on.CanvasMain),this.setValue({id:e.id,canvasLayer:i},{render:!1,doEvent:!1,history:!1})}else if(e.externElement||e.name==="gif"){let i=0;n==="top"?(e.calculative.canvas.maxZindex+=1,i=e.calculative.canvas.maxZindex):n==="up"?i=e.calculative.zIndex===void 0?6:e.calculative.zIndex+1:n==="down"&&(i=e.calculative.zIndex===void 0?3:e.calculative.zIndex-1,i<0&&(i=0)),this.setValue({id:e.id,zIndex:i},{render:!1,doEvent:!1,history:!1}),(r=e.calculative.singleton)!=null&&r.div&&mi(e,e.calculative.singleton.div)}}up(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens;if(n.children&&n.children.length){const i=[...fi(n,this.store),n],o=[];for(let s=0;s<r.length;s++){const u=r[s];i.findIndex(c=>c.id===u.id)!==-1&&(u.temIndex=s,o.push(u))}let a=-1,l=0;o.forEach(s=>{s.temIndex-=l,r.splice(s.temIndex,1),l+=1,a=s.temIndex,delete s.temIndex,this.specificLayerMove(s,"up")}),r.splice(a+1,0,...o),this.initTemplateCanvas(o),this.initImageCanvas(o)}else{const i=r.findIndex(o=>o.id===n.id);i>-1&&i!==r.length-1&&(r.splice(i+2,0,r[i]),r.splice(i,1),this.initTemplateCanvas([n]),this.initImageCanvas([n])),this.specificLayerMove(n,"up")}}this.store.emitter.emit("layer",{type:"up",pens:e})}down(e){e||(e=this.store.active),Array.isArray(e)||(e=[e]);for(const n of e){const r=this.store.data.pens;if(n.children&&n.children.length){const i=[...fi(n,this.store),n],o=[];for(let s=0;s<r.length;s++){const u=r[s];i.findIndex(c=>c.id===u.id)!==-1&&(u.temIndex=s,o.push(u))}let a=-1,l=0;o.forEach((s,u)=>{s.temIndex-=l,r.splice(s.temIndex,1),l+=1,u===0&&(a=s.temIndex),delete s.temIndex,this.specificLayerMove(s,"down")}),r.splice(a-1,0,...o),this.initTemplateCanvas(o),this.initImageCanvas(o)}else{const i=r.findIndex(o=>o.id===n.id);i>-1&&i!==0&&(r.splice(i-1,0,r[i]),r.splice(i+1,1),this.initTemplateCanvas([n]),this.initImageCanvas([n])),this.specificLayerMove(n,"down")}}this.store.emitter.emit("layer",{type:"down",pens:e})}setLayer(e,n,r=this.store.data.pens){const i=r.findIndex(o=>o.id===e.id);i>-1&&(i>n?(r.splice(n,0,r[i]),r.splice(i+1,1)):i<n&&(r.splice(n,0,r[i]),r.splice(i,1)))}changePenId(e,n){this.canvas.changePenId(e,n)}getLines(e,n="all"){var i;if(e.type===mn.Line)return[];const r=[];return(i=e.connectedLines)==null||i.forEach(({lineId:o})=>{const a=this.store.pens[o];if(!a){console.warn(e,"node contain a error connectedLine");return}if(!r.find(l=>l.id===a.id))switch(n){case"all":r.push(a);break;case"in":gn(a).connectTo===e.id&&r.push(a);break;case"out":Gn(a).connectTo===e.id&&r.push(a);break}}),r}nextNode(e){if(e.type===mn.Line){const n=this.store.pens[gn(e).connectTo];return n?[n]:[]}else{const n=this.getLines(e,"out"),r=[];return n.forEach(i=>{const o=this.nextNode(i);for(const a of o)!r.find(s=>s.id===a.id)&&r.push(a)}),r}}previousNode(e){if(e.type===mn.Line){const n=this.store.pens[Gn(e).connectTo];return n?[n]:[]}else{const n=this.getLines(e,"in"),r=[];return n.forEach(i=>{const o=this.previousNode(i);for(const a of o)!r.find(s=>s.id===a.id)&&r.push(a)}),r}}getNext(e){var r;if(e.type===mn.Line){console.warn("非连线节点");return}const n=[];return(r=e.connectedLines)==null||r.forEach(({lineId:i,anchor:o})=>{var s,u;const a=(s=e.anchors)==null?void 0:s.filter(c=>c.id===o)[0],l=this.findOne(i);if(l.anchors[0].connectTo==e.id){const c=l.anchors[l.anchors.length-1].connectTo;if(c){const f=this.findOne(c),v=(u=f.connectedLines)==null?void 0:u.filter(m=>m.lineId===l.id)[0],g=f.anchors.filter(m=>m.id===v.anchor)[0];n.push({from:e,fromAnchor:a,line:l,to:f,toAnchor:g})}}}),n}addAnchor(e,n,r){if(!e)return;if(e.anchors||(e.anchors=[]),e.calculative.worldAnchors||(e.calculative.worldAnchors=[]),e.type===mn.Line&&(r<0&&(r=e.anchors.length+1+r),r>e.anchors.length&&(r=e.anchors.length),r<0&&(r=0),r==0&&e.anchors[0].connectTo||r==e.anchors.length&&e.anchors[r-1].connectTo)){console.warn("端点存在连接关系");return}let i=null,o=null;n.x<=1&&n.x>=0&&n.y<=1&&n.y>=0?(o={id:n.id||Wt(),penId:e.id,x:e.calculative.worldRect.x+e.calculative.worldRect.width*n.x,y:e.calculative.worldRect.y+e.calculative.worldRect.height*n.y},e.calculative.worldRect&&e.rotate%360&&_n(o,e.rotate,e.calculative.worldRect.center),i={id:o.id,penId:e.id,x:n.x,y:n.y}):(o={id:n.id||Wt(),penId:e.id,x:n.x,y:n.y},e.calculative.worldRect&&(e.rotate%360&&_n(n,-e.rotate,e.calculative.worldRect.center),i={id:o.id,penId:e.id,x:(n.x-e.calculative.worldRect.x)/e.calculative.worldRect.width,y:(n.y-e.calculative.worldRect.y)/e.calculative.worldRect.height})),e.type===mn.Line?(e.calculative.worldAnchors.splice(r,0,o),e.anchors.splice(r,0,i),this.canvas.updateLines(e),this.canvas.initLineRect(e),this.render()):(e.calculative.worldAnchors.push(o),e.anchors.push(i))}connectLine(e,n,r,i,o=!0){if(!r){const u=n.calculative.worldRect;r=Xs(e,{x:u.x+u.width/2,y:u.y+u.height/2})}if(!i){const u=e.calculative.worldRect;i=Xs(n,{x:u.x+u.width/2,y:u.y+u.height/2})}const a=Math.abs(r.x-i.x),s={height:Math.abs(r.y-i.y),lineName:"line",lineWidth:1,name:"line",type:1,width:a,x:Math.min(r.x,i.x),y:Math.min(r.y,i.y),anchors:[{x:r.x>i.x?1:0,y:r.y>i.y?1:0,id:Wt()},{x:r.x>i.x?0:1,y:r.x>i.x?0:1,id:Wt()}]};return this.addPens([s]),xr(e,r,s,s.calculative.worldAnchors[0]),xr(n,i,s,s.calculative.worldAnchors[1]),s.calculative.active=!1,this.canvas.updateLines(s),this.canvas.updateLines(e),this.canvas.updateLines(n),this.canvas.initLineRect(s),o&&this.render(),s}toComponent(e=this.store.data.pens,n,r){if(e.length===1){const c=Pe(e[0]);return c.type=mn.Node,c.id=void 0,[c]}const i=Pe(e,!0),o=Wi(i);let a={id:Wt(),name:"combine",...o,children:[],showChild:n};r&&(a.anchors=[{id:"0",penId:a.id,x:.5,y:0},{id:"1",penId:a.id,x:1,y:.5},{id:"2",penId:a.id,x:.5,y:1},{id:"3",penId:a.id,x:0,y:.5}]);const l=i.filter(c=>!c.parentId),s=i.find(c=>c.width===o.width&&c.height===o.height),u=s&&n===void 0;return l.length===1?a=l[0]:u&&(s.children||(s.children=[]),a=s),i.forEach(c=>{if(c===a||c.parentId===a.id||c.parentId)return;a.children.push(c.id),c.parentId=a.id;const f=oa(c.calculative.worldRect,o);Object.assign(c,f),c.locked=c.lockedOnCombine??Xt.DisableMove}),u||l.length===1?Pe(i):Pe([a,...i])}installPenPlugins(e,n){if(!e.tag&&!e.name&&!e.id)return;let r;e.id?r="id":e.tag?r="tag":e.name&&(r="name"),n.forEach(i=>{let o=i.plugin,a=i.options;if(o&&tk(o)&&r)if(o.install(e,a),!this.penPluginMap.has(o))this.penPluginMap.set(o,[{[r]:e[r],option:a}]);else{let l=this.penPluginMap.get(o).find(s=>s[r]===e[r]);l?l.option=a:this.penPluginMap.get(o).push({[r]:e[r],option:a})}})}uninstallPenPlugins(e,n){let r;e.id?r="id":e.tag?r="tag":e.name&&(r="name"),r&&n.forEach(i=>{let o=i.plugin;o.uninstall(e,i.options);let a=this.penPluginMap.get(o),l=a.findIndex(s=>s[r]===e[r]);l!==-1&&(a.splice(l,1),a.length===0&&this.penPluginMap.delete(o))})}setVisible(e,n,r=!0){if(this.onSizeUpdate(),this.setValue({id:e.id,visible:n},{render:!1,doEvent:!1}),e.children)for(const o of e.children){const a=this.store.pens[o];a&&this.setVisible(a,n,!1)}let i=fi(e,this.store);i.push(e),this.initImageCanvas(i),r&&this.render()}clearHover(){this.canvas.clearHover()}closeSocket(){this.closeWebsocket(),this.closeMqtt(),this.closeHttp()}destroy(e){if(this.clear(!1),this.stopDataMock(),this.closeSocket(),this.closeNetwork(),this.closeAll(),sc.destroyThemeSheet(this.store.id),this.store.emitter.all.clear(),this.canvas.destroy(),this.canvas=void 0,Tt[this.store.id]=void 0,!e){for(const n in Tt)delete Tt[n];Tt.path2dDraws={},Tt.canvasDraws={},Tt.anchors={},Tt.htmlElements={}}}}function U$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ey:a}=t.calculative.worldRect,l=o/4;if(n.moveTo(r+l,i),n.lineTo(r,i),n.lineTo(r,a),n.lineTo(r+l,a),n instanceof Path2D)return n}function q$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ex:a,ey:l}=t.calculative.worldRect,s=t.offsetX;let u=o/7;if(s>1?u=s:s>0&&(u=o*s),n.moveTo(r+u,i),n.lineTo(a,i),n.lineTo(r+o-u,l),n.lineTo(r,l),n.closePath(),n instanceof Path2D)return n}function K$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a,ex:l,ey:s}=t.calculative.worldRect,u=o/8;if(n.moveTo(r+u,i),n.lineTo(l-u,i),n.bezierCurveTo(l+u/3,i,l+u/3,s,l-u,s),n.lineTo(r+u,s),n.lineTo(r,i+a/2),n.closePath(),n instanceof Path2D)return n}function G$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a,ex:l,center:s}=t.calculative.worldRect,u=s.x,c=i+a*6/7,f=a/6;if(n.moveTo(r,i),n.lineTo(l,i),n.lineTo(l,c),n.bezierCurveTo(l-20,c-f,u+o/5,c-f,u,c),n.bezierCurveTo(u-o/5,c+f,r,c+f,r,c),n.closePath(),n instanceof Path2D)return n}function X$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ex:a,ey:l}=t.calculative.worldRect,s=o/10;if(n.moveTo(r+s*2,i),n.bezierCurveTo(r-s*2/3,i,r-s*2/3,l,r+s*2,l),n.lineTo(a,l),n.bezierCurveTo(a-s,l,a-s,i,a,i),n.closePath(),n instanceof Path2D)return n}function Y$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ex:a,ey:l}=t.calculative.worldRect;n.moveTo(r,i),n.lineTo(a,i),n.lineTo(a,l),n.lineTo(r,l),n.closePath();const s=o/7;if(n.moveTo(r,i+s),n.lineTo(a,i+s),n.moveTo(r+s,i),n.lineTo(r+s,l),n instanceof Path2D)return n}function Q$(t,e){const n=e||new Path2D,{x:r,y:i,height:o,ex:a,ey:l}=t.calculative.worldRect,s=o/4;if(n.moveTo(r,i+s),n.lineTo(a,i),n.lineTo(a,l),n.lineTo(r,l),n.closePath(),n instanceof Path2D)return n}function J$(t,e){const n=e||new Path2D,{x:r,y:i,ex:o,ey:a}=t.calculative.worldRect;if(n.moveTo(r,i),n.lineTo(o,i),n.moveTo(r,a),n.lineTo(o,a),n instanceof Path2D)return n}function Z$(t,e){const n=e||new Path2D,{x:r,y:i,width:o,height:a,ex:l,ey:s}=t.calculative.worldRect;if(n.ellipse(r+o/2,i+a/2,o/2,a/2,0,0,Math.PI*2),n.moveTo(r+o/2,s),n.lineTo(l,s),n.closePath(),n instanceof Path2D)return n}function eT(t,e){const n=e||new Path2D,{x:r,y:i,width:o,ex:a,ey:l}=t.calculative.worldRect,s=o/7;if(n.moveTo(r,i),n.lineTo(a,i),n.lineTo(a,l),n.lineTo(r,l),n.closePath(),n.moveTo(r+s,i),n.lineTo(r+s,l),n.moveTo(a-s,i),n.lineTo(a-s,l),n instanceof Path2D)return n}function tT(t,e){const n=e||new Path2D,{x:r,y:i,height:o,ex:a,ey:l}=t.calculative.worldRect,s=o/7;if(n.moveTo(r,i+s),n.bezierCurveTo(r,i-s/2|0,a,i-s/2|0,a,i+s),n.lineTo(a,l-s),n.bezierCurveTo(a,l+s/2|0,r,l+s/2|0,r,l-s),n.closePath(),n.moveTo(r,l-s),n.bezierCurveTo(r,l-s*2|0,a,l-s*2|0,a,l-s),n instanceof Path2D)return n}function nT(){return{flowComment:U$,flowData:q$,flowDb:tT,flowDisplay:K$,flowDocument:G$,flowExternStorage:X$,flowInternalStorage:Y$,flowManually:Q$,flowParallel:J$,flowQueue:Z$,flowSubprocess:eT}}const rT="_main_rolhg_1",iT="_meta2d_rolhg_7",Fb={main:rT,meta2d:iT},oT=()=>{let t=b.useRef(null);return b.useEffect(()=>{t.current&&(window.MyEditor=new vC(t.current),window.MyEditor.register(nT()))},[]),vt.jsx("div",{className:Fb.main,id:"meta2d-container",children:vt.jsx("div",{className:Fb.meta2d,ref:t,id:"meta2d"})})},aT="_header_5gzob_2",sT="_title_5gzob_10",lT="_buttonGroup_5gzob_39",dd={header:aT,title:sT,buttonGroup:lT},cT="_commonBtn_1gw4l_1",uT={commonBtn:cT};function Pi({onClick:t,myStyle:e,children:n,refs:r,active:i}){return vt.jsx("div",{ref:r,className:uT.commonBtn,onClick:t,style:{borderColor:i?"#4096ff":"#ccc",color:i?"#4096ff":"black",...e},children:n})}function Ig(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function dT(t){if(Array.isArray(t))return Ig(t)}function gC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vm(t,e){if(t){if(typeof t=="string")return Ig(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ig(t,e):void 0}}function fT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae(t){return dT(t)||gC(t)||Vm(t)||fT()}const hT=ue.createContext({});function mC(t){if(Array.isArray(t))return t}function vT(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(c){u=!0,i=c}finally{try{if(!s&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function pC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(t,e){return mC(t)||vT(t,e)||Vm(t,e)||pC()}function ht(t){"@babel/helpers - typeof";return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(t)}function gT(t,e){if(ht(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ht(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yC(t){var e=gT(t,"string");return ht(e)=="symbol"?e:e+""}function oe(t,e,n){return(e=yC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bb(Object(n),!0).forEach(function(r){oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rc(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function jr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function mT(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var jb="data-rc-order",zb="data-rc-priority",pT="rc-util-key",Pg=new Map;function bC(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):pT}function bf(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function yT(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function Wm(t){return Array.from((Pg.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function wC(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!jr())return null;var n=e.csp,r=e.prepend,i=e.priority,o=i===void 0?0:i,a=yT(r),l=a==="prependQueue",s=document.createElement("style");s.setAttribute(jb,a),l&&o&&s.setAttribute(zb,"".concat(o)),n!=null&&n.nonce&&(s.nonce=n==null?void 0:n.nonce),s.innerHTML=t;var u=bf(e),c=u.firstChild;if(r){if(l){var f=(e.styles||Wm(u)).filter(function(v){if(!["prepend","prependQueue"].includes(v.getAttribute(jb)))return!1;var g=Number(v.getAttribute(zb)||0);return o>=g});if(f.length)return u.insertBefore(s,f[f.length-1].nextSibling),s}u.insertBefore(s,c)}else u.appendChild(s);return s}function xC(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=bf(e);return(e.styles||Wm(n)).find(function(r){return r.getAttribute(bC(e))===t})}function Ic(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=xC(t,e);if(n){var r=bf(e);r.removeChild(n)}}function bT(t,e){var n=Pg.get(t);if(!n||!mT(document,n)){var r=wC("",e),i=r.parentNode;Pg.set(t,i),t.removeChild(r)}}function No(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=bf(n),i=Wm(r),o=le(le({},n),{},{styles:i});bT(r,o);var a=xC(e,o);if(a){var l,s;if((l=o.csp)!==null&&l!==void 0&&l.nonce&&a.nonce!==((s=o.csp)===null||s===void 0?void 0:s.nonce)){var u;a.nonce=(u=o.csp)===null||u===void 0?void 0:u.nonce}return a.innerHTML!==t&&(a.innerHTML=t),a}var c=wC(t,o);return c.setAttribute(bC(o),e),c}function wT(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _t(t,e){if(t==null)return{};var n,r,i=wT(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zc(t,e,n){var r=b.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var kg={},xT=function(e){};function CT(t,e){}function ST(t,e){}function ET(){kg={}}function CC(t,e,n){!e&&!kg[n]&&(t(!1,n),kg[n]=!0)}function rr(t,e){CC(CT,t,e)}function RT(t,e){CC(ST,t,e)}rr.preMessage=xT;rr.resetWarned=ET;rr.noteOnce=RT;function ul(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(o,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=r.has(o);if(rr(!s,"Warning: There may be circular references"),s)return!1;if(o===a)return!0;if(n&&l>1)return!1;r.add(o);var u=l+1;if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(var c=0;c<o.length;c++)if(!i(o[c],a[c],u))return!1;return!0}if(o&&a&&ht(o)==="object"&&ht(a)==="object"){var f=Object.keys(o);return f.length!==Object.keys(a).length?!1:f.every(function(v){return i(o[v],a[v],u)})}return!1}return i(t,e)}function Hn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yC(r.key),r)}}function Vn(t,e,n){return e&&Hb(t.prototype,e),n&&Hb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var IT="%";function $g(t){return t.join(IT)}var PT=function(){function t(e){Hn(this,t),oe(this,"instanceId",void 0),oe(this,"cache",new Map),this.instanceId=e}return Vn(t,[{key:"get",value:function(n){return this.opGet($g(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate($g(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),o=r(i);o===null?this.cache.delete(n):this.cache.set(n,o)}}]),t}(),dl="data-token-hash",Ui="data-css-hash",ua="__cssinjs_instance__";function kT(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Ui,"]"))||[],n=document.head.firstChild;Array.from(e).forEach(function(i){i[ua]=i[ua]||t,i[ua]===t&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(Ui,"]"))).forEach(function(i){var o=i.getAttribute(Ui);if(r[o]){if(i[ua]===t){var a;(a=i.parentNode)===null||a===void 0||a.removeChild(i)}}else r[o]=!0})}return new PT(t)}var Hc=b.createContext({hashPriority:"low",cache:kT(),defaultCache:!0});function At(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pc(t,e){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Pc(t,e)}function Ji(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pc(t,e)}function kc(t){return kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kc(t)}function Um(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Um=function(){return!!t})()}function $T(t,e){if(e&&(ht(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return At(t)}function Zi(t){var e=Um();return function(){var n,r=kc(t);if(e){var i=kc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $T(this,n)}}function TT(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var qm=function(){function t(){Hn(this,t),oe(this,"cache",void 0),oe(this,"keys",void 0),oe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Vn(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return n.forEach(function(l){if(!a)a=void 0;else{var s;a=(s=a)===null||s===void 0||(s=s.map)===null||s===void 0?void 0:s.get(l)}}),(r=a)!==null&&r!==void 0&&r.value&&o&&(a.value[1]=this.cacheCallTimes++),(i=a)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var o=this.keys.reduce(function(u,c){var f=fe(u,2),v=f[1];return i.internalGet(c)[1]<v?[c,i.internalGet(c)[1]]:u},[this.keys[0],this.cacheCallTimes]),a=fe(o,1),l=a[0];this.delete(l)}this.keys.push(n)}var s=this.cache;n.forEach(function(u,c){if(c===n.length-1)s.set(u,{value:[r,i.cacheCallTimes++]});else{var f=s.get(u);f?f.map||(f.map=new Map):s.set(u,{map:new Map}),s=s.get(u).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var o;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(o=i.value)===null||o===void 0?void 0:o[0]}var a=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),a}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!TT(r,n)}),this.deleteByPath(this.cache,n)}}]),t}();oe(qm,"MAX_CACHE_SIZE",20);oe(qm,"MAX_CACHE_OFFSET",5);var Vb=0,SC=function(){function t(e){Hn(this,t),oe(this,"derivatives",void 0),oe(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=Vb,e.length===0&&(e.length>0,void 0),Vb+=1}return Vn(t,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),t}(),Nv=new qm;function Tg(t){var e=Array.isArray(t)?t:[t];return Nv.has(e)||Nv.set(e,new SC(e)),Nv.get(e)}var _T=new WeakMap,Lv={};function AT(t,e){for(var n=_T,r=0;r<e.length;r+=1){var i=e[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(Lv)||n.set(Lv,t()),n.get(Lv)}var Wb=new WeakMap;function yc(t){var e=Wb.get(t)||"";return e||(Object.keys(t).forEach(function(n){var r=t[n];e+=n,r instanceof SC?e+=r.id:r&&ht(r)==="object"?e+=yc(r):e+=r}),e=Rc(e),Wb.set(t,e)),e}function Ub(t,e){return Rc("".concat(e,"_").concat(yc(t)))}var _g=jr();function ye(t){return typeof t=="number"?"".concat(t,"px"):t}function Jd(t,e,n){var r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o)return t;var a=le(le({},i),{},(r={},oe(r,dl,e),oe(r,Ui,n),r)),l=Object.keys(a).map(function(s){var u=a[s];return u?"".concat(s,'="').concat(u,'"'):null}).filter(function(s){return s}).join(" ");return"<style ".concat(l,">").concat(t,"</style>")}var $d=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},OT=function(e,n,r){return Object.keys(e).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(e).map(function(i){var o=fe(i,2),a=o[0],l=o[1];return"".concat(a,":").concat(l,";")}).join(""),"}"):""},EC=function(e,n,r){var i={},o={};return Object.entries(e).forEach(function(a){var l,s,u=fe(a,2),c=u[0],f=u[1];if(r!=null&&(l=r.preserve)!==null&&l!==void 0&&l[c])o[c]=f;else if((typeof f=="string"||typeof f=="number")&&!(r!=null&&(s=r.ignore)!==null&&s!==void 0&&s[c])){var v,g=$d(c,r==null?void 0:r.prefix);i[g]=typeof f=="number"&&!(r!=null&&(v=r.unitless)!==null&&v!==void 0&&v[c])?"".concat(f,"px"):String(f),o[c]="var(".concat(g,")")}}),[o,OT(i,n,{scope:r==null?void 0:r.scope})]},qb=jr()?b.useLayoutEffect:b.useEffect,$n=function(e,n){var r=b.useRef(!0);qb(function(){return e(r.current)},n),qb(function(){return r.current=!1,function(){r.current=!0}},[])},nl=function(e,n){$n(function(r){if(!r)return e()},n)},MT=le({},gf),Kb=MT.useInsertionEffect,NT=function(e,n,r){b.useMemo(e,r),$n(function(){return n(!0)},r)},LT=Kb?function(t,e,n){return Kb(function(){return t(),e()},n)}:NT,DT=le({},gf),FT=DT.useInsertionEffect,BT=function(e){var n=[],r=!1;function i(o){r||n.push(o)}return b.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(o){return o()})}},e),i},jT=function(){return function(e){e()}},zT=typeof FT<"u"?BT:jT;function Km(t,e,n,r,i){var o=b.useContext(Hc),a=o.cache,l=[t].concat(Ae(e)),s=$g(l),u=zT([s]),c=function(m){a.opUpdate(s,function(y){var p=y||[void 0,void 0],C=fe(p,2),x=C[0],S=x===void 0?0:x,E=C[1],P=E,$=P||n(),_=[S,$];return m?m(_):_})};b.useMemo(function(){c()},[s]);var f=a.opGet(s),v=f[1];return LT(function(){i==null||i(v)},function(g){return c(function(m){var y=fe(m,2),p=y[0],C=y[1];return g&&p===0&&(i==null||i(v)),[p+1,C]}),function(){a.opUpdate(s,function(m){var y=m||[],p=fe(y,2),C=p[0],x=C===void 0?0:C,S=p[1],E=x-1;return E===0?(u(function(){(g||!a.opGet(s))&&(r==null||r(S,!1))}),null):[x-1,S]})}},[s]),v}var HT={},VT="css",Aa=new Map;function WT(t){Aa.set(t,(Aa.get(t)||0)+1)}function UT(t,e){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(dl,'="').concat(t,'"]'));n.forEach(function(r){if(r[ua]===e){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var qT=0;function KT(t,e){Aa.set(t,(Aa.get(t)||0)-1);var n=Array.from(Aa.keys()),r=n.filter(function(i){var o=Aa.get(i)||0;return o<=0});n.length-r.length>qT&&r.forEach(function(i){UT(i,e),Aa.delete(i)})}var GT=function(e,n,r,i){var o=r.getDerivativeToken(e),a=le(le({},o),n);return i&&(a=i(a)),a},RC="token";function XT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=b.useContext(Hc),i=r.cache.instanceId,o=r.container,a=n.salt,l=a===void 0?"":a,s=n.override,u=s===void 0?HT:s,c=n.formatToken,f=n.getComputedToken,v=n.cssVar,g=AT(function(){return Object.assign.apply(Object,[{}].concat(Ae(e)))},e),m=yc(g),y=yc(u),p=v?yc(v):"",C=Km(RC,[l,t.id,m,y,p],function(){var x,S=f?f(g,u,t):GT(g,u,t,c),E=le({},S),P="";if(v){var $=EC(S,v.key,{prefix:v.prefix,ignore:v.ignore,unitless:v.unitless,preserve:v.preserve}),_=fe($,2);S=_[0],P=_[1]}var M=Ub(S,l);S._tokenKey=M,E._tokenKey=Ub(E,l);var B=(x=v==null?void 0:v.key)!==null&&x!==void 0?x:M;S._themeKey=B,WT(B);var H="".concat(VT,"-").concat(Rc(M));return S._hashId=H,[S,H,E,P,(v==null?void 0:v.key)||""]},function(x){KT(x[0]._themeKey,i)},function(x){var S=fe(x,4),E=S[0],P=S[3];if(v&&P){var $=No(P,Rc("css-variables-".concat(E._themeKey)),{mark:Ui,prepend:"queue",attachTo:o,priority:-999});$[ua]=i,$.setAttribute(dl,E._themeKey)}});return C}var YT=function(e,n,r){var i=fe(e,5),o=i[2],a=i[3],l=i[4],s=r||{},u=s.plain;if(!a)return null;var c=o._tokenKey,f=-999,v={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},g=Jd(a,l,c,v,u);return[f,c,g]};function Ne(){return Ne=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ne.apply(null,arguments)}var QT={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},IC="comm",PC="rule",kC="decl",JT="@import",ZT="@namespace",e_="@keyframes",t_="@layer",$C=Math.abs,Gm=String.fromCharCode;function TC(t){return t.trim()}function Td(t,e,n){return t.replace(e,n)}function n_(t,e,n){return t.indexOf(e,n)}function rl(t,e){return t.charCodeAt(e)|0}function fl(t,e,n){return t.slice(e,n)}function co(t){return t.length}function r_(t){return t.length}function fd(t,e){return e.push(t),t}var wf=1,hl=1,_C=0,Oi=0,or=0,bl="";function Xm(t,e,n,r,i,o,a,l){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:wf,column:hl,length:a,return:"",siblings:l}}function i_(){return or}function o_(){return or=Oi>0?rl(bl,--Oi):0,hl--,or===10&&(hl=1,wf--),or}function qi(){return or=Oi<_C?rl(bl,Oi++):0,hl++,or===10&&(hl=1,wf++),or}function da(){return rl(bl,Oi)}function _d(){return Oi}function xf(t,e){return fl(bl,t,e)}function $c(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function a_(t){return wf=hl=1,_C=co(bl=t),Oi=0,[]}function s_(t){return bl="",t}function Dv(t){return TC(xf(Oi-1,Ag(t===91?t+2:t===40?t+1:t)))}function l_(t){for(;(or=da())&&or<33;)qi();return $c(t)>2||$c(or)>3?"":" "}function c_(t,e){for(;--e&&qi()&&!(or<48||or>102||or>57&&or<65||or>70&&or<97););return xf(t,_d()+(e<6&&da()==32&&qi()==32))}function Ag(t){for(;qi();)switch(or){case t:return Oi;case 34:case 39:t!==34&&t!==39&&Ag(or);break;case 40:t===41&&Ag(t);break;case 92:qi();break}return Oi}function u_(t,e){for(;qi()&&t+or!==57;)if(t+or===84&&da()===47)break;return"/*"+xf(e,Oi-1)+"*"+Gm(t===47?t:qi())}function d_(t){for(;!$c(da());)qi();return xf(t,Oi)}function f_(t){return s_(Ad("",null,null,null,[""],t=a_(t),0,[0],t))}function Ad(t,e,n,r,i,o,a,l,s){for(var u=0,c=0,f=a,v=0,g=0,m=0,y=1,p=1,C=1,x=0,S="",E=i,P=o,$=r,_=S;p;)switch(m=x,x=qi()){case 40:if(m!=108&&rl(_,f-1)==58){n_(_+=Td(Dv(x),"&","&\f"),"&\f",$C(u?l[u-1]:0))!=-1&&(C=-1);break}case 34:case 39:case 91:_+=Dv(x);break;case 9:case 10:case 13:case 32:_+=l_(m);break;case 92:_+=c_(_d()-1,7);continue;case 47:switch(da()){case 42:case 47:fd(h_(u_(qi(),_d()),e,n,s),s),($c(m||1)==5||$c(da()||1)==5)&&co(_)&&fl(_,-1,void 0)!==" "&&(_+=" ");break;default:_+="/"}break;case 123*y:l[u++]=co(_)*C;case 125*y:case 59:case 0:switch(x){case 0:case 125:p=0;case 59+c:C==-1&&(_=Td(_,/\f/g,"")),g>0&&(co(_)-f||y===0&&m===47)&&fd(g>32?Xb(_+";",r,n,f-1,s):Xb(Td(_," ","")+";",r,n,f-2,s),s);break;case 59:_+=";";default:if(fd($=Gb(_,e,n,u,c,i,l,S,E=[],P=[],f,o),o),x===123)if(c===0)Ad(_,e,$,$,E,o,f,l,P);else{switch(v){case 99:if(rl(_,3)===110)break;case 108:if(rl(_,2)===97)break;default:c=0;case 100:case 109:case 115:}c?Ad(t,$,$,r&&fd(Gb(t,$,$,0,0,i,l,S,i,E=[],f,P),P),i,P,f,l,r?E:P):Ad(_,$,$,$,[""],P,0,l,P)}}u=c=g=0,y=C=1,S=_="",f=a;break;case 58:f=1+co(_),g=m;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&o_()==125)continue}switch(_+=Gm(x),x*y){case 38:C=c>0?1:(_+="\f",-1);break;case 44:l[u++]=(co(_)-1)*C,C=1;break;case 64:da()===45&&(_+=Dv(qi())),v=da(),c=f=co(S=_+=d_(_d())),x++;break;case 45:m===45&&co(_)==2&&(y=0)}}return o}function Gb(t,e,n,r,i,o,a,l,s,u,c,f){for(var v=i-1,g=i===0?o:[""],m=r_(g),y=0,p=0,C=0;y<r;++y)for(var x=0,S=fl(t,v+1,v=$C(p=a[y])),E=t;x<m;++x)(E=TC(p>0?g[x]+" "+S:Td(S,/&\f/g,g[x])))&&(s[C++]=E);return Xm(t,e,n,i===0?PC:l,s,u,c,f)}function h_(t,e,n,r){return Xm(t,e,n,IC,Gm(i_()),fl(t,2,-2),0,r)}function Xb(t,e,n,r,i){return Xm(t,e,n,kC,fl(t,0,r),fl(t,r+1,-1),r,i)}function Og(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function v_(t,e,n,r){switch(t.type){case t_:if(t.children.length)break;case JT:case ZT:case kC:return t.return=t.return||t.value;case IC:return"";case e_:return t.return=t.value+"{"+Og(t.children,r)+"}";case PC:if(!co(t.value=t.props.join(",")))return""}return co(n=Og(t.children,r))?t.return=t.value+"{"+n+"}":""}var Yb="data-ant-cssinjs-cache-path",AC="_FILE_STYLE__",Wa,OC=!0;function g_(){if(!Wa&&(Wa={},jr())){var t=document.createElement("div");t.className=Yb,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(i){var o=i.split(":"),a=fe(o,2),l=a[0],s=a[1];Wa[l]=s});var n=document.querySelector("style[".concat(Yb,"]"));if(n){var r;OC=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(t)}}function m_(t){return g_(),!!Wa[t]}function p_(t){var e=Wa[t],n=null;if(e&&jr())if(OC)n=AC;else{var r=document.querySelector("style[".concat(Ui,'="').concat(Wa[t],'"]'));r?n=r.innerHTML:delete Wa[t]}return[n,e]}var y_="_skip_check_",MC="_multi_value_";function Od(t){var e=Og(f_(t),v_);return e.replace(/\{%%%\:[^;];}/g,";")}function b_(t){return ht(t)==="object"&&t&&(y_ in t||MC in t)}function Qb(t,e,n){if(!e)return t;var r=".".concat(e),i=n==="low"?":where(".concat(r,")"):r,o=t.split(",").map(function(a){var l,s=a.trim().split(/\s+/),u=s[0]||"",c=((l=u.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return u="".concat(c).concat(i).concat(u.slice(c.length)),[u].concat(Ae(s.slice(1))).join(" ")});return o.join(",")}var w_=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,a=r.parentSelectors,l=n.hashId,s=n.layer;n.path;var u=n.hashPriority,c=n.transformers,f=c===void 0?[]:c;n.linters;var v="",g={};function m(C){var x=C.getName(l);if(!g[x]){var S=t(C.style,n,{root:!1,parentSelectors:a}),E=fe(S,1),P=E[0];g[x]="@keyframes ".concat(C.getName(l)).concat(P)}}function y(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return C.forEach(function(S){Array.isArray(S)?y(S,x):S&&x.push(S)}),x}var p=y(Array.isArray(e)?e:[e]);return p.forEach(function(C){var x=typeof C=="string"&&!i?{}:C;if(typeof x=="string")v+="".concat(x,`
`);else if(x._keyframe)m(x);else{var S=f.reduce(function(E,P){var $;return(P==null||($=P.visit)===null||$===void 0?void 0:$.call(P,E))||E},x);Object.keys(S).forEach(function(E){var P=S[E];if(ht(P)==="object"&&P&&(E!=="animationName"||!P._keyframe)&&!b_(P)){var $=!1,_=E.trim(),M=!1;(i||o)&&l?_.startsWith("@")?$=!0:_==="&"?_=Qb("",l,u):_=Qb(E,l,u):i&&!l&&(_==="&"||_==="")&&(_="",M=!0);var B=t(P,n,{root:M,injectHash:$,parentSelectors:[].concat(Ae(a),[_])}),H=fe(B,2),k=H[0],T=H[1];g=le(le({},g),T),v+="".concat(_).concat(k)}else{let K=function(q,J){var V=q.replace(/[A-Z]/g,function(D){return"-".concat(D.toLowerCase())}),z=J;!QT[q]&&typeof z=="number"&&z!==0&&(z="".concat(z,"px")),q==="animationName"&&J!==null&&J!==void 0&&J._keyframe&&(m(J),z=J.getName(l)),v+="".concat(V,":").concat(z,";")};var O,L=(O=P==null?void 0:P.value)!==null&&O!==void 0?O:P;ht(P)==="object"&&P!==null&&P!==void 0&&P[MC]&&Array.isArray(L)?L.forEach(function(q){K(E,q)}):K(E,L)}})}}),i?s&&(v&&(v="@layer ".concat(s.name," {").concat(v,"}")),s.dependencies&&(g["@layer ".concat(s.name)]=s.dependencies.map(function(C){return"@layer ".concat(C,", ").concat(s.name,";")}).join(`
`))):v="{".concat(v,"}"),[v,g]};function NC(t,e){return Rc("".concat(t.join("%")).concat(e))}function x_(){return null}var LC="style";function Mg(t,e){var n=t.token,r=t.path,i=t.hashId,o=t.layer,a=t.nonce,l=t.clientOnly,s=t.order,u=s===void 0?0:s,c=b.useContext(Hc),f=c.autoClear;c.mock;var v=c.defaultCache,g=c.hashPriority,m=c.container,y=c.ssrInline,p=c.transformers,C=c.linters,x=c.cache,S=c.layer,E=n._tokenKey,P=[E];S&&P.push("layer"),P.push.apply(P,Ae(r));var $=_g,_=Km(LC,P,function(){var T=P.join("|");if(m_(T)){var O=p_(T),L=fe(O,2),K=L[0],q=L[1];if(K)return[K,E,q,{},l,u]}var J=e(),V=w_(J,{hashId:i,hashPriority:g,layer:S?o:void 0,path:r.join("-"),transformers:p,linters:C}),z=fe(V,2),D=z[0],U=z[1],W=Od(D),X=NC(P,W);return[W,E,X,U,l,u]},function(T,O){var L=fe(T,3),K=L[2];(O||f)&&_g&&Ic(K,{mark:Ui})},function(T){var O=fe(T,4),L=O[0];O[1];var K=O[2],q=O[3];if($&&L!==AC){var J={mark:Ui,prepend:S?!1:"queue",attachTo:m,priority:u},V=typeof a=="function"?a():a;V&&(J.csp={nonce:V});var z=[],D=[];Object.keys(q).forEach(function(W){W.startsWith("@layer")?z.push(W):D.push(W)}),z.forEach(function(W){No(Od(q[W]),"_layer-".concat(W),le(le({},J),{},{prepend:!0}))});var U=No(L,K,J);U[ua]=x.instanceId,U.setAttribute(dl,E),D.forEach(function(W){No(Od(q[W]),"_effect-".concat(W),J)})}}),M=fe(_,3),B=M[0],H=M[1],k=M[2];return function(T){var O;if(!y||$||!v)O=b.createElement(x_,null);else{var L;O=b.createElement("style",Ne({},(L={},oe(L,dl,H),oe(L,Ui,k),L),{dangerouslySetInnerHTML:{__html:B}}))}return b.createElement(b.Fragment,null,O,T)}}var C_=function(e,n,r){var i=fe(e,6),o=i[0],a=i[1],l=i[2],s=i[3],u=i[4],c=i[5],f=r||{},v=f.plain;if(u)return null;var g=o,m={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)};return g=Jd(o,a,l,m,v),s&&Object.keys(s).forEach(function(y){if(!n[y]){n[y]=!0;var p=Od(s[y]),C=Jd(p,a,"_effect-".concat(y),m,v);y.startsWith("@layer")?g=C+g:g+=C}}),[c,l,g]},DC="cssVar",S_=function(e,n){var r=e.key,i=e.prefix,o=e.unitless,a=e.ignore,l=e.token,s=e.scope,u=s===void 0?"":s,c=b.useContext(Hc),f=c.cache.instanceId,v=c.container,g=l._tokenKey,m=[].concat(Ae(e.path),[r,u,g]),y=Km(DC,m,function(){var p=n(),C=EC(p,r,{prefix:i,unitless:o,ignore:a,scope:u}),x=fe(C,2),S=x[0],E=x[1],P=NC(m,E);return[S,E,P,r]},function(p){var C=fe(p,3),x=C[2];_g&&Ic(x,{mark:Ui})},function(p){var C=fe(p,3),x=C[1],S=C[2];if(x){var E=No(x,S,{mark:Ui,prepend:"queue",attachTo:v,priority:-999});E[ua]=f,E.setAttribute(dl,r)}});return y},E_=function(e,n,r){var i=fe(e,4),o=i[1],a=i[2],l=i[3],s=r||{},u=s.plain;if(!o)return null;var c=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)},v=Jd(o,l,a,f,u);return[c,a,v]},ec;ec={},oe(ec,LC,C_),oe(ec,RC,YT),oe(ec,DC,E_);var cn=function(){function t(e,n){Hn(this,t),oe(this,"name",void 0),oe(this,"style",void 0),oe(this,"_keyframe",!0),this.name=e,this.style=n}return Vn(t,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),t}();function Ms(t){return t.notSplit=!0,t}Ms(["borderTop","borderBottom"]),Ms(["borderTop"]),Ms(["borderBottom"]),Ms(["borderLeft","borderRight"]),Ms(["borderLeft"]),Ms(["borderRight"]);var Ym=b.createContext({});function FC(t){return mC(t)||gC(t)||Vm(t)||pC()}function fo(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}function BC(t,e,n,r){if(!e.length)return n;var i=FC(e),o=i[0],a=i.slice(1),l;return!t&&typeof o=="number"?l=[]:Array.isArray(t)?l=Ae(t):l=le({},t),r&&n===void 0&&a.length===1?delete l[o][a[0]]:l[o]=BC(l[o],a,n,r),l}function Hi(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&r&&n===void 0&&!fo(t,e.slice(0,-1))?t:BC(t,e,n,r)}function R_(t){return ht(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function Jb(t){return Array.isArray(t)?[]:{}}var I_=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Qs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Jb(e[0]);return e.forEach(function(i){function o(a,l){var s=new Set(l),u=fo(i,a),c=Array.isArray(u);if(c||R_(u)){if(!s.has(u)){s.add(u);var f=fo(r,a);c?r=Hi(r,a,[]):(!f||ht(f)!=="object")&&(r=Hi(r,a,Jb(u))),I_(u).forEach(function(v){o([].concat(Ae(a),[v]),s)})}}else r=Hi(r,a,u)}o([])}),r}function P_(){}const k_=b.createContext({}),Qm=()=>{const t=()=>{};return t.deprecated=P_,t},$_=b.createContext(void 0);var T_={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},__={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},A_=le(le({},__),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const jC={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Zb={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},A_),timePickerLocale:Object.assign({},jC)},li="${label} is not a valid ${type}",Ga={locale:"en",Pagination:T_,DatePicker:Zb,TimePicker:jC,Calendar:Zb,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:li,method:li,array:li,object:li,number:li,date:li,boolean:li,integer:li,float:li,regexp:li,email:li,url:li,hex:li},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};Object.assign({},Ga.Modal);let Md=[];const ew=()=>Md.reduce((t,e)=>Object.assign(Object.assign({},t),e),Ga.Modal);function O_(t){if(t){const e=Object.assign({},t);return Md.push(e),ew(),()=>{Md=Md.filter(n=>n!==e),ew()}}Object.assign({},Ga.Modal)}const Jm=b.createContext(void 0),es=(t,e)=>{const n=b.useContext(Jm),r=b.useMemo(()=>{var o;const a=e||Ga[t],l=(o=n==null?void 0:n[t])!==null&&o!==void 0?o:{};return Object.assign(Object.assign({},typeof a=="function"?a():a),l||{})},[t,e,n]),i=b.useMemo(()=>{const o=n==null?void 0:n.locale;return n!=null&&n.exist&&!o?Ga.locale:o},[n]);return[r,i]},M_="internalMark",N_=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;b.useEffect(()=>O_(e==null?void 0:e.Modal),[e]);const i=b.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return b.createElement(Jm.Provider,{value:i},n)},zC={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Tc=Object.assign(Object.assign({},zC),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),wr=Math.round;function Fv(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const tw=(t,e,n)=>n===0?t:t/100;function tc(t,e){const n=e||255;return t>n?n:t<0?0:t}class yn{constructor(e){oe(this,"isValid",!0),oe(this,"r",0),oe(this,"g",0),oe(this,"b",0),oe(this,"a",1),oe(this,"_h",void 0),oe(this,"_s",void 0),oe(this,"_l",void 0),oe(this,"_v",void 0),oe(this,"_max",void 0),oe(this,"_min",void 0),oe(this,"_brightness",void 0);function n(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let o=function(a){return i.startsWith(a)};var r=o;const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):o("rgb")?this.fromRgbString(i):o("hsl")?this.fromHslString(i):(o("hsv")||o("hsb"))&&this.fromHsvString(i)}else if(e instanceof yn)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=tc(e.r),this.g=tc(e.g),this.b=tc(e.b),this.a=typeof e.a=="number"?tc(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(o){const a=o/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=wr(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,o=l=>(r[l]-this[l])*i+this[l],a={r:wr(o("r")),g:wr(o("g")),b:wr(o("b")),a:wr(o("a")*100)/100};return this._c(a)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=o=>wr((this[o]*this.a+n[o]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const o=wr(this.a*255).toString(16);e+=o.length===2?o:"0"+o}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=wr(this.getSaturation()*100),r=wr(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=tc(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,o){return parseInt(n[i]+n[o||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const v=wr(r*255);this.r=v,this.g=v,this.b=v}let o=0,a=0,l=0;const s=e/60,u=(1-Math.abs(2*r-1))*n,c=u*(1-Math.abs(s%2-1));s>=0&&s<1?(o=u,a=c):s>=1&&s<2?(o=c,a=u):s>=2&&s<3?(a=u,l=c):s>=3&&s<4?(a=c,l=u):s>=4&&s<5?(o=c,l=u):s>=5&&s<6&&(o=u,l=c);const f=r-u/2;this.r=wr((o+f)*255),this.g=wr((a+f)*255),this.b=wr((l+f)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const o=wr(r*255);if(this.r=o,this.g=o,this.b=o,n<=0)return;const a=e/60,l=Math.floor(a),s=a-l,u=wr(r*(1-n)*255),c=wr(r*(1-n*s)*255),f=wr(r*(1-n*(1-s))*255);switch(l){case 0:this.g=f,this.b=u;break;case 1:this.r=c,this.b=u;break;case 2:this.r=u,this.b=f;break;case 3:this.r=u,this.g=c;break;case 4:this.r=f,this.g=u;break;case 5:default:this.g=u,this.b=c;break}}fromHsvString(e){const n=Fv(e,tw);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=Fv(e,tw);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=Fv(e,(r,i)=>i.includes("%")?wr(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var hd=2,nw=.16,L_=.05,D_=.05,F_=.15,HC=5,VC=4,B_=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function rw(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-hd*e:Math.round(t.h)+hd*e:r=n?Math.round(t.h)+hd*e:Math.round(t.h)-hd*e,r<0?r+=360:r>=360&&(r-=360),r}function iw(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-nw*e:e===VC?r=t.s+nw:r=t.s+L_*e,r>1&&(r=1),n&&e===HC&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function ow(t,e,n){var r;return n?r=t.v+D_*e:r=t.v-F_*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function _c(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new yn(t),i=r.toHsv(),o=HC;o>0;o-=1){var a=new yn({h:rw(i,o,!0),s:iw(i,o,!0),v:ow(i,o,!0)});n.push(a)}n.push(r);for(var l=1;l<=VC;l+=1){var s=new yn({h:rw(i,l),s:iw(i,l),v:ow(i,l)});n.push(s)}return e.theme==="dark"?B_.map(function(u){var c=u.index,f=u.amount;return new yn(e.backgroundColor||"#141414").mix(n[c],f).toHexString()}):n.map(function(u){return u.toHexString()})}var il={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ng=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Ng.primary=Ng[5];var Lg=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Lg.primary=Lg[5];var Dg=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Dg.primary=Dg[5];var Fg=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Fg.primary=Fg[5];var Bg=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Bg.primary=Bg[5];var jg=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];jg.primary=jg[5];var zg=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];zg.primary=zg[5];var Hg=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Hg.primary=Hg[5];var vl=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];vl.primary=vl[5];var Vg=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Vg.primary=Vg[5];var Wg=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Wg.primary=Wg[5];var Ug=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];Ug.primary=Ug[5];var qg=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];qg.primary=qg[5];var Bv={red:Ng,volcano:Lg,orange:Dg,gold:Fg,yellow:Bg,lime:jg,green:zg,cyan:Hg,blue:vl,geekblue:Vg,purple:Wg,magenta:Ug,grey:qg};function j_(t,{generateColorPalettes:e,generateNeutralColorPalettes:n}){const{colorSuccess:r,colorWarning:i,colorError:o,colorInfo:a,colorPrimary:l,colorBgBase:s,colorTextBase:u}=t,c=e(l),f=e(r),v=e(i),g=e(o),m=e(a),y=n(s,u),p=t.colorLink||t.colorInfo,C=e(p),x=new yn(g[1]).mix(new yn(g[3]),50).toHexString();return Object.assign(Object.assign({},y),{colorPrimaryBg:c[1],colorPrimaryBgHover:c[2],colorPrimaryBorder:c[3],colorPrimaryBorderHover:c[4],colorPrimaryHover:c[5],colorPrimary:c[6],colorPrimaryActive:c[7],colorPrimaryTextHover:c[8],colorPrimaryText:c[9],colorPrimaryTextActive:c[10],colorSuccessBg:f[1],colorSuccessBgHover:f[2],colorSuccessBorder:f[3],colorSuccessBorderHover:f[4],colorSuccessHover:f[4],colorSuccess:f[6],colorSuccessActive:f[7],colorSuccessTextHover:f[8],colorSuccessText:f[9],colorSuccessTextActive:f[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:x,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:v[1],colorWarningBgHover:v[2],colorWarningBorder:v[3],colorWarningBorderHover:v[4],colorWarningHover:v[4],colorWarning:v[6],colorWarningActive:v[7],colorWarningTextHover:v[8],colorWarningText:v[9],colorWarningTextActive:v[10],colorInfoBg:m[1],colorInfoBgHover:m[2],colorInfoBorder:m[3],colorInfoBorderHover:m[4],colorInfoHover:m[4],colorInfo:m[6],colorInfoActive:m[7],colorInfoTextHover:m[8],colorInfoText:m[9],colorInfoTextActive:m[10],colorLinkHover:C[4],colorLink:C[6],colorLinkActive:C[7],colorBgMask:new yn("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const z_=t=>{let e=t,n=t,r=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:i}};function H_(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+e*2).toFixed(1)}s`,motionDurationSlow:`${(n+e*3).toFixed(1)}s`,lineWidthBold:i+1},z_(r))}const V_=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function Nd(t){return(t+8)/t}function W_(t){const e=Array.from({length:10}).map((n,r)=>{const i=r-1,o=t*Math.pow(Math.E,i/5),a=r>1?Math.floor(o):Math.ceil(o);return Math.floor(a/2)*2});return e[1]=t,e.map(n=>({size:n,lineHeight:Nd(n)}))}const U_=t=>{const e=W_(t),n=e.map(c=>c.size),r=e.map(c=>c.lineHeight),i=n[1],o=n[0],a=n[2],l=r[1],s=r[0],u=r[2];return{fontSizeSM:o,fontSize:i,fontSizeLG:a,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:l,lineHeightLG:u,lineHeightSM:s,fontHeight:Math.round(l*i),fontHeightLG:Math.round(u*a),fontHeightSM:Math.round(s*o),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function q_(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}const ki=(t,e)=>new yn(t).setA(e).toRgbString(),nc=(t,e)=>new yn(t).darken(e).toHexString(),K_=t=>{const e=_c(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},G_=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:ki(r,.88),colorTextSecondary:ki(r,.65),colorTextTertiary:ki(r,.45),colorTextQuaternary:ki(r,.25),colorFill:ki(r,.15),colorFillSecondary:ki(r,.06),colorFillTertiary:ki(r,.04),colorFillQuaternary:ki(r,.02),colorBgSolid:ki(r,1),colorBgSolidHover:ki(r,.75),colorBgSolidActive:ki(r,.95),colorBgLayout:nc(n,4),colorBgContainer:nc(n,0),colorBgElevated:nc(n,0),colorBgSpotlight:ki(r,.85),colorBgBlur:"transparent",colorBorder:nc(n,15),colorBorderSecondary:nc(n,6)}};function X_(t){il.pink=il.magenta,Bv.pink=Bv.magenta;const e=Object.keys(zC).map(n=>{const r=t[n]===il[n]?Bv[n]:_c(t[n]);return Array.from({length:10},()=>1).reduce((i,o,a)=>(i[`${n}-${a+1}`]=r[a],i[`${n}${a+1}`]=r[a],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),j_(t,{generateColorPalettes:K_,generateNeutralColorPalettes:G_})),U_(t.fontSize)),q_(t)),V_(t)),H_(t))}const WC=Tg(X_),Kg={token:Tc,override:{override:Tc},hashed:!0},UC=ue.createContext(Kg),Ac="ant",Cf="anticon",Y_=["outlined","borderless","filled","underlined"],Q_=(t,e)=>e||(t?`${Ac}-${t}`:Ac),un=b.createContext({getPrefixCls:Q_,iconPrefixCls:Cf}),{Consumer:Z8}=un,aw={};function eo(t){const e=b.useContext(un),{getPrefixCls:n,direction:r,getPopupContainer:i}=e,o=e[t];return Object.assign(Object.assign({classNames:aw,styles:aw},o),{getPrefixCls:n,direction:r,getPopupContainer:i})}const J_=`-ant-${Date.now()}-${Math.random()}`;function Z_(t,e){const n={},r=(a,l)=>{let s=a.clone();return s=(l==null?void 0:l(s))||s,s.toRgbString()},i=(a,l)=>{const s=new yn(a),u=_c(s.toRgbString());n[`${l}-color`]=r(s),n[`${l}-color-disabled`]=u[1],n[`${l}-color-hover`]=u[4],n[`${l}-color-active`]=u[6],n[`${l}-color-outline`]=s.clone().setA(.2).toRgbString(),n[`${l}-color-deprecated-bg`]=u[0],n[`${l}-color-deprecated-border`]=u[2]};if(e.primaryColor){i(e.primaryColor,"primary");const a=new yn(e.primaryColor),l=_c(a.toRgbString());l.forEach((u,c)=>{n[`primary-${c+1}`]=u}),n["primary-color-deprecated-l-35"]=r(a,u=>u.lighten(35)),n["primary-color-deprecated-l-20"]=r(a,u=>u.lighten(20)),n["primary-color-deprecated-t-20"]=r(a,u=>u.tint(20)),n["primary-color-deprecated-t-50"]=r(a,u=>u.tint(50)),n["primary-color-deprecated-f-12"]=r(a,u=>u.setA(u.a*.12));const s=new yn(l[0]);n["primary-color-active-deprecated-f-30"]=r(s,u=>u.setA(u.a*.3)),n["primary-color-active-deprecated-d-02"]=r(s,u=>u.darken(2))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(a=>`--${t}-${a}: ${n[a]};`).join(`
`)}
  }
  `.trim()}function eA(t,e){const n=Z_(t,e);jr()&&No(n,`${J_}-dynamic-theme`)}const pi=b.createContext(!1),tA=({children:t,disabled:e})=>{const n=b.useContext(pi);return b.createElement(pi.Provider,{value:e??n},t)},gl=b.createContext(void 0),nA=({children:t,size:e})=>{const n=b.useContext(gl);return b.createElement(gl.Provider,{value:e||n},t)};function rA(){const t=b.useContext(pi),e=b.useContext(gl);return{componentDisabled:t,componentSize:e}}var qC=Vn(function t(){Hn(this,t)}),KC="CALC_UNIT",iA=new RegExp(KC,"g");function jv(t){return typeof t=="number"?"".concat(t).concat(KC):t}var oA=function(t){Ji(n,t);var e=Zi(n);function n(r,i){var o;Hn(this,n),o=e.call(this),oe(At(o),"result",""),oe(At(o),"unitlessCssVar",void 0),oe(At(o),"lowPriority",void 0);var a=ht(r);return o.unitlessCssVar=i,r instanceof n?o.result="(".concat(r.result,")"):a==="number"?o.result=jv(r):a==="string"&&(o.result=r),o}return Vn(n,[{key:"add",value:function(i){return i instanceof n?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(jv(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof n?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(jv(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var o=this,a=i||{},l=a.unit,s=!0;return typeof l=="boolean"?s=l:Array.from(this.unitlessCssVar).some(function(u){return o.result.includes(u)})&&(s=!1),this.result=this.result.replace(iA,s?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(qC),aA=function(t){Ji(n,t);var e=Zi(n);function n(r){var i;return Hn(this,n),i=e.call(this),oe(At(i),"result",0),r instanceof n?i.result=r.result:typeof r=="number"&&(i.result=r),i}return Vn(n,[{key:"add",value:function(i){return i instanceof n?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof n?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof n?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof n?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),n}(qC),sA=function(e,n){var r=e==="css"?oA:aA;return function(i){return new r(i,n)}},sw=function(e,n){return"".concat([n,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function In(t){var e=b.useRef();e.current=t;var n=b.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(o))},[]);return n}function Oc(t){var e=b.useRef(!1),n=b.useState(t),r=fe(n,2),i=r[0],o=r[1];b.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(l,s){s&&e.current||o(l)}return[i,a]}function zv(t){return t!==void 0}function Mn(t,e){var n=e||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,l=Oc(function(){return zv(i)?i:zv(r)?typeof r=="function"?r():r:typeof t=="function"?t():t}),s=fe(l,2),u=s[0],c=s[1],f=i!==void 0?i:u,v=a?a(f):f,g=In(o),m=Oc([f]),y=fe(m,2),p=y[0],C=y[1];nl(function(){var S=p[0];u!==S&&g(u,S)},[p]),nl(function(){zv(i)||c(i)},[i]);var x=In(function(S,E){c(S,E),C([f],E)});return[v,x]}var Hv={exports:{}},Rn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw;function lA(){if(lw)return Rn;lw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.server_context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function y(p){if(typeof p=="object"&&p!==null){var C=p.$$typeof;switch(C){case t:switch(p=p.type,p){case n:case i:case r:case u:case c:return p;default:switch(p=p&&p.$$typeof,p){case l:case a:case s:case v:case f:case o:return p;default:return C}}case e:return C}}}return Rn.ContextConsumer=a,Rn.ContextProvider=o,Rn.Element=t,Rn.ForwardRef=s,Rn.Fragment=n,Rn.Lazy=v,Rn.Memo=f,Rn.Portal=e,Rn.Profiler=i,Rn.StrictMode=r,Rn.Suspense=u,Rn.SuspenseList=c,Rn.isAsyncMode=function(){return!1},Rn.isConcurrentMode=function(){return!1},Rn.isContextConsumer=function(p){return y(p)===a},Rn.isContextProvider=function(p){return y(p)===o},Rn.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===t},Rn.isForwardRef=function(p){return y(p)===s},Rn.isFragment=function(p){return y(p)===n},Rn.isLazy=function(p){return y(p)===v},Rn.isMemo=function(p){return y(p)===f},Rn.isPortal=function(p){return y(p)===e},Rn.isProfiler=function(p){return y(p)===i},Rn.isStrictMode=function(p){return y(p)===r},Rn.isSuspense=function(p){return y(p)===u},Rn.isSuspenseList=function(p){return y(p)===c},Rn.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===n||p===i||p===r||p===u||p===c||p===g||typeof p=="object"&&p!==null&&(p.$$typeof===v||p.$$typeof===f||p.$$typeof===o||p.$$typeof===a||p.$$typeof===s||p.$$typeof===m||p.getModuleId!==void 0)},Rn.typeOf=y,Rn}var cw;function cA(){return cw||(cw=1,Hv.exports=lA()),Hv.exports}var Vv=cA(),uA=Symbol.for("react.element"),dA=Symbol.for("react.transitional.element"),fA=Symbol.for("react.fragment");function GC(t){return t&&ht(t)==="object"&&(t.$$typeof===uA||t.$$typeof===dA)&&t.type===fA}var hA=Number(b.version.split(".")[0]),Zm=function(e,n){typeof e=="function"?e(n):ht(e)==="object"&&e&&"current"in e&&(e.current=n)},ti=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);return i.length<=1?i[0]:function(o){n.forEach(function(a){Zm(a,o)})}},ts=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zc(function(){return ti.apply(void 0,n)},n,function(i,o){return i.length!==o.length||i.every(function(a,l){return a!==o[l]})})},ns=function(e){var n,r;if(!e)return!1;if(XC(e)&&hA>=19)return!0;var i=Vv.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==Vv.ForwardRef||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==Vv.ForwardRef)};function XC(t){return b.isValidElement(t)&&!GC(t)}var wl=function(e){if(e&&XC(e)){var n=e;return n.props.propertyIsEnumerable("ref")?n.props.ref:n.ref}return null};function uw(t,e,n,r){var i=le({},e[t]);if(r!=null&&r.deprecatedTokens){var o=r.deprecatedTokens;o.forEach(function(l){var s=fe(l,2),u=s[0],c=s[1];if(i!=null&&i[u]||i!=null&&i[c]){var f;(f=i[c])!==null&&f!==void 0||(i[c]=i==null?void 0:i[u])}})}var a=le(le({},n),i);return Object.keys(a).forEach(function(l){a[l]===e[l]&&delete a[l]}),a}var YC=typeof CSSINJS_STATISTIC<"u",Gg=!0;function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!YC)return Object.assign.apply(Object,[{}].concat(e));Gg=!1;var r={};return e.forEach(function(i){if(ht(i)==="object"){var o=Object.keys(i);o.forEach(function(a){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return i[a]}})})}}),Gg=!0,r}var dw={};function vA(){}var gA=function(e){var n,r=e,i=vA;return YC&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(e,{get:function(a,l){if(Gg){var s;(s=n)===null||s===void 0||s.add(l)}return a[l]}}),i=function(a,l){var s;dw[a]={global:Array.from(n),component:le(le({},(s=dw[a])===null||s===void 0?void 0:s.component),l)}}),{token:r,keys:n,flush:i}};function fw(t,e,n){if(typeof n=="function"){var r;return n(bn(e,(r=e[t])!==null&&r!==void 0?r:{}))}return n??{}}function mA(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"max(".concat(r.map(function(o){return ye(o)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"min(".concat(r.map(function(o){return ye(o)}).join(","),")")}}}var pA=1e3*60*10,yA=function(){function t(){Hn(this,t),oe(this,"map",new Map),oe(this,"objectIDMap",new WeakMap),oe(this,"nextID",0),oe(this,"lastAccessBeat",new Map),oe(this,"accessBeat",0)}return Vn(t,[{key:"set",value:function(n,r){this.clear();var i=this.getCompositeKey(n);this.map.set(i,r),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),i=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(n){var r=this,i=n.map(function(o){return o&&ht(o)==="object"?"obj_".concat(r.getObjectID(o)):"".concat(ht(o),"_").concat(o)});return i.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(i,o){r-i>pA&&(n.map.delete(o),n.lastAccessBeat.delete(o))}),this.accessBeat=0}}}]),t}(),hw=new yA;function bA(t,e){return ue.useMemo(function(){var n=hw.get(e);if(n)return n;var r=t();return hw.set(e,r),r},e)}var wA=function(){return{}};function xA(t){var e=t.useCSP,n=e===void 0?wA:e,r=t.useToken,i=t.usePrefix,o=t.getResetStyles,a=t.getCommonStyle,l=t.getCompUnitless;function s(v,g,m,y){var p=Array.isArray(v)?v[0]:v;function C(M){return"".concat(String(p)).concat(M.slice(0,1).toUpperCase()).concat(M.slice(1))}var x=(y==null?void 0:y.unitless)||{},S=typeof l=="function"?l(v):{},E=le(le({},S),{},oe({},C("zIndexPopup"),!0));Object.keys(x).forEach(function(M){E[C(M)]=x[M]});var P=le(le({},y),{},{unitless:E,prefixToken:C}),$=c(v,g,m,P),_=u(p,m,P);return function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,H=$(M,B),k=fe(H,2),T=k[1],O=_(B),L=fe(O,2),K=L[0],q=L[1];return[K,T,q]}}function u(v,g,m){var y=m.unitless,p=m.injectStyle,C=p===void 0?!0:p,x=m.prefixToken,S=m.ignore,E=function(_){var M=_.rootCls,B=_.cssVar,H=B===void 0?{}:B,k=r(),T=k.realToken;return S_({path:[v],prefix:H.prefix,key:H.key,unitless:y,ignore:S,token:T,scope:M},function(){var O=fw(v,T,g),L=uw(v,T,O,{deprecatedTokens:m==null?void 0:m.deprecatedTokens});return Object.keys(O).forEach(function(K){L[x(K)]=L[K],delete L[K]}),L}),null},P=function(_){var M=r(),B=M.cssVar;return[function(H){return C&&B?ue.createElement(ue.Fragment,null,ue.createElement(E,{rootCls:_,cssVar:B,component:v}),H):H},B==null?void 0:B.key]};return P}function c(v,g,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},p=Array.isArray(v)?v:[v,v],C=fe(p,1),x=C[0],S=p.join("-"),E=t.layer||{name:"antd"};return function(P){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P,_=r(),M=_.theme,B=_.realToken,H=_.hashId,k=_.token,T=_.cssVar,O=i(),L=O.rootPrefixCls,K=O.iconPrefixCls,q=n(),J=T?"css":"js",V=bA(function(){var Y=new Set;return T&&Object.keys(y.unitless||{}).forEach(function(Q){Y.add($d(Q,T.prefix)),Y.add($d(Q,sw(x,T.prefix)))}),sA(J,Y)},[J,x,T==null?void 0:T.prefix]),z=mA(J),D=z.max,U=z.min,W={theme:M,token:k,hashId:H,nonce:function(){return q.nonce},clientOnly:y.clientOnly,layer:E,order:y.order||-999};typeof o=="function"&&Mg(le(le({},W),{},{clientOnly:!1,path:["Shared",L]}),function(){return o(k,{prefix:{rootPrefixCls:L,iconPrefixCls:K},csp:q})});var X=Mg(le(le({},W),{},{path:[S,P,K]}),function(){if(y.injectStyle===!1)return[];var Y=gA(k),Q=Y.token,ne=Y.flush,ie=fw(x,B,m),re=".".concat(P),I=uw(x,B,ie,{deprecatedTokens:y.deprecatedTokens});T&&ie&&ht(ie)==="object"&&Object.keys(ie).forEach(function(ee){ie[ee]="var(".concat($d(ee,sw(x,T.prefix)),")")});var A=bn(Q,{componentCls:re,prefixCls:P,iconCls:".".concat(K),antCls:".".concat(L),calc:V,max:D,min:U},T?ie:I),F=g(A,{hashId:H,prefixCls:P,rootPrefixCls:L,iconPrefixCls:K});ne(x,I);var G=typeof a=="function"?a(A,P,$,y.resetFont):null;return[y.resetStyle===!1?null:G,F]});return[X,H]}}function f(v,g,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},p=c(v,g,m,le({resetStyle:!1,order:-998},y)),C=function(S){var E=S.prefixCls,P=S.rootCls,$=P===void 0?E:P;return p(E,$),null};return C}return{genStyleHooks:s,genSubStyleComponent:f,genComponentStyleHook:c}}const va=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],CA="5.26.1";function Wv(t){return t>=0&&t<=255}function cc(t,e){const{r:n,g:r,b:i,a:o}=new yn(t).toRgb();if(o<1)return t;const{r:a,g:l,b:s}=new yn(e).toRgb();for(let u=.01;u<=1;u+=.01){const c=Math.round((n-a*(1-u))/u),f=Math.round((r-l*(1-u))/u),v=Math.round((i-s*(1-u))/u);if(Wv(c)&&Wv(f)&&Wv(v))return new yn({r:c,g:f,b:v,a:Math.round(u*100)/100}).toRgbString()}return new yn({r:n,g:r,b:i,a:1}).toRgbString()}var SA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function QC(t){const{override:e}=t,n=SA(t,["override"]),r=Object.assign({},e);Object.keys(Tc).forEach(v=>{delete r[v]});const i=Object.assign(Object.assign({},n),r),o=480,a=576,l=768,s=992,u=1200,c=1600;if(i.motion===!1){const v="0s";i.motionDurationFast=v,i.motionDurationMid=v,i.motionDurationSlow=v}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:cc(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:cc(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:cc(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*3,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:cc(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:o,screenXSMin:o,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:s-1,screenLG:s,screenLGMin:s,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:c-1,screenXXL:c,screenXXLMin:c,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new yn("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new yn("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new yn("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var vw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const JC={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},EA={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},RA={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},ZC=(t,e,n)=>{const r=n.getDerivativeToken(t),{override:i}=e,o=vw(e,["override"]);let a=Object.assign(Object.assign({},r),{override:i});return a=QC(a),o&&Object.entries(o).forEach(([l,s])=>{const{theme:u}=s,c=vw(s,["theme"]);let f=c;u&&(f=ZC(Object.assign(Object.assign({},a),c),{override:c},u)),a[l]=f}),a};function Mi(){const{token:t,hashed:e,theme:n,override:r,cssVar:i}=ue.useContext(UC),o=`${CA}-${e||""}`,a=n||WC,[l,s,u]=XT(a,[Tc,t],{salt:o,override:r,getComputedToken:ZC,formatToken:QC,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:JC,ignore:EA,preserve:RA}});return[a,u,e?s:"",l,i]}const Xa={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},sr=(t,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}),xl=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),ep=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),IA=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),PA=(t,e,n,r)=>{const i=`[class^="${e}"], [class*=" ${e}"]`,o=n?`.${n}`:i,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let l={};return r!==!1&&(l={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},l),a),{[i]:a})}},Sf=(t,e)=>({outline:`${ye(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),Ya=(t,e)=>({"&:focus-visible":Object.assign({},Sf(t,e))}),eS=t=>({[`.${t}`]:Object.assign(Object.assign({},xl()),{[`.${t} .${t}-icon`]:{display:"block"}})}),{genStyleHooks:lr,genComponentStyleHook:kA,genSubStyleComponent:$A}=xA({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=b.useContext(un);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,r,i]=Mi();return{theme:t,realToken:e,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:t}=b.useContext(un);return t??{}},getResetStyles:(t,e)=>{var n;const r=IA(t);return[r,{"&":r},eS((n=e==null?void 0:e.prefix.iconPrefixCls)!==null&&n!==void 0?n:Cf)]},getCommonStyle:PA,getCompUnitless:()=>JC});function TA(t,e){return va.reduce((n,r)=>{const i=t[`${r}1`],o=t[`${r}3`],a=t[`${r}6`],l=t[`${r}7`];return Object.assign(Object.assign({},n),e(r,{lightColor:i,lightBorderColor:o,darkColor:a,textColor:l}))},{})}const _A=(t,e)=>{const[n,r]=Mi();return Mg({token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[eS(t)])},AA=Object.assign({},gf),{useId:gw}=AA,OA=()=>"",MA=typeof gw>"u"?OA:gw;function NA(t,e,n){var r;Qm();const i=t||{},o=i.inherit===!1||!e?Object.assign(Object.assign({},Kg),{hashed:(r=e==null?void 0:e.hashed)!==null&&r!==void 0?r:Kg.hashed,cssVar:e==null?void 0:e.cssVar}):e,a=MA();return zc(()=>{var l,s;if(!t)return e;const u=Object.assign({},o.components);Object.keys(t.components||{}).forEach(v=>{u[v]=Object.assign(Object.assign({},u[v]),t.components[v])});const c=`css-var-${a.replace(/:/g,"")}`,f=((l=i.cssVar)!==null&&l!==void 0?l:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof o.cssVar=="object"?o.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((s=i.cssVar)===null||s===void 0?void 0:s.key)||c});return Object.assign(Object.assign(Object.assign({},o),i),{token:Object.assign(Object.assign({},o.token),i.token),components:u,cssVar:f})},[i,o],(l,s)=>l.some((u,c)=>{const f=s[c];return!ul(u,f,!0)}))}var Uv={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var mw;function LA(){return mw||(mw=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(o=i(o,r(l)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var l in o)e.call(o,l)&&o[l]&&(a=i(a,l));return a}function i(o,a){return a?o?o+" "+a:o+a:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(Uv)),Uv.exports}var DA=LA();const me=Mm(DA);var Gi=E1();const Xg=Mm(Gi),FA=S1({__proto__:null,default:Xg},[Gi]);function Mc(t){return t instanceof HTMLElement||t instanceof SVGElement}function BA(t){return t&&ht(t)==="object"&&Mc(t.nativeElement)?t.nativeElement:Mc(t)?t:null}function Ld(t){var e=BA(t);if(e)return e;if(t instanceof ue.Component){var n;return(n=Xg.findDOMNode)===null||n===void 0?void 0:n.call(Xg,t)}return null}var jA=["children"],tS=b.createContext({});function zA(t){var e=t.children,n=_t(t,jA);return b.createElement(tS.Provider,{value:n},e)}var HA=function(t){Ji(n,t);var e=Zi(n);function n(){return Hn(this,n),e.apply(this,arguments)}return Vn(n,[{key:"render",value:function(){return this.props.children}}]),n}(b.Component);function VA(t){var e=b.useReducer(function(l){return l+1},0),n=fe(e,2),r=n[1],i=b.useRef(t),o=In(function(){return i.current}),a=In(function(l){i.current=typeof l=="function"?l(i.current):l,r()});return[o,a]}var aa="none",vd="appear",gd="enter",md="leave",pw="none",Vi="prepare",Js="start",Zs="active",tp="end",nS="prepared";function yw(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function WA(t,e){var n={animationend:yw("Animation","AnimationEnd"),transitionend:yw("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var UA=WA(jr(),typeof window<"u"?window:{}),rS={};if(jr()){var qA=document.createElement("div");rS=qA.style}var pd={};function iS(t){if(pd[t])return pd[t];var e=UA[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in rS)return pd[t]=e[o],pd[t]}return""}var oS=iS("animationend"),aS=iS("transitionend"),sS=!!(oS&&aS),bw=oS||"animationend",ww=aS||"transitionend";function xw(t,e){if(!t)return null;if(ht(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const KA=function(t){var e=b.useRef();function n(i){i&&(i.removeEventListener(ww,t),i.removeEventListener(bw,t))}function r(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(ww,t),i.addEventListener(bw,t),e.current=i)}return b.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var lS=jr()?b.useLayoutEffect:b.useEffect,cS=function(e){return+setTimeout(e,16)},uS=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(cS=function(e){return window.requestAnimationFrame(e)},uS=function(e){return window.cancelAnimationFrame(e)});var Cw=0,np=new Map;function dS(t){np.delete(t)}var Qt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Cw+=1;var r=Cw;function i(o){if(o===0)dS(r),e();else{var a=cS(function(){i(o-1)});np.set(r,a)}}return i(n),r};Qt.cancel=function(t){var e=np.get(t);return dS(t),uS(e)};const GA=function(){var t=b.useRef(null);function e(){Qt.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Qt(function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)});t.current=o}return b.useEffect(function(){return function(){e()}},[]),[n,e]};var XA=[Vi,Js,Zs,tp],YA=[Vi,nS],fS=!1,QA=!0;function hS(t){return t===Zs||t===tp}const JA=function(t,e,n){var r=Oc(pw),i=fe(r,2),o=i[0],a=i[1],l=GA(),s=fe(l,2),u=s[0],c=s[1];function f(){a(Vi,!0)}var v=e?YA:XA;return lS(function(){if(o!==pw&&o!==tp){var g=v.indexOf(o),m=v[g+1],y=n(o);y===fS?a(m,!0):m&&u(function(p){function C(){p.isCanceled()||a(m,!0)}y===!0?C():Promise.resolve(y).then(C)})}},[t,o]),b.useEffect(function(){return function(){c()}},[]),[f,o]};function ZA(t,e,n,r){var i=r.motionEnter,o=i===void 0?!0:i,a=r.motionAppear,l=a===void 0?!0:a,s=r.motionLeave,u=s===void 0?!0:s,c=r.motionDeadline,f=r.motionLeaveImmediately,v=r.onAppearPrepare,g=r.onEnterPrepare,m=r.onLeavePrepare,y=r.onAppearStart,p=r.onEnterStart,C=r.onLeaveStart,x=r.onAppearActive,S=r.onEnterActive,E=r.onLeaveActive,P=r.onAppearEnd,$=r.onEnterEnd,_=r.onLeaveEnd,M=r.onVisibleChanged,B=Oc(),H=fe(B,2),k=H[0],T=H[1],O=VA(aa),L=fe(O,2),K=L[0],q=L[1],J=Oc(null),V=fe(J,2),z=V[0],D=V[1],U=K(),W=b.useRef(!1),X=b.useRef(null);function Y(){return n()}var Q=b.useRef(!1);function ne(){q(aa),D(null,!0)}var ie=In(function($e){var Me=K();if(Me!==aa){var Re=Y();if(!($e&&!$e.deadline&&$e.target!==Re)){var be=Q.current,Le;Me===vd&&be?Le=P==null?void 0:P(Re,$e):Me===gd&&be?Le=$==null?void 0:$(Re,$e):Me===md&&be&&(Le=_==null?void 0:_(Re,$e)),be&&Le!==!1&&ne()}}}),re=KA(ie),I=fe(re,1),A=I[0],F=function(Me){switch(Me){case vd:return oe(oe(oe({},Vi,v),Js,y),Zs,x);case gd:return oe(oe(oe({},Vi,g),Js,p),Zs,S);case md:return oe(oe(oe({},Vi,m),Js,C),Zs,E);default:return{}}},G=b.useMemo(function(){return F(U)},[U]),ee=JA(U,!t,function($e){if($e===Vi){var Me=G[Vi];return Me?Me(Y()):fS}if(de in G){var Re;D(((Re=G[de])===null||Re===void 0?void 0:Re.call(G,Y(),null))||null)}return de===Zs&&U!==aa&&(A(Y()),c>0&&(clearTimeout(X.current),X.current=setTimeout(function(){ie({deadline:!0})},c))),de===nS&&ne(),QA}),te=fe(ee,2),ae=te[0],de=te[1],he=hS(de);Q.current=he;var pe=b.useRef(null);lS(function(){if(!(W.current&&pe.current===e)){T(e);var $e=W.current;W.current=!0;var Me;!$e&&e&&l&&(Me=vd),$e&&e&&o&&(Me=gd),($e&&!e&&u||!$e&&f&&!e&&u)&&(Me=md);var Re=F(Me);Me&&(t||Re[Vi])?(q(Me),ae()):q(aa),pe.current=e}},[e]),b.useEffect(function(){(U===vd&&!l||U===gd&&!o||U===md&&!u)&&q(aa)},[l,o,u]),b.useEffect(function(){return function(){W.current=!1,clearTimeout(X.current)}},[]);var we=b.useRef(!1);b.useEffect(function(){k&&(we.current=!0),k!==void 0&&U===aa&&((we.current||k)&&(M==null||M(k)),we.current=!0)},[k,U]);var _e=z;return G[Vi]&&de===Js&&(_e=le({transition:"none"},_e)),[U,de,_e,k??e]}function eO(t){var e=t;ht(t)==="object"&&(e=t.transitionSupport);function n(i,o){return!!(i.motionName&&e&&o!==!1)}var r=b.forwardRef(function(i,o){var a=i.visible,l=a===void 0?!0:a,s=i.removeOnLeave,u=s===void 0?!0:s,c=i.forceRender,f=i.children,v=i.motionName,g=i.leavedClassName,m=i.eventProps,y=b.useContext(tS),p=y.motion,C=n(i,p),x=b.useRef(),S=b.useRef();function E(){try{return x.current instanceof HTMLElement?x.current:Ld(S.current)}catch{return null}}var P=ZA(C,l,E,i),$=fe(P,4),_=$[0],M=$[1],B=$[2],H=$[3],k=b.useRef(H);H&&(k.current=!0);var T=b.useCallback(function(V){x.current=V,Zm(o,V)},[o]),O,L=le(le({},m),{},{visible:l});if(!f)O=null;else if(_===aa)H?O=f(le({},L),T):!u&&k.current&&g?O=f(le(le({},L),{},{className:g}),T):c||!u&&!g?O=f(le(le({},L),{},{style:{display:"none"}}),T):O=null;else{var K;M===Vi?K="prepare":hS(M)?K="active":M===Js&&(K="start");var q=xw(v,"".concat(_,"-").concat(K));O=f(le(le({},L),{},{className:me(xw(v,_),oe(oe({},q,q&&K),v,typeof v=="string")),style:B}),T)}if(b.isValidElement(O)&&ns(O)){var J=wl(O);J||(O=b.cloneElement(O,{ref:T}))}return b.createElement(HA,{ref:S},O)});return r.displayName="CSSMotion",r}const to=eO(sS);var Yg="add",Qg="keep",Jg="remove",qv="removed";function tO(t){var e;return t&&ht(t)==="object"&&"key"in t?e=t:e={key:t},le(le({},e),{},{key:String(e.key)})}function Zg(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(tO)}function nO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,o=Zg(t),a=Zg(e);o.forEach(function(u){for(var c=!1,f=r;f<i;f+=1){var v=a[f];if(v.key===u.key){r<f&&(n=n.concat(a.slice(r,f).map(function(g){return le(le({},g),{},{status:Yg})})),r=f),n.push(le(le({},v),{},{status:Qg})),r+=1,c=!0;break}}c||n.push(le(le({},u),{},{status:Jg}))}),r<i&&(n=n.concat(a.slice(r).map(function(u){return le(le({},u),{},{status:Yg})})));var l={};n.forEach(function(u){var c=u.key;l[c]=(l[c]||0)+1});var s=Object.keys(l).filter(function(u){return l[u]>1});return s.forEach(function(u){n=n.filter(function(c){var f=c.key,v=c.status;return f!==u||v!==Jg}),n.forEach(function(c){c.key===u&&(c.status=Qg)})}),n}var rO=["component","children","onVisibleChanged","onAllRemoved"],iO=["status"],oO=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function aO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:to,n=function(r){Ji(o,r);var i=Zi(o);function o(){var a;Hn(this,o);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return a=i.call.apply(i,[this].concat(s)),oe(At(a),"state",{keyEntities:[]}),oe(At(a),"removeKey",function(c){a.setState(function(f){var v=f.keyEntities.map(function(g){return g.key!==c?g:le(le({},g),{},{status:qv})});return{keyEntities:v}},function(){var f=a.state.keyEntities,v=f.filter(function(g){var m=g.status;return m!==qv}).length;v===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return Vn(o,[{key:"render",value:function(){var l=this,s=this.state.keyEntities,u=this.props,c=u.component,f=u.children,v=u.onVisibleChanged;u.onAllRemoved;var g=_t(u,rO),m=c||b.Fragment,y={};return oO.forEach(function(p){y[p]=g[p],delete g[p]}),delete g.keys,b.createElement(m,g,s.map(function(p,C){var x=p.status,S=_t(p,iO),E=x===Yg||x===Qg;return b.createElement(e,Ne({},y,{key:S.key,visible:E,eventProps:S,onVisibleChanged:function($){v==null||v($,{key:S.key}),$||l.removeKey(S.key)}}),function(P,$){return f(le(le({},P),{},{index:C}),$)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,s){var u=l.keys,c=s.keyEntities,f=Zg(u),v=nO(c,f);return{keyEntities:v.filter(function(g){var m=c.find(function(y){var p=y.key;return g.key===p});return!(m&&m.status===qv&&g.status===Jg)})}}}]),o}(b.Component);return oe(n,"defaultProps",{component:"div"}),n}const vS=aO(sS),Sw=b.createContext(!0);function sO(t){const e=b.useContext(Sw),{children:n}=t,[,r]=Mi(),{motion:i}=r,o=b.useRef(!1);return o.current||(o.current=e!==i),o.current?b.createElement(Sw.Provider,{value:i},b.createElement(zA,{motion:i},n)):n}const lO=()=>null;var cO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const uO=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let Zd,gS,mS,pS;function Dd(){return Zd||Ac}function dO(){return gS||Cf}function fO(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const hO=t=>{const{prefixCls:e,iconPrefixCls:n,theme:r,holderRender:i}=t;e!==void 0&&(Zd=e),n!==void 0&&(gS=n),"holderRender"in t&&(pS=i),r&&(fO(r)?eA(Dd(),r):mS=r)},vO=()=>({getPrefixCls:(t,e)=>e||(t?`${Dd()}-${t}`:Dd()),getIconPrefixCls:dO,getRootPrefixCls:()=>Zd||Dd(),getTheme:()=>mS,holderRender:pS}),gO=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:o,form:a,locale:l,componentSize:s,direction:u,space:c,splitter:f,virtual:v,dropdownMatchSelectWidth:g,popupMatchSelectWidth:m,popupOverflow:y,legacyLocale:p,parentContext:C,iconPrefixCls:x,theme:S,componentDisabled:E,segmented:P,statistic:$,spin:_,calendar:M,carousel:B,cascader:H,collapse:k,typography:T,checkbox:O,descriptions:L,divider:K,drawer:q,skeleton:J,steps:V,image:z,layout:D,list:U,mentions:W,modal:X,progress:Y,result:Q,slider:ne,breadcrumb:ie,menu:re,pagination:I,input:A,textArea:F,empty:G,badge:ee,radio:te,rate:ae,switch:de,transfer:he,avatar:pe,message:we,tag:_e,table:$e,card:Me,tabs:Re,timeline:be,timePicker:Le,upload:He,notification:it,tree:qe,colorPicker:De,datePicker:nt,rangePicker:Je,flex:st,wave:Ve,dropdown:Ie,warning:Te,tour:je,tooltip:ke,popover:et,popconfirm:St,floatButtonGroup:Ht,variant:Ft,inputNumber:We,treeSelect:tt}=t,gt=b.useCallback((lt,mt)=>{const{prefixCls:Jt}=t;if(mt)return mt;const qt=Jt||C.getPrefixCls("");return lt?`${qt}-${lt}`:qt},[C.getPrefixCls,t.prefixCls]),Ge=x||C.iconPrefixCls||Cf,Rt=n||C.csp;_A(Ge,Rt);const dt=NA(S,C.theme,{prefixCls:gt("")}),ut={csp:Rt,autoInsertSpaceInButton:r,alert:i,anchor:o,locale:l||p,direction:u,space:c,splitter:f,virtual:v,popupMatchSelectWidth:m??g,popupOverflow:y,getPrefixCls:gt,iconPrefixCls:Ge,theme:dt,segmented:P,statistic:$,spin:_,calendar:M,carousel:B,cascader:H,collapse:k,typography:T,checkbox:O,descriptions:L,divider:K,drawer:q,skeleton:J,steps:V,image:z,input:A,textArea:F,layout:D,list:U,mentions:W,modal:X,progress:Y,result:Q,slider:ne,breadcrumb:ie,menu:re,pagination:I,empty:G,badge:ee,radio:te,rate:ae,switch:de,transfer:he,avatar:pe,message:we,tag:_e,table:$e,card:Me,tabs:Re,timeline:be,timePicker:Le,upload:He,notification:it,tree:qe,colorPicker:De,datePicker:nt,rangePicker:Je,flex:st,wave:Ve,dropdown:Ie,warning:Te,tour:je,tooltip:ke,popover:et,popconfirm:St,floatButtonGroup:Ht,variant:Ft,inputNumber:We,treeSelect:tt},Ue=Object.assign({},C);Object.keys(ut).forEach(lt=>{ut[lt]!==void 0&&(Ue[lt]=ut[lt])}),uO.forEach(lt=>{const mt=t[lt];mt&&(Ue[lt]=mt)}),typeof r<"u"&&(Ue.button=Object.assign({autoInsertSpace:r},Ue.button));const Ct=zc(()=>Ue,Ue,(lt,mt)=>{const Jt=Object.keys(lt),qt=Object.keys(mt);return Jt.length!==qt.length||Jt.some(Yt=>lt[Yt]!==mt[Yt])}),{layer:Lt}=b.useContext(Hc),Ke=b.useMemo(()=>({prefixCls:Ge,csp:Rt,layer:Lt?"antd":void 0}),[Ge,Rt,Lt]);let Xe=b.createElement(b.Fragment,null,b.createElement(lO,{dropdownMatchSelectWidth:g}),e);const ot=b.useMemo(()=>{var lt,mt,Jt,qt;return Qs(((lt=Ga.Form)===null||lt===void 0?void 0:lt.defaultValidateMessages)||{},((Jt=(mt=Ct.locale)===null||mt===void 0?void 0:mt.Form)===null||Jt===void 0?void 0:Jt.defaultValidateMessages)||{},((qt=Ct.form)===null||qt===void 0?void 0:qt.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[Ct,a==null?void 0:a.validateMessages]);Object.keys(ot).length>0&&(Xe=b.createElement($_.Provider,{value:ot},Xe)),l&&(Xe=b.createElement(N_,{locale:l,_ANT_MARK__:M_},Xe)),Xe=b.createElement(Ym.Provider,{value:Ke},Xe),s&&(Xe=b.createElement(nA,{size:s},Xe)),Xe=b.createElement(sO,null,Xe);const at=b.useMemo(()=>{const lt=dt||{},{algorithm:mt,token:Jt,components:qt,cssVar:Yt}=lt,zt=cO(lt,["algorithm","token","components","cssVar"]),En=mt&&(!Array.isArray(mt)||mt.length>0)?Tg(mt):WC,wn={};Object.entries(qt||{}).forEach(([An,nn])=>{const Kt=Object.assign({},nn);"algorithm"in Kt&&(Kt.algorithm===!0?Kt.theme=En:(Array.isArray(Kt.algorithm)||typeof Kt.algorithm=="function")&&(Kt.theme=Tg(Kt.algorithm)),delete Kt.algorithm),wn[An]=Kt});const xn=Object.assign(Object.assign({},Tc),Jt);return Object.assign(Object.assign({},zt),{theme:En,token:xn,components:wn,override:Object.assign({override:xn},wn),cssVar:Yt})},[dt]);return S&&(Xe=b.createElement(UC.Provider,{value:at},Xe)),Ct.warning&&(Xe=b.createElement(k_.Provider,{value:Ct.warning},Xe)),E!==void 0&&(Xe=b.createElement(tA,{disabled:E},Xe)),b.createElement(un.Provider,{value:Ct},Xe)},ga=t=>{const e=b.useContext(un),n=b.useContext(Jm);return b.createElement(gO,Object.assign({parentContext:e,legacyLocale:n},t))};ga.ConfigContext=un;ga.SizeContext=gl;ga.config=hO;ga.useConfig=rA;Object.defineProperty(ga,"SizeContext",{get:()=>gl});function yS(t,e){this.v=t,this.k=e}function Mr(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Mr=function(a,l,s,u){if(l)i?i(a,l,{value:s,enumerable:!u,configurable:!u,writable:!u}):a[l]=s;else{var c=function(v,g){Mr(a,v,function(m){return this._invoke(v,g,m)})};c("next",0),c("throw",1),c("return",2)}},Mr(t,e,n,r)}function rp(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=typeof Symbol=="function"?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(g,m,y,p){var C=m&&m.prototype instanceof l?m:l,x=Object.create(C.prototype);return Mr(x,"_invoke",function(S,E,P){var $,_,M,B=0,H=P||[],k=!1,T={p:0,n:0,v:t,a:O,f:O.bind(t,4),d:function(K,q){return $=K,_=0,M=t,T.n=q,a}};function O(L,K){for(_=L,M=K,e=0;!k&&B&&!q&&e<H.length;e++){var q,J=H[e],V=T.p,z=J[2];L>3?(q=z===K)&&(M=J[(_=J[4])?5:(_=3,3)],J[4]=J[5]=t):J[0]<=V&&((q=L<2&&V<J[1])?(_=0,T.v=K,T.n=J[1]):V<z&&(q=L<3||J[0]>K||K>z)&&(J[4]=L,J[5]=K,T.n=z,_=0))}if(q||L>1)return a;throw k=!0,K}return function(L,K,q){if(B>1)throw TypeError("Generator is already running");for(k&&K===1&&O(K,q),_=K,M=q;(e=_<2?t:M)||!k;){$||(_?_<3?(_>1&&(T.n=-1),O(_,M)):T.n=M:T.v=M);try{if(B=2,$){if(_||(L="next"),e=$[L]){if(!(e=e.call($,M)))throw TypeError("iterator result is not an object");if(!e.done)return e;M=e.value,_<2&&(_=0)}else _===1&&(e=$.return)&&e.call($),_<2&&(M=TypeError("The iterator does not provide a '"+L+"' method"),_=1);$=t}else if((e=(k=T.n<0)?M:S.call(E,T))!==a)break}catch(J){$=t,_=1,M=J}finally{B=1}}return{value:e,done:k}}}(g,y,p),!0),x}var a={};function l(){}function s(){}function u(){}e=Object.getPrototypeOf;var c=[][r]?e(e([][r]())):(Mr(e={},r,function(){return this}),e),f=u.prototype=l.prototype=Object.create(c);function v(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,u):(g.__proto__=u,Mr(g,i,"GeneratorFunction")),g.prototype=Object.create(f),g}return s.prototype=u,Mr(f,"constructor",u),Mr(u,"constructor",s),s.displayName="GeneratorFunction",Mr(u,i,"GeneratorFunction"),Mr(f),Mr(f,i,"Generator"),Mr(f,r,function(){return this}),Mr(f,"toString",function(){return"[object Generator]"}),(rp=function(){return{w:o,m:v}})()}function ef(t,e){function n(i,o,a,l){try{var s=t[i](o),u=s.value;return u instanceof yS?e.resolve(u.v).then(function(c){n("next",c,a,l)},function(c){n("throw",c,a,l)}):e.resolve(u).then(function(c){s.value=c,a(s)},function(c){return n("throw",c,a,l)})}catch(c){l(c)}}var r;this.next||(Mr(ef.prototype),Mr(ef.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Mr(this,"_invoke",function(i,o,a){function l(){return new e(function(s,u){n(i,a,s,u)})}return r=r?r.then(l,l):l()},!0)}function bS(t,e,n,r,i){return new ef(rp().w(t,e,n,r),i||Promise)}function mO(t,e,n,r,i){var o=bS(t,e,n,r,i);return o.next().then(function(a){return a.done?a.value:o.next()})}function pO(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function i(){for(;n.length;)if((r=n.pop())in e)return i.value=r,i.done=!1,i;return i.done=!0,i}}function Ew(t){if(t!=null){var e=t[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(ht(t)+" is not iterable")}function pn(){var t=rp(),e=t.m(pn),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(a){var l=typeof a=="function"&&a.constructor;return!!l&&(l===n||(l.displayName||l.name)==="GeneratorFunction")}var i={throw:1,return:2,break:3,continue:3};function o(a){var l,s;return function(u){l||(l={stop:function(){return s(u.a,2)},catch:function(){return u.v},abrupt:function(f,v){return s(u.a,i[f],v)},delegateYield:function(f,v,g){return l.resultName=v,s(u.d,Ew(f),g)},finish:function(f){return s(u.f,f)}},s=function(f,v,g){u.p=l.prev,u.n=l.next;try{return f(v,g)}finally{l.next=u.n}}),l.resultName&&(l[l.resultName]=u.v,l.resultName=void 0),l.sent=u.v,l.next=u.n;try{return a.call(this,l)}finally{u.p=l.prev,u.n=l.next}}}return(pn=function(){return{wrap:function(s,u,c,f){return t.w(o(s),u,c,f&&f.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(s,u){return new yS(s,u)},AsyncIterator:ef,async:function(s,u,c,f,v){return(r(u)?bS:mO)(o(s),u,c,f,v)},keys:pO,values:Ew}})()}function Rw(t,e,n,r,i,o,a){try{var l=t[o](a),s=l.value}catch(u){return void n(u)}l.done?e(s):Promise.resolve(s).then(r,i)}function Br(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(s){Rw(o,r,i,a,l,"next",s)}function l(s){Rw(o,r,i,a,l,"throw",s)}a(void 0)})}}var Vc=le({},FA),yO=Vc.version,Kv=Vc.render,bO=Vc.unmountComponentAtNode,Ef;try{var wO=Number((yO||"").split(".")[0]);wO>=18&&(Ef=Vc.createRoot)}catch{}function Iw(t){var e=Vc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&ht(e)==="object"&&(e.usingClientEntryPoint=t)}var tf="__rc_react_root__";function xO(t,e){Iw(!0);var n=e[tf]||Ef(e);Iw(!1),n.render(t),e[tf]=n}function CO(t,e){Kv==null||Kv(t,e)}function SO(t,e){if(Ef){xO(t,e);return}CO(t,e)}function EO(t){return em.apply(this,arguments)}function em(){return em=Br(pn().mark(function t(e){return pn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var i;(i=e[tf])===null||i===void 0||i.unmount(),delete e[tf]}));case 1:case"end":return r.stop()}},t)})),em.apply(this,arguments)}function RO(t){bO(t)}function IO(t){return tm.apply(this,arguments)}function tm(){return tm=Br(pn().mark(function t(e){return pn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(Ef===void 0){r.next=2;break}return r.abrupt("return",EO(e));case 2:RO(e);case 3:case"end":return r.stop()}},t)})),tm.apply(this,arguments)}const PO=(t,e)=>(SO(t,e),()=>IO(e));let kO=PO;function wS(t){return kO}var $O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function xS(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function TO(t){return xS(t)instanceof ShadowRoot}function nf(t){return TO(t)?xS(t):null}function _O(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function AO(t,e){rr(t,"[@ant-design/icons] ".concat(e))}function Pw(t){return ht(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(ht(t.icon)==="object"||typeof t.icon=="function")}function kw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[_O(n)]=r}return e},{})}function nm(t,e,n){return n?ue.createElement(t.tag,le(le({key:e},kw(t.attrs)),n),(t.children||[]).map(function(r,i){return nm(r,"".concat(e,"-").concat(t.tag,"-").concat(i))})):ue.createElement(t.tag,le({key:e},kw(t.attrs)),(t.children||[]).map(function(r,i){return nm(r,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function CS(t){return _c(t)[0]}function SS(t){return t?Array.isArray(t)?t:[t]:[]}var OO=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,MO=function(e){var n=b.useContext(Ym),r=n.csp,i=n.prefixCls,o=n.layer,a=OO;i&&(a=a.replace(/anticon/g,i)),o&&(a="@layer ".concat(o,` {
`).concat(a,`
}`)),b.useEffect(function(){var l=e.current,s=nf(l);No(a,"@ant-design-icons",{prepend:!o,csp:r,attachTo:s})},[])},NO=["icon","className","onClick","style","primaryColor","secondaryColor"],bc={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function LO(t){var e=t.primaryColor,n=t.secondaryColor;bc.primaryColor=e,bc.secondaryColor=n||CS(e),bc.calculated=!!n}function DO(){return le({},bc)}var Cl=function(e){var n=e.icon,r=e.className,i=e.onClick,o=e.style,a=e.primaryColor,l=e.secondaryColor,s=_t(e,NO),u=b.useRef(),c=bc;if(a&&(c={primaryColor:a,secondaryColor:l||CS(a)}),MO(u),AO(Pw(n),"icon should be icon definiton, but got ".concat(n)),!Pw(n))return null;var f=n;return f&&typeof f.icon=="function"&&(f=le(le({},f),{},{icon:f.icon(c.primaryColor,c.secondaryColor)})),nm(f.icon,"svg-".concat(f.name),le(le({className:r,onClick:i,style:o,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s),{},{ref:u}))};Cl.displayName="IconReact";Cl.getTwoToneColors=DO;Cl.setTwoToneColors=LO;function ES(t){var e=SS(t),n=fe(e,2),r=n[0],i=n[1];return Cl.setTwoToneColors({primaryColor:r,secondaryColor:i})}function FO(){var t=Cl.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var BO=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ES(vl.primary);var Xn=b.forwardRef(function(t,e){var n=t.className,r=t.icon,i=t.spin,o=t.rotate,a=t.tabIndex,l=t.onClick,s=t.twoToneColor,u=_t(t,BO),c=b.useContext(Ym),f=c.prefixCls,v=f===void 0?"anticon":f,g=c.rootClassName,m=me(g,v,oe(oe({},"".concat(v,"-").concat(r.name),!!r.name),"".concat(v,"-spin"),!!i||r.name==="loading"),n),y=a;y===void 0&&l&&(y=-1);var p=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,C=SS(s),x=fe(C,2),S=x[0],E=x[1];return b.createElement("span",Ne({role:"img","aria-label":r.name},u,{ref:e,tabIndex:y,onClick:l,className:m}),b.createElement(Cl,{icon:r,primaryColor:S,secondaryColor:E,style:p}))});Xn.displayName="AntdIcon";Xn.getTwoToneColor=FO;Xn.setTwoToneColor=ES;var jO=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:$O}))},RS=b.forwardRef(jO),zO={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},HO=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:zO}))},Rf=b.forwardRef(HO),VO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},WO=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:VO}))},UO=b.forwardRef(WO),qO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},KO=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:qO}))},GO=b.forwardRef(KO),XO={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},YO=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:XO}))},Qa=b.forwardRef(YO),Ze={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,N:78,P:80,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,EQUALS:187,WIN_KEY:224},QO=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,JO=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,ZO="".concat(QO," ").concat(JO).split(/[\s\n]+/),eM="aria-",tM="data-";function $w(t,e){return t.indexOf(e)===0}function Lo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=le({},e);var r={};return Object.keys(t).forEach(function(i){(n.aria&&(i==="role"||$w(i,eM))||n.data&&$w(i,tM)||n.attr&&ZO.includes(i))&&(r[i]=t[i])}),r}var IS=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.style,i=t.className,o=t.duration,a=o===void 0?4.5:o,l=t.showProgress,s=t.pauseOnHover,u=s===void 0?!0:s,c=t.eventKey,f=t.content,v=t.closable,g=t.closeIcon,m=g===void 0?"x":g,y=t.props,p=t.onClick,C=t.onNoticeClose,x=t.times,S=t.hovering,E=b.useState(!1),P=fe(E,2),$=P[0],_=P[1],M=b.useState(0),B=fe(M,2),H=B[0],k=B[1],T=b.useState(0),O=fe(T,2),L=O[0],K=O[1],q=S||$,J=a>0&&l,V=function(){C(c)},z=function(Q){(Q.key==="Enter"||Q.code==="Enter"||Q.keyCode===Ze.ENTER)&&V()};b.useEffect(function(){if(!q&&a>0){var Y=Date.now()-L,Q=setTimeout(function(){V()},a*1e3-L);return function(){u&&clearTimeout(Q),K(Date.now()-Y)}}},[a,q,x]),b.useEffect(function(){if(!q&&J&&(u||L===0)){var Y=performance.now(),Q,ne=function ie(){cancelAnimationFrame(Q),Q=requestAnimationFrame(function(re){var I=re+L-Y,A=Math.min(I/(a*1e3),1);k(A*100),A<1&&ie()})};return ne(),function(){u&&cancelAnimationFrame(Q)}}},[a,L,q,J,x]);var D=b.useMemo(function(){return ht(v)==="object"&&v!==null?v:v?{closeIcon:m}:{}},[v,m]),U=Lo(D,!0),W=100-(!H||H<0?0:H>100?100:H),X="".concat(n,"-notice");return b.createElement("div",Ne({},y,{ref:e,className:me(X,i,oe({},"".concat(X,"-closable"),v)),style:r,onMouseEnter:function(Q){var ne;_(!0),y==null||(ne=y.onMouseEnter)===null||ne===void 0||ne.call(y,Q)},onMouseLeave:function(Q){var ne;_(!1),y==null||(ne=y.onMouseLeave)===null||ne===void 0||ne.call(y,Q)},onClick:p}),b.createElement("div",{className:"".concat(X,"-content")},f),v&&b.createElement("a",Ne({tabIndex:0,className:"".concat(X,"-close"),onKeyDown:z,"aria-label":"Close"},U,{onClick:function(Q){Q.preventDefault(),Q.stopPropagation(),V()}}),D.closeIcon),J&&b.createElement("progress",{className:"".concat(X,"-progress"),max:"100",value:W},W+"%"))}),PS=ue.createContext({}),nM=function(e){var n=e.children,r=e.classNames;return ue.createElement(PS.Provider,{value:{classNames:r}},n)},Tw=8,_w=3,Aw=16,rM=function(e){var n={offset:Tw,threshold:_w,gap:Aw};if(e&&ht(e)==="object"){var r,i,o;n.offset=(r=e.offset)!==null&&r!==void 0?r:Tw,n.threshold=(i=e.threshold)!==null&&i!==void 0?i:_w,n.gap=(o=e.gap)!==null&&o!==void 0?o:Aw}return[!!e,n]},iM=["className","style","classNames","styles"],oM=function(e){var n=e.configList,r=e.placement,i=e.prefixCls,o=e.className,a=e.style,l=e.motion,s=e.onAllNoticeRemoved,u=e.onNoticeClose,c=e.stack,f=b.useContext(PS),v=f.classNames,g=b.useRef({}),m=b.useState(null),y=fe(m,2),p=y[0],C=y[1],x=b.useState([]),S=fe(x,2),E=S[0],P=S[1],$=n.map(function(q){return{config:q,key:String(q.key)}}),_=rM(c),M=fe(_,2),B=M[0],H=M[1],k=H.offset,T=H.threshold,O=H.gap,L=B&&(E.length>0||$.length<=T),K=typeof l=="function"?l(r):l;return b.useEffect(function(){B&&E.length>1&&P(function(q){return q.filter(function(J){return $.some(function(V){var z=V.key;return J===z})})})},[E,$,B]),b.useEffect(function(){var q;if(B&&g.current[(q=$[$.length-1])===null||q===void 0?void 0:q.key]){var J;C(g.current[(J=$[$.length-1])===null||J===void 0?void 0:J.key])}},[$,B]),ue.createElement(vS,Ne({key:r,className:me(i,"".concat(i,"-").concat(r),v==null?void 0:v.list,o,oe(oe({},"".concat(i,"-stack"),!!B),"".concat(i,"-stack-expanded"),L)),style:a,keys:$,motionAppear:!0},K,{onAllRemoved:function(){s(r)}}),function(q,J){var V=q.config,z=q.className,D=q.style,U=q.index,W=V,X=W.key,Y=W.times,Q=String(X),ne=V,ie=ne.className,re=ne.style,I=ne.classNames,A=ne.styles,F=_t(ne,iM),G=$.findIndex(function(be){return be.key===Q}),ee={};if(B){var te=$.length-1-(G>-1?G:U-1),ae=r==="top"||r==="bottom"?"-50%":"0";if(te>0){var de,he,pe;ee.height=L?(de=g.current[Q])===null||de===void 0?void 0:de.offsetHeight:p==null?void 0:p.offsetHeight;for(var we=0,_e=0;_e<te;_e++){var $e;we+=(($e=g.current[$[$.length-1-_e].key])===null||$e===void 0?void 0:$e.offsetHeight)+O}var Me=(L?we:te*k)*(r.startsWith("top")?1:-1),Re=!L&&p!==null&&p!==void 0&&p.offsetWidth&&(he=g.current[Q])!==null&&he!==void 0&&he.offsetWidth?((p==null?void 0:p.offsetWidth)-k*2*(te<3?te:3))/((pe=g.current[Q])===null||pe===void 0?void 0:pe.offsetWidth):1;ee.transform="translate3d(".concat(ae,", ").concat(Me,"px, 0) scaleX(").concat(Re,")")}else ee.transform="translate3d(".concat(ae,", 0, 0)")}return ue.createElement("div",{ref:J,className:me("".concat(i,"-notice-wrapper"),z,I==null?void 0:I.wrapper),style:le(le(le({},D),ee),A==null?void 0:A.wrapper),onMouseEnter:function(){return P(function(Le){return Le.includes(Q)?Le:[].concat(Ae(Le),[Q])})},onMouseLeave:function(){return P(function(Le){return Le.filter(function(He){return He!==Q})})}},ue.createElement(IS,Ne({},F,{ref:function(Le){G>-1?g.current[Q]=Le:delete g.current[Q]},prefixCls:i,classNames:I,styles:A,className:me(ie,v==null?void 0:v.notice),style:re,times:Y,key:X,eventKey:X,onNoticeClose:u,hovering:B&&E.length>0})))})},aM=b.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-notification":n,i=t.container,o=t.motion,a=t.maxCount,l=t.className,s=t.style,u=t.onAllRemoved,c=t.stack,f=t.renderNotifications,v=b.useState([]),g=fe(v,2),m=g[0],y=g[1],p=function(B){var H,k=m.find(function(T){return T.key===B});k==null||(H=k.onClose)===null||H===void 0||H.call(k),y(function(T){return T.filter(function(O){return O.key!==B})})};b.useImperativeHandle(e,function(){return{open:function(B){y(function(H){var k=Ae(H),T=k.findIndex(function(K){return K.key===B.key}),O=le({},B);if(T>=0){var L;O.times=(((L=H[T])===null||L===void 0?void 0:L.times)||0)+1,k[T]=O}else O.times=0,k.push(O);return a>0&&k.length>a&&(k=k.slice(-a)),k})},close:function(B){p(B)},destroy:function(){y([])}}});var C=b.useState({}),x=fe(C,2),S=x[0],E=x[1];b.useEffect(function(){var M={};m.forEach(function(B){var H=B.placement,k=H===void 0?"topRight":H;k&&(M[k]=M[k]||[],M[k].push(B))}),Object.keys(S).forEach(function(B){M[B]=M[B]||[]}),E(M)},[m]);var P=function(B){E(function(H){var k=le({},H),T=k[B]||[];return T.length||delete k[B],k})},$=b.useRef(!1);if(b.useEffect(function(){Object.keys(S).length>0?$.current=!0:$.current&&(u==null||u(),$.current=!1)},[S]),!i)return null;var _=Object.keys(S);return Gi.createPortal(b.createElement(b.Fragment,null,_.map(function(M){var B=S[M],H=b.createElement(oM,{key:M,configList:B,placement:M,prefixCls:r,className:l==null?void 0:l(M),style:s==null?void 0:s(M),motion:o,onNoticeClose:p,onAllNoticeRemoved:P,stack:c});return f?f(H,{prefixCls:r,key:M}):H})),i)}),sM=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],lM=function(){return document.body},Ow=0;function cM(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(i){i&&Object.keys(i).forEach(function(o){var a=i[o];a!==void 0&&(t[o]=a)})}),t}function uM(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getContainer,n=e===void 0?lM:e,r=t.motion,i=t.prefixCls,o=t.maxCount,a=t.className,l=t.style,s=t.onAllRemoved,u=t.stack,c=t.renderNotifications,f=_t(t,sM),v=b.useState(),g=fe(v,2),m=g[0],y=g[1],p=b.useRef(),C=b.createElement(aM,{container:m,ref:p,prefixCls:i,motion:r,maxCount:o,className:a,style:l,onAllRemoved:s,stack:u,renderNotifications:c}),x=b.useState([]),S=fe(x,2),E=S[0],P=S[1],$=In(function(M){var B=cM(f,M);(B.key===null||B.key===void 0)&&(B.key="rc-notification-".concat(Ow),Ow+=1),P(function(H){return[].concat(Ae(H),[{type:"open",config:B}])})}),_=b.useMemo(function(){return{open:$,close:function(B){P(function(H){return[].concat(Ae(H),[{type:"close",key:B}])})},destroy:function(){P(function(B){return[].concat(Ae(B),[{type:"destroy"}])})}}},[]);return b.useEffect(function(){y(n())}),b.useEffect(function(){if(p.current&&E.length){E.forEach(function(H){switch(H.type){case"open":p.current.open(H.config);break;case"close":p.current.close(H.key);break;case"destroy":p.current.destroy();break}});var M,B;P(function(H){return(M!==H||!B)&&(M=H,B=H.filter(function(k){return!E.includes(k)})),B})}},[E]),[_,C]}const ma=t=>{const[,,,,e]=Mi();return e?`${t}-css-var`:""},kS=ue.createContext(void 0),sa=100,dM=10,fM=sa*dM,$S={Modal:sa,Drawer:sa,Popover:sa,Popconfirm:sa,Tooltip:sa,Tour:sa,FloatButton:sa},hM={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function vM(t){return t in $S}const TS=(t,e)=>{const[,n]=Mi(),r=ue.useContext(kS),i=vM(t);let o;if(e!==void 0)o=[e,e];else{let a=r??0;i?a+=(r?0:n.zIndexPopupBase)+$S[t]:a+=hM[t],o=[r===void 0?e:a,a]}return o},gM=t=>{const{componentCls:e,iconCls:n,boxShadow:r,colorText:i,colorSuccess:o,colorError:a,colorWarning:l,colorInfo:s,fontSizeLG:u,motionEaseInOutCirc:c,motionDurationSlow:f,marginXS:v,paddingXS:g,borderRadiusLG:m,zIndexPopup:y,contentPadding:p,contentBg:C}=t,x=`${e}-notice`,S=new cn("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:g,transform:"translateY(0)",opacity:1}}),E=new cn("MessageMoveOut",{"0%":{maxHeight:t.height,padding:g,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),P={padding:g,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${n}`]:{marginInlineEnd:v,fontSize:u},[`${x}-content`]:{display:"inline-block",padding:p,background:C,borderRadius:m,boxShadow:r,pointerEvents:"all"},[`${e}-success > ${n}`]:{color:o},[`${e}-error > ${n}`]:{color:a},[`${e}-warning > ${n}`]:{color:l},[`${e}-info > ${n},
      ${e}-loading > ${n}`]:{color:s}};return[{[e]:Object.assign(Object.assign({},sr(t)),{color:i,position:"fixed",top:v,width:"100%",pointerEvents:"none",zIndex:y,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:S,animationDuration:f,animationPlayState:"paused",animationTimingFunction:c},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:E,animationDuration:f,animationPlayState:"paused",animationTimingFunction:c},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${x}-wrapper`]:Object.assign({},P)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},P),{padding:0,textAlign:"start"})}]},mM=t=>({zIndexPopup:t.zIndexPopupBase+fM+10,contentBg:t.colorBgElevated,contentPadding:`${(t.controlHeightLG-t.fontSize*t.lineHeight)/2}px ${t.paddingSM}px`}),_S=lr("Message",t=>{const e=bn(t,{height:150});return[gM(e)]},mM);var pM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const yM={info:b.createElement(GO,null),success:b.createElement(RS,null),error:b.createElement(Rf,null),warning:b.createElement(UO,null),loading:b.createElement(Qa,null)},AS=({prefixCls:t,type:e,icon:n,children:r})=>b.createElement("div",{className:me(`${t}-custom-content`,`${t}-${e}`)},n||yM[e],b.createElement("span",null,r)),bM=t=>{const{prefixCls:e,className:n,type:r,icon:i,content:o}=t,a=pM(t,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=b.useContext(un),s=e||l("message"),u=ma(s),[c,f,v]=_S(s,u);return c(b.createElement(IS,Object.assign({},a,{prefixCls:s,className:me(n,f,`${s}-notice-pure-panel`,v,u),eventKey:"pure",duration:null,content:b.createElement(AS,{prefixCls:s,type:r,icon:i},o)})))};var wM={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},xM=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:wM}))},If=b.forwardRef(xM);function CM(t,e){return{motionName:e??`${t}-move-up`}}function ip(t){let e;const n=new Promise(i=>{e=t(()=>{i(!0)})}),r=()=>{e==null||e()};return r.then=(i,o)=>n.then(i,o),r.promise=n,r}var SM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const EM=8,RM=3,IM=({children:t,prefixCls:e})=>{const n=ma(e),[r,i,o]=_S(e,n);return r(b.createElement(nM,{classNames:{list:me(i,o,n)}},t))},PM=(t,{prefixCls:e,key:n})=>b.createElement(IM,{prefixCls:e,key:n},t),kM=b.forwardRef((t,e)=>{const{top:n,prefixCls:r,getContainer:i,maxCount:o,duration:a=RM,rtl:l,transitionName:s,onAllRemoved:u}=t,{getPrefixCls:c,getPopupContainer:f,message:v,direction:g}=b.useContext(un),m=r||c("message"),y=()=>({left:"50%",transform:"translateX(-50%)",top:n??EM}),p=()=>me({[`${m}-rtl`]:l??g==="rtl"}),C=()=>CM(m,s),x=b.createElement("span",{className:`${m}-close-x`},b.createElement(If,{className:`${m}-close-icon`})),[S,E]=uM({prefixCls:m,style:y,className:p,motion:C,closable:!1,closeIcon:x,duration:a,getContainer:()=>(i==null?void 0:i())||(f==null?void 0:f())||document.body,maxCount:o,onAllRemoved:u,renderNotifications:PM});return b.useImperativeHandle(e,()=>Object.assign(Object.assign({},S),{prefixCls:m,message:v})),E});let Mw=0;function OS(t){const e=b.useRef(null);return Qm(),[b.useMemo(()=>{const r=s=>{var u;(u=e.current)===null||u===void 0||u.close(s)},i=s=>{if(!e.current){const $=()=>{};return $.then=()=>{},$}const{open:u,prefixCls:c,message:f}=e.current,v=`${c}-notice`,{content:g,icon:m,type:y,key:p,className:C,style:x,onClose:S}=s,E=SM(s,["content","icon","type","key","className","style","onClose"]);let P=p;return P==null&&(Mw+=1,P=`antd-message-${Mw}`),ip($=>(u(Object.assign(Object.assign({},E),{key:P,content:b.createElement(AS,{prefixCls:c,type:y,icon:m},g),placement:"top",className:me(y&&`${v}-${y}`,C,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),x),onClose:()=>{S==null||S(),$()}})),()=>{r(P)}))},a={open:i,destroy:s=>{var u;s!==void 0?r(s):(u=e.current)===null||u===void 0||u.destroy()}};return["info","success","warning","error","loading"].forEach(s=>{const u=(c,f,v)=>{let g;c&&typeof c=="object"&&"content"in c?g=c:g={content:c};let m,y;typeof f=="function"?y=f:(m=f,y=v);const p=Object.assign(Object.assign({onClose:y,duration:m},g),{type:s});return i(p)};a[s]=u}),a},[]),b.createElement(kM,Object.assign({key:"message-holder"},t,{ref:e}))]}function $M(t){return OS(t)}let _i=null,Da=t=>t(),Nc=[],Lc={};function Nw(){const{getContainer:t,duration:e,rtl:n,maxCount:r,top:i}=Lc,o=(t==null?void 0:t())||document.body;return{getContainer:()=>o,duration:e,rtl:n,maxCount:r,top:i}}const TM=ue.forwardRef((t,e)=>{const{messageConfig:n,sync:r}=t,{getPrefixCls:i}=b.useContext(un),o=Lc.prefixCls||i("message"),a=b.useContext(hT),[l,s]=OS(Object.assign(Object.assign(Object.assign({},n),{prefixCls:o}),a.message));return ue.useImperativeHandle(e,()=>{const u=Object.assign({},l);return Object.keys(u).forEach(c=>{u[c]=(...f)=>(r(),l[c].apply(l,f))}),{instance:u,sync:r}}),s}),_M=ue.forwardRef((t,e)=>{const[n,r]=ue.useState(Nw),i=()=>{r(Nw)};ue.useEffect(i,[]);const o=vO(),a=o.getRootPrefixCls(),l=o.getIconPrefixCls(),s=o.getTheme(),u=ue.createElement(TM,{ref:e,sync:i,messageConfig:n});return ue.createElement(ga,{prefixCls:a,iconPrefixCls:l,theme:s},o.holderRender?o.holderRender(u):u)});function Pf(){if(!_i){const t=document.createDocumentFragment(),e={fragment:t};_i=e,Da(()=>{wS()(ue.createElement(_M,{ref:r=>{const{instance:i,sync:o}=r||{};Promise.resolve().then(()=>{!e.instance&&i&&(e.instance=i,e.sync=o,Pf())})}}),t)});return}_i.instance&&(Nc.forEach(t=>{const{type:e,skipped:n}=t;if(!n)switch(e){case"open":{Da(()=>{const r=_i.instance.open(Object.assign(Object.assign({},Lc),t.config));r==null||r.then(t.resolve),t.setCloseFn(r)});break}case"destroy":Da(()=>{_i==null||_i.instance.destroy(t.key)});break;default:Da(()=>{var r;const i=(r=_i.instance)[e].apply(r,Ae(t.args));i==null||i.then(t.resolve),t.setCloseFn(i)})}}),Nc=[])}function AM(t){Lc=Object.assign(Object.assign({},Lc),t),Da(()=>{var e;(e=_i==null?void 0:_i.sync)===null||e===void 0||e.call(_i)})}function OM(t){const e=ip(n=>{let r;const i={type:"open",config:t,resolve:n,setCloseFn:o=>{r=o}};return Nc.push(i),()=>{r?Da(()=>{r()}):i.skipped=!0}});return Pf(),e}function MM(t,e){const n=ip(r=>{let i;const o={type:t,args:e,resolve:r,setCloseFn:a=>{i=a}};return Nc.push(o),()=>{i?Da(()=>{i()}):o.skipped=!0}});return Pf(),n}const NM=t=>{Nc.push({type:"destroy",key:t}),Pf()},LM=["success","info","warning","error","loading"],DM={open:OM,destroy:NM,config:AM,useMessage:$M,_InternalPanelDoNotUseOrYouWillBeFired:bM},rm=DM;LM.forEach(t=>{rm[t]=(...e)=>MM(t,e)});function FM(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}const BM=t=>{const e=t.type==="image/jpeg"||t.type==="image/png";e||rm.error("You can only upload JPG/PNG file!");const n=t.size/1024/1024<2;return n||rm.error("Image must smaller than 2MB!"),e&&n},jM=()=>{const[t,e]=b.useState(!1),[n,r]=b.useState(!1),[i,o]=b.useState(!1),[a,l]=b.useState(!1),[s,u]=b.useState(!1),[c,f]=b.useState(!1),v=b.useCallback(()=>{window.MyEditor.open()},[]),g=b.useCallback($=>{const _=$.target.files[0];if(!_)return;const M=new FileReader;M.onload=B=>{var H;try{const k=(H=B.target)==null?void 0:H.result;if(typeof k=="string"){const T=JSON.parse(k);window.MyEditor.open(T)}else console.log("读取文件失败，内容不是字符串")}catch{console.log("读取文件失败，请检查数据格式")}},M.readAsText(_)},[]),m=b.useCallback(()=>{const $="测试数据.json",_=window.MyEditor.data(),M=JSON.stringify(_,void 0,4),B=new Blob([M],{type:"text/json"}),H=document.createElement("a");H.download=$,H.href=window.URL.createObjectURL(B),H.dataset.downloadurl=["text/json",H.download,H.href].join(":"),H.click()},[]),y=b.useCallback(()=>{if(t){e(!1),window.MyEditor.drawLine(),window.MyEditor.finishDrawLine();return}r(!1),window.MyEditor.stopPencil(),e(!0),window.MyEditor.drawLine("curve")},[t]),p=b.useCallback(()=>{if(n){r(!1),window.MyEditor.stopPencil();return}e(!1),window.MyEditor.drawLine(),window.MyEditor.finishDrawLine(),r(!0),window.MyEditor.drawingPencil()},[n]),C=b.useCallback(()=>{if(i){o(!1),window.MyEditor.hideMagnifier();return}o(!0),window.MyEditor.showMagnifier()},[i]),x=b.useCallback(()=>{if(a){l(!1),window.MyEditor.hideMap();return}l(!0),window.MyEditor.showMap()},[a]),S=b.useCallback(()=>{if(s){u(!1),window.MyEditor.lock(0);return}u(!0),window.MyEditor.lock(10)},[s]),E=b.useCallback(()=>{const $=document.getElementById("root");FM($),f(!0)},[c]);function P(){document.fullscreenElement||f(!1)}return b.useEffect(()=>(window.addEventListener("fullscreenchange",P),()=>{window.removeEventListener("fullscreenchange",P)}),[]),vt.jsxs("div",{className:dd.header,children:[vt.jsx("div",{className:"logo",children:vt.jsx("div",{className:dd.title,children:"2.5D组态编辑器"})}),vt.jsxs("div",{className:dd.buttonGroup,children:[vt.jsx(Pi,{onClick:v,children:"新建"}),vt.jsxs(Pi,{myStyle:{position:"relative"},children:["打开",vt.jsx("input",{id:"open-input",type:"file",onChange:g})]}),vt.jsx(Pi,{onClick:m,children:"保存"}),vt.jsx(Pi,{onClick:y,active:t,children:"钢笔"}),vt.jsx(Pi,{onClick:p,active:n,children:"铅笔"}),vt.jsx(Pi,{onClick:C,active:i,children:"放大镜"}),vt.jsx(Pi,{onClick:()=>{window.MyEditor.undo()},children:"撤销"})]}),vt.jsxs("div",{className:dd.buttonGroup,style:{marginRight:"10px"},children:[vt.jsx(Pi,{onClick:S,children:s?"编辑":"锁定"}),vt.jsx(Pi,{onClick:E,myStyle:{display:c?"none":""},children:"全屏"}),vt.jsx(Pi,{onClick:x,active:a,children:"缩略图"}),vt.jsx(Pi,{onClick:()=>{},myStyle:{cursor:"not-allowed"},children:"预览"}),vt.jsx(Pi,{onClick:()=>{},myStyle:{cursor:"not-allowed"},children:"发布"})]})]})},zM="_aside_immjo_1",HM="_iconList_immjo_9",VM="_items_immjo_29",WM="_img_immjo_33",yd={aside:zM,iconList:HM,items:VM,img:WM};var UM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},qM=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:UM}))},KM=b.forwardRef(qM);function Do(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return ue.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(Do(r)):GC(r)&&r.props?n=n.concat(Do(r.props.children,e)):n.push(r))}),n}var MS=ue.forwardRef(function(t,e){var n=t.prefixCls,r=t.forceRender,i=t.className,o=t.style,a=t.children,l=t.isActive,s=t.role,u=t.classNames,c=t.styles,f=ue.useState(l||r),v=fe(f,2),g=v[0],m=v[1];return ue.useEffect(function(){(r||l)&&m(!0)},[r,l]),g?ue.createElement("div",{ref:e,className:me("".concat(n,"-content"),oe(oe({},"".concat(n,"-content-active"),l),"".concat(n,"-content-inactive"),!l),i),style:o,role:s},ue.createElement("div",{className:me("".concat(n,"-content-box"),u==null?void 0:u.body),style:c==null?void 0:c.body},a)):null});MS.displayName="PanelContent";var GM=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],NS=ue.forwardRef(function(t,e){var n=t.showArrow,r=n===void 0?!0:n,i=t.headerClass,o=t.isActive,a=t.onItemClick,l=t.forceRender,s=t.className,u=t.classNames,c=u===void 0?{}:u,f=t.styles,v=f===void 0?{}:f,g=t.prefixCls,m=t.collapsible,y=t.accordion,p=t.panelKey,C=t.extra,x=t.header,S=t.expandIcon,E=t.openMotion,P=t.destroyInactivePanel,$=t.children,_=_t(t,GM),M=m==="disabled",B=C!=null&&typeof C!="boolean",H=oe(oe(oe({onClick:function(){a==null||a(p)},onKeyDown:function(J){(J.key==="Enter"||J.keyCode===Ze.ENTER||J.which===Ze.ENTER)&&(a==null||a(p))},role:y?"tab":"button"},"aria-expanded",o),"aria-disabled",M),"tabIndex",M?-1:0),k=typeof S=="function"?S(t):ue.createElement("i",{className:"arrow"}),T=k&&ue.createElement("div",Ne({className:"".concat(g,"-expand-icon")},["header","icon"].includes(m)?H:{}),k),O=me("".concat(g,"-item"),oe(oe({},"".concat(g,"-item-active"),o),"".concat(g,"-item-disabled"),M),s),L=me(i,"".concat(g,"-header"),oe({},"".concat(g,"-collapsible-").concat(m),!!m),c.header),K=le({className:L,style:v.header},["header","icon"].includes(m)?{}:H);return ue.createElement("div",Ne({},_,{ref:e,className:O}),ue.createElement("div",K,r&&T,ue.createElement("span",Ne({className:"".concat(g,"-header-text")},m==="header"?H:{}),x),B&&ue.createElement("div",{className:"".concat(g,"-extra")},C)),ue.createElement(to,Ne({visible:o,leavedClassName:"".concat(g,"-content-hidden")},E,{forceRender:l,removeOnLeave:P}),function(q,J){var V=q.className,z=q.style;return ue.createElement(MS,{ref:J,prefixCls:g,className:V,classNames:c,style:z,styles:v,isActive:o,forceRender:l,role:y?"tabpanel":void 0},$)}))}),XM=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],YM=function(e,n){var r=n.prefixCls,i=n.accordion,o=n.collapsible,a=n.destroyInactivePanel,l=n.onItemClick,s=n.activeKey,u=n.openMotion,c=n.expandIcon;return e.map(function(f,v){var g=f.children,m=f.label,y=f.key,p=f.collapsible,C=f.onItemClick,x=f.destroyInactivePanel,S=_t(f,XM),E=String(y??v),P=p??o,$=x??a,_=function(H){P!=="disabled"&&(l(H),C==null||C(H))},M=!1;return i?M=s[0]===E:M=s.indexOf(E)>-1,ue.createElement(NS,Ne({},S,{prefixCls:r,key:E,panelKey:E,isActive:M,accordion:i,openMotion:u,expandIcon:c,header:m,collapsible:P,onItemClick:_,destroyInactivePanel:$}),g)})},QM=function(e,n,r){if(!e)return null;var i=r.prefixCls,o=r.accordion,a=r.collapsible,l=r.destroyInactivePanel,s=r.onItemClick,u=r.activeKey,c=r.openMotion,f=r.expandIcon,v=e.key||String(n),g=e.props,m=g.header,y=g.headerClass,p=g.destroyInactivePanel,C=g.collapsible,x=g.onItemClick,S=!1;o?S=u[0]===v:S=u.indexOf(v)>-1;var E=C??a,P=function(M){E!=="disabled"&&(s(M),x==null||x(M))},$={key:v,panelKey:v,header:m,headerClass:y,isActive:S,prefixCls:i,destroyInactivePanel:p??l,openMotion:c,accordion:o,children:e.props.children,onItemClick:P,expandIcon:f,collapsible:E};return typeof e.type=="string"?e:(Object.keys($).forEach(function(_){typeof $[_]>"u"&&delete $[_]}),ue.cloneElement(e,$))};function JM(t,e,n){return Array.isArray(t)?YM(t,n):Do(e).map(function(r,i){return QM(r,i,n)})}function ZM(t){var e=t;if(!Array.isArray(e)){var n=ht(e);e=n==="number"||n==="string"?[e]:[]}return e.map(function(r){return String(r)})}var eN=ue.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-collapse":n,i=t.destroyInactivePanel,o=i===void 0?!1:i,a=t.style,l=t.accordion,s=t.className,u=t.children,c=t.collapsible,f=t.openMotion,v=t.expandIcon,g=t.activeKey,m=t.defaultActiveKey,y=t.onChange,p=t.items,C=me(r,s),x=Mn([],{value:g,onChange:function(B){return y==null?void 0:y(B)},defaultValue:m,postState:ZM}),S=fe(x,2),E=S[0],P=S[1],$=function(B){return P(function(){if(l)return E[0]===B?[]:[B];var H=E.indexOf(B),k=H>-1;return k?E.filter(function(T){return T!==B}):[].concat(Ae(E),[B])})};rr(!u,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var _=JM(p,u,{prefixCls:r,accordion:l,openMotion:f,expandIcon:v,collapsible:c,destroyInactivePanel:o,onItemClick:$,activeKey:E});return ue.createElement("div",Ne({ref:e,className:C,style:a,role:l?"tablist":void 0},Lo(t,{aria:!0,data:!0})),_)});const op=Object.assign(eN,{Panel:NS});op.Panel;function yi(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}const Gv=()=>({height:0,opacity:0}),Lw=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},tN=t=>({height:t?t.offsetHeight:0}),Xv=(t,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",LS=(t=Ac)=>({motionName:`${t}-motion-collapse`,onAppearStart:Gv,onEnterStart:Gv,onAppearActive:Lw,onEnterActive:Lw,onLeaveStart:tN,onLeaveActive:Gv,onAppearEnd:Xv,onEnterEnd:Xv,onLeaveEnd:Xv,motionDeadline:500}),kf=(t,e,n)=>n!==void 0?n:`${t}-${e}`;function DS(t){return t&&ue.isValidElement(t)&&t.type===ue.Fragment}const nN=(t,e,n)=>ue.isValidElement(t)?ue.cloneElement(t,typeof n=="function"?n(t.props||{}):n):e;function vo(t,e){return nN(t,t,e)}const bi=t=>{const e=ue.useContext(gl);return ue.useMemo(()=>t?typeof t=="string"?t??e:typeof t=="function"?t(e):e:e,[t,e])},rN=b.forwardRef((t,e)=>{const{getPrefixCls:n}=b.useContext(un),{prefixCls:r,className:i,showArrow:o=!0}=t,a=n("collapse",r),l=me({[`${a}-no-arrow`]:!o},i);return b.createElement(op.Panel,Object.assign({ref:e},t,{prefixCls:a,className:l}))}),FS=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),iN=t=>({animationDuration:t,animationFillMode:"both"}),oN=t=>({animationDuration:t,animationFillMode:"both"}),$f=(t,e,n,r,i=!1)=>{const o=i?"&":"";return{[`
      ${o}${t}-enter,
      ${o}${t}-appear
    `]:Object.assign(Object.assign({},iN(r)),{animationPlayState:"paused"}),[`${o}${t}-leave`]:Object.assign(Object.assign({},oN(r)),{animationPlayState:"paused"}),[`
      ${o}${t}-enter${t}-enter-active,
      ${o}${t}-appear${t}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${o}${t}-leave${t}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},aN=new cn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),sN=new cn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),lN=(t,e=!1)=>{const{antCls:n}=t,r=`${n}-fade`,i=e?"&":"";return[$f(r,aN,sN,t.motionDurationMid,e),{[`
        ${i}${r}-enter,
        ${i}${r}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}]},cN=new cn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),uN=new cn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),dN=new cn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),fN=new cn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),hN=new cn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),vN=new cn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),gN=new cn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),mN=new cn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),pN={"move-up":{inKeyframes:gN,outKeyframes:mN},"move-down":{inKeyframes:cN,outKeyframes:uN},"move-left":{inKeyframes:dN,outKeyframes:fN},"move-right":{inKeyframes:hN,outKeyframes:vN}},Dw=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=pN[e];return[$f(r,i,o,t.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},BS=new cn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),jS=new cn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),zS=new cn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),HS=new cn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),yN=new cn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),bN=new cn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),wN=new cn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),xN=new cn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),CN={"slide-up":{inKeyframes:BS,outKeyframes:jS},"slide-down":{inKeyframes:zS,outKeyframes:HS},"slide-left":{inKeyframes:yN,outKeyframes:bN},"slide-right":{inKeyframes:wN,outKeyframes:xN}},rf=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=CN[e];return[$f(r,i,o,t.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},SN=new cn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),EN=new cn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),Fw=new cn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Bw=new cn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),RN=new cn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),IN=new cn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),PN=new cn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),kN=new cn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),$N=new cn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),TN=new cn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),_N=new cn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),AN=new cn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),ON={zoom:{inKeyframes:SN,outKeyframes:EN},"zoom-big":{inKeyframes:Fw,outKeyframes:Bw},"zoom-big-fast":{inKeyframes:Fw,outKeyframes:Bw},"zoom-left":{inKeyframes:PN,outKeyframes:kN},"zoom-right":{inKeyframes:$N,outKeyframes:TN},"zoom-up":{inKeyframes:RN,outKeyframes:IN},"zoom-down":{inKeyframes:_N,outKeyframes:AN}},VS=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=ON[e];return[$f(r,i,o,e==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},MN=t=>{const{componentCls:e,contentBg:n,padding:r,headerBg:i,headerPadding:o,collapseHeaderPaddingSM:a,collapseHeaderPaddingLG:l,collapsePanelBorderRadius:s,lineWidth:u,lineType:c,colorBorder:f,colorText:v,colorTextHeading:g,colorTextDisabled:m,fontSizeLG:y,lineHeight:p,lineHeightLG:C,marginSM:x,paddingSM:S,paddingLG:E,paddingXS:P,motionDurationSlow:$,fontSizeIcon:_,contentPadding:M,fontHeight:B,fontHeightLG:H}=t,k=`${ye(u)} ${c} ${f}`;return{[e]:Object.assign(Object.assign({},sr(t)),{backgroundColor:i,border:k,borderRadius:s,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:k,"&:first-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`${ye(s)} ${ye(s)} 0 0`}},"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${ye(s)} ${ye(s)}`}},[`> ${e}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:o,color:g,lineHeight:p,cursor:"pointer",transition:`all ${$}, visibility 0s`},Ya(t)),{[`> ${e}-header-text`]:{flex:"auto"},[`${e}-expand-icon`]:{height:B,display:"flex",alignItems:"center",paddingInlineEnd:x},[`${e}-arrow`]:Object.assign(Object.assign({},xl()),{fontSize:_,transition:`transform ${$}`,svg:{transition:`transform ${$}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}}),[`${e}-collapsible-header`]:{cursor:"default",[`${e}-header-text`]:{flex:"none",cursor:"pointer"}},[`${e}-collapsible-icon`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:v,backgroundColor:n,borderTop:k,[`& > ${e}-content-box`]:{padding:M},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:a,paddingInlineStart:P,[`> ${e}-expand-icon`]:{marginInlineStart:t.calc(S).sub(P).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:S}}},"&-large":{[`> ${e}-item`]:{fontSize:y,lineHeight:C,[`> ${e}-header`]:{padding:l,paddingInlineStart:r,[`> ${e}-expand-icon`]:{height:H,marginInlineStart:t.calc(E).sub(r).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:E}}},[`${e}-item:last-child`]:{borderBottom:0,[`> ${e}-content`]:{borderRadius:`0 0 ${ye(s)} ${ye(s)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:m,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:x}}}}})}},NN=t=>{const{componentCls:e}=t,n=`> ${e}-item > ${e}-header ${e}-arrow`;return{[`${e}-rtl`]:{[n]:{transform:"rotate(180deg)"}}}},LN=t=>{const{componentCls:e,headerBg:n,borderlessContentPadding:r,borderlessContentBg:i,colorBorder:o}=t;return{[`${e}-borderless`]:{backgroundColor:n,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${o}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:i,borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{padding:r}}}},DN=t=>{const{componentCls:e,paddingSM:n}=t;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:n}}}}}},FN=t=>({headerPadding:`${t.paddingSM}px ${t.padding}px`,headerBg:t.colorFillAlter,contentPadding:`${t.padding}px 16px`,contentBg:t.colorBgContainer,borderlessContentPadding:`${t.paddingXXS}px 16px ${t.padding}px`,borderlessContentBg:"transparent"}),BN=lr("Collapse",t=>{const e=bn(t,{collapseHeaderPaddingSM:`${ye(t.paddingXS)} ${ye(t.paddingSM)}`,collapseHeaderPaddingLG:`${ye(t.padding)} ${ye(t.paddingLG)}`,collapsePanelBorderRadius:t.borderRadiusLG});return[MN(e),LN(e),DN(e),NN(e),FS(e)]},FN),jN=b.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r,expandIcon:i,className:o,style:a}=eo("collapse"),{prefixCls:l,className:s,rootClassName:u,style:c,bordered:f=!0,ghost:v,size:g,expandIconPosition:m="start",children:y,destroyInactivePanel:p,destroyOnHidden:C,expandIcon:x}=t,S=bi(K=>{var q;return(q=g??K)!==null&&q!==void 0?q:"middle"}),E=n("collapse",l),P=n(),[$,_,M]=BN(E),B=b.useMemo(()=>m==="left"?"start":m==="right"?"end":m,[m]),H=x??i,k=b.useCallback((K={})=>{const q=typeof H=="function"?H(K):b.createElement(KM,{rotate:K.isActive?r==="rtl"?-90:90:void 0,"aria-label":K.isActive?"expanded":"collapsed"});return vo(q,()=>{var J;return{className:me((J=q==null?void 0:q.props)===null||J===void 0?void 0:J.className,`${E}-arrow`)}})},[H,E]),T=me(`${E}-icon-position-${B}`,{[`${E}-borderless`]:!f,[`${E}-rtl`]:r==="rtl",[`${E}-ghost`]:!!v,[`${E}-${S}`]:S!=="middle"},o,s,u,_,M),O=Object.assign(Object.assign({},LS(P)),{motionAppear:!1,leavedClassName:`${E}-content-hidden`}),L=b.useMemo(()=>y?Do(y).map((K,q)=>{var J,V;const z=K.props;if(z!=null&&z.disabled){const D=(J=K.key)!==null&&J!==void 0?J:String(q),U=Object.assign(Object.assign({},yi(K.props,["disabled"])),{key:D,collapsible:(V=z.collapsible)!==null&&V!==void 0?V:"disabled"});return vo(K,U)}return K}):null,[y]);return $(b.createElement(op,Object.assign({ref:e,openMotion:O},yi(t,["rootClassName"]),{expandIcon:k,prefixCls:E,className:T,style:Object.assign(Object.assign({},a),c),destroyInactivePanel:C??p}),L))}),ap=Object.assign(jN,{Panel:rN}),zN=[{key:"24gl-rectangle",id:"1",title:"矩形",data:{name:"rectangle",text:"矩形",width:120,height:100}},{key:"xingzhuang-sanjiaoxing",id:"2",title:"三角形",data:{name:"triangle",text:"三角形",width:100,height:100}},{key:"24gl-circle",id:"3",title:"圆形",data:{name:"circle",text:"圆形",width:100,height:100}},{key:"wubianxing",id:"4",title:"五边形",data:{name:"pentagon",text:"五边形",width:100,height:100}},{key:"wujiaoxing",id:"5",title:"五角星",data:{name:"pentagram",text:"五角星",width:100,height:100}},{key:"lingxing",id:"6",title:"菱形",data:{name:"diamond",text:"菱形",width:100,height:100}},{key:"zuojiantou",id:"7",title:"左箭头",data:{name:"leftArrow",text:"左箭头",width:50,height:50}},{key:"youjiantou",id:"8",title:"右箭头",data:{name:"rightArrow",text:"右箭头",width:50,height:50}},{key:"shuangxiangjiantou",id:"9",title:"双向箭头",data:{name:"twowayArrow",text:"双向箭头",width:100,height:50}}],HN=[{key:"ziliucheng",id:"10",title:"子流程",data:{name:"flowSubprocess",text:"子流程",width:100,height:60}},{key:"panduan",id:"11",title:"判定",data:{name:"diamond",text:"判定",width:100,height:60}},{key:"ic_whiteboarde_figure_diamond",id:"12",title:"数据",data:{name:"flowData",text:"数据",width:100,height:60}}],VN=[{key:"img",id:"13",title:"build1",data:{name:"image",width:150,height:100,image:"./images/building/build1.png"}},{key:"img",id:"14",title:"build2",data:{name:"image",width:150,height:100,image:"./images/building/build2.png"}},{key:"img",id:"15",title:"build3",data:{name:"image",width:150,height:100,image:"./images/building/build3.png"}},{key:"img",id:"16",title:"build4",data:{name:"image",width:150,height:100,image:"./images/building/build4.png"}},{key:"img",id:"17",title:"build5",data:{name:"image",width:150,height:100,image:"./images/building/build5.png"}},{key:"img",id:"18",title:"build6",data:{name:"image",width:150,height:100,image:"./images/building/build6.png"}}],WN=()=>{const[t,e]=b.useState(()=>{const o=localStorage.getItem("commonUse");return o?JSON.parse(o):[]});b.useEffect(()=>{localStorage.setItem("commonUse",JSON.stringify(t))},[t]);const n=b.useCallback((o,a,l)=>{const s=t.findIndex(c=>c.id===l.id);let u=[...t];s!==-1&&u.splice(s,1),u.unshift(l),u.length>9&&u.pop(),e(u),o.dataTransfer.setData("Meta2d",JSON.stringify(a)),JSON.parse(localStorage.getItem("gridAdsorption")??"false")&&(console.log("[ data ]",a),window.MyEditor.alignPenToGrid(a)),window.MyEditor.emit("add-pel",a)},[t]);function r(o){return vt.jsx("div",{className:yd.iconList,children:o.map(a=>{const{key:l,title:s,data:u,id:c}=a;return u.name!=="image"?vt.jsx("div",{children:vt.jsx("i",{draggable:!0,className:`iconfont icon-${l}`,title:s,onDragStart:f=>n(f,u,a)})},c):vt.jsx("div",{className:yd.items,children:vt.jsx("img",{draggable:!0,className:yd.img,title:s,src:u.image,onDragStart:f=>n(f,u,a)})},c)})})}const i=[{key:"1",label:"常用图元",children:r(t)},{key:"2",label:"基本图形",children:r(zN)},{key:"3",label:"流程图",children:r(HN)},{key:"4",label:"2.5D城市",children:r(VN)}];return vt.jsx("div",{className:yd.aside,children:vt.jsx(ap,{accordion:!0,defaultActiveKey:["2"],ghost:!0,expandIconPosition:"end",items:i})})};var UN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},qN=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:UN}))},KN=b.forwardRef(qN),GN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},XN=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:GN}))},WS=b.forwardRef(XN);const Tf=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))},_f=b.createContext(null);var im=b.createContext(null);function YN(t){var e=t.children,n=t.onBatchResize,r=b.useRef(0),i=b.useRef([]),o=b.useContext(im),a=b.useCallback(function(l,s,u){r.current+=1;var c=r.current;i.current.push({size:l,element:s,data:u}),Promise.resolve().then(function(){c===r.current&&(n==null||n(i.current),i.current=[])}),o==null||o(l,s,u)},[n,o]);return b.createElement(im.Provider,{value:a},e)}var US=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];n.call(r,a[1],a[0])}},e}()}(),om=typeof window<"u"&&typeof document<"u"&&window.document===document,of=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),QN=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(of):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),JN=2;function ZN(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&l()}function a(){QN(o)}function l(){var s=Date.now();if(n){if(s-i<JN)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=s}return l}var eL=20,tL=["top","right","bottom","left","width","height","size","weight"],nL=typeof MutationObserver<"u",rL=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=ZN(this.refresh.bind(this),eL)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!om||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),nL?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!om||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=tL.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),qS=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},ml=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||of},KS=Af(0,0,0,0);function af(t){return parseFloat(t)||0}function jw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var o=t["border-"+i+"-width"];return r+af(o)},0)}function iL(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],a=t["padding-"+o];n[o]=af(a)}return n}function oL(t){var e=t.getBBox();return Af(0,0,e.width,e.height)}function aL(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return KS;var r=ml(t).getComputedStyle(t),i=iL(r),o=i.left+i.right,a=i.top+i.bottom,l=af(r.width),s=af(r.height);if(r.boxSizing==="border-box"&&(Math.round(l+o)!==e&&(l-=jw(r,"left","right")+o),Math.round(s+a)!==n&&(s-=jw(r,"top","bottom")+a)),!lL(t)){var u=Math.round(l+o)-e,c=Math.round(s+a)-n;Math.abs(u)!==1&&(l-=u),Math.abs(c)!==1&&(s-=c)}return Af(i.left,i.top,l,s)}var sL=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof ml(t).SVGGraphicsElement}:function(t){return t instanceof ml(t).SVGElement&&typeof t.getBBox=="function"}}();function lL(t){return t===ml(t).document.documentElement}function cL(t){return om?sL(t)?oL(t):aL(t):KS}function uL(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return qS(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}function Af(t,e,n,r){return{x:t,y:e,width:n,height:r}}var dL=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Af(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=cL(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),fL=function(){function t(e,n){var r=uL(n);qS(this,{target:e,contentRect:r})}return t}(),hL=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new US,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof ml(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new dL(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof ml(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new fL(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),GS=typeof WeakMap<"u"?new WeakMap:new US,XS=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=rL.getInstance(),r=new hL(e,n,this);GS.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){XS.prototype[t]=function(){var e;return(e=GS.get(this))[t].apply(e,arguments)}});var vL=function(){return typeof of.ResizeObserver<"u"?of.ResizeObserver:XS}(),fa=new Map;function gL(t){t.forEach(function(e){var n,r=e.target;(n=fa.get(r))===null||n===void 0||n.forEach(function(i){return i(r)})})}var YS=new vL(gL);function mL(t,e){fa.has(t)||(fa.set(t,new Set),YS.observe(t)),fa.get(t).add(e)}function pL(t,e){fa.has(t)&&(fa.get(t).delete(e),fa.get(t).size||(YS.unobserve(t),fa.delete(t)))}var yL=function(t){Ji(n,t);var e=Zi(n);function n(){return Hn(this,n),e.apply(this,arguments)}return Vn(n,[{key:"render",value:function(){return this.props.children}}]),n}(b.Component);function bL(t,e){var n=t.children,r=t.disabled,i=b.useRef(null),o=b.useRef(null),a=b.useContext(im),l=typeof n=="function",s=l?n(i):n,u=b.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!l&&b.isValidElement(s)&&ns(s),f=c?wl(s):null,v=ts(f,i),g=function(){var C;return Ld(i.current)||(i.current&&ht(i.current)==="object"?Ld((C=i.current)===null||C===void 0?void 0:C.nativeElement):null)||Ld(o.current)};b.useImperativeHandle(e,function(){return g()});var m=b.useRef(t);m.current=t;var y=b.useCallback(function(p){var C=m.current,x=C.onResize,S=C.data,E=p.getBoundingClientRect(),P=E.width,$=E.height,_=p.offsetWidth,M=p.offsetHeight,B=Math.floor(P),H=Math.floor($);if(u.current.width!==B||u.current.height!==H||u.current.offsetWidth!==_||u.current.offsetHeight!==M){var k={width:B,height:H,offsetWidth:_,offsetHeight:M};u.current=k;var T=_===Math.round(P)?P:_,O=M===Math.round($)?$:M,L=le(le({},k),{},{offsetWidth:T,offsetHeight:O});a==null||a(L,p,S),x&&Promise.resolve().then(function(){x(L,p)})}},[]);return b.useEffect(function(){var p=g();return p&&!r&&mL(p,y),function(){return pL(p,y)}},[i.current,r]),b.createElement(yL,{ref:o},c?b.cloneElement(s,{ref:v}):s)}var wL=b.forwardRef(bL),xL="rc-observer-key";function CL(t,e){var n=t.children,r=typeof n=="function"?[n]:Do(n);return r.map(function(i,o){var a=(i==null?void 0:i.key)||"".concat(xL,"-").concat(o);return b.createElement(wL,Ne({},t,{key:a,ref:o===0?e:void 0}),i)})}var Ki=b.forwardRef(CL);Ki.Collection=YN;var SL=function(e){var n=e.activeTabOffset,r=e.horizontal,i=e.rtl,o=e.indicator,a=o===void 0?{}:o,l=a.size,s=a.align,u=s===void 0?"center":s,c=b.useState(),f=fe(c,2),v=f[0],g=f[1],m=b.useRef(),y=ue.useCallback(function(C){return typeof l=="function"?l(C):typeof l=="number"?l:C},[l]);function p(){Qt.cancel(m.current)}return b.useEffect(function(){var C={};if(n)if(r){C.width=y(n.width);var x=i?"right":"left";u==="start"&&(C[x]=n[x]),u==="center"&&(C[x]=n[x]+n.width/2,C.transform=i?"translateX(50%)":"translateX(-50%)"),u==="end"&&(C[x]=n[x]+n.width,C.transform="translateX(-100%)")}else C.height=y(n.height),u==="start"&&(C.top=n.top),u==="center"&&(C.top=n.top+n.height/2,C.transform="translateY(-50%)"),u==="end"&&(C.top=n.top+n.height,C.transform="translateY(-100%)");return p(),m.current=Qt(function(){var S=v&&C&&Object.keys(C).every(function(E){var P=C[E],$=v[E];return typeof P=="number"&&typeof $=="number"?Math.round(P)===Math.round($):P===$});S||g(C)}),p},[JSON.stringify(n),r,i,u,y]),{style:v}},zw={width:0,height:0,left:0,top:0};function EL(t,e,n){return b.useMemo(function(){for(var r,i=new Map,o=e.get((r=t[0])===null||r===void 0?void 0:r.key)||zw,a=o.left+o.width,l=0;l<t.length;l+=1){var s=t[l].key,u=e.get(s);if(!u){var c;u=e.get((c=t[l-1])===null||c===void 0?void 0:c.key)||zw}var f=i.get(s)||le({},u);f.right=a-f.left-f.width,i.set(s,f)}return i},[t.map(function(r){return r.key}).join("_"),e,n])}function Hw(t,e){var n=b.useRef(t),r=b.useState({}),i=fe(r,2),o=i[1];function a(l){var s=typeof l=="function"?l(n.current):l;s!==n.current&&e(s,n.current),n.current=s,o({})}return[n.current,a]}var RL=.1,Vw=.01,Fd=20,Ww=Math.pow(.995,Fd);function IL(t,e){var n=b.useState(),r=fe(n,2),i=r[0],o=r[1],a=b.useState(0),l=fe(a,2),s=l[0],u=l[1],c=b.useState(0),f=fe(c,2),v=f[0],g=f[1],m=b.useState(),y=fe(m,2),p=y[0],C=y[1],x=b.useRef();function S(B){var H=B.touches[0],k=H.screenX,T=H.screenY;o({x:k,y:T}),window.clearInterval(x.current)}function E(B){if(i){var H=B.touches[0],k=H.screenX,T=H.screenY;o({x:k,y:T});var O=k-i.x,L=T-i.y;e(O,L);var K=Date.now();u(K),g(K-s),C({x:O,y:L})}}function P(){if(i&&(o(null),C(null),p)){var B=p.x/v,H=p.y/v,k=Math.abs(B),T=Math.abs(H);if(Math.max(k,T)<RL)return;var O=B,L=H;x.current=window.setInterval(function(){if(Math.abs(O)<Vw&&Math.abs(L)<Vw){window.clearInterval(x.current);return}O*=Ww,L*=Ww,e(O*Fd,L*Fd)},Fd)}}var $=b.useRef();function _(B){var H=B.deltaX,k=B.deltaY,T=0,O=Math.abs(H),L=Math.abs(k);O===L?T=$.current==="x"?H:k:O>L?(T=H,$.current="x"):(T=k,$.current="y"),e(-T,-T)&&B.preventDefault()}var M=b.useRef(null);M.current={onTouchStart:S,onTouchMove:E,onTouchEnd:P,onWheel:_},b.useEffect(function(){function B(O){M.current.onTouchStart(O)}function H(O){M.current.onTouchMove(O)}function k(O){M.current.onTouchEnd(O)}function T(O){M.current.onWheel(O)}return document.addEventListener("touchmove",H,{passive:!1}),document.addEventListener("touchend",k,{passive:!0}),t.current.addEventListener("touchstart",B,{passive:!0}),t.current.addEventListener("wheel",T,{passive:!1}),function(){document.removeEventListener("touchmove",H),document.removeEventListener("touchend",k)}},[])}function QS(t){var e=b.useState(0),n=fe(e,2),r=n[0],i=n[1],o=b.useRef(0),a=b.useRef();return a.current=t,nl(function(){var l;(l=a.current)===null||l===void 0||l.call(a)},[r]),function(){o.current===r&&(o.current+=1,i(o.current))}}function PL(t){var e=b.useRef([]),n=b.useState({}),r=fe(n,2),i=r[1],o=b.useRef(typeof t=="function"?t():t),a=QS(function(){var s=o.current;e.current.forEach(function(u){s=u(s)}),e.current=[],o.current=s,i({})});function l(s){e.current.push(s),a()}return[o.current,l]}var Uw={width:0,height:0,left:0,top:0,right:0};function kL(t,e,n,r,i,o,a){var l=a.tabs,s=a.tabPosition,u=a.rtl,c,f,v;return["top","bottom"].includes(s)?(c="width",f=u?"right":"left",v=Math.abs(n)):(c="height",f="top",v=-n),b.useMemo(function(){if(!l.length)return[0,0];for(var g=l.length,m=g,y=0;y<g;y+=1){var p=t.get(l[y].key)||Uw;if(Math.floor(p[f]+p[c])>Math.floor(v+e)){m=y-1;break}}for(var C=0,x=g-1;x>=0;x-=1){var S=t.get(l[x].key)||Uw;if(S[f]<v){C=x+1;break}}return C>=m?[0,0]:[C,m]},[t,e,r,i,o,v,s,l.map(function(g){return g.key}).join("_"),u])}function qw(t){var e;return t instanceof Map?(e={},t.forEach(function(n,r){e[r]=n})):e=t,JSON.stringify(e)}var $L="TABS_DQ";function JS(t){return String(t).replace(/"/g,$L)}function sp(t,e,n,r){return!(!n||r||t===!1||t===void 0&&(e===!1||e===null))}var ZS=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.editable,i=t.locale,o=t.style;return!r||r.showAdd===!1?null:b.createElement("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(i==null?void 0:i.addAriaLabel)||"Add tab",onClick:function(l){r.onEdit("add",{event:l})}},r.addIcon||"+")}),Kw=b.forwardRef(function(t,e){var n=t.position,r=t.prefixCls,i=t.extra;if(!i)return null;var o,a={};return ht(i)==="object"&&!b.isValidElement(i)?a=i:a.right=i,n==="right"&&(o=a.right),n==="left"&&(o=a.left),o?b.createElement("div",{className:"".concat(r,"-extra-content"),ref:e},o):null}),e2=b.createContext(null),Gw=[];function TL(t,e){var n=b.useState(function(){if(!jr())return null;var m=document.createElement("div");return m}),r=fe(n,1),i=r[0],o=b.useRef(!1),a=b.useContext(e2),l=b.useState(Gw),s=fe(l,2),u=s[0],c=s[1],f=a||(o.current?void 0:function(m){c(function(y){var p=[m].concat(Ae(y));return p})});function v(){i.parentElement||document.body.appendChild(i),o.current=!0}function g(){var m;(m=i.parentElement)===null||m===void 0||m.removeChild(i),o.current=!1}return $n(function(){return t?a?a(v):v():g(),g},[t]),$n(function(){u.length&&(u.forEach(function(m){return m()}),c(Gw))},[u]),[i,f]}function _L(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var i,o;if(t){var a=getComputedStyle(t);r.scrollbarColor=a.scrollbarColor,r.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(t,"::-webkit-scrollbar"),s=parseInt(l.width,10),u=parseInt(l.height,10);try{var c=s?"width: ".concat(l.width,";"):"",f=u?"height: ".concat(l.height,";"):"";No(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(c,`
`).concat(f,`
}`),e)}catch(m){console.error(m),i=s,o=u}}document.body.appendChild(n);var v=t&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,g=t&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),Ic(e),{width:v,height:g}}function AL(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:_L(t)}function OL(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var ML="rc-util-locker-".concat(Date.now()),Xw=0;function NL(t){var e=!!t,n=b.useState(function(){return Xw+=1,"".concat(ML,"_").concat(Xw)}),r=fe(n,1),i=r[0];$n(function(){if(e){var o=AL(document.body).width,a=OL();No(`
html body {
  overflow-y: hidden;
  `.concat(a?"width: calc(100% - ".concat(o,"px);"):"",`
}`),i)}else Ic(i);return function(){Ic(i)}},[e,i])}var LL=!1;function DL(t){return LL}var Yw=function(e){return e===!1?!1:!jr()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},t2=b.forwardRef(function(t,e){var n=t.open,r=t.autoLock,i=t.getContainer;t.debug;var o=t.autoDestroy,a=o===void 0?!0:o,l=t.children,s=b.useState(n),u=fe(s,2),c=u[0],f=u[1],v=c||n;b.useEffect(function(){(a||n)&&f(n)},[n,a]);var g=b.useState(function(){return Yw(i)}),m=fe(g,2),y=m[0],p=m[1];b.useEffect(function(){var k=Yw(i);p(k??null)});var C=TL(v&&!y),x=fe(C,2),S=x[0],E=x[1],P=y??S;NL(r&&n&&jr()&&(P===S||P===document.body));var $=null;if(l&&ns(l)&&e){var _=l;$=_.ref}var M=ts($,e);if(!v||!jr()||y===void 0)return null;var B=P===!1||DL(),H=l;return e&&(H=b.cloneElement(l,{ref:M})),b.createElement(e2.Provider,{value:E},B?H:Gi.createPortal(H,P))});function FL(){var t=le({},gf);return t.useId}var Qw=0,Jw=FL();const lp=Jw?function(e){var n=Jw();return e||n}:function(e){var n=b.useState("ssr-id"),r=fe(n,2),i=r[0],o=r[1];return b.useEffect(function(){var a=Qw;Qw+=1,o("rc_unique_".concat(a))},[]),e||i};function BL(t){var e=t.prefixCls,n=t.align,r=t.arrow,i=t.arrowPos,o=r||{},a=o.className,l=o.content,s=i.x,u=s===void 0?0:s,c=i.y,f=c===void 0?0:c,v=b.useRef();if(!n||!n.points)return null;var g={position:"absolute"};if(n.autoArrow!==!1){var m=n.points[0],y=n.points[1],p=m[0],C=m[1],x=y[0],S=y[1];p===x||!["t","b"].includes(p)?g.top=f:p==="t"?g.top=0:g.bottom=0,C===S||!["l","r"].includes(C)?g.left=u:C==="l"?g.left=0:g.right=0}return b.createElement("div",{ref:v,className:me("".concat(e,"-arrow"),a),style:g},l)}function jL(t){var e=t.prefixCls,n=t.open,r=t.zIndex,i=t.mask,o=t.motion;return i?b.createElement(to,Ne({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(a){var l=a.className;return b.createElement("div",{style:{zIndex:r},className:me("".concat(e,"-mask"),l)})}):null}var zL=b.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),HL=b.forwardRef(function(t,e){var n=t.popup,r=t.className,i=t.prefixCls,o=t.style,a=t.target,l=t.onVisibleChanged,s=t.open,u=t.keepDom,c=t.fresh,f=t.onClick,v=t.mask,g=t.arrow,m=t.arrowPos,y=t.align,p=t.motion,C=t.maskMotion,x=t.forceRender,S=t.getPopupContainer,E=t.autoDestroy,P=t.portal,$=t.zIndex,_=t.onMouseEnter,M=t.onMouseLeave,B=t.onPointerEnter,H=t.onPointerDownCapture,k=t.ready,T=t.offsetX,O=t.offsetY,L=t.offsetR,K=t.offsetB,q=t.onAlign,J=t.onPrepare,V=t.stretch,z=t.targetWidth,D=t.targetHeight,U=typeof n=="function"?n():n,W=s||u,X=(S==null?void 0:S.length)>0,Y=b.useState(!S||!X),Q=fe(Y,2),ne=Q[0],ie=Q[1];if($n(function(){!ne&&X&&a&&ie(!0)},[ne,X,a]),!ne)return null;var re="auto",I={left:"-1000vw",top:"-1000vh",right:re,bottom:re};if(k||!s){var A,F=y.points,G=y.dynamicInset||((A=y._experimental)===null||A===void 0?void 0:A.dynamicInset),ee=G&&F[0][1]==="r",te=G&&F[0][0]==="b";ee?(I.right=L,I.left=re):(I.left=T,I.right=re),te?(I.bottom=K,I.top=re):(I.top=O,I.bottom=re)}var ae={};return V&&(V.includes("height")&&D?ae.height=D:V.includes("minHeight")&&D&&(ae.minHeight=D),V.includes("width")&&z?ae.width=z:V.includes("minWidth")&&z&&(ae.minWidth=z)),s||(ae.pointerEvents="none"),b.createElement(P,{open:x||W,getContainer:S&&function(){return S(a)},autoDestroy:E},b.createElement(jL,{prefixCls:i,open:s,zIndex:$,mask:v,motion:C}),b.createElement(Ki,{onResize:q,disabled:!s},function(de){return b.createElement(to,Ne({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(i,"-hidden")},p,{onAppearPrepare:J,onEnterPrepare:J,visible:s,onVisibleChanged:function(pe){var we;p==null||(we=p.onVisibleChanged)===null||we===void 0||we.call(p,pe),l(pe)}}),function(he,pe){var we=he.className,_e=he.style,$e=me(i,we,r);return b.createElement("div",{ref:ti(de,e,pe),className:$e,style:le(le(le(le({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},I),ae),_e),{},{boxSizing:"border-box",zIndex:$},o),onMouseEnter:_,onMouseLeave:M,onPointerEnter:B,onClick:f,onPointerDownCapture:H},g&&b.createElement(BL,{prefixCls:i,arrow:g,arrowPos:m,align:y}),b.createElement(zL,{cache:!s&&!c},U))})}))}),VL=b.forwardRef(function(t,e){var n=t.children,r=t.getTriggerDOMNode,i=ns(n),o=b.useCallback(function(l){Zm(e,r?r(l):l)},[r]),a=ts(o,wl(n));return i?b.cloneElement(n,{ref:a}):n}),Zw=b.createContext(null);function ex(t){return t?Array.isArray(t)?t:[t]:[]}function WL(t,e,n,r){return b.useMemo(function(){var i=ex(n??e),o=ex(r??e),a=new Set(i),l=new Set(o);return t&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]},[t,e,n,r])}const cp=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};function UL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function qL(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var l,s=o[a];if(UL((l=t[s])===null||l===void 0?void 0:l.points,i,r))return"".concat(e,"-placement-").concat(s)}return""}function tx(t,e,n,r){return e||(n?{motionName:"".concat(t,"-").concat(n)}:r?{motionName:r}:null)}function Wc(t){return t.ownerDocument.defaultView}function am(t){for(var e=[],n=t==null?void 0:t.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=Wc(n).getComputedStyle(n),o=i.overflowX,a=i.overflowY,l=i.overflow;[o,a,l].some(function(s){return r.includes(s)})&&e.push(n),n=n.parentElement}return e}function Dc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function rc(t){return Dc(parseFloat(t),0)}function nx(t,e){var n=le({},t);return(e||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var i=Wc(r).getComputedStyle(r),o=i.overflow,a=i.overflowClipMargin,l=i.borderTopWidth,s=i.borderBottomWidth,u=i.borderLeftWidth,c=i.borderRightWidth,f=r.getBoundingClientRect(),v=r.offsetHeight,g=r.clientHeight,m=r.offsetWidth,y=r.clientWidth,p=rc(l),C=rc(s),x=rc(u),S=rc(c),E=Dc(Math.round(f.width/m*1e3)/1e3),P=Dc(Math.round(f.height/v*1e3)/1e3),$=(m-y-x-S)*E,_=(v-g-p-C)*P,M=p*P,B=C*P,H=x*E,k=S*E,T=0,O=0;if(o==="clip"){var L=rc(a);T=L*E,O=L*P}var K=f.x+H-T,q=f.y+M-O,J=K+f.width+2*T-H-k-$,V=q+f.height+2*O-M-B-_;n.left=Math.max(n.left,K),n.top=Math.max(n.top,q),n.right=Math.min(n.right,J),n.bottom=Math.min(n.bottom,V)}}),n}function rx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(e),r=n.match(/^(.*)\%$/);return r?t*(parseFloat(r[1])/100):parseFloat(n)}function ix(t,e){var n=e||[],r=fe(n,2),i=r[0],o=r[1];return[rx(t.width,i),rx(t.height,o)]}function ox(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function Ns(t,e){var n=e[0],r=e[1],i,o;return n==="t"?o=t.y:n==="b"?o=t.y+t.height:o=t.y+t.height/2,r==="l"?i=t.x:r==="r"?i=t.x+t.width:i=t.x+t.width/2,{x:i,y:o}}function na(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map(function(r,i){return i===e?n[r]||"c":r}).join("")}function KL(t,e,n,r,i,o,a){var l=b.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),s=fe(l,2),u=s[0],c=s[1],f=b.useRef(0),v=b.useMemo(function(){return e?am(e):[]},[e]),g=b.useRef({}),m=function(){g.current={}};t||m();var y=In(function(){if(e&&n&&t){let Un=function(Vr,ni){var wi=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Le,ri=W.x+Vr,ls=W.y+ni,bt=ri+te,Ot=ls+ee,Nn=Math.max(ri,wi.left),jn=Math.max(ls,wi.top),kn=Math.min(bt,wi.right),po=Math.min(Ot,wi.bottom);return Math.max(0,(kn-Nn)*(po-jn))},$r=function(){wn=W.y+Ct,xn=wn+ee,An=W.x+Ue,nn=An+te};var ss=Un,mo=$r,x,S,E,P,$=e,_=$.ownerDocument,M=Wc($),B=M.getComputedStyle($),H=B.position,k=$.style.left,T=$.style.top,O=$.style.right,L=$.style.bottom,K=$.style.overflow,q=le(le({},i[r]),o),J=_.createElement("div");(x=$.parentElement)===null||x===void 0||x.appendChild(J),J.style.left="".concat($.offsetLeft,"px"),J.style.top="".concat($.offsetTop,"px"),J.style.position=H,J.style.height="".concat($.offsetHeight,"px"),J.style.width="".concat($.offsetWidth,"px"),$.style.left="0",$.style.top="0",$.style.right="auto",$.style.bottom="auto",$.style.overflow="hidden";var V;if(Array.isArray(n))V={x:n[0],y:n[1],width:0,height:0};else{var z,D,U=n.getBoundingClientRect();U.x=(z=U.x)!==null&&z!==void 0?z:U.left,U.y=(D=U.y)!==null&&D!==void 0?D:U.top,V={x:U.x,y:U.y,width:U.width,height:U.height}}var W=$.getBoundingClientRect(),X=M.getComputedStyle($),Y=X.height,Q=X.width;W.x=(S=W.x)!==null&&S!==void 0?S:W.left,W.y=(E=W.y)!==null&&E!==void 0?E:W.top;var ne=_.documentElement,ie=ne.clientWidth,re=ne.clientHeight,I=ne.scrollWidth,A=ne.scrollHeight,F=ne.scrollTop,G=ne.scrollLeft,ee=W.height,te=W.width,ae=V.height,de=V.width,he={left:0,top:0,right:ie,bottom:re},pe={left:-G,top:-F,right:I-G,bottom:A-F},we=q.htmlRegion,_e="visible",$e="visibleFirst";we!=="scroll"&&we!==$e&&(we=_e);var Me=we===$e,Re=nx(pe,v),be=nx(he,v),Le=we===_e?be:Re,He=Me?be:Le;$.style.left="auto",$.style.top="auto",$.style.right="0",$.style.bottom="0";var it=$.getBoundingClientRect();$.style.left=k,$.style.top=T,$.style.right=O,$.style.bottom=L,$.style.overflow=K,(P=$.parentElement)===null||P===void 0||P.removeChild(J);var qe=Dc(Math.round(te/parseFloat(Q)*1e3)/1e3),De=Dc(Math.round(ee/parseFloat(Y)*1e3)/1e3);if(qe===0||De===0||Mc(n)&&!cp(n))return;var nt=q.offset,Je=q.targetOffset,st=ix(W,nt),Ve=fe(st,2),Ie=Ve[0],Te=Ve[1],je=ix(V,Je),ke=fe(je,2),et=ke[0],St=ke[1];V.x-=et,V.y-=St;var Ht=q.points||[],Ft=fe(Ht,2),We=Ft[0],tt=Ft[1],gt=ox(tt),Ge=ox(We),Rt=Ns(V,gt),dt=Ns(W,Ge),ut=le({},q),Ue=Rt.x-dt.x+Ie,Ct=Rt.y-dt.y+Te,Lt=Un(Ue,Ct),Ke=Un(Ue,Ct,be),Xe=Ns(V,["t","l"]),ot=Ns(W,["t","l"]),at=Ns(V,["b","r"]),lt=Ns(W,["b","r"]),mt=q.overflow||{},Jt=mt.adjustX,qt=mt.adjustY,Yt=mt.shiftX,zt=mt.shiftY,En=function(ni){return typeof ni=="boolean"?ni:ni>=0},wn,xn,An,nn;$r();var Kt=En(qt),rt=Ge[0]===gt[0];if(Kt&&Ge[0]==="t"&&(xn>He.bottom||g.current.bt)){var ct=Ct;rt?ct-=ee-ae:ct=Xe.y-lt.y-Te;var Oe=Un(Ue,ct),Ce=Un(Ue,ct,be);Oe>Lt||Oe===Lt&&(!Me||Ce>=Ke)?(g.current.bt=!0,Ct=ct,Te=-Te,ut.points=[na(Ge,0),na(gt,0)]):g.current.bt=!1}if(Kt&&Ge[0]==="b"&&(wn<He.top||g.current.tb)){var Ye=Ct;rt?Ye+=ee-ae:Ye=at.y-ot.y-Te;var wt=Un(Ue,Ye),Dt=Un(Ue,Ye,be);wt>Lt||wt===Lt&&(!Me||Dt>=Ke)?(g.current.tb=!0,Ct=Ye,Te=-Te,ut.points=[na(Ge,0),na(gt,0)]):g.current.tb=!1}var Gt=En(Jt),Pn=Ge[1]===gt[1];if(Gt&&Ge[1]==="l"&&(nn>He.right||g.current.rl)){var Vt=Ue;Pn?Vt-=te-de:Vt=Xe.x-lt.x-Ie;var Zt=Un(Vt,Ct),rn=Un(Vt,Ct,be);Zt>Lt||Zt===Lt&&(!Me||rn>=Ke)?(g.current.rl=!0,Ue=Vt,Ie=-Ie,ut.points=[na(Ge,1),na(gt,1)]):g.current.rl=!1}if(Gt&&Ge[1]==="r"&&(An<He.left||g.current.lr)){var Wn=Ue;Pn?Wn+=te-de:Wn=at.x-ot.x-Ie;var fn=Un(Wn,Ct),Zn=Un(Wn,Ct,be);fn>Lt||fn===Lt&&(!Me||Zn>=Ke)?(g.current.lr=!0,Ue=Wn,Ie=-Ie,ut.points=[na(Ge,1),na(gt,1)]):g.current.lr=!1}$r();var Yn=Yt===!0?0:Yt;typeof Yn=="number"&&(An<be.left&&(Ue-=An-be.left-Ie,V.x+de<be.left+Yn&&(Ue+=V.x-be.left+de-Yn)),nn>be.right&&(Ue-=nn-be.right-Ie,V.x>be.right-Yn&&(Ue+=V.x-be.right+Yn)));var zr=zt===!0?0:zt;typeof zr=="number"&&(wn<be.top&&(Ct-=wn-be.top-Te,V.y+ae<be.top+zr&&(Ct+=V.y-be.top+ae-zr)),xn>be.bottom&&(Ct-=xn-be.bottom-Te,V.y>be.bottom-zr&&(Ct+=V.y-be.bottom+zr)));var Cr=W.x+Ue,Sr=Cr+te,kr=W.y+Ct,sn=kr+ee,pt=V.x,ft=pt+de,en=V.y,ln=en+ae,hn=Math.max(Cr,pt),Cn=Math.min(Sr,ft),Er=(hn+Cn)/2,er=Er-Cr,jt=Math.max(kr,en),cr=Math.min(sn,ln),gr=(jt+cr)/2,Hr=gr-kr;a==null||a(e,ut);var mr=it.right-W.x-(Ue+W.width),Fo=it.bottom-W.y-(Ct+W.height);qe===1&&(Ue=Math.round(Ue),mr=Math.round(mr)),De===1&&(Ct=Math.round(Ct),Fo=Math.round(Fo));var as={ready:!0,offsetX:Ue/qe,offsetY:Ct/De,offsetR:mr/qe,offsetB:Fo/De,arrowX:er/qe,arrowY:Hr/De,scaleX:qe,scaleY:De,align:ut};c(as)}}),p=function(){f.current+=1;var S=f.current;Promise.resolve().then(function(){f.current===S&&y()})},C=function(){c(function(S){return le(le({},S),{},{ready:!1})})};return $n(C,[r]),$n(function(){t||C()},[t]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,p]}function GL(t,e,n,r,i){$n(function(){if(t&&e&&n){let v=function(){r(),i()};var f=v,o=e,a=n,l=am(o),s=am(a),u=Wc(a),c=new Set([u].concat(Ae(l),Ae(s)));return c.forEach(function(g){g.addEventListener("scroll",v,{passive:!0})}),u.addEventListener("resize",v,{passive:!0}),r(),function(){c.forEach(function(g){g.removeEventListener("scroll",v),u.removeEventListener("resize",v)})}}},[t,e,n])}function XL(t,e,n,r,i,o,a,l){var s=b.useRef(t);s.current=t;var u=b.useRef(!1);b.useEffect(function(){if(e&&r&&(!i||o)){var f=function(){u.current=!1},v=function(p){var C;s.current&&!a(((C=p.composedPath)===null||C===void 0||(C=C.call(p))===null||C===void 0?void 0:C[0])||p.target)&&!u.current&&l(!1)},g=Wc(r);g.addEventListener("pointerdown",f,!0),g.addEventListener("mousedown",v,!0),g.addEventListener("contextmenu",v,!0);var m=nf(n);return m&&(m.addEventListener("mousedown",v,!0),m.addEventListener("contextmenu",v,!0)),function(){g.removeEventListener("pointerdown",f,!0),g.removeEventListener("mousedown",v,!0),g.removeEventListener("contextmenu",v,!0),m&&(m.removeEventListener("mousedown",v,!0),m.removeEventListener("contextmenu",v,!0))}}},[e,n,r,i,o]);function c(){u.current=!0}return c}var YL=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function QL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t2,e=b.forwardRef(function(n,r){var i=n.prefixCls,o=i===void 0?"rc-trigger-popup":i,a=n.children,l=n.action,s=l===void 0?"hover":l,u=n.showAction,c=n.hideAction,f=n.popupVisible,v=n.defaultPopupVisible,g=n.onPopupVisibleChange,m=n.afterPopupVisibleChange,y=n.mouseEnterDelay,p=n.mouseLeaveDelay,C=p===void 0?.1:p,x=n.focusDelay,S=n.blurDelay,E=n.mask,P=n.maskClosable,$=P===void 0?!0:P,_=n.getPopupContainer,M=n.forceRender,B=n.autoDestroy,H=n.destroyPopupOnHide,k=n.popup,T=n.popupClassName,O=n.popupStyle,L=n.popupPlacement,K=n.builtinPlacements,q=K===void 0?{}:K,J=n.popupAlign,V=n.zIndex,z=n.stretch,D=n.getPopupClassNameFromAlign,U=n.fresh,W=n.alignPoint,X=n.onPopupClick,Y=n.onPopupAlign,Q=n.arrow,ne=n.popupMotion,ie=n.maskMotion,re=n.popupTransitionName,I=n.popupAnimation,A=n.maskTransitionName,F=n.maskAnimation,G=n.className,ee=n.getTriggerDOMNode,te=_t(n,YL),ae=B||H||!1,de=b.useState(!1),he=fe(de,2),pe=he[0],we=he[1];$n(function(){we(Tf())},[]);var _e=b.useRef({}),$e=b.useContext(Zw),Me=b.useMemo(function(){return{registerSubPopup:function(Ot,Nn){_e.current[Ot]=Nn,$e==null||$e.registerSubPopup(Ot,Nn)}}},[$e]),Re=lp(),be=b.useState(null),Le=fe(be,2),He=Le[0],it=Le[1],qe=b.useRef(null),De=In(function(bt){qe.current=bt,Mc(bt)&&He!==bt&&it(bt),$e==null||$e.registerSubPopup(Re,bt)}),nt=b.useState(null),Je=fe(nt,2),st=Je[0],Ve=Je[1],Ie=b.useRef(null),Te=In(function(bt){Mc(bt)&&st!==bt&&(Ve(bt),Ie.current=bt)}),je=b.Children.only(a),ke=(je==null?void 0:je.props)||{},et={},St=In(function(bt){var Ot,Nn,jn=st;return(jn==null?void 0:jn.contains(bt))||((Ot=nf(jn))===null||Ot===void 0?void 0:Ot.host)===bt||bt===jn||(He==null?void 0:He.contains(bt))||((Nn=nf(He))===null||Nn===void 0?void 0:Nn.host)===bt||bt===He||Object.values(_e.current).some(function(kn){return(kn==null?void 0:kn.contains(bt))||bt===kn})}),Ht=tx(o,ne,I,re),Ft=tx(o,ie,F,A),We=b.useState(v||!1),tt=fe(We,2),gt=tt[0],Ge=tt[1],Rt=f??gt,dt=In(function(bt){f===void 0&&Ge(bt)});$n(function(){Ge(f||!1)},[f]);var ut=b.useRef(Rt);ut.current=Rt;var Ue=b.useRef([]);Ue.current=[];var Ct=In(function(bt){var Ot;dt(bt),((Ot=Ue.current[Ue.current.length-1])!==null&&Ot!==void 0?Ot:Rt)!==bt&&(Ue.current.push(bt),g==null||g(bt))}),Lt=b.useRef(),Ke=function(){clearTimeout(Lt.current)},Xe=function(Ot){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ke(),Nn===0?Ct(Ot):Lt.current=setTimeout(function(){Ct(Ot)},Nn*1e3)};b.useEffect(function(){return Ke},[]);var ot=b.useState(!1),at=fe(ot,2),lt=at[0],mt=at[1];$n(function(bt){(!bt||Rt)&&mt(!0)},[Rt]);var Jt=b.useState(null),qt=fe(Jt,2),Yt=qt[0],zt=qt[1],En=b.useState(null),wn=fe(En,2),xn=wn[0],An=wn[1],nn=function(Ot){An([Ot.clientX,Ot.clientY])},Kt=KL(Rt,He,W&&xn!==null?xn:st,L,q,J,Y),rt=fe(Kt,11),ct=rt[0],Oe=rt[1],Ce=rt[2],Ye=rt[3],wt=rt[4],Dt=rt[5],Gt=rt[6],Pn=rt[7],Vt=rt[8],Zt=rt[9],rn=rt[10],Wn=WL(pe,s,u,c),fn=fe(Wn,2),Zn=fn[0],Yn=fn[1],zr=Zn.has("click"),Cr=Yn.has("click")||Yn.has("contextMenu"),Sr=In(function(){lt||rn()}),kr=function(){ut.current&&W&&Cr&&Xe(!1)};GL(Rt,st,He,Sr,kr),$n(function(){Sr()},[xn,L]),$n(function(){Rt&&!(q!=null&&q[L])&&Sr()},[JSON.stringify(J)]);var sn=b.useMemo(function(){var bt=qL(q,o,Zt,W);return me(bt,D==null?void 0:D(Zt))},[Zt,D,q,o,W]);b.useImperativeHandle(r,function(){return{nativeElement:Ie.current,popupElement:qe.current,forceAlign:Sr}});var pt=b.useState(0),ft=fe(pt,2),en=ft[0],ln=ft[1],hn=b.useState(0),Cn=fe(hn,2),Er=Cn[0],er=Cn[1],jt=function(){if(z&&st){var Ot=st.getBoundingClientRect();ln(Ot.width),er(Ot.height)}},cr=function(){jt(),Sr()},gr=function(Ot){mt(!1),rn(),m==null||m(Ot)},Hr=function(){return new Promise(function(Ot){jt(),zt(function(){return Ot})})};$n(function(){Yt&&(rn(),Yt(),zt(null))},[Yt]);function mr(bt,Ot,Nn,jn){et[bt]=function(kn){var po;jn==null||jn(kn),Xe(Ot,Nn);for(var El=arguments.length,Bo=new Array(El>1?El-1:0),no=1;no<El;no++)Bo[no-1]=arguments[no];(po=ke[bt])===null||po===void 0||po.call.apply(po,[ke,kn].concat(Bo))}}(zr||Cr)&&(et.onClick=function(bt){var Ot;ut.current&&Cr?Xe(!1):!ut.current&&zr&&(nn(bt),Xe(!0));for(var Nn=arguments.length,jn=new Array(Nn>1?Nn-1:0),kn=1;kn<Nn;kn++)jn[kn-1]=arguments[kn];(Ot=ke.onClick)===null||Ot===void 0||Ot.call.apply(Ot,[ke,bt].concat(jn))});var Fo=XL(Rt,Cr,st,He,E,$,St,Xe),as=Zn.has("hover"),ss=Yn.has("hover"),mo,Un;as&&(mr("onMouseEnter",!0,y,function(bt){nn(bt)}),mr("onPointerEnter",!0,y,function(bt){nn(bt)}),mo=function(Ot){(Rt||lt)&&He!==null&&He!==void 0&&He.contains(Ot.target)&&Xe(!0,y)},W&&(et.onMouseMove=function(bt){var Ot;(Ot=ke.onMouseMove)===null||Ot===void 0||Ot.call(ke,bt)})),ss&&(mr("onMouseLeave",!1,C),mr("onPointerLeave",!1,C),Un=function(){Xe(!1,C)}),Zn.has("focus")&&mr("onFocus",!0,x),Yn.has("focus")&&mr("onBlur",!1,S),Zn.has("contextMenu")&&(et.onContextMenu=function(bt){var Ot;ut.current&&Yn.has("contextMenu")?Xe(!1):(nn(bt),Xe(!0)),bt.preventDefault();for(var Nn=arguments.length,jn=new Array(Nn>1?Nn-1:0),kn=1;kn<Nn;kn++)jn[kn-1]=arguments[kn];(Ot=ke.onContextMenu)===null||Ot===void 0||Ot.call.apply(Ot,[ke,bt].concat(jn))}),G&&(et.className=me(ke.className,G));var $r=le(le({},ke),et),Vr={},ni=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ni.forEach(function(bt){te[bt]&&(Vr[bt]=function(){for(var Ot,Nn=arguments.length,jn=new Array(Nn),kn=0;kn<Nn;kn++)jn[kn]=arguments[kn];(Ot=$r[bt])===null||Ot===void 0||Ot.call.apply(Ot,[$r].concat(jn)),te[bt].apply(te,jn)})});var wi=b.cloneElement(je,le(le({},$r),Vr)),ri={x:Dt,y:Gt},ls=Q?le({},Q!==!0?Q:{}):null;return b.createElement(b.Fragment,null,b.createElement(Ki,{disabled:!Rt,ref:Te,onResize:cr},b.createElement(VL,{getTriggerDOMNode:ee},wi)),b.createElement(Zw.Provider,{value:Me},b.createElement(HL,{portal:t,ref:De,prefixCls:o,popup:k,className:me(T,sn),style:O,target:st,onMouseEnter:mo,onMouseLeave:Un,onPointerEnter:mo,zIndex:V,open:Rt,keepDom:lt,fresh:U,onClick:X,onPointerDownCapture:Fo,mask:E,motion:Ht,maskMotion:Ft,onVisibleChanged:gr,onPrepare:Hr,forceRender:M,autoDestroy:ae,getPopupContainer:_,align:Zt,arrow:ls,arrowPos:ri,ready:ct,offsetX:Oe,offsetY:Ce,offsetR:Ye,offsetB:wt,onAlign:Sr,stretch:z,targetWidth:en/Pn,targetHeight:Er/Vt})))});return e}const Of=QL(t2);var JL=Ze.ESC,ZL=Ze.TAB;function eD(t){var e=t.visible,n=t.triggerRef,r=t.onVisibleChange,i=t.autoFocus,o=t.overlayRef,a=b.useRef(!1),l=function(){if(e){var f,v;(f=n.current)===null||f===void 0||(v=f.focus)===null||v===void 0||v.call(f),r==null||r(!1)}},s=function(){var f;return(f=o.current)!==null&&f!==void 0&&f.focus?(o.current.focus(),a.current=!0,!0):!1},u=function(f){switch(f.keyCode){case JL:l();break;case ZL:{var v=!1;a.current||(v=s()),v?f.preventDefault():l();break}}};b.useEffect(function(){return e?(window.addEventListener("keydown",u),i&&Qt(s,3),function(){window.removeEventListener("keydown",u),a.current=!1}):function(){a.current=!1}},[e])}var tD=b.forwardRef(function(t,e){var n=t.overlay,r=t.arrow,i=t.prefixCls,o=b.useMemo(function(){var l;return typeof n=="function"?l=n():l=n,l},[n]),a=ti(e,wl(o));return ue.createElement(ue.Fragment,null,r&&ue.createElement("div",{className:"".concat(i,"-arrow")}),ue.cloneElement(o,{ref:ns(o)?a:void 0}))}),Ls={adjustX:1,adjustY:1},Ds=[0,0],nD={topLeft:{points:["bl","tl"],overflow:Ls,offset:[0,-4],targetOffset:Ds},top:{points:["bc","tc"],overflow:Ls,offset:[0,-4],targetOffset:Ds},topRight:{points:["br","tr"],overflow:Ls,offset:[0,-4],targetOffset:Ds},bottomLeft:{points:["tl","bl"],overflow:Ls,offset:[0,4],targetOffset:Ds},bottom:{points:["tc","bc"],overflow:Ls,offset:[0,4],targetOffset:Ds},bottomRight:{points:["tr","br"],overflow:Ls,offset:[0,4],targetOffset:Ds}},rD=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function iD(t,e){var n,r=t.arrow,i=r===void 0?!1:r,o=t.prefixCls,a=o===void 0?"rc-dropdown":o,l=t.transitionName,s=t.animation,u=t.align,c=t.placement,f=c===void 0?"bottomLeft":c,v=t.placements,g=v===void 0?nD:v,m=t.getPopupContainer,y=t.showAction,p=t.hideAction,C=t.overlayClassName,x=t.overlayStyle,S=t.visible,E=t.trigger,P=E===void 0?["hover"]:E,$=t.autoFocus,_=t.overlay,M=t.children,B=t.onVisibleChange,H=_t(t,rD),k=ue.useState(),T=fe(k,2),O=T[0],L=T[1],K="visible"in t?S:O,q=ue.useRef(null),J=ue.useRef(null),V=ue.useRef(null);ue.useImperativeHandle(e,function(){return q.current});var z=function(re){L(re),B==null||B(re)};eD({visible:K,triggerRef:V,onVisibleChange:z,autoFocus:$,overlayRef:J});var D=function(re){var I=t.onOverlayClick;L(!1),I&&I(re)},U=function(){return ue.createElement(tD,{ref:J,overlay:_,prefixCls:a,arrow:i})},W=function(){return typeof _=="function"?U:U()},X=function(){var re=t.minOverlayWidthMatchTrigger,I=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?re:!I},Y=function(){var re=t.openClassName;return re!==void 0?re:"".concat(a,"-open")},Q=ue.cloneElement(M,{className:me((n=M.props)===null||n===void 0?void 0:n.className,K&&Y()),ref:ns(M)?ti(V,wl(M)):void 0}),ne=p;return!ne&&P.indexOf("contextMenu")!==-1&&(ne=["click"]),ue.createElement(Of,Ne({builtinPlacements:g},H,{prefixCls:a,ref:q,popupClassName:me(C,oe({},"".concat(a,"-show-arrow"),i)),popupStyle:x,action:P,showAction:y,hideAction:ne,popupPlacement:f,popupAlign:u,popupTransitionName:l,popupAnimation:s,popupVisible:K,stretch:X()?"minWidth":"",popup:W(),onPopupVisibleChange:z,onPopupClick:D,getPopupContainer:m}),Q)}const oD=ue.forwardRef(iD);var aD=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Fs=void 0;function sD(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,o=t.renderItem,a=t.responsive,l=t.responsiveDisabled,s=t.registerSize,u=t.itemKey,c=t.className,f=t.style,v=t.children,g=t.display,m=t.order,y=t.component,p=y===void 0?"div":y,C=_t(t,aD),x=a&&!g;function S(M){s(u,M)}b.useEffect(function(){return function(){S(null)}},[]);var E=o&&i!==Fs?o(i,{index:m}):v,P;r||(P={opacity:x?0:1,height:x?0:Fs,overflowY:x?"hidden":Fs,order:a?m:Fs,pointerEvents:x?"none":Fs,position:x?"absolute":Fs});var $={};x&&($["aria-hidden"]=!0);var _=b.createElement(p,Ne({className:me(!r&&n,c),style:le(le({},P),f)},$,C,{ref:e}),E);return a&&(_=b.createElement(Ki,{onResize:function(B){var H=B.offsetWidth;S(H)},disabled:l},_)),_}var wc=b.forwardRef(sD);wc.displayName="Item";function lD(t){if(typeof MessageChannel>"u")Qt(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}function cD(){var t=b.useRef(null),e=function(r){t.current||(t.current=[],lD(function(){Gi.unstable_batchedUpdates(function(){t.current.forEach(function(i){i()}),t.current=null})})),t.current.push(r)};return e}function ic(t,e){var n=b.useState(e),r=fe(n,2),i=r[0],o=r[1],a=In(function(l){t(function(){o(l)})});return[i,a]}var sf=ue.createContext(null),uD=["component"],dD=["className"],fD=["className"],hD=function(e,n){var r=b.useContext(sf);if(!r){var i=e.component,o=i===void 0?"div":i,a=_t(e,uD);return b.createElement(o,Ne({},a,{ref:n}))}var l=r.className,s=_t(r,dD),u=e.className,c=_t(e,fD);return b.createElement(sf.Provider,{value:null},b.createElement(wc,Ne({ref:n,className:me(l,u)},s,c)))},n2=b.forwardRef(hD);n2.displayName="RawItem";var vD=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],r2="responsive",i2="invalidate";function gD(t){return"+ ".concat(t.length," ...")}function mD(t,e){var n=t.prefixCls,r=n===void 0?"rc-overflow":n,i=t.data,o=i===void 0?[]:i,a=t.renderItem,l=t.renderRawItem,s=t.itemKey,u=t.itemWidth,c=u===void 0?10:u,f=t.ssr,v=t.style,g=t.className,m=t.maxCount,y=t.renderRest,p=t.renderRawRest,C=t.suffix,x=t.component,S=x===void 0?"div":x,E=t.itemComponent,P=t.onVisibleChange,$=_t(t,vD),_=f==="full",M=cD(),B=ic(M,null),H=fe(B,2),k=H[0],T=H[1],O=k||0,L=ic(M,new Map),K=fe(L,2),q=K[0],J=K[1],V=ic(M,0),z=fe(V,2),D=z[0],U=z[1],W=ic(M,0),X=fe(W,2),Y=X[0],Q=X[1],ne=ic(M,0),ie=fe(ne,2),re=ie[0],I=ie[1],A=b.useState(null),F=fe(A,2),G=F[0],ee=F[1],te=b.useState(null),ae=fe(te,2),de=ae[0],he=ae[1],pe=b.useMemo(function(){return de===null&&_?Number.MAX_SAFE_INTEGER:de||0},[de,k]),we=b.useState(!1),_e=fe(we,2),$e=_e[0],Me=_e[1],Re="".concat(r,"-item"),be=Math.max(D,Y),Le=m===r2,He=o.length&&Le,it=m===i2,qe=He||typeof m=="number"&&o.length>m,De=b.useMemo(function(){var dt=o;return He?k===null&&_?dt=o:dt=o.slice(0,Math.min(o.length,O/c)):typeof m=="number"&&(dt=o.slice(0,m)),dt},[o,c,k,m,He]),nt=b.useMemo(function(){return He?o.slice(pe+1):o.slice(De.length)},[o,De,He,pe]),Je=b.useCallback(function(dt,ut){var Ue;return typeof s=="function"?s(dt):(Ue=s&&(dt==null?void 0:dt[s]))!==null&&Ue!==void 0?Ue:ut},[s]),st=b.useCallback(a||function(dt){return dt},[a]);function Ve(dt,ut,Ue){de===dt&&(ut===void 0||ut===G)||(he(dt),Ue||(Me(dt<o.length-1),P==null||P(dt)),ut!==void 0&&ee(ut))}function Ie(dt,ut){T(ut.clientWidth)}function Te(dt,ut){J(function(Ue){var Ct=new Map(Ue);return ut===null?Ct.delete(dt):Ct.set(dt,ut),Ct})}function je(dt,ut){Q(ut),U(Y)}function ke(dt,ut){I(ut)}function et(dt){return q.get(Je(De[dt],dt))}$n(function(){if(O&&typeof be=="number"&&De){var dt=re,ut=De.length,Ue=ut-1;if(!ut){Ve(0,null);return}for(var Ct=0;Ct<ut;Ct+=1){var Lt=et(Ct);if(_&&(Lt=Lt||0),Lt===void 0){Ve(Ct-1,void 0,!0);break}if(dt+=Lt,Ue===0&&dt<=O||Ct===Ue-1&&dt+et(Ue)<=O){Ve(Ue,null);break}else if(dt+be>O){Ve(Ct-1,dt-Lt-re+Y);break}}C&&et(0)+re>O&&ee(null)}},[O,q,Y,re,Je,De]);var St=$e&&!!nt.length,Ht={};G!==null&&He&&(Ht={position:"absolute",left:G,top:0});var Ft={prefixCls:Re,responsive:He,component:E,invalidate:it},We=l?function(dt,ut){var Ue=Je(dt,ut);return b.createElement(sf.Provider,{key:Ue,value:le(le({},Ft),{},{order:ut,item:dt,itemKey:Ue,registerSize:Te,display:ut<=pe})},l(dt,ut))}:function(dt,ut){var Ue=Je(dt,ut);return b.createElement(wc,Ne({},Ft,{order:ut,key:Ue,item:dt,renderItem:st,itemKey:Ue,registerSize:Te,display:ut<=pe}))},tt={order:St?pe:Number.MAX_SAFE_INTEGER,className:"".concat(Re,"-rest"),registerSize:je,display:St},gt=y||gD,Ge=p?b.createElement(sf.Provider,{value:le(le({},Ft),tt)},p(nt)):b.createElement(wc,Ne({},Ft,tt),typeof gt=="function"?gt(nt):gt),Rt=b.createElement(S,Ne({className:me(!it&&r,g),style:v,ref:e},$),De.map(We),qe?Ge:null,C&&b.createElement(wc,Ne({},Ft,{responsive:Le,responsiveDisabled:!He,order:pe,className:"".concat(Re,"-suffix"),registerSize:ke,display:!0,style:Ht}),C));return Le?b.createElement(Ki,{onResize:Ie,disabled:!He},Rt):Rt}var ho=b.forwardRef(mD);ho.displayName="Overflow";ho.Item=n2;ho.RESPONSIVE=r2;ho.INVALIDATE=i2;var o2=b.createContext(null);function a2(t,e){return t===void 0?null:"".concat(t,"-").concat(e)}function s2(t){var e=b.useContext(o2);return a2(e,t)}var pD=["children","locked"],Xi=b.createContext(null);function yD(t,e){var n=le({},t);return Object.keys(e).forEach(function(r){var i=e[r];i!==void 0&&(n[r]=i)}),n}function Fc(t){var e=t.children,n=t.locked,r=_t(t,pD),i=b.useContext(Xi),o=zc(function(){return yD(i,r)},[i,r],function(a,l){return!n&&(a[0]!==l[0]||!ul(a[1],l[1],!0))});return b.createElement(Xi.Provider,{value:o},e)}var bD=[],l2=b.createContext(null);function Mf(){return b.useContext(l2)}var c2=b.createContext(bD);function Uc(t){var e=b.useContext(c2);return b.useMemo(function(){return t!==void 0?[].concat(Ae(e),[t]):e},[e,t])}var u2=b.createContext(null),up=b.createContext({});function ax(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(cp(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||n==="a"&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&a===null&&(a=0),r&&t.disabled&&(a=null),a!==null&&(a>=0||e&&a<0)}return!1}function wD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=Ae(t.querySelectorAll("*")).filter(function(r){return ax(r,e)});return ax(t,e)&&n.unshift(t),n}var sm=Ze.LEFT,lm=Ze.RIGHT,cm=Ze.UP,Bd=Ze.DOWN,jd=Ze.ENTER,d2=Ze.ESC,oc=Ze.HOME,ac=Ze.END,sx=[cm,Bd,sm,lm];function xD(t,e,n,r){var i,o="prev",a="next",l="children",s="parent";if(t==="inline"&&r===jd)return{inlineTrigger:!0};var u=oe(oe({},cm,o),Bd,a),c=oe(oe(oe(oe({},sm,n?a:o),lm,n?o:a),Bd,l),jd,l),f=oe(oe(oe(oe(oe(oe({},cm,o),Bd,a),jd,l),d2,s),sm,n?l:s),lm,n?s:l),v={inline:u,horizontal:c,vertical:f,inlineSub:u,horizontalSub:f,verticalSub:f},g=(i=v["".concat(t).concat(e?"":"Sub")])===null||i===void 0?void 0:i[r];switch(g){case o:return{offset:-1,sibling:!0};case a:return{offset:1,sibling:!0};case s:return{offset:-1,sibling:!1};case l:return{offset:1,sibling:!1};default:return null}}function CD(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function SD(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}function dp(t,e){var n=wD(t,!0);return n.filter(function(r){return e.has(r)})}function lx(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var i=dp(t,e),o=i.length,a=i.findIndex(function(l){return n===l});return r<0?a===-1?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}var um=function(e,n){var r=new Set,i=new Map,o=new Map;return e.forEach(function(a){var l=document.querySelector("[data-menu-id='".concat(a2(n,a),"']"));l&&(r.add(l),o.set(l,a),i.set(a,l))}),{elements:r,key2element:i,element2key:o}};function ED(t,e,n,r,i,o,a,l,s,u){var c=b.useRef(),f=b.useRef();f.current=e;var v=function(){Qt.cancel(c.current)};return b.useEffect(function(){return function(){v()}},[]),function(g){var m=g.which;if([].concat(sx,[jd,d2,oc,ac]).includes(m)){var y=o(),p=um(y,r),C=p,x=C.elements,S=C.key2element,E=C.element2key,P=S.get(e),$=SD(P,x),_=E.get($),M=xD(t,a(_,!0).length===1,n,m);if(!M&&m!==oc&&m!==ac)return;(sx.includes(m)||[oc,ac].includes(m))&&g.preventDefault();var B=function(J){if(J){var V=J,z=J.querySelector("a");z!=null&&z.getAttribute("href")&&(V=z);var D=E.get(J);l(D),v(),c.current=Qt(function(){f.current===D&&V.focus()})}};if([oc,ac].includes(m)||M.sibling||!$){var H;!$||t==="inline"?H=i.current:H=CD($);var k,T=dp(H,x);m===oc?k=T[0]:m===ac?k=T[T.length-1]:k=lx(H,x,$,M.offset),B(k)}else if(M.inlineTrigger)s(_);else if(M.offset>0)s(_,!0),v(),c.current=Qt(function(){p=um(y,r);var q=$.getAttribute("aria-controls"),J=document.getElementById(q),V=lx(J,p.elements);B(V)},5);else if(M.offset<0){var O=a(_,!0),L=O[O.length-2],K=S.get(L);s(L,!1),B(K)}}u==null||u(g)}}function RD(t){Promise.resolve().then(t)}var fp="__RC_UTIL_PATH_SPLIT__",cx=function(e){return e.join(fp)},ID=function(e){return e.split(fp)},dm="rc-menu-more";function PD(){var t=b.useState({}),e=fe(t,2),n=e[1],r=b.useRef(new Map),i=b.useRef(new Map),o=b.useState([]),a=fe(o,2),l=a[0],s=a[1],u=b.useRef(0),c=b.useRef(!1),f=function(){c.current||n({})},v=b.useCallback(function(S,E){var P=cx(E);i.current.set(P,S),r.current.set(S,P),u.current+=1;var $=u.current;RD(function(){$===u.current&&f()})},[]),g=b.useCallback(function(S,E){var P=cx(E);i.current.delete(P),r.current.delete(S)},[]),m=b.useCallback(function(S){s(S)},[]),y=b.useCallback(function(S,E){var P=r.current.get(S)||"",$=ID(P);return E&&l.includes($[0])&&$.unshift(dm),$},[l]),p=b.useCallback(function(S,E){return S.filter(function(P){return P!==void 0}).some(function(P){var $=y(P,!0);return $.includes(E)})},[y]),C=function(){var E=Ae(r.current.keys());return l.length&&E.push(dm),E},x=b.useCallback(function(S){var E="".concat(r.current.get(S)).concat(fp),P=new Set;return Ae(i.current.keys()).forEach(function($){$.startsWith(E)&&P.add(i.current.get($))}),P},[]);return b.useEffect(function(){return function(){c.current=!0}},[]),{registerPath:v,unregisterPath:g,refreshOverflowKeys:m,isSubPathKey:p,getKeyPath:y,getKeys:C,getSubPathKeys:x}}function uc(t){var e=b.useRef(t);e.current=t;var n=b.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(o))},[]);return t?n:void 0}var kD=Math.random().toFixed(5).toString().slice(2),ux=0;function $D(t){var e=Mn(t,{value:t}),n=fe(e,2),r=n[0],i=n[1];return b.useEffect(function(){ux+=1;var o="".concat(kD,"-").concat(ux);i("rc-menu-uuid-".concat(o))},[]),r}function f2(t,e,n,r){var i=b.useContext(Xi),o=i.activeKey,a=i.onActive,l=i.onInactive,s={active:o===t};return e||(s.onMouseEnter=function(u){n==null||n({key:t,domEvent:u}),a(t)},s.onMouseLeave=function(u){r==null||r({key:t,domEvent:u}),l(t)}),s}function h2(t){var e=b.useContext(Xi),n=e.mode,r=e.rtl,i=e.inlineIndent;if(n!=="inline")return null;var o=t;return r?{paddingRight:o*i}:{paddingLeft:o*i}}function v2(t){var e=t.icon,n=t.props,r=t.children,i;return e===null||e===!1?null:(typeof e=="function"?i=b.createElement(e,le({},n)):typeof e!="boolean"&&(i=e),i||r||null)}var TD=["item"];function lf(t){var e=t.item,n=_t(t,TD);return Object.defineProperty(n,"item",{get:function(){return rr(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}var _D=["title","attribute","elementRef"],AD=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],OD=["active"],MD=function(t){Ji(n,t);var e=Zi(n);function n(){return Hn(this,n),e.apply(this,arguments)}return Vn(n,[{key:"render",value:function(){var i=this.props,o=i.title,a=i.attribute,l=i.elementRef,s=_t(i,_D),u=yi(s,["eventKey","popupClassName","popupOffset","onTitleClick"]);return rr(!a,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),b.createElement(ho.Item,Ne({},a,{title:typeof o=="string"?o:void 0},u,{ref:l}))}}]),n}(b.Component),ND=b.forwardRef(function(t,e){var n=t.style,r=t.className,i=t.eventKey;t.warnKey;var o=t.disabled,a=t.itemIcon,l=t.children,s=t.role,u=t.onMouseEnter,c=t.onMouseLeave,f=t.onClick,v=t.onKeyDown,g=t.onFocus,m=_t(t,AD),y=s2(i),p=b.useContext(Xi),C=p.prefixCls,x=p.onItemClick,S=p.disabled,E=p.overflowDisabled,P=p.itemIcon,$=p.selectedKeys,_=p.onActive,M=b.useContext(up),B=M._internalRenderMenuItem,H="".concat(C,"-item"),k=b.useRef(),T=b.useRef(),O=S||o,L=ts(e,T),K=Uc(i),q=function(I){return{key:i,keyPath:Ae(K).reverse(),item:k.current,domEvent:I}},J=a||P,V=f2(i,O,u,c),z=V.active,D=_t(V,OD),U=$.includes(i),W=h2(K.length),X=function(I){if(!O){var A=q(I);f==null||f(lf(A)),x(A)}},Y=function(I){if(v==null||v(I),I.which===Ze.ENTER){var A=q(I);f==null||f(lf(A)),x(A)}},Q=function(I){_(i),g==null||g(I)},ne={};t.role==="option"&&(ne["aria-selected"]=U);var ie=b.createElement(MD,Ne({ref:k,elementRef:L,role:s===null?"none":s||"menuitem",tabIndex:o?null:-1,"data-menu-id":E&&y?null:y},yi(m,["extra"]),D,ne,{component:"li","aria-disabled":o,style:le(le({},W),n),className:me(H,oe(oe(oe({},"".concat(H,"-active"),z),"".concat(H,"-selected"),U),"".concat(H,"-disabled"),O),r),onClick:X,onKeyDown:Y,onFocus:Q}),l,b.createElement(v2,{props:le(le({},t),{},{isSelected:U}),icon:J}));return B&&(ie=B(ie,t,{selected:U})),ie});function LD(t,e){var n=t.eventKey,r=Mf(),i=Uc(n);return b.useEffect(function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}},[i]),r?null:b.createElement(ND,Ne({},t,{ref:e}))}const Nf=b.forwardRef(LD);var DD=["className","children"],FD=function(e,n){var r=e.className,i=e.children,o=_t(e,DD),a=b.useContext(Xi),l=a.prefixCls,s=a.mode,u=a.rtl;return b.createElement("ul",Ne({className:me(l,u&&"".concat(l,"-rtl"),"".concat(l,"-sub"),"".concat(l,"-").concat(s==="inline"?"inline":"vertical"),r),role:"menu"},o,{"data-menu-list":!0,ref:n}),i)},hp=b.forwardRef(FD);hp.displayName="SubMenuList";function vp(t,e){return Do(t).map(function(n,r){if(b.isValidElement(n)){var i,o,a=n.key,l=(i=(o=n.props)===null||o===void 0?void 0:o.eventKey)!==null&&i!==void 0?i:a,s=l==null;s&&(l="tmp_key-".concat([].concat(Ae(e),[r]).join("-")));var u={key:l,eventKey:l};return b.cloneElement(n,u)}return n})}var Nr={adjustX:1,adjustY:1},BD={topLeft:{points:["bl","tl"],overflow:Nr},topRight:{points:["br","tr"],overflow:Nr},bottomLeft:{points:["tl","bl"],overflow:Nr},bottomRight:{points:["tr","br"],overflow:Nr},leftTop:{points:["tr","tl"],overflow:Nr},leftBottom:{points:["br","bl"],overflow:Nr},rightTop:{points:["tl","tr"],overflow:Nr},rightBottom:{points:["bl","br"],overflow:Nr}},jD={topLeft:{points:["bl","tl"],overflow:Nr},topRight:{points:["br","tr"],overflow:Nr},bottomLeft:{points:["tl","bl"],overflow:Nr},bottomRight:{points:["tr","br"],overflow:Nr},rightTop:{points:["tr","tl"],overflow:Nr},rightBottom:{points:["br","bl"],overflow:Nr},leftTop:{points:["tl","tr"],overflow:Nr},leftBottom:{points:["bl","br"],overflow:Nr}};function g2(t,e,n){if(e)return e;if(n)return n[t]||n.other}var zD={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function HD(t){var e=t.prefixCls,n=t.visible,r=t.children,i=t.popup,o=t.popupStyle,a=t.popupClassName,l=t.popupOffset,s=t.disabled,u=t.mode,c=t.onVisibleChange,f=b.useContext(Xi),v=f.getPopupContainer,g=f.rtl,m=f.subMenuOpenDelay,y=f.subMenuCloseDelay,p=f.builtinPlacements,C=f.triggerSubMenuAction,x=f.forceSubMenuRender,S=f.rootClassName,E=f.motion,P=f.defaultMotions,$=b.useState(!1),_=fe($,2),M=_[0],B=_[1],H=le(g?le({},jD):le({},BD),p),k=zD[u],T=g2(u,E,P),O=b.useRef(T);u!=="inline"&&(O.current=T);var L=le(le({},O.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),K=b.useRef();return b.useEffect(function(){return K.current=Qt(function(){B(n)}),function(){Qt.cancel(K.current)}},[n]),b.createElement(Of,{prefixCls:e,popupClassName:me("".concat(e,"-popup"),oe({},"".concat(e,"-rtl"),g),a,S),stretch:u==="horizontal"?"minWidth":null,getPopupContainer:v,builtinPlacements:H,popupPlacement:k,popupVisible:M,popup:i,popupStyle:o,popupAlign:l&&{offset:l},action:s?[]:[C],mouseEnterDelay:m,mouseLeaveDelay:y,onPopupVisibleChange:c,forceRender:x,popupMotion:L,fresh:!0},r)}function VD(t){var e=t.id,n=t.open,r=t.keyPath,i=t.children,o="inline",a=b.useContext(Xi),l=a.prefixCls,s=a.forceSubMenuRender,u=a.motion,c=a.defaultMotions,f=a.mode,v=b.useRef(!1);v.current=f===o;var g=b.useState(!v.current),m=fe(g,2),y=m[0],p=m[1],C=v.current?n:!1;b.useEffect(function(){v.current&&p(!1)},[f]);var x=le({},g2(o,u,c));r.length>1&&(x.motionAppear=!1);var S=x.onVisibleChanged;return x.onVisibleChanged=function(E){return!v.current&&!E&&p(!0),S==null?void 0:S(E)},y?null:b.createElement(Fc,{mode:o,locked:!v.current},b.createElement(to,Ne({visible:C},x,{forceRender:s,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),function(E){var P=E.className,$=E.style;return b.createElement(hp,{id:e,className:P,style:$},i)}))}var WD=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],UD=["active"],qD=b.forwardRef(function(t,e){var n=t.style,r=t.className,i=t.title,o=t.eventKey;t.warnKey;var a=t.disabled,l=t.internalPopupClose,s=t.children,u=t.itemIcon,c=t.expandIcon,f=t.popupClassName,v=t.popupOffset,g=t.popupStyle,m=t.onClick,y=t.onMouseEnter,p=t.onMouseLeave,C=t.onTitleClick,x=t.onTitleMouseEnter,S=t.onTitleMouseLeave,E=_t(t,WD),P=s2(o),$=b.useContext(Xi),_=$.prefixCls,M=$.mode,B=$.openKeys,H=$.disabled,k=$.overflowDisabled,T=$.activeKey,O=$.selectedKeys,L=$.itemIcon,K=$.expandIcon,q=$.onItemClick,J=$.onOpenChange,V=$.onActive,z=b.useContext(up),D=z._internalRenderSubMenuItem,U=b.useContext(u2),W=U.isSubPathKey,X=Uc(),Y="".concat(_,"-submenu"),Q=H||a,ne=b.useRef(),ie=b.useRef(),re=u??L,I=c??K,A=B.includes(o),F=!k&&A,G=W(O,o),ee=f2(o,Q,x,S),te=ee.active,ae=_t(ee,UD),de=b.useState(!1),he=fe(de,2),pe=he[0],we=he[1],_e=function(je){Q||we(je)},$e=function(je){_e(!0),y==null||y({key:o,domEvent:je})},Me=function(je){_e(!1),p==null||p({key:o,domEvent:je})},Re=b.useMemo(function(){return te||(M!=="inline"?pe||W([T],o):!1)},[M,te,T,pe,o,W]),be=h2(X.length),Le=function(je){Q||(C==null||C({key:o,domEvent:je}),M==="inline"&&J(o,!A))},He=uc(function(Te){m==null||m(lf(Te)),q(Te)}),it=function(je){M!=="inline"&&J(o,je)},qe=function(){V(o)},De=P&&"".concat(P,"-popup"),nt=b.useMemo(function(){return b.createElement(v2,{icon:M!=="horizontal"?I:void 0,props:le(le({},t),{},{isOpen:F,isSubMenu:!0})},b.createElement("i",{className:"".concat(Y,"-arrow")}))},[M,I,t,F,Y]),Je=b.createElement("div",Ne({role:"menuitem",style:be,className:"".concat(Y,"-title"),tabIndex:Q?null:-1,ref:ne,title:typeof i=="string"?i:null,"data-menu-id":k&&P?null:P,"aria-expanded":F,"aria-haspopup":!0,"aria-controls":De,"aria-disabled":Q,onClick:Le,onFocus:qe},ae),i,nt),st=b.useRef(M);if(M!=="inline"&&X.length>1?st.current="vertical":st.current=M,!k){var Ve=st.current;Je=b.createElement(HD,{mode:Ve,prefixCls:Y,visible:!l&&F&&M!=="inline",popupClassName:f,popupOffset:v,popupStyle:g,popup:b.createElement(Fc,{mode:Ve==="horizontal"?"vertical":Ve},b.createElement(hp,{id:De,ref:ie},s)),disabled:Q,onVisibleChange:it},Je)}var Ie=b.createElement(ho.Item,Ne({ref:e,role:"none"},E,{component:"li",style:n,className:me(Y,"".concat(Y,"-").concat(M),r,oe(oe(oe(oe({},"".concat(Y,"-open"),F),"".concat(Y,"-active"),Re),"".concat(Y,"-selected"),G),"".concat(Y,"-disabled"),Q)),onMouseEnter:$e,onMouseLeave:Me}),Je,!k&&b.createElement(VD,{id:De,open:F,keyPath:X},s));return D&&(Ie=D(Ie,t,{selected:G,active:Re,open:F,disabled:Q})),b.createElement(Fc,{onItemClick:He,mode:M==="horizontal"?"vertical":M,itemIcon:re,expandIcon:I},Ie)}),gp=b.forwardRef(function(t,e){var n=t.eventKey,r=t.children,i=Uc(n),o=vp(r,i),a=Mf();b.useEffect(function(){if(a)return a.registerPath(n,i),function(){a.unregisterPath(n,i)}},[i]);var l;return a?l=o:l=b.createElement(qD,Ne({ref:e},t),o),b.createElement(c2.Provider,{value:i},l)});function m2(t){var e=t.className,n=t.style,r=b.useContext(Xi),i=r.prefixCls,o=Mf();return o?null:b.createElement("li",{role:"separator",className:me("".concat(i,"-item-divider"),e),style:n})}var KD=["className","title","eventKey","children"],GD=b.forwardRef(function(t,e){var n=t.className,r=t.title;t.eventKey;var i=t.children,o=_t(t,KD),a=b.useContext(Xi),l=a.prefixCls,s="".concat(l,"-item-group");return b.createElement("li",Ne({ref:e,role:"presentation"},o,{onClick:function(c){return c.stopPropagation()},className:me(s,n)}),b.createElement("div",{role:"presentation",className:"".concat(s,"-title"),title:typeof r=="string"?r:void 0},r),b.createElement("ul",{role:"group",className:"".concat(s,"-list")},i))}),p2=b.forwardRef(function(t,e){var n=t.eventKey,r=t.children,i=Uc(n),o=vp(r,i),a=Mf();return a?o:b.createElement(GD,Ne({ref:e},yi(t,["warnKey"])),o)}),XD=["label","children","key","type","extra"];function fm(t,e,n){var r=e.item,i=e.group,o=e.submenu,a=e.divider;return(t||[]).map(function(l,s){if(l&&ht(l)==="object"){var u=l,c=u.label,f=u.children,v=u.key,g=u.type,m=u.extra,y=_t(u,XD),p=v??"tmp-".concat(s);return f||g==="group"?g==="group"?b.createElement(i,Ne({key:p},y,{title:c}),fm(f,e,n)):b.createElement(o,Ne({key:p},y,{title:c}),fm(f,e,n)):g==="divider"?b.createElement(a,Ne({key:p},y)):b.createElement(r,Ne({key:p},y,{extra:m}),c,(!!m||m===0)&&b.createElement("span",{className:"".concat(n,"-item-extra")},m))}return null}).filter(function(l){return l})}function dx(t,e,n,r,i){var o=t,a=le({divider:m2,item:Nf,group:p2,submenu:gp},r);return e&&(o=fm(e,a,i)),vp(o,n)}var YD=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],$a=[],QD=b.forwardRef(function(t,e){var n,r=t,i=r.prefixCls,o=i===void 0?"rc-menu":i,a=r.rootClassName,l=r.style,s=r.className,u=r.tabIndex,c=u===void 0?0:u,f=r.items,v=r.children,g=r.direction,m=r.id,y=r.mode,p=y===void 0?"vertical":y,C=r.inlineCollapsed,x=r.disabled,S=r.disabledOverflow,E=r.subMenuOpenDelay,P=E===void 0?.1:E,$=r.subMenuCloseDelay,_=$===void 0?.1:$,M=r.forceSubMenuRender,B=r.defaultOpenKeys,H=r.openKeys,k=r.activeKey,T=r.defaultActiveFirst,O=r.selectable,L=O===void 0?!0:O,K=r.multiple,q=K===void 0?!1:K,J=r.defaultSelectedKeys,V=r.selectedKeys,z=r.onSelect,D=r.onDeselect,U=r.inlineIndent,W=U===void 0?24:U,X=r.motion,Y=r.defaultMotions,Q=r.triggerSubMenuAction,ne=Q===void 0?"hover":Q,ie=r.builtinPlacements,re=r.itemIcon,I=r.expandIcon,A=r.overflowedIndicator,F=A===void 0?"...":A,G=r.overflowedIndicatorPopupClassName,ee=r.getPopupContainer,te=r.onClick,ae=r.onOpenChange,de=r.onKeyDown;r.openAnimation,r.openTransitionName;var he=r._internalRenderMenuItem,pe=r._internalRenderSubMenuItem,we=r._internalComponents,_e=_t(r,YD),$e=b.useMemo(function(){return[dx(v,f,$a,we,o),dx(v,f,$a,{},o)]},[v,f,we]),Me=fe($e,2),Re=Me[0],be=Me[1],Le=b.useState(!1),He=fe(Le,2),it=He[0],qe=He[1],De=b.useRef(),nt=$D(m),Je=g==="rtl",st=Mn(B,{value:H,postState:function(pt){return pt||$a}}),Ve=fe(st,2),Ie=Ve[0],Te=Ve[1],je=function(pt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function en(){Te(pt),ae==null||ae(pt)}ft?Gi.flushSync(en):en()},ke=b.useState(Ie),et=fe(ke,2),St=et[0],Ht=et[1],Ft=b.useRef(!1),We=b.useMemo(function(){return(p==="inline"||p==="vertical")&&C?["vertical",C]:[p,!1]},[p,C]),tt=fe(We,2),gt=tt[0],Ge=tt[1],Rt=gt==="inline",dt=b.useState(gt),ut=fe(dt,2),Ue=ut[0],Ct=ut[1],Lt=b.useState(Ge),Ke=fe(Lt,2),Xe=Ke[0],ot=Ke[1];b.useEffect(function(){Ct(gt),ot(Ge),Ft.current&&(Rt?Te(St):je($a))},[gt,Ge]);var at=b.useState(0),lt=fe(at,2),mt=lt[0],Jt=lt[1],qt=mt>=Re.length-1||Ue!=="horizontal"||S;b.useEffect(function(){Rt&&Ht(Ie)},[Ie]),b.useEffect(function(){return Ft.current=!0,function(){Ft.current=!1}},[]);var Yt=PD(),zt=Yt.registerPath,En=Yt.unregisterPath,wn=Yt.refreshOverflowKeys,xn=Yt.isSubPathKey,An=Yt.getKeyPath,nn=Yt.getKeys,Kt=Yt.getSubPathKeys,rt=b.useMemo(function(){return{registerPath:zt,unregisterPath:En}},[zt,En]),ct=b.useMemo(function(){return{isSubPathKey:xn}},[xn]);b.useEffect(function(){wn(qt?$a:Re.slice(mt+1).map(function(sn){return sn.key}))},[mt,qt]);var Oe=Mn(k||T&&((n=Re[0])===null||n===void 0?void 0:n.key),{value:k}),Ce=fe(Oe,2),Ye=Ce[0],wt=Ce[1],Dt=uc(function(sn){wt(sn)}),Gt=uc(function(){wt(void 0)});b.useImperativeHandle(e,function(){return{list:De.current,focus:function(pt){var ft,en=nn(),ln=um(en,nt),hn=ln.elements,Cn=ln.key2element,Er=ln.element2key,er=dp(De.current,hn),jt=Ye??(er[0]?Er.get(er[0]):(ft=Re.find(function(Hr){return!Hr.props.disabled}))===null||ft===void 0?void 0:ft.key),cr=Cn.get(jt);if(jt&&cr){var gr;cr==null||(gr=cr.focus)===null||gr===void 0||gr.call(cr,pt)}}}});var Pn=Mn(J||[],{value:V,postState:function(pt){return Array.isArray(pt)?pt:pt==null?$a:[pt]}}),Vt=fe(Pn,2),Zt=Vt[0],rn=Vt[1],Wn=function(pt){if(L){var ft=pt.key,en=Zt.includes(ft),ln;q?en?ln=Zt.filter(function(Cn){return Cn!==ft}):ln=[].concat(Ae(Zt),[ft]):ln=[ft],rn(ln);var hn=le(le({},pt),{},{selectedKeys:ln});en?D==null||D(hn):z==null||z(hn)}!q&&Ie.length&&Ue!=="inline"&&je($a)},fn=uc(function(sn){te==null||te(lf(sn)),Wn(sn)}),Zn=uc(function(sn,pt){var ft=Ie.filter(function(ln){return ln!==sn});if(pt)ft.push(sn);else if(Ue!=="inline"){var en=Kt(sn);ft=ft.filter(function(ln){return!en.has(ln)})}ul(Ie,ft,!0)||je(ft,!0)}),Yn=function(pt,ft){var en=ft??!Ie.includes(pt);Zn(pt,en)},zr=ED(Ue,Ye,Je,nt,De,nn,An,wt,Yn,de);b.useEffect(function(){qe(!0)},[]);var Cr=b.useMemo(function(){return{_internalRenderMenuItem:he,_internalRenderSubMenuItem:pe}},[he,pe]),Sr=Ue!=="horizontal"||S?Re:Re.map(function(sn,pt){return b.createElement(Fc,{key:sn.key,overflowDisabled:pt>mt},sn)}),kr=b.createElement(ho,Ne({id:m,ref:De,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:Nf,className:me(o,"".concat(o,"-root"),"".concat(o,"-").concat(Ue),s,oe(oe({},"".concat(o,"-inline-collapsed"),Xe),"".concat(o,"-rtl"),Je),a),dir:g,style:l,role:"menu",tabIndex:c,data:Sr,renderRawItem:function(pt){return pt},renderRawRest:function(pt){var ft=pt.length,en=ft?Re.slice(-ft):null;return b.createElement(gp,{eventKey:dm,title:F,disabled:qt,internalPopupClose:ft===0,popupClassName:G},en)},maxCount:Ue!=="horizontal"||S?ho.INVALIDATE:ho.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(pt){Jt(pt)},onKeyDown:zr},_e));return b.createElement(up.Provider,{value:Cr},b.createElement(o2.Provider,{value:nt},b.createElement(Fc,{prefixCls:o,rootClassName:a,mode:Ue,openKeys:Ie,rtl:Je,disabled:x,motion:it?X:null,defaultMotions:it?Y:null,activeKey:Ye,onActive:Dt,onInactive:Gt,selectedKeys:Zt,inlineIndent:W,subMenuOpenDelay:P,subMenuCloseDelay:_,forceSubMenuRender:M,builtinPlacements:ie,triggerSubMenuAction:ne,getPopupContainer:ee,itemIcon:re,expandIcon:I,onItemClick:fn,onOpenChange:Zn},b.createElement(u2.Provider,{value:ct},kr),b.createElement("div",{style:{display:"none"},"aria-hidden":!0},b.createElement(l2.Provider,{value:rt},be)))))}),qc=QD;qc.Item=Nf;qc.SubMenu=gp;qc.ItemGroup=p2;qc.Divider=m2;var JD=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.id,i=t.tabs,o=t.locale,a=t.mobile,l=t.more,s=l===void 0?{}:l,u=t.style,c=t.className,f=t.editable,v=t.tabBarGutter,g=t.rtl,m=t.removeAriaLabel,y=t.onTabClick,p=t.getPopupContainer,C=t.popupClassName,x=b.useState(!1),S=fe(x,2),E=S[0],P=S[1],$=b.useState(null),_=fe($,2),M=_[0],B=_[1],H=s.icon,k=H===void 0?"More":H,T="".concat(r,"-more-popup"),O="".concat(n,"-dropdown"),L=M!==null?"".concat(T,"-").concat(M):null,K=o==null?void 0:o.dropdownAriaLabel;function q(X,Y){X.preventDefault(),X.stopPropagation(),f.onEdit("remove",{key:Y,event:X})}var J=b.createElement(qc,{onClick:function(Y){var Q=Y.key,ne=Y.domEvent;y(Q,ne),P(!1)},prefixCls:"".concat(O,"-menu"),id:T,tabIndex:-1,role:"listbox","aria-activedescendant":L,selectedKeys:[M],"aria-label":K!==void 0?K:"expanded dropdown"},i.map(function(X){var Y=X.closable,Q=X.disabled,ne=X.closeIcon,ie=X.key,re=X.label,I=sp(Y,ne,f,Q);return b.createElement(Nf,{key:ie,id:"".concat(T,"-").concat(ie),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(ie),disabled:Q},b.createElement("span",null,re),I&&b.createElement("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(O,"-menu-item-remove"),onClick:function(F){F.stopPropagation(),q(F,ie)}},ne||f.removeIcon||"×"))}));function V(X){for(var Y=i.filter(function(I){return!I.disabled}),Q=Y.findIndex(function(I){return I.key===M})||0,ne=Y.length,ie=0;ie<ne;ie+=1){Q=(Q+X+ne)%ne;var re=Y[Q];if(!re.disabled){B(re.key);return}}}function z(X){var Y=X.which;if(!E){[Ze.DOWN,Ze.SPACE,Ze.ENTER].includes(Y)&&(P(!0),X.preventDefault());return}switch(Y){case Ze.UP:V(-1),X.preventDefault();break;case Ze.DOWN:V(1),X.preventDefault();break;case Ze.ESC:P(!1);break;case Ze.SPACE:case Ze.ENTER:M!==null&&y(M,X);break}}b.useEffect(function(){var X=document.getElementById(L);X&&X.scrollIntoView&&X.scrollIntoView(!1)},[M]),b.useEffect(function(){E||B(null)},[E]);var D=oe({},g?"marginRight":"marginLeft",v);i.length||(D.visibility="hidden",D.order=1);var U=me(oe({},"".concat(O,"-rtl"),g)),W=a?null:b.createElement(oD,Ne({prefixCls:O,overlay:J,visible:i.length?E:!1,onVisibleChange:P,overlayClassName:me(U,C),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:p},s),b.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:D,"aria-haspopup":"listbox","aria-controls":T,id:"".concat(r,"-more"),"aria-expanded":E,onKeyDown:z},k));return b.createElement("div",{className:me("".concat(n,"-nav-operations"),c),style:u,ref:e},W,b.createElement(ZS,{prefixCls:n,locale:o,editable:f}))});const ZD=b.memo(JD,function(t,e){return e.tabMoving});var e5=function(e){var n=e.prefixCls,r=e.id,i=e.active,o=e.focus,a=e.tab,l=a.key,s=a.label,u=a.disabled,c=a.closeIcon,f=a.icon,v=e.closable,g=e.renderWrapper,m=e.removeAriaLabel,y=e.editable,p=e.onClick,C=e.onFocus,x=e.onBlur,S=e.onKeyDown,E=e.onMouseDown,P=e.onMouseUp,$=e.style,_=e.tabCount,M=e.currentPosition,B="".concat(n,"-tab"),H=sp(v,c,y,u);function k(q){u||p(q)}function T(q){q.preventDefault(),q.stopPropagation(),y.onEdit("remove",{key:l,event:q})}var O=b.useMemo(function(){return f&&typeof s=="string"?b.createElement("span",null,s):s},[s,f]),L=b.useRef(null);b.useEffect(function(){o&&L.current&&L.current.focus()},[o]);var K=b.createElement("div",{key:l,"data-node-key":JS(l),className:me(B,oe(oe(oe(oe({},"".concat(B,"-with-remove"),H),"".concat(B,"-active"),i),"".concat(B,"-disabled"),u),"".concat(B,"-focus"),o)),style:$,onClick:k},b.createElement("div",{ref:L,role:"tab","aria-selected":i,id:r&&"".concat(r,"-tab-").concat(l),className:"".concat(B,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(l),"aria-disabled":u,tabIndex:u?null:i?0:-1,onClick:function(J){J.stopPropagation(),k(J)},onKeyDown:S,onMouseDown:E,onMouseUp:P,onFocus:C,onBlur:x},o&&b.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(M," of ").concat(_)),f&&b.createElement("span",{className:"".concat(B,"-icon")},f),s&&O),H&&b.createElement("button",{type:"button",role:"tab","aria-label":m||"remove",tabIndex:i?0:-1,className:"".concat(B,"-remove"),onClick:function(J){J.stopPropagation(),T(J)}},c||y.removeIcon||"×"));return g?g(K):K},t5=function(e,n){var r=e.offsetWidth,i=e.offsetHeight,o=e.offsetTop,a=e.offsetLeft,l=e.getBoundingClientRect(),s=l.width,u=l.height,c=l.left,f=l.top;return Math.abs(s-r)<1?[s,u,c-n.left,f-n.top]:[r,i,a,o]},Bs=function(e){var n=e.current||{},r=n.offsetWidth,i=r===void 0?0:r,o=n.offsetHeight,a=o===void 0?0:o;if(e.current){var l=e.current.getBoundingClientRect(),s=l.width,u=l.height;if(Math.abs(s-i)<1)return[s,u]}return[i,a]},bd=function(e,n){return e[n?0:1]},fx=b.forwardRef(function(t,e){var n=t.className,r=t.style,i=t.id,o=t.animated,a=t.activeKey,l=t.rtl,s=t.extra,u=t.editable,c=t.locale,f=t.tabPosition,v=t.tabBarGutter,g=t.children,m=t.onTabClick,y=t.onTabScroll,p=t.indicator,C=b.useContext(_f),x=C.prefixCls,S=C.tabs,E=b.useRef(null),P=b.useRef(null),$=b.useRef(null),_=b.useRef(null),M=b.useRef(null),B=b.useRef(null),H=b.useRef(null),k=f==="top"||f==="bottom",T=Hw(0,function(Oe,Ce){k&&y&&y({direction:Oe>Ce?"left":"right"})}),O=fe(T,2),L=O[0],K=O[1],q=Hw(0,function(Oe,Ce){!k&&y&&y({direction:Oe>Ce?"top":"bottom"})}),J=fe(q,2),V=J[0],z=J[1],D=b.useState([0,0]),U=fe(D,2),W=U[0],X=U[1],Y=b.useState([0,0]),Q=fe(Y,2),ne=Q[0],ie=Q[1],re=b.useState([0,0]),I=fe(re,2),A=I[0],F=I[1],G=b.useState([0,0]),ee=fe(G,2),te=ee[0],ae=ee[1],de=PL(new Map),he=fe(de,2),pe=he[0],we=he[1],_e=EL(S,pe,ne[0]),$e=bd(W,k),Me=bd(ne,k),Re=bd(A,k),be=bd(te,k),Le=Math.floor($e)<Math.floor(Me+Re),He=Le?$e-be:$e-Re,it="".concat(x,"-nav-operations-hidden"),qe=0,De=0;k&&l?(qe=0,De=Math.max(0,Me-He)):(qe=Math.min(0,He-Me),De=0);function nt(Oe){return Oe<qe?qe:Oe>De?De:Oe}var Je=b.useRef(null),st=b.useState(),Ve=fe(st,2),Ie=Ve[0],Te=Ve[1];function je(){Te(Date.now())}function ke(){Je.current&&clearTimeout(Je.current)}IL(_,function(Oe,Ce){function Ye(wt,Dt){wt(function(Gt){var Pn=nt(Gt+Dt);return Pn})}return Le?(k?Ye(K,Oe):Ye(z,Ce),ke(),je(),!0):!1}),b.useEffect(function(){return ke(),Ie&&(Je.current=setTimeout(function(){Te(0)},100)),ke},[Ie]);var et=kL(_e,He,k?L:V,Me,Re,be,le(le({},t),{},{tabs:S})),St=fe(et,2),Ht=St[0],Ft=St[1],We=In(function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a,Ce=_e.get(Oe)||{width:0,height:0,left:0,right:0,top:0};if(k){var Ye=L;l?Ce.right<L?Ye=Ce.right:Ce.right+Ce.width>L+He&&(Ye=Ce.right+Ce.width-He):Ce.left<-L?Ye=-Ce.left:Ce.left+Ce.width>-L+He&&(Ye=-(Ce.left+Ce.width-He)),z(0),K(nt(Ye))}else{var wt=V;Ce.top<-V?wt=-Ce.top:Ce.top+Ce.height>-V+He&&(wt=-(Ce.top+Ce.height-He)),K(0),z(nt(wt))}}),tt=b.useState(),gt=fe(tt,2),Ge=gt[0],Rt=gt[1],dt=b.useState(!1),ut=fe(dt,2),Ue=ut[0],Ct=ut[1],Lt=S.filter(function(Oe){return!Oe.disabled}).map(function(Oe){return Oe.key}),Ke=function(Ce){var Ye=Lt.indexOf(Ge||a),wt=Lt.length,Dt=(Ye+Ce+wt)%wt,Gt=Lt[Dt];Rt(Gt)},Xe=function(Ce){var Ye=Ce.code,wt=l&&k,Dt=Lt[0],Gt=Lt[Lt.length-1];switch(Ye){case"ArrowLeft":{k&&Ke(wt?1:-1);break}case"ArrowRight":{k&&Ke(wt?-1:1);break}case"ArrowUp":{Ce.preventDefault(),k||Ke(-1);break}case"ArrowDown":{Ce.preventDefault(),k||Ke(1);break}case"Home":{Ce.preventDefault(),Rt(Dt);break}case"End":{Ce.preventDefault(),Rt(Gt);break}case"Enter":case"Space":{Ce.preventDefault(),m(Ge??a,Ce);break}case"Backspace":case"Delete":{var Pn=Lt.indexOf(Ge),Vt=S.find(function(rn){return rn.key===Ge}),Zt=sp(Vt==null?void 0:Vt.closable,Vt==null?void 0:Vt.closeIcon,u,Vt==null?void 0:Vt.disabled);Zt&&(Ce.preventDefault(),Ce.stopPropagation(),u.onEdit("remove",{key:Ge,event:Ce}),Pn===Lt.length-1?Ke(-1):Ke(1));break}}},ot={};k?ot[l?"marginRight":"marginLeft"]=v:ot.marginTop=v;var at=S.map(function(Oe,Ce){var Ye=Oe.key;return b.createElement(e5,{id:i,prefixCls:x,key:Ye,tab:Oe,style:Ce===0?void 0:ot,closable:Oe.closable,editable:u,active:Ye===a,focus:Ye===Ge,renderWrapper:g,removeAriaLabel:c==null?void 0:c.removeAriaLabel,tabCount:Lt.length,currentPosition:Ce+1,onClick:function(Dt){m(Ye,Dt)},onKeyDown:Xe,onFocus:function(){Ue||Rt(Ye),We(Ye),je(),_.current&&(l||(_.current.scrollLeft=0),_.current.scrollTop=0)},onBlur:function(){Rt(void 0)},onMouseDown:function(){Ct(!0)},onMouseUp:function(){Ct(!1)}})}),lt=function(){return we(function(){var Ce,Ye=new Map,wt=(Ce=M.current)===null||Ce===void 0?void 0:Ce.getBoundingClientRect();return S.forEach(function(Dt){var Gt,Pn=Dt.key,Vt=(Gt=M.current)===null||Gt===void 0?void 0:Gt.querySelector('[data-node-key="'.concat(JS(Pn),'"]'));if(Vt){var Zt=t5(Vt,wt),rn=fe(Zt,4),Wn=rn[0],fn=rn[1],Zn=rn[2],Yn=rn[3];Ye.set(Pn,{width:Wn,height:fn,left:Zn,top:Yn})}}),Ye})};b.useEffect(function(){lt()},[S.map(function(Oe){return Oe.key}).join("_")]);var mt=QS(function(){var Oe=Bs(E),Ce=Bs(P),Ye=Bs($);X([Oe[0]-Ce[0]-Ye[0],Oe[1]-Ce[1]-Ye[1]]);var wt=Bs(H);F(wt);var Dt=Bs(B);ae(Dt);var Gt=Bs(M);ie([Gt[0]-wt[0],Gt[1]-wt[1]]),lt()}),Jt=S.slice(0,Ht),qt=S.slice(Ft+1),Yt=[].concat(Ae(Jt),Ae(qt)),zt=_e.get(a),En=SL({activeTabOffset:zt,horizontal:k,indicator:p,rtl:l}),wn=En.style;b.useEffect(function(){We()},[a,qe,De,qw(zt),qw(_e),k]),b.useEffect(function(){mt()},[l]);var xn=!!Yt.length,An="".concat(x,"-nav-wrap"),nn,Kt,rt,ct;return k?l?(Kt=L>0,nn=L!==De):(nn=L<0,Kt=L!==qe):(rt=V<0,ct=V!==qe),b.createElement(Ki,{onResize:mt},b.createElement("div",{ref:ts(e,E),role:"tablist","aria-orientation":k?"horizontal":"vertical",className:me("".concat(x,"-nav"),n),style:r,onKeyDown:function(){je()}},b.createElement(Kw,{ref:P,position:"left",extra:s,prefixCls:x}),b.createElement(Ki,{onResize:mt},b.createElement("div",{className:me(An,oe(oe(oe(oe({},"".concat(An,"-ping-left"),nn),"".concat(An,"-ping-right"),Kt),"".concat(An,"-ping-top"),rt),"".concat(An,"-ping-bottom"),ct)),ref:_},b.createElement(Ki,{onResize:mt},b.createElement("div",{ref:M,className:"".concat(x,"-nav-list"),style:{transform:"translate(".concat(L,"px, ").concat(V,"px)"),transition:Ie?"none":void 0}},at,b.createElement(ZS,{ref:H,prefixCls:x,locale:c,editable:u,style:le(le({},at.length===0?void 0:ot),{},{visibility:xn?"hidden":null})}),b.createElement("div",{className:me("".concat(x,"-ink-bar"),oe({},"".concat(x,"-ink-bar-animated"),o.inkBar)),style:wn}))))),b.createElement(ZD,Ne({},t,{removeAriaLabel:c==null?void 0:c.removeAriaLabel,ref:B,prefixCls:x,tabs:Yt,className:!xn&&it,tabMoving:!!Ie})),b.createElement(Kw,{ref:$,position:"right",extra:s,prefixCls:x})))}),y2=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,i=t.style,o=t.id,a=t.active,l=t.tabKey,s=t.children;return b.createElement("div",{id:o&&"".concat(o,"-panel-").concat(l),role:"tabpanel",tabIndex:a?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(l),"aria-hidden":!a,style:i,className:me(n,a&&"".concat(n,"-active"),r),ref:e},s)}),n5=["renderTabBar"],r5=["label","key"],i5=function(e){var n=e.renderTabBar,r=_t(e,n5),i=b.useContext(_f),o=i.tabs;if(n){var a=le(le({},r),{},{panes:o.map(function(l){var s=l.label,u=l.key,c=_t(l,r5);return b.createElement(y2,Ne({tab:s,key:u,tabKey:u},c))})});return n(a,fx)}return b.createElement(fx,r)},o5=["key","forceRender","style","className","destroyInactiveTabPane"],a5=function(e){var n=e.id,r=e.activeKey,i=e.animated,o=e.tabPosition,a=e.destroyInactiveTabPane,l=b.useContext(_f),s=l.prefixCls,u=l.tabs,c=i.tabPane,f="".concat(s,"-tabpane");return b.createElement("div",{className:me("".concat(s,"-content-holder"))},b.createElement("div",{className:me("".concat(s,"-content"),"".concat(s,"-content-").concat(o),oe({},"".concat(s,"-content-animated"),c))},u.map(function(v){var g=v.key,m=v.forceRender,y=v.style,p=v.className,C=v.destroyInactiveTabPane,x=_t(v,o5),S=g===r;return b.createElement(to,Ne({key:g,visible:S,forceRender:m,removeOnLeave:!!(a||C),leavedClassName:"".concat(f,"-hidden")},i.tabPaneMotion),function(E,P){var $=E.style,_=E.className;return b.createElement(y2,Ne({},x,{prefixCls:f,id:n,tabKey:g,animated:c,active:S,style:le(le({},y),$),className:me(p,_),ref:P}))})})))};function s5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},e;return t===!1?e={inkBar:!1,tabPane:!1}:t===!0?e={inkBar:!0,tabPane:!1}:e=le({inkBar:!0},ht(t)==="object"?t:{}),e.tabPaneMotion&&e.tabPane===void 0&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}var l5=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],hx=0,c5=b.forwardRef(function(t,e){var n=t.id,r=t.prefixCls,i=r===void 0?"rc-tabs":r,o=t.className,a=t.items,l=t.direction,s=t.activeKey,u=t.defaultActiveKey,c=t.editable,f=t.animated,v=t.tabPosition,g=v===void 0?"top":v,m=t.tabBarGutter,y=t.tabBarStyle,p=t.tabBarExtraContent,C=t.locale,x=t.more,S=t.destroyInactiveTabPane,E=t.renderTabBar,P=t.onChange,$=t.onTabClick,_=t.onTabScroll,M=t.getPopupContainer,B=t.popupClassName,H=t.indicator,k=_t(t,l5),T=b.useMemo(function(){return(a||[]).filter(function(te){return te&&ht(te)==="object"&&"key"in te})},[a]),O=l==="rtl",L=s5(f),K=b.useState(!1),q=fe(K,2),J=q[0],V=q[1];b.useEffect(function(){V(Tf())},[]);var z=Mn(function(){var te;return(te=T[0])===null||te===void 0?void 0:te.key},{value:s,defaultValue:u}),D=fe(z,2),U=D[0],W=D[1],X=b.useState(function(){return T.findIndex(function(te){return te.key===U})}),Y=fe(X,2),Q=Y[0],ne=Y[1];b.useEffect(function(){var te=T.findIndex(function(de){return de.key===U});if(te===-1){var ae;te=Math.max(0,Math.min(Q,T.length-1)),W((ae=T[te])===null||ae===void 0?void 0:ae.key)}ne(te)},[T.map(function(te){return te.key}).join("_"),U,Q]);var ie=Mn(null,{value:n}),re=fe(ie,2),I=re[0],A=re[1];b.useEffect(function(){n||(A("rc-tabs-".concat(hx)),hx+=1)},[]);function F(te,ae){$==null||$(te,ae);var de=te!==U;W(te),de&&(P==null||P(te))}var G={id:I,activeKey:U,animated:L,tabPosition:g,rtl:O,mobile:J},ee=le(le({},G),{},{editable:c,locale:C,more:x,tabBarGutter:m,onTabClick:F,onTabScroll:_,extra:p,style:y,panes:null,getPopupContainer:M,popupClassName:B,indicator:H});return b.createElement(_f.Provider,{value:{tabs:T,prefixCls:i}},b.createElement("div",Ne({ref:e,id:n,className:me(i,"".concat(i,"-").concat(g),oe(oe(oe({},"".concat(i,"-mobile"),J),"".concat(i,"-editable"),c),"".concat(i,"-rtl"),O),o)},k),b.createElement(i5,Ne({},ee,{renderTabBar:E})),b.createElement(a5,Ne({destroyInactiveTabPane:S},G,{animated:L}))))});const u5={motionAppear:!1,motionEnter:!0,motionLeave:!0};function d5(t,e={inkBar:!0,tabPane:!1}){let n;return e===!1?n={inkBar:!1,tabPane:!1}:e===!0?n={inkBar:!0,tabPane:!0}:n=Object.assign({inkBar:!0},typeof e=="object"?e:{}),n.tabPane&&(n.tabPaneMotion=Object.assign(Object.assign({},u5),{motionName:kf(t,"switch")})),n}var f5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function h5(t){return t.filter(e=>e)}function v5(t,e){if(t)return t.map(r=>{var i;const o=(i=r.destroyOnHidden)!==null&&i!==void 0?i:r.destroyInactiveTabPane;return Object.assign(Object.assign({},r),{destroyInactiveTabPane:o})});const n=Do(e).map(r=>{if(b.isValidElement(r)){const{key:i,props:o}=r,a=o||{},{tab:l}=a,s=f5(a,["tab"]);return Object.assign(Object.assign({key:String(i)},s),{label:l})}return null});return h5(n)}const g5=t=>{const{componentCls:e,motionDurationSlow:n}=t;return[{[e]:{[`${e}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${n}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${n}`}}}}},[rf(t,"slide-up"),rf(t,"slide-down")]]},m5=t=>{const{componentCls:e,tabsCardPadding:n,cardBg:r,cardGutter:i,colorBorderSecondary:o,itemSelectedColor:a}=t;return{[`${e}-card`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{margin:0,padding:n,background:r,border:`${ye(t.lineWidth)} ${t.lineType} ${o}`,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOut}`},[`${e}-tab-active`]:{color:a,background:t.colorBgContainer},[`${e}-tab-focus:has(${e}-tab-btn:focus-visible)`]:Sf(t,-3),[`& ${e}-tab${e}-tab-focus ${e}-tab-btn:focus-visible`]:{outline:"none"},[`${e}-ink-bar`]:{visibility:"hidden"}},[`&${e}-top, &${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginLeft:{_skip_check_:!0,value:ye(i)}}}},[`&${e}-top`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`${ye(t.borderRadiusLG)} ${ye(t.borderRadiusLG)} 0 0`},[`${e}-tab-active`]:{borderBottomColor:t.colorBgContainer}}},[`&${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`0 0 ${ye(t.borderRadiusLG)} ${ye(t.borderRadiusLG)}`},[`${e}-tab-active`]:{borderTopColor:t.colorBgContainer}}},[`&${e}-left, &${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginTop:ye(i)}}},[`&${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${ye(t.borderRadiusLG)} 0 0 ${ye(t.borderRadiusLG)}`}},[`${e}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:t.colorBgContainer}}}},[`&${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${ye(t.borderRadiusLG)} ${ye(t.borderRadiusLG)} 0`}},[`${e}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:t.colorBgContainer}}}}}}},p5=t=>{const{componentCls:e,itemHoverColor:n,dropdownEdgeChildVerticalPadding:r}=t;return{[`${e}-dropdown`]:Object.assign(Object.assign({},sr(t)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:t.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${e}-dropdown-menu`]:{maxHeight:t.tabsDropdownHeight,margin:0,padding:`${ye(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:t.colorBgContainer,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,"&-item":Object.assign(Object.assign({},Xa),{display:"flex",alignItems:"center",minWidth:t.tabsDropdownWidth,margin:0,padding:`${ye(t.paddingXXS)} ${ye(t.paddingSM)}`,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:t.marginSM},color:t.colorIcon,fontSize:t.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:n}},"&:hover":{background:t.controlItemBgHover},"&-disabled":{"&, &:hover":{color:t.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},y5=t=>{const{componentCls:e,margin:n,colorBorderSecondary:r,horizontalMargin:i,verticalItemPadding:o,verticalItemMargin:a,calc:l}=t;return{[`${e}-top, ${e}-bottom`]:{flexDirection:"column",[`> ${e}-nav, > div > ${e}-nav`]:{margin:i,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${ye(t.lineWidth)} ${t.lineType} ${r}`,content:"''"},[`${e}-ink-bar`]:{height:t.lineWidthBold,"&-animated":{transition:`width ${t.motionDurationSlow}, left ${t.motionDurationSlow},
            right ${t.motionDurationSlow}`}},[`${e}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:t.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:t.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:t.boxShadowTabsOverflowRight},[`&${e}-nav-wrap-ping-left::before`]:{opacity:1},[`&${e}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${e}-top`]:{[`> ${e}-nav,
        > div > ${e}-nav`]:{"&::before":{bottom:0},[`${e}-ink-bar`]:{bottom:0}}},[`${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,marginTop:n,marginBottom:0,"&::before":{top:0},[`${e}-ink-bar`]:{top:0}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0}},[`${e}-left, ${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{flexDirection:"column",minWidth:l(t.controlHeight).mul(1.25).equal(),[`${e}-tab`]:{padding:o,textAlign:"center"},[`${e}-tab + ${e}-tab`]:{margin:a},[`${e}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:t.controlHeight},"&::before":{top:0,boxShadow:t.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:t.boxShadowTabsOverflowBottom},[`&${e}-nav-wrap-ping-top::before`]:{opacity:1},[`&${e}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${e}-ink-bar`]:{width:t.lineWidthBold,"&-animated":{transition:`height ${t.motionDurationSlow}, top ${t.motionDurationSlow}`}},[`${e}-nav-list, ${e}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{marginLeft:{_skip_check_:!0,value:ye(l(t.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:t.paddingLG}}}},[`${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,[`${e}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:l(t.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingRight:{_skip_check_:!0,value:t.paddingLG}}}}}},b5=t=>{const{componentCls:e,cardPaddingSM:n,cardPaddingLG:r,cardHeightSM:i,cardHeightLG:o,horizontalItemPaddingSM:a,horizontalItemPaddingLG:l}=t;return{[e]:{"&-small":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:a,fontSize:t.titleFontSizeSM}}},"&-large":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:l,fontSize:t.titleFontSizeLG,lineHeight:t.lineHeightLG}}}},[`${e}-card`]:{[`&${e}-small`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:n},[`${e}-nav-add`]:{minWidth:i,minHeight:i}},[`&${e}-bottom`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`0 0 ${ye(t.borderRadius)} ${ye(t.borderRadius)}`}},[`&${e}-top`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`${ye(t.borderRadius)} ${ye(t.borderRadius)} 0 0`}},[`&${e}-right`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${ye(t.borderRadius)} ${ye(t.borderRadius)} 0`}}},[`&${e}-left`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${ye(t.borderRadius)} 0 0 ${ye(t.borderRadius)}`}}}},[`&${e}-large`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:r},[`${e}-nav-add`]:{minWidth:o,minHeight:o}}}}}},w5=t=>{const{componentCls:e,itemActiveColor:n,itemHoverColor:r,iconCls:i,tabsHorizontalItemMargin:o,horizontalItemPadding:a,itemSelectedColor:l,itemColor:s}=t,u=`${e}-tab`;return{[u]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:a,fontSize:t.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:s,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:n}},"&-btn":{outline:"none",transition:`all ${t.motionDurationSlow}`,[`${u}-icon:not(:last-child)`]:{marginInlineEnd:t.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:t.calc(t.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:t.marginXS},color:t.colorIcon,fontSize:t.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextHeading}},Ya(t)),"&:hover":{color:r},[`&${u}-active ${u}-btn`]:{color:l,textShadow:t.tabsActiveTextShadow},[`&${u}-focus ${u}-btn:focus-visible`]:Sf(t),[`&${u}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${u}-disabled ${u}-btn, &${u}-disabled ${e}-remove`]:{"&:focus, &:active":{color:t.colorTextDisabled}},[`& ${u}-remove ${i}`]:{margin:0},[`${i}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:t.marginSM}}},[`${u} + ${u}`]:{margin:{_skip_check_:!0,value:o}}}},x5=t=>{const{componentCls:e,tabsHorizontalItemMarginRTL:n,iconCls:r,cardGutter:i,calc:o}=t;return{[`${e}-rtl`]:{direction:"rtl",[`${e}-nav`]:{[`${e}-tab`]:{margin:{_skip_check_:!0,value:n},[`${e}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:ye(t.marginSM)}},[`${e}-tab-remove`]:{marginRight:{_skip_check_:!0,value:ye(t.marginXS)},marginLeft:{_skip_check_:!0,value:ye(o(t.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${e}-left`]:{[`> ${e}-nav`]:{order:1},[`> ${e}-content-holder`]:{order:0}},[`&${e}-right`]:{[`> ${e}-nav`]:{order:0},[`> ${e}-content-holder`]:{order:1}},[`&${e}-card${e}-top, &${e}-card${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginRight:{_skip_check_:!0,value:i},marginLeft:{_skip_check_:!0,value:0}}}}},[`${e}-dropdown-rtl`]:{direction:"rtl"},[`${e}-menu-item`]:{[`${e}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},C5=t=>{const{componentCls:e,tabsCardPadding:n,cardHeight:r,cardGutter:i,itemHoverColor:o,itemActiveColor:a,colorBorderSecondary:l}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),{display:"flex",[`> ${e}-nav, > div > ${e}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${e}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${t.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${e}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${t.motionDurationSlow}`},[`${e}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${e}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${e}-nav-more`]:{position:"relative",padding:n,background:"transparent",border:0,color:t.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:t.calc(t.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${e}-nav-add`]:Object.assign({minWidth:r,minHeight:r,marginLeft:{_skip_check_:!0,value:i},background:"transparent",border:`${ye(t.lineWidth)} ${t.lineType} ${l}`,borderRadius:`${ye(t.borderRadiusLG)} ${ye(t.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:t.colorText,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOut}`,"&:hover":{color:o},"&:active, &:focus:not(:focus-visible)":{color:a}},Ya(t,-3))},[`${e}-extra-content`]:{flex:"none"},[`${e}-ink-bar`]:{position:"absolute",background:t.inkBarColor,pointerEvents:"none"}}),w5(t)),{[`${e}-content`]:{position:"relative",width:"100%"},[`${e}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${e}-tabpane`]:Object.assign(Object.assign({},Ya(t)),{"&-hidden":{display:"none"}})}),[`${e}-centered`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-nav-wrap`]:{[`&:not([class*='${e}-nav-wrap-ping']) > ${e}-nav-list`]:{margin:"auto"}}}}}},S5=t=>{const{cardHeight:e,cardHeightSM:n,cardHeightLG:r,controlHeight:i,controlHeightLG:o}=t,a=e||o,l=n||i,s=r||o+8;return{zIndexPopup:t.zIndexPopupBase+50,cardBg:t.colorFillAlter,cardHeight:a,cardHeightSM:l,cardHeightLG:s,cardPadding:`${(a-t.fontHeight)/2-t.lineWidth}px ${t.padding}px`,cardPaddingSM:`${(l-t.fontHeight)/2-t.lineWidth}px ${t.paddingXS}px`,cardPaddingLG:`${(s-t.fontHeightLG)/2-t.lineWidth}px ${t.padding}px`,titleFontSize:t.fontSize,titleFontSizeLG:t.fontSizeLG,titleFontSizeSM:t.fontSize,inkBarColor:t.colorPrimary,horizontalMargin:`0 0 ${t.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${t.paddingSM}px 0`,horizontalItemPaddingSM:`${t.paddingXS}px 0`,horizontalItemPaddingLG:`${t.padding}px 0`,verticalItemPadding:`${t.paddingXS}px ${t.paddingLG}px`,verticalItemMargin:`${t.margin}px 0 0 0`,itemColor:t.colorText,itemSelectedColor:t.colorPrimary,itemHoverColor:t.colorPrimaryHover,itemActiveColor:t.colorPrimaryActive,cardGutter:t.marginXXS/2}},E5=lr("Tabs",t=>{const e=bn(t,{tabsCardPadding:t.cardPadding,dropdownEdgeChildVerticalPadding:t.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${ye(t.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${ye(t.horizontalItemGutter)}`});return[b5(e),x5(e),y5(e),p5(e),m5(e),C5(e),g5(e)]},S5),R5=()=>null;var I5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const b2=t=>{var e,n,r,i,o,a,l,s,u,c,f;const{type:v,className:g,rootClassName:m,size:y,onEdit:p,hideAdd:C,centered:x,addIcon:S,removeIcon:E,moreIcon:P,more:$,popupClassName:_,children:M,items:B,animated:H,style:k,indicatorSize:T,indicator:O,destroyInactiveTabPane:L,destroyOnHidden:K}=t,q=I5(t,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator","destroyInactiveTabPane","destroyOnHidden"]),{prefixCls:J}=q,{direction:V,tabs:z,getPrefixCls:D,getPopupContainer:U}=b.useContext(un),W=D("tabs",J),X=ma(W),[Y,Q,ne]=E5(W,X);let ie;v==="editable-card"&&(ie={onEdit:(te,{key:ae,event:de})=>{p==null||p(te==="add"?de:ae,te)},removeIcon:(e=E??(z==null?void 0:z.removeIcon))!==null&&e!==void 0?e:b.createElement(If,null),addIcon:(S??(z==null?void 0:z.addIcon))||b.createElement(WS,null),showAdd:C!==!0});const re=D(),I=bi(y),A=v5(B,M),F=d5(W,H),G=Object.assign(Object.assign({},z==null?void 0:z.style),k),ee={align:(n=O==null?void 0:O.align)!==null&&n!==void 0?n:(r=z==null?void 0:z.indicator)===null||r===void 0?void 0:r.align,size:(l=(o=(i=O==null?void 0:O.size)!==null&&i!==void 0?i:T)!==null&&o!==void 0?o:(a=z==null?void 0:z.indicator)===null||a===void 0?void 0:a.size)!==null&&l!==void 0?l:z==null?void 0:z.indicatorSize};return Y(b.createElement(c5,Object.assign({direction:V,getPopupContainer:U},q,{items:A,className:me({[`${W}-${I}`]:I,[`${W}-card`]:["card","editable-card"].includes(v),[`${W}-editable-card`]:v==="editable-card",[`${W}-centered`]:x},z==null?void 0:z.className,g,m,Q,ne,X),popupClassName:me(_,Q,ne,X),style:G,editable:ie,more:Object.assign({icon:(f=(c=(u=(s=z==null?void 0:z.more)===null||s===void 0?void 0:s.icon)!==null&&u!==void 0?u:z==null?void 0:z.moreIcon)!==null&&c!==void 0?c:P)!==null&&f!==void 0?f:b.createElement(KN,null),transitionName:`${re}-slide-up`},$),prefixCls:W,animated:F,indicator:ee,destroyInactiveTabPane:K??L})))};b2.TabPane=R5;const P5="_rightView_kp9n0_1",vx={rightView:P5},k5="_fileSet_1erdr_1",$5="_setItem_1erdr_1",T5="_label_1erdr_7",fr={fileSet:k5,setItem:$5,label:T5};var Fa="RC_FORM_INTERNAL_HOOKS",Tn=function(){rr(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},pl=b.createContext({getFieldValue:Tn,getFieldsValue:Tn,getFieldError:Tn,getFieldWarning:Tn,getFieldsError:Tn,isFieldsTouched:Tn,isFieldTouched:Tn,isFieldValidating:Tn,isFieldsValidating:Tn,resetFields:Tn,setFields:Tn,setFieldValue:Tn,setFieldsValue:Tn,validateFields:Tn,submit:Tn,getInternalHooks:function(){return Tn(),{dispatch:Tn,initEntityValue:Tn,registerField:Tn,useSubscribe:Tn,setInitialValues:Tn,destroyForm:Tn,setCallbacks:Tn,registerWatch:Tn,getFields:Tn,setValidateMessages:Tn,setPreserve:Tn,getInitialValue:Tn}}}),cf=b.createContext(null);function hm(t){return t==null?[]:Array.isArray(t)?t:[t]}function _5(t){return t&&!!t._init}function vm(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var gm=vm();function A5(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function O5(t,e,n){if(Um())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&Pc(i,n.prototype),i}function mm(t){var e=typeof Map=="function"?new Map:void 0;return mm=function(r){if(r===null||!A5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return O5(r,arguments,kc(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Pc(i,r)},mm(t)}var M5=/%[sdj%]/g,N5=function(){};function pm(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function vi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,o=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var a=t.replace(M5,function(l){if(l==="%%")return"%";if(i>=o)return l;switch(l){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return l}});return a}return t}function L5(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function vr(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||L5(e)&&typeof t=="string"&&!t)}function D5(t,e,n){var r=[],i=0,o=t.length;function a(l){r.push.apply(r,Ae(l||[])),i++,i===o&&n(r)}t.forEach(function(l){e(l,a)})}function gx(t,e,n){var r=0,i=t.length;function o(a){if(a&&a.length){n(a);return}var l=r;r=r+1,l<i?e(t[l],o):n([])}o([])}function F5(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,Ae(t[n]||[]))}),e}var mx=function(t){Ji(n,t);var e=Zi(n);function n(r,i){var o;return Hn(this,n),o=e.call(this,"Async Validation Error"),oe(At(o),"errors",void 0),oe(At(o),"fields",void 0),o.errors=r,o.fields=i,o}return Vn(n)}(mm(Error));function B5(t,e,n,r,i){if(e.first){var o=new Promise(function(v,g){var m=function(C){return r(C),C.length?g(new mx(C,pm(C))):v(i)},y=F5(t);gx(y,n,m)});return o.catch(function(v){return v}),o}var a=e.firstFields===!0?Object.keys(t):e.firstFields||[],l=Object.keys(t),s=l.length,u=0,c=[],f=new Promise(function(v,g){var m=function(p){if(c.push.apply(c,p),u++,u===s)return r(c),c.length?g(new mx(c,pm(c))):v(i)};l.length||(r(c),v(i)),l.forEach(function(y){var p=t[y];a.indexOf(y)!==-1?gx(p,n,m):D5(p,n,m)})});return f.catch(function(v){return v}),f}function j5(t){return!!(t&&t.message!==void 0)}function z5(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function px(t,e){return function(n){var r;return t.fullFields?r=z5(e,t.fullFields):r=e[n.field||t.fullField],j5(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function yx(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];ht(r)==="object"&&ht(t[n])==="object"?t[n]=le(le({},t[n]),r):t[n]=r}}return t}var js="enum",H5=function(e,n,r,i,o){e[js]=Array.isArray(e[js])?e[js]:[],e[js].indexOf(n)===-1&&i.push(vi(o.messages[js],e.fullField,e[js].join(", ")))},V5=function(e,n,r,i,o){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||i.push(vi(o.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(n)||i.push(vi(o.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},W5=function(e,n,r,i,o){var a=typeof e.len=="number",l=typeof e.min=="number",s=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,f=null,v=typeof n=="number",g=typeof n=="string",m=Array.isArray(n);if(v?f="number":g?f="string":m&&(f="array"),!f)return!1;m&&(c=n.length),g&&(c=n.replace(u,"_").length),a?c!==e.len&&i.push(vi(o.messages[f].len,e.fullField,e.len)):l&&!s&&c<e.min?i.push(vi(o.messages[f].min,e.fullField,e.min)):s&&!l&&c>e.max?i.push(vi(o.messages[f].max,e.fullField,e.max)):l&&s&&(c<e.min||c>e.max)&&i.push(vi(o.messages[f].range,e.fullField,e.min,e.max))},w2=function(e,n,r,i,o,a){e.required&&(!r.hasOwnProperty(e.field)||vr(n,a||e.type))&&i.push(vi(o.messages.required,e.fullField))},wd;const U5=function(){if(wd)return wd;var t="[a-fA-F\\d:]",e=function($){return $&&$.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],o="(?:%[0-9a-zA-Z]{1,})?",a="(?:".concat(i.join("|"),")").concat(o),l=new RegExp("(?:^".concat(n,"$)|(?:^").concat(a,"$)")),s=new RegExp("^".concat(n,"$")),u=new RegExp("^".concat(a,"$")),c=function($){return $&&$.exact?l:new RegExp("(?:".concat(e($)).concat(n).concat(e($),")|(?:").concat(e($)).concat(a).concat(e($),")"),"g")};c.v4=function(P){return P&&P.exact?s:new RegExp("".concat(e(P)).concat(n).concat(e(P)),"g")},c.v6=function(P){return P&&P.exact?u:new RegExp("".concat(e(P)).concat(a).concat(e(P)),"g")};var f="(?:(?:[a-z]+:)?//)",v="(?:\\S+(?::\\S*)?@)?",g=c.v4().source,m=c.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",C="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",S='(?:[/?#][^\\s"]*)?',E="(?:".concat(f,"|www\\.)").concat(v,"(?:localhost|").concat(g,"|").concat(m,"|").concat(y).concat(p).concat(C,")").concat(x).concat(S);return wd=new RegExp("(?:^".concat(E,"$)"),"i"),wd};var bx={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},dc={integer:function(e){return dc.number(e)&&parseInt(e,10)===e},float:function(e){return dc.number(e)&&!dc.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return ht(e)==="object"&&!dc.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(bx.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(U5())},hex:function(e){return typeof e=="string"&&!!e.match(bx.hex)}},q5=function(e,n,r,i,o){if(e.required&&n===void 0){w2(e,n,r,i,o);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;a.indexOf(l)>-1?dc[l](n)||i.push(vi(o.messages.types[l],e.fullField,e.type)):l&&ht(n)!==e.type&&i.push(vi(o.messages.types[l],e.fullField,e.type))},K5=function(e,n,r,i,o){(/^\s+$/.test(n)||n==="")&&i.push(vi(o.messages.whitespace,e.fullField))};const an={required:w2,whitespace:K5,type:q5,range:W5,enum:H5,pattern:V5};var G5=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o)}r(a)},X5=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(n==null&&!e.required)return r();an.required(e,n,i,a,o,"array"),n!=null&&(an.type(e,n,i,a,o),an.range(e,n,i,a,o))}r(a)},Y5=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&an.type(e,n,i,a,o)}r(a)},Q5=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n,"date")&&!e.required)return r();if(an.required(e,n,i,a,o),!vr(n,"date")){var s;n instanceof Date?s=n:s=new Date(n),an.type(e,s,i,a,o),s&&an.range(e,s.getTime(),i,a,o)}}r(a)},J5="enum",Z5=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&an[J5](e,n,i,a,o)}r(a)},e3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&(an.type(e,n,i,a,o),an.range(e,n,i,a,o))}r(a)},t3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&(an.type(e,n,i,a,o),an.range(e,n,i,a,o))}r(a)},n3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&an.type(e,n,i,a,o)}r(a)},r3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(n===""&&(n=void 0),vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&(an.type(e,n,i,a,o),an.range(e,n,i,a,o))}r(a)},i3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),n!==void 0&&an.type(e,n,i,a,o)}r(a)},o3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n,"string")&&!e.required)return r();an.required(e,n,i,a,o),vr(n,"string")||an.pattern(e,n,i,a,o)}r(a)},a3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n)&&!e.required)return r();an.required(e,n,i,a,o),vr(n)||an.type(e,n,i,a,o)}r(a)},s3=function(e,n,r,i,o){var a=[],l=Array.isArray(n)?"array":ht(n);an.required(e,n,i,a,o,l),r(a)},l3=function(e,n,r,i,o){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(vr(n,"string")&&!e.required)return r();an.required(e,n,i,a,o,"string"),vr(n,"string")||(an.type(e,n,i,a,o),an.range(e,n,i,a,o),an.pattern(e,n,i,a,o),e.whitespace===!0&&an.whitespace(e,n,i,a,o))}r(a)},Yv=function(e,n,r,i,o){var a=e.type,l=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(vr(n,a)&&!e.required)return r();an.required(e,n,i,l,o,a),vr(n,a)||an.type(e,n,i,l,o)}r(l)};const xc={string:l3,method:n3,number:r3,boolean:Y5,regexp:a3,integer:t3,float:e3,array:X5,object:i3,enum:Z5,pattern:o3,date:Q5,url:Yv,hex:Yv,email:Yv,required:s3,any:G5};var Kc=function(){function t(e){Hn(this,t),oe(this,"rules",null),oe(this,"_messages",gm),this.define(e)}return Vn(t,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(ht(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var o=n[i];r.rules[i]=Array.isArray(o)?o:[o]})}},{key:"messages",value:function(n){return n&&(this._messages=yx(vm(),n)),this._messages}},{key:"validate",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=n,l=i,s=o;if(typeof l=="function"&&(s=l,l={}),!this.rules||Object.keys(this.rules).length===0)return s&&s(null,a),Promise.resolve(a);function u(m){var y=[],p={};function C(S){if(Array.isArray(S)){var E;y=(E=y).concat.apply(E,Ae(S))}else y.push(S)}for(var x=0;x<m.length;x++)C(m[x]);y.length?(p=pm(y),s(y,p)):s(null,a)}if(l.messages){var c=this.messages();c===gm&&(c=vm()),yx(c,l.messages),l.messages=c}else l.messages=this.messages();var f={},v=l.keys||Object.keys(this.rules);v.forEach(function(m){var y=r.rules[m],p=a[m];y.forEach(function(C){var x=C;typeof x.transform=="function"&&(a===n&&(a=le({},a)),p=a[m]=x.transform(p),p!=null&&(x.type=x.type||(Array.isArray(p)?"array":ht(p)))),typeof x=="function"?x={validator:x}:x=le({},x),x.validator=r.getValidationMethod(x),x.validator&&(x.field=m,x.fullField=x.fullField||m,x.type=r.getType(x),f[m]=f[m]||[],f[m].push({rule:x,value:p,source:a,field:m}))})});var g={};return B5(f,l,function(m,y){var p=m.rule,C=(p.type==="object"||p.type==="array")&&(ht(p.fields)==="object"||ht(p.defaultField)==="object");C=C&&(p.required||!p.required&&m.value),p.field=m.field;function x(_,M){return le(le({},M),{},{fullField:"".concat(p.fullField,".").concat(_),fullFields:p.fullFields?[].concat(Ae(p.fullFields),[_]):[_]})}function S(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=Array.isArray(_)?_:[_];!l.suppressWarning&&M.length&&t.warning("async-validator:",M),M.length&&p.message!==void 0&&(M=[].concat(p.message));var B=M.map(px(p,a));if(l.first&&B.length)return g[p.field]=1,y(B);if(!C)y(B);else{if(p.required&&!m.value)return p.message!==void 0?B=[].concat(p.message).map(px(p,a)):l.error&&(B=[l.error(p,vi(l.messages.required,p.field))]),y(B);var H={};p.defaultField&&Object.keys(m.value).map(function(O){H[O]=p.defaultField}),H=le(le({},H),m.rule.fields);var k={};Object.keys(H).forEach(function(O){var L=H[O],K=Array.isArray(L)?L:[L];k[O]=K.map(x.bind(null,O))});var T=new t(k);T.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),T.validate(m.value,m.rule.options||l,function(O){var L=[];B&&B.length&&L.push.apply(L,Ae(B)),O&&O.length&&L.push.apply(L,Ae(O)),y(L.length?L:null)})}}var E;if(p.asyncValidator)E=p.asyncValidator(p,m.value,S,m.source,l);else if(p.validator){try{E=p.validator(p,m.value,S,m.source,l)}catch(_){var P,$;(P=($=console).error)===null||P===void 0||P.call($,_),l.suppressValidatorError||setTimeout(function(){throw _},0),S(_.message)}E===!0?S():E===!1?S(typeof p.message=="function"?p.message(p.fullField||p.field):p.message||"".concat(p.fullField||p.field," fails")):E instanceof Array?S(E):E instanceof Error&&S(E.message)}E&&E.then&&E.then(function(){return S()},function(_){return S(_)})},function(m){u(m)},a)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!xc.hasOwnProperty(n.type))throw new Error(vi("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),i=r.indexOf("message");return i!==-1&&r.splice(i,1),r.length===1&&r[0]==="required"?xc.required:xc[this.getType(n)]||void 0}}]),t}();oe(Kc,"register",function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");xc[e]=n});oe(Kc,"warning",N5);oe(Kc,"messages",gm);oe(Kc,"validators",xc);var ci="'${name}' is not a valid ${type}",x2={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ci,method:ci,array:ci,object:ci,number:ci,date:ci,boolean:ci,integer:ci,float:ci,regexp:ci,email:ci,url:ci,hex:ci},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},xx=Kc;function c3(t,e){return t.replace(/\\?\$\{\w+\}/g,function(n){if(n.startsWith("\\"))return n.slice(1);var r=n.slice(2,-1);return e[r]})}var Cx="CODE_LOGIC_ERROR";function ym(t,e,n,r,i){return bm.apply(this,arguments)}function bm(){return bm=Br(pn().mark(function t(e,n,r,i,o){var a,l,s,u,c,f,v,g,m;return pn().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=le({},r),delete a.ruleIndex,xx.warning=function(){},a.validator&&(l=a.validator,a.validator=function(){try{return l.apply(void 0,arguments)}catch(C){return console.error(C),Promise.reject(Cx)}}),s=null,a&&a.type==="array"&&a.defaultField&&(s=a.defaultField,delete a.defaultField),u=new xx(oe({},e,[a])),c=Qs(x2,i.validateMessages),u.messages(c),f=[],p.prev=10,p.next=13,Promise.resolve(u.validate(oe({},e,n),le({},i)));case 13:p.next=18;break;case 15:p.prev=15,p.t0=p.catch(10),p.t0.errors&&(f=p.t0.errors.map(function(C,x){var S=C.message,E=S===Cx?c.default:S;return b.isValidElement(E)?b.cloneElement(E,{key:"error_".concat(x)}):E}));case 18:if(!(!f.length&&s)){p.next=23;break}return p.next=21,Promise.all(n.map(function(C,x){return ym("".concat(e,".").concat(x),C,s,i,o)}));case 21:return v=p.sent,p.abrupt("return",v.reduce(function(C,x){return[].concat(Ae(C),Ae(x))},[]));case 23:return g=le(le({},r),{},{name:e,enum:(r.enum||[]).join(", ")},o),m=f.map(function(C){return typeof C=="string"?c3(C,g):C}),p.abrupt("return",m);case 26:case"end":return p.stop()}},t,null,[[10,15]])})),bm.apply(this,arguments)}function u3(t,e,n,r,i,o){var a=t.join("."),l=n.map(function(c,f){var v=c.validator,g=le(le({},c),{},{ruleIndex:f});return v&&(g.validator=function(m,y,p){var C=!1,x=function(){for(var P=arguments.length,$=new Array(P),_=0;_<P;_++)$[_]=arguments[_];Promise.resolve().then(function(){rr(!C,"Your validator function has already return a promise. `callback` will be ignored."),C||p.apply(void 0,$)})},S=v(m,y,x);C=S&&typeof S.then=="function"&&typeof S.catch=="function",rr(C,"`callback` is deprecated. Please return a promise instead."),C&&S.then(function(){p()}).catch(function(E){p(E||" ")})}),g}).sort(function(c,f){var v=c.warningOnly,g=c.ruleIndex,m=f.warningOnly,y=f.ruleIndex;return!!v==!!m?g-y:v?1:-1}),s;if(i===!0)s=new Promise(function(){var c=Br(pn().mark(function f(v,g){var m,y,p;return pn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:m=0;case 1:if(!(m<l.length)){x.next=12;break}return y=l[m],x.next=5,ym(a,e,y,r,o);case 5:if(p=x.sent,!p.length){x.next=9;break}return g([{errors:p,rule:y}]),x.abrupt("return");case 9:m+=1,x.next=1;break;case 12:v([]);case 13:case"end":return x.stop()}},f)}));return function(f,v){return c.apply(this,arguments)}}());else{var u=l.map(function(c){return ym(a,e,c,r,o).then(function(f){return{errors:f,rule:c}})});s=(i?f3(u):d3(u)).then(function(c){return Promise.reject(c)})}return s.catch(function(c){return c}),s}function d3(t){return wm.apply(this,arguments)}function wm(){return wm=Br(pn().mark(function t(e){return pn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(e).then(function(i){var o,a=(o=[]).concat.apply(o,Ae(i));return a}));case 1:case"end":return r.stop()}},t)})),wm.apply(this,arguments)}function f3(t){return xm.apply(this,arguments)}function xm(){return xm=Br(pn().mark(function t(e){var n;return pn().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=0,i.abrupt("return",new Promise(function(o){e.forEach(function(a){a.then(function(l){l.errors.length&&o([l]),n+=1,n===e.length&&o([])})})}));case 2:case"end":return i.stop()}},t)})),xm.apply(this,arguments)}function nr(t){return hm(t)}function Sx(t,e){var n={};return e.forEach(function(r){var i=fo(t,r);n=Hi(n,r,i)}),n}function ol(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(r){return C2(e,r,n)})}function C2(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!e||!n&&t.length!==e.length?!1:e.every(function(r,i){return t[i]===r})}function h3(t,e){if(t===e)return!0;if(!t&&e||t&&!e||!t||!e||ht(t)!=="object"||ht(e)!=="object")return!1;var n=Object.keys(t),r=Object.keys(e),i=new Set([].concat(n,r));return Ae(i).every(function(o){var a=t[o],l=e[o];return typeof a=="function"&&typeof l=="function"?!0:a===l})}function v3(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&ht(e.target)==="object"&&t in e.target?e.target[t]:e}function Ex(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var i=t[e],o=e-n;return o>0?[].concat(Ae(t.slice(0,n)),[i],Ae(t.slice(n,e)),Ae(t.slice(e+1,r))):o<0?[].concat(Ae(t.slice(0,e)),Ae(t.slice(e+1,n+1)),[i],Ae(t.slice(n+1,r))):t}var g3=["name"],$i=[];function Qv(t,e,n,r,i,o){return typeof t=="function"?t(e,n,"source"in o?{source:o.source}:{}):r!==i}var mp=function(t){Ji(n,t);var e=Zi(n);function n(r){var i;if(Hn(this,n),i=e.call(this,r),oe(At(i),"state",{resetCount:0}),oe(At(i),"cancelRegisterFunc",null),oe(At(i),"mounted",!1),oe(At(i),"touched",!1),oe(At(i),"dirty",!1),oe(At(i),"validatePromise",void 0),oe(At(i),"prevValidating",void 0),oe(At(i),"errors",$i),oe(At(i),"warnings",$i),oe(At(i),"cancelRegister",function(){var s=i.props,u=s.preserve,c=s.isListField,f=s.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(c,u,nr(f)),i.cancelRegisterFunc=null}),oe(At(i),"getNamePath",function(){var s=i.props,u=s.name,c=s.fieldContext,f=c.prefixName,v=f===void 0?[]:f;return u!==void 0?[].concat(Ae(v),Ae(u)):[]}),oe(At(i),"getRules",function(){var s=i.props,u=s.rules,c=u===void 0?[]:u,f=s.fieldContext;return c.map(function(v){return typeof v=="function"?v(f):v})}),oe(At(i),"refresh",function(){i.mounted&&i.setState(function(s){var u=s.resetCount;return{resetCount:u+1}})}),oe(At(i),"metaCache",null),oe(At(i),"triggerMetaEvent",function(s){var u=i.props.onMetaChange;if(u){var c=le(le({},i.getMeta()),{},{destroy:s});ul(i.metaCache,c)||u(c),i.metaCache=c}else i.metaCache=null}),oe(At(i),"onStoreChange",function(s,u,c){var f=i.props,v=f.shouldUpdate,g=f.dependencies,m=g===void 0?[]:g,y=f.onReset,p=c.store,C=i.getNamePath(),x=i.getValue(s),S=i.getValue(p),E=u&&ol(u,C);switch(c.type==="valueUpdate"&&c.source==="external"&&!ul(x,S)&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=$i,i.warnings=$i,i.triggerMetaEvent()),c.type){case"reset":if(!u||E){i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=$i,i.warnings=$i,i.triggerMetaEvent(),y==null||y(),i.refresh();return}break;case"remove":{if(v&&Qv(v,s,p,x,S,c)){i.reRender();return}break}case"setField":{var P=c.data;if(E){"touched"in P&&(i.touched=P.touched),"validating"in P&&!("originRCField"in P)&&(i.validatePromise=P.validating?Promise.resolve([]):null),"errors"in P&&(i.errors=P.errors||$i),"warnings"in P&&(i.warnings=P.warnings||$i),i.dirty=!0,i.triggerMetaEvent(),i.reRender();return}else if("value"in P&&ol(u,C,!0)){i.reRender();return}if(v&&!C.length&&Qv(v,s,p,x,S,c)){i.reRender();return}break}case"dependenciesUpdate":{var $=m.map(nr);if($.some(function(_){return ol(c.relatedFields,_)})){i.reRender();return}break}default:if(E||(!m.length||C.length||v)&&Qv(v,s,p,x,S,c)){i.reRender();return}break}v===!0&&i.reRender()}),oe(At(i),"validateRules",function(s){var u=i.getNamePath(),c=i.getValue(),f=s||{},v=f.triggerName,g=f.validateOnly,m=g===void 0?!1:g,y=Promise.resolve().then(Br(pn().mark(function p(){var C,x,S,E,P,$,_;return pn().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(i.mounted){B.next=2;break}return B.abrupt("return",[]);case 2:if(C=i.props,x=C.validateFirst,S=x===void 0?!1:x,E=C.messageVariables,P=C.validateDebounce,$=i.getRules(),v&&($=$.filter(function(H){return H}).filter(function(H){var k=H.validateTrigger;if(!k)return!0;var T=hm(k);return T.includes(v)})),!(P&&v)){B.next=10;break}return B.next=8,new Promise(function(H){setTimeout(H,P)});case 8:if(i.validatePromise===y){B.next=10;break}return B.abrupt("return",[]);case 10:return _=u3(u,c,$,s,S,E),_.catch(function(H){return H}).then(function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$i;if(i.validatePromise===y){var k;i.validatePromise=null;var T=[],O=[];(k=H.forEach)===null||k===void 0||k.call(H,function(L){var K=L.rule.warningOnly,q=L.errors,J=q===void 0?$i:q;K?O.push.apply(O,Ae(J)):T.push.apply(T,Ae(J))}),i.errors=T,i.warnings=O,i.triggerMetaEvent(),i.reRender()}}),B.abrupt("return",_);case 13:case"end":return B.stop()}},p)})));return m||(i.validatePromise=y,i.dirty=!0,i.errors=$i,i.warnings=$i,i.triggerMetaEvent(),i.reRender()),y}),oe(At(i),"isFieldValidating",function(){return!!i.validatePromise}),oe(At(i),"isFieldTouched",function(){return i.touched}),oe(At(i),"isFieldDirty",function(){if(i.dirty||i.props.initialValue!==void 0)return!0;var s=i.props.fieldContext,u=s.getInternalHooks(Fa),c=u.getInitialValue;return c(i.getNamePath())!==void 0}),oe(At(i),"getErrors",function(){return i.errors}),oe(At(i),"getWarnings",function(){return i.warnings}),oe(At(i),"isListField",function(){return i.props.isListField}),oe(At(i),"isList",function(){return i.props.isList}),oe(At(i),"isPreserve",function(){return i.props.preserve}),oe(At(i),"getMeta",function(){i.prevValidating=i.isFieldValidating();var s={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:i.validatePromise===null};return s}),oe(At(i),"getOnlyChild",function(s){if(typeof s=="function"){var u=i.getMeta();return le(le({},i.getOnlyChild(s(i.getControlled(),u,i.props.fieldContext))),{},{isFunction:!0})}var c=Do(s);return c.length!==1||!b.isValidElement(c[0])?{child:c,isFunction:!1}:{child:c[0],isFunction:!1}}),oe(At(i),"getValue",function(s){var u=i.props.fieldContext.getFieldsValue,c=i.getNamePath();return fo(s||u(!0),c)}),oe(At(i),"getControlled",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=i.props,c=u.name,f=u.trigger,v=u.validateTrigger,g=u.getValueFromEvent,m=u.normalize,y=u.valuePropName,p=u.getValueProps,C=u.fieldContext,x=v!==void 0?v:C.validateTrigger,S=i.getNamePath(),E=C.getInternalHooks,P=C.getFieldsValue,$=E(Fa),_=$.dispatch,M=i.getValue(),B=p||function(L){return oe({},y,L)},H=s[f],k=c!==void 0?B(M):{},T=le(le({},s),k);T[f]=function(){i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var L,K=arguments.length,q=new Array(K),J=0;J<K;J++)q[J]=arguments[J];g?L=g.apply(void 0,q):L=v3.apply(void 0,[y].concat(q)),m&&(L=m(L,M,P(!0))),L!==M&&_({type:"updateValue",namePath:S,value:L}),H&&H.apply(void 0,q)};var O=hm(x||[]);return O.forEach(function(L){var K=T[L];T[L]=function(){K&&K.apply(void 0,arguments);var q=i.props.rules;q&&q.length&&_({type:"validateField",namePath:S,triggerName:L})}}),T}),r.fieldContext){var o=r.fieldContext.getInternalHooks,a=o(Fa),l=a.initEntityValue;l(At(i))}return i}return Vn(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.shouldUpdate,a=i.fieldContext;if(this.mounted=!0,a){var l=a.getInternalHooks,s=l(Fa),u=s.registerField;this.cancelRegisterFunc=u(this)}o===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var i=this.state.resetCount,o=this.props.children,a=this.getOnlyChild(o),l=a.child,s=a.isFunction,u;return s?u=l:b.isValidElement(l)?u=b.cloneElement(l,this.getControlled(l.props)):(rr(!l,"`children` of Field is not validate ReactElement."),u=l),b.createElement(b.Fragment,{key:i},u)}}]),n}(b.Component);oe(mp,"contextType",pl);oe(mp,"defaultProps",{trigger:"onChange",valuePropName:"value"});function S2(t){var e,n=t.name,r=_t(t,g3),i=b.useContext(pl),o=b.useContext(cf),a=n!==void 0?nr(n):void 0,l=(e=r.isListField)!==null&&e!==void 0?e:!!o,s="keep";return l||(s="_".concat((a||[]).join("_"))),b.createElement(mp,Ne({key:s,name:a,isListField:l},r,{fieldContext:i}))}function m3(t){var e=t.name,n=t.initialValue,r=t.children,i=t.rules,o=t.validateTrigger,a=t.isListField,l=b.useContext(pl),s=b.useContext(cf),u=b.useRef({keys:[],id:0}),c=u.current,f=b.useMemo(function(){var y=nr(l.prefixName)||[];return[].concat(Ae(y),Ae(nr(e)))},[l.prefixName,e]),v=b.useMemo(function(){return le(le({},l),{},{prefixName:f})},[l,f]),g=b.useMemo(function(){return{getKey:function(p){var C=f.length,x=p[C];return[c.keys[x],p.slice(C+1)]}}},[f]);if(typeof r!="function")return rr(!1,"Form.List only accepts function as children."),null;var m=function(p,C,x){var S=x.source;return S==="internal"?!1:p!==C};return b.createElement(cf.Provider,{value:g},b.createElement(pl.Provider,{value:v},b.createElement(S2,{name:[],shouldUpdate:m,rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:a??!!s},function(y,p){var C=y.value,x=C===void 0?[]:C,S=y.onChange,E=l.getFieldValue,P=function(){var B=E(f||[]);return B||[]},$={add:function(B,H){var k=P();H>=0&&H<=k.length?(c.keys=[].concat(Ae(c.keys.slice(0,H)),[c.id],Ae(c.keys.slice(H))),S([].concat(Ae(k.slice(0,H)),[B],Ae(k.slice(H))))):(c.keys=[].concat(Ae(c.keys),[c.id]),S([].concat(Ae(k),[B]))),c.id+=1},remove:function(B){var H=P(),k=new Set(Array.isArray(B)?B:[B]);k.size<=0||(c.keys=c.keys.filter(function(T,O){return!k.has(O)}),S(H.filter(function(T,O){return!k.has(O)})))},move:function(B,H){if(B!==H){var k=P();B<0||B>=k.length||H<0||H>=k.length||(c.keys=Ex(c.keys,B,H),S(Ex(k,B,H)))}}},_=x||[];return Array.isArray(_)||(_=[]),r(_.map(function(M,B){var H=c.keys[B];return H===void 0&&(c.keys[B]=c.id,H=c.keys[B],c.id+=1),{name:B,key:H,isListField:!0}}),$,p)})))}function p3(t){var e=!1,n=t.length,r=[];return t.length?new Promise(function(i,o){t.forEach(function(a,l){a.catch(function(s){return e=!0,s}).then(function(s){n-=1,r[l]=s,!(n>0)&&(e&&o(r),i(r))})})}):Promise.resolve([])}var E2="__@field_split__";function Jv(t){return t.map(function(e){return"".concat(ht(e),":").concat(e)}).join(E2)}var zs=function(){function t(){Hn(this,t),oe(this,"kvs",new Map)}return Vn(t,[{key:"set",value:function(n,r){this.kvs.set(Jv(n),r)}},{key:"get",value:function(n){return this.kvs.get(Jv(n))}},{key:"update",value:function(n,r){var i=this.get(n),o=r(i);o?this.set(n,o):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(Jv(n))}},{key:"map",value:function(n){return Ae(this.kvs.entries()).map(function(r){var i=fe(r,2),o=i[0],a=i[1],l=o.split(E2);return n({key:l.map(function(s){var u=s.match(/^([^:]*):(.*)$/),c=fe(u,3),f=c[1],v=c[2];return f==="number"?Number(v):v}),value:a})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var i=r.key,o=r.value;return n[i.join(".")]=o,null}),n}}]),t}(),y3=["name"],b3=Vn(function t(e){var n=this;Hn(this,t),oe(this,"formHooked",!1),oe(this,"forceRootUpdate",void 0),oe(this,"subscribable",!0),oe(this,"store",{}),oe(this,"fieldEntities",[]),oe(this,"initialValues",{}),oe(this,"callbacks",{}),oe(this,"validateMessages",null),oe(this,"preserve",null),oe(this,"lastValidatePromise",null),oe(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),oe(this,"getInternalHooks",function(r){return r===Fa?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(rr(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),oe(this,"useSubscribe",function(r){n.subscribable=r}),oe(this,"prevWithoutPreserves",null),oe(this,"setInitialValues",function(r,i){if(n.initialValues=r||{},i){var o,a=Qs(r,n.store);(o=n.prevWithoutPreserves)===null||o===void 0||o.map(function(l){var s=l.key;a=Hi(a,s,fo(r,s))}),n.prevWithoutPreserves=null,n.updateStore(a)}}),oe(this,"destroyForm",function(r){if(r)n.updateStore({});else{var i=new zs;n.getFieldEntities(!0).forEach(function(o){n.isMergedPreserve(o.isPreserve())||i.set(o.getNamePath(),!0)}),n.prevWithoutPreserves=i}}),oe(this,"getInitialValue",function(r){var i=fo(n.initialValues,r);return r.length?Qs(i):i}),oe(this,"setCallbacks",function(r){n.callbacks=r}),oe(this,"setValidateMessages",function(r){n.validateMessages=r}),oe(this,"setPreserve",function(r){n.preserve=r}),oe(this,"watchList",[]),oe(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(i){return i!==r})}}),oe(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var i=n.getFieldsValue(),o=n.getFieldsValue(!0);n.watchList.forEach(function(a){a(i,o,r)})}}),oe(this,"timeoutId",null),oe(this,"warningUnhooked",function(){}),oe(this,"updateStore",function(r){n.store=r}),oe(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(i){return i.getNamePath().length}):n.fieldEntities}),oe(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=new zs;return n.getFieldEntities(r).forEach(function(o){var a=o.getNamePath();i.set(a,o)}),i}),oe(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var i=n.getFieldsMap(!0);return r.map(function(o){var a=nr(o);return i.get(a)||{INVALIDATE_NAME_PATH:nr(o)}})}),oe(this,"getFieldsValue",function(r,i){n.warningUnhooked();var o,a,l;if(r===!0||Array.isArray(r)?(o=r,a=i):r&&ht(r)==="object"&&(l=r.strict,a=r.filter),o===!0&&!a)return n.store;var s=n.getFieldEntitiesForNamePathList(Array.isArray(o)?o:null),u=[];return s.forEach(function(c){var f,v,g="INVALIDATE_NAME_PATH"in c?c.INVALIDATE_NAME_PATH:c.getNamePath();if(l){var m,y;if((m=(y=c).isList)!==null&&m!==void 0&&m.call(y))return}else if(!o&&(f=(v=c).isListField)!==null&&f!==void 0&&f.call(v))return;if(!a)u.push(g);else{var p="getMeta"in c?c.getMeta():null;a(p)&&u.push(g)}}),Sx(n.store,u.map(nr))}),oe(this,"getFieldValue",function(r){n.warningUnhooked();var i=nr(r);return fo(n.store,i)}),oe(this,"getFieldsError",function(r){n.warningUnhooked();var i=n.getFieldEntitiesForNamePathList(r);return i.map(function(o,a){return o&&!("INVALIDATE_NAME_PATH"in o)?{name:o.getNamePath(),errors:o.getErrors(),warnings:o.getWarnings()}:{name:nr(r[a]),errors:[],warnings:[]}})}),oe(this,"getFieldError",function(r){n.warningUnhooked();var i=nr(r),o=n.getFieldsError([i])[0];return o.errors}),oe(this,"getFieldWarning",function(r){n.warningUnhooked();var i=nr(r),o=n.getFieldsError([i])[0];return o.warnings}),oe(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i[0],l=i[1],s,u=!1;i.length===0?s=null:i.length===1?Array.isArray(a)?(s=a.map(nr),u=!1):(s=null,u=a):(s=a.map(nr),u=l);var c=n.getFieldEntities(!0),f=function(p){return p.isFieldTouched()};if(!s)return u?c.every(function(y){return f(y)||y.isList()}):c.some(f);var v=new zs;s.forEach(function(y){v.set(y,[])}),c.forEach(function(y){var p=y.getNamePath();s.forEach(function(C){C.every(function(x,S){return p[S]===x})&&v.update(C,function(x){return[].concat(Ae(x),[y])})})});var g=function(p){return p.some(f)},m=v.map(function(y){var p=y.value;return p});return u?m.every(g):m.some(g)}),oe(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),oe(this,"isFieldsValidating",function(r){n.warningUnhooked();var i=n.getFieldEntities();if(!r)return i.some(function(a){return a.isFieldValidating()});var o=r.map(nr);return i.some(function(a){var l=a.getNamePath();return ol(o,l)&&a.isFieldValidating()})}),oe(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),oe(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=new zs,o=n.getFieldEntities(!0);o.forEach(function(s){var u=s.props.initialValue,c=s.getNamePath();if(u!==void 0){var f=i.get(c)||new Set;f.add({entity:s,value:u}),i.set(c,f)}});var a=function(u){u.forEach(function(c){var f=c.props.initialValue;if(f!==void 0){var v=c.getNamePath(),g=n.getInitialValue(v);if(g!==void 0)rr(!1,"Form already set 'initialValues' with path '".concat(v.join("."),"'. Field can not overwrite it."));else{var m=i.get(v);if(m&&m.size>1)rr(!1,"Multiple Field with path '".concat(v.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(m){var y=n.getFieldValue(v),p=c.isListField();!p&&(!r.skipExist||y===void 0)&&n.updateStore(Hi(n.store,v,Ae(m)[0].value))}}}})},l;r.entities?l=r.entities:r.namePathList?(l=[],r.namePathList.forEach(function(s){var u=i.get(s);if(u){var c;(c=l).push.apply(c,Ae(Ae(u).map(function(f){return f.entity})))}})):l=o,a(l)}),oe(this,"resetFields",function(r){n.warningUnhooked();var i=n.store;if(!r){n.updateStore(Qs(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(i,null,{type:"reset"}),n.notifyWatch();return}var o=r.map(nr);o.forEach(function(a){var l=n.getInitialValue(a);n.updateStore(Hi(n.store,a,l))}),n.resetWithFieldInitialValue({namePathList:o}),n.notifyObservers(i,o,{type:"reset"}),n.notifyWatch(o)}),oe(this,"setFields",function(r){n.warningUnhooked();var i=n.store,o=[];r.forEach(function(a){var l=a.name,s=_t(a,y3),u=nr(l);o.push(u),"value"in s&&n.updateStore(Hi(n.store,u,s.value)),n.notifyObservers(i,[u],{type:"setField",data:a})}),n.notifyWatch(o)}),oe(this,"getFields",function(){var r=n.getFieldEntities(!0),i=r.map(function(o){var a=o.getNamePath(),l=o.getMeta(),s=le(le({},l),{},{name:a,value:n.getFieldValue(a)});return Object.defineProperty(s,"originRCField",{value:!0}),s});return i}),oe(this,"initEntityValue",function(r){var i=r.props.initialValue;if(i!==void 0){var o=r.getNamePath(),a=fo(n.store,o);a===void 0&&n.updateStore(Hi(n.store,o,i))}}),oe(this,"isMergedPreserve",function(r){var i=r!==void 0?r:n.preserve;return i??!0}),oe(this,"registerField",function(r){n.fieldEntities.push(r);var i=r.getNamePath();if(n.notifyWatch([i]),r.props.initialValue!==void 0){var o=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(o,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(a,l){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(f){return f!==r}),!n.isMergedPreserve(l)&&(!a||s.length>1)){var u=a?void 0:n.getInitialValue(i);if(i.length&&n.getFieldValue(i)!==u&&n.fieldEntities.every(function(f){return!C2(f.getNamePath(),i)})){var c=n.store;n.updateStore(Hi(c,i,u,!0)),n.notifyObservers(c,[i],{type:"remove"}),n.triggerDependenciesUpdate(c,i)}}n.notifyWatch([i])}}),oe(this,"dispatch",function(r){switch(r.type){case"updateValue":{var i=r.namePath,o=r.value;n.updateValue(i,o);break}case"validateField":{var a=r.namePath,l=r.triggerName;n.validateFields([a],{triggerName:l});break}}}),oe(this,"notifyObservers",function(r,i,o){if(n.subscribable){var a=le(le({},o),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(l){var s=l.onStoreChange;s(r,i,a)})}else n.forceRootUpdate()}),oe(this,"triggerDependenciesUpdate",function(r,i){var o=n.getDependencyChildrenFields(i);return o.length&&n.validateFields(o),n.notifyObservers(r,o,{type:"dependenciesUpdate",relatedFields:[i].concat(Ae(o))}),o}),oe(this,"updateValue",function(r,i){var o=nr(r),a=n.store;n.updateStore(Hi(n.store,o,i)),n.notifyObservers(a,[o],{type:"valueUpdate",source:"internal"}),n.notifyWatch([o]);var l=n.triggerDependenciesUpdate(a,o),s=n.callbacks.onValuesChange;if(s){var u=Sx(n.store,[o]);s(u,n.getFieldsValue())}n.triggerOnFieldsChange([o].concat(Ae(l)))}),oe(this,"setFieldsValue",function(r){n.warningUnhooked();var i=n.store;if(r){var o=Qs(n.store,r);n.updateStore(o)}n.notifyObservers(i,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),oe(this,"setFieldValue",function(r,i){n.setFields([{name:r,value:i,errors:[],warnings:[]}])}),oe(this,"getDependencyChildrenFields",function(r){var i=new Set,o=[],a=new zs;n.getFieldEntities().forEach(function(s){var u=s.props.dependencies;(u||[]).forEach(function(c){var f=nr(c);a.update(f,function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return v.add(s),v})})});var l=function s(u){var c=a.get(u)||new Set;c.forEach(function(f){if(!i.has(f)){i.add(f);var v=f.getNamePath();f.isFieldDirty()&&v.length&&(o.push(v),s(v))}})};return l(r),o}),oe(this,"triggerOnFieldsChange",function(r,i){var o=n.callbacks.onFieldsChange;if(o){var a=n.getFields();if(i){var l=new zs;i.forEach(function(u){var c=u.name,f=u.errors;l.set(c,f)}),a.forEach(function(u){u.errors=l.get(u.name)||u.errors})}var s=a.filter(function(u){var c=u.name;return ol(r,c)});s.length&&o(s,a)}}),oe(this,"validateFields",function(r,i){n.warningUnhooked();var o,a;Array.isArray(r)||typeof r=="string"||typeof i=="string"?(o=r,a=i):a=r;var l=!!o,s=l?o.map(nr):[],u=[],c=String(Date.now()),f=new Set,v=a||{},g=v.recursive,m=v.dirty;n.getFieldEntities(!0).forEach(function(x){if(l||s.push(x.getNamePath()),!(!x.props.rules||!x.props.rules.length)&&!(m&&!x.isFieldDirty())){var S=x.getNamePath();if(f.add(S.join(c)),!l||ol(s,S,g)){var E=x.validateRules(le({validateMessages:le(le({},x2),n.validateMessages)},a));u.push(E.then(function(){return{name:S,errors:[],warnings:[]}}).catch(function(P){var $,_=[],M=[];return($=P.forEach)===null||$===void 0||$.call(P,function(B){var H=B.rule.warningOnly,k=B.errors;H?M.push.apply(M,Ae(k)):_.push.apply(_,Ae(k))}),_.length?Promise.reject({name:S,errors:_,warnings:M}):{name:S,errors:_,warnings:M}}))}}});var y=p3(u);n.lastValidatePromise=y,y.catch(function(x){return x}).then(function(x){var S=x.map(function(E){var P=E.name;return P});n.notifyObservers(n.store,S,{type:"validateFinish"}),n.triggerOnFieldsChange(S,x)});var p=y.then(function(){return n.lastValidatePromise===y?Promise.resolve(n.getFieldsValue(s)):Promise.reject([])}).catch(function(x){var S=x.filter(function(E){return E&&E.errors.length});return Promise.reject({values:n.getFieldsValue(s),errorFields:S,outOfDate:n.lastValidatePromise!==y})});p.catch(function(x){return x});var C=s.filter(function(x){return f.has(x.join(c))});return n.triggerOnFieldsChange(C),p}),oe(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var i=n.callbacks.onFinish;if(i)try{i(r)}catch(o){console.error(o)}}).catch(function(r){var i=n.callbacks.onFinishFailed;i&&i(r)})}),this.forceRootUpdate=e});function R2(t){var e=b.useRef(),n=b.useState({}),r=fe(n,2),i=r[1];if(!e.current)if(t)e.current=t;else{var o=function(){i({})},a=new b3(o);e.current=a.getForm()}return[e.current]}var Cm=b.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),w3=function(e){var n=e.validateMessages,r=e.onFormChange,i=e.onFormFinish,o=e.children,a=b.useContext(Cm),l=b.useRef({});return b.createElement(Cm.Provider,{value:le(le({},a),{},{validateMessages:le(le({},a.validateMessages),n),triggerFormChange:function(u,c){r&&r(u,{changedFields:c,forms:l.current}),a.triggerFormChange(u,c)},triggerFormFinish:function(u,c){i&&i(u,{values:c,forms:l.current}),a.triggerFormFinish(u,c)},registerForm:function(u,c){u&&(l.current=le(le({},l.current),{},oe({},u,c))),a.registerForm(u,c)},unregisterForm:function(u){var c=le({},l.current);delete c[u],l.current=c,a.unregisterForm(u)}})},o)},x3=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],C3=function(e,n){var r=e.name,i=e.initialValues,o=e.fields,a=e.form,l=e.preserve,s=e.children,u=e.component,c=u===void 0?"form":u,f=e.validateMessages,v=e.validateTrigger,g=v===void 0?"onChange":v,m=e.onValuesChange,y=e.onFieldsChange,p=e.onFinish,C=e.onFinishFailed,x=e.clearOnDestroy,S=_t(e,x3),E=b.useRef(null),P=b.useContext(Cm),$=R2(a),_=fe($,1),M=_[0],B=M.getInternalHooks(Fa),H=B.useSubscribe,k=B.setInitialValues,T=B.setCallbacks,O=B.setValidateMessages,L=B.setPreserve,K=B.destroyForm;b.useImperativeHandle(n,function(){return le(le({},M),{},{nativeElement:E.current})}),b.useEffect(function(){return P.registerForm(r,M),function(){P.unregisterForm(r)}},[P,M,r]),O(le(le({},P.validateMessages),f)),T({onValuesChange:m,onFieldsChange:function(Y){if(P.triggerFormChange(r,Y),y){for(var Q=arguments.length,ne=new Array(Q>1?Q-1:0),ie=1;ie<Q;ie++)ne[ie-1]=arguments[ie];y.apply(void 0,[Y].concat(ne))}},onFinish:function(Y){P.triggerFormFinish(r,Y),p&&p(Y)},onFinishFailed:C}),L(l);var q=b.useRef(null);k(i,!q.current),q.current||(q.current=!0),b.useEffect(function(){return function(){return K(x)}},[]);var J,V=typeof s=="function";if(V){var z=M.getFieldsValue(!0);J=s(z,M)}else J=s;H(!V);var D=b.useRef();b.useEffect(function(){h3(D.current||[],o||[])||M.setFields(o||[]),D.current=o},[o,M]);var U=b.useMemo(function(){return le(le({},M),{},{validateTrigger:g})},[M,g]),W=b.createElement(cf.Provider,{value:null},b.createElement(pl.Provider,{value:U},J));return c===!1?W:b.createElement(c,Ne({},S,{ref:E,onSubmit:function(Y){Y.preventDefault(),Y.stopPropagation(),M.submit()},onReset:function(Y){var Q;Y.preventDefault(),M.resetFields(),(Q=S.onReset)===null||Q===void 0||Q.call(S,Y)}}),W)};function Rx(t){try{return JSON.stringify(t)}catch{return Math.random()}}function S3(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=i===void 0?{}:i,a=_5(o)?{form:o}:o,l=a.form,s=b.useState(),u=fe(s,2),c=u[0],f=u[1],v=b.useMemo(function(){return Rx(c)},[c]),g=b.useRef(v);g.current=v;var m=b.useContext(pl),y=l||m,p=y&&y._init,C=nr(r),x=b.useRef(C);return x.current=C,b.useEffect(function(){if(p){var S=y.getFieldsValue,E=y.getInternalHooks,P=E(Fa),$=P.registerWatch,_=function(k,T){var O=a.preserve?T:k;return typeof r=="function"?r(O):fo(O,x.current)},M=$(function(H,k){var T=_(H,k),O=Rx(T);g.current!==O&&(g.current=O,f(T))}),B=_(S(),S(!0));return c!==B&&f(B),M}},[p]),c}var E3=b.forwardRef(C3),Gc=E3;Gc.FormProvider=w3;Gc.Field=S2;Gc.List=m3;Gc.useForm=R2;Gc.useWatch=S3;const Yi=b.createContext({}),R3=({children:t,status:e,override:n})=>{const r=b.useContext(Yi),i=b.useMemo(()=>{const o=Object.assign({},r);return n&&delete o.isFormItemInput,e&&(delete o.status,delete o.hasFeedback,delete o.feedbackIcon),o},[e,n,r]);return b.createElement(Yi.Provider,{value:i},t)},I3=b.createContext(void 0);function P3(t,e,n){const{focusElCls:r,focus:i,borderElCls:o}=n,a=o?"> *":"",l=["hover",i?"focus":null,"active"].filter(Boolean).map(s=>`&:${s} ${a}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function k3(t,e,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Xc(t,e={focus:!0}){const{componentCls:n}=t,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},P3(t,r,e)),k3(n,r,e))}}function Yc(t){return bn(t,{inputAffixPadding:t.paddingXXS})}const Qc=t=>{const{controlHeight:e,fontSize:n,lineHeight:r,lineWidth:i,controlHeightSM:o,controlHeightLG:a,fontSizeLG:l,lineHeightLG:s,paddingSM:u,controlPaddingHorizontalSM:c,controlPaddingHorizontal:f,colorFillAlter:v,colorPrimaryHover:g,colorPrimary:m,controlOutlineWidth:y,controlOutline:p,colorErrorOutline:C,colorWarningOutline:x,colorBgContainer:S,inputFontSize:E,inputFontSizeLG:P,inputFontSizeSM:$}=t,_=E||n,M=$||_,B=P||l,H=Math.round((e-_*r)/2*10)/10-i,k=Math.round((o-M*r)/2*10)/10-i,T=Math.ceil((a-B*s)/2*10)/10-i;return{paddingBlock:Math.max(H,0),paddingBlockSM:Math.max(k,0),paddingBlockLG:Math.max(T,0),paddingInline:u-i,paddingInlineSM:c-i,paddingInlineLG:f-i,addonBg:v,activeBorderColor:m,hoverBorderColor:g,activeShadow:`0 0 0 ${y}px ${p}`,errorActiveShadow:`0 0 0 ${y}px ${C}`,warningActiveShadow:`0 0 0 ${y}px ${x}`,hoverBg:S,activeBg:S,inputFontSize:_,inputFontSizeLG:B,inputFontSizeSM:M}},$3=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),pp=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},$3(bn(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),I2=(t,e)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:t.activeBg}}),Ix=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},I2(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:e.borderColor}}),P2=(t,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I2(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},pp(t))}),Ix(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),Ix(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),Px=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),k2=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Px(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),Px(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},pp(t))}})}),$2=(t,e)=>{const{componentCls:n}=t;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:t.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:t.colorWarning}}},e)}},T2=(t,e)=>{var n;return{background:e.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:(n=e==null?void 0:e.inputColor)!==null&&n!==void 0?n:"unset"},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:t.activeBg}}},kx=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},T2(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}})}),_2=(t,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},T2(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},pp(t))}),kx(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),kx(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),e)}),$x=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),A2=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group-addon`]:{background:t.colorFillTertiary,"&:last-child":{position:"static"}}},$x(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),$x(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),O2=(t,e)=>({background:t.colorBgContainer,borderWidth:`${ye(t.lineWidth)} 0`,borderStyle:`${t.lineType} none`,borderColor:`transparent transparent ${e.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${e.borderColor} transparent`,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${e.borderColor} transparent`,outline:0,backgroundColor:t.activeBg}}),Tx=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},O2(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:`transparent transparent ${e.borderColor} transparent`}}),M2=(t,e)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},O2(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:{color:t.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${t.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),Tx(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),Tx(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),N2=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),L2=t=>{const{paddingBlockLG:e,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:i}=t;return{padding:`${ye(e)} ${ye(i)}`,fontSize:t.inputFontSizeLG,lineHeight:n,borderRadius:r}},D2=t=>({padding:`${ye(t.paddingBlockSM)} ${ye(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),Lf=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${ye(t.paddingBlock)} ${ye(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},N2(t.colorTextPlaceholder)),{"&-lg":Object.assign({},L2(t)),"&-sm":Object.assign({},D2(t)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),F2=t=>{const{componentCls:e,antCls:n}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},L2(t)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},D2(t)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${ye(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${ye(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${ye(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${ye(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${ye(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},ep()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[e]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${e},
      & > ${n}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${e},
      & > ${n}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${e},
      & > ${n}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${n}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},T3=t=>{const{componentCls:e,controlHeightSM:n,lineWidth:r,calc:i}=t,a=i(n).sub(i(r).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),Lf(t)),P2(t)),_2(t)),$2(t)),M2(t)),{'&[type="color"]':{height:t.controlHeight,[`&${e}-lg`]:{height:t.controlHeightLG},[`&${e}-sm`]:{height:n,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}})}},_3=t=>{const{componentCls:e}=t;return{[`${e}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:t.colorIcon},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${ye(t.inputAffixPadding)}`}}}},A3=t=>{const{componentCls:e,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:o,colorIconHover:a,iconCls:l}=t,s=`${e}-affix-wrapper`,u=`${e}-affix-wrapper-disabled`;return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},Lf(t)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:r,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),_3(t)),{[`${l}${e}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:a}}}),[`${e}-underlined`]:{borderRadius:0},[u]:{[`${l}${e}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},O3=t=>{const{componentCls:e,borderRadiusLG:n,borderRadiusSM:r}=t;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},sr(t)),F2(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:n,fontSize:t.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:r}}},k2(t)),A2(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},M3=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-search`;return{[r]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${r}-button:not(${n}-btn-color-primary):not(${n}-btn-variant-text)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:t.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-color-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${n}-btn-loading::before`]:{inset:0}}}},[`${r}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${r}-button`]:{height:t.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${r}-button`]:{height:t.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},N3=t=>{const{componentCls:e}=t;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:t.colorError}}}},B2=lr(["Input","Shared"],t=>{const e=bn(t,Yc(t));return[T3(e),A3(e)]},Qc,{resetFont:!1}),j2=lr(["Input","Component"],t=>{const e=bn(t,Yc(t));return[O3(e),M3(e),N3(e),Xc(e)]},Qc,{resetFont:!1}),L3=t=>{const{getPrefixCls:e,direction:n}=b.useContext(un),{prefixCls:r,className:i}=t,o=e("input-group",r),a=e("input"),[l,s,u]=j2(a),c=me(o,u,{[`${o}-lg`]:t.size==="large",[`${o}-sm`]:t.size==="small",[`${o}-compact`]:t.compact,[`${o}-rtl`]:n==="rtl"},s,i),f=b.useContext(Yi),v=b.useMemo(()=>Object.assign(Object.assign({},f),{isFormItemInput:!1}),[f]);return l(b.createElement("span",{className:c,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},b.createElement(Yi.Provider,{value:v},t.children)))};function D3(t){return!!(t.addonBefore||t.addonAfter)}function F3(t){return!!(t.prefix||t.suffix||t.allowClear)}function _x(t,e,n){var r=e.cloneNode(!0),i=Object.create(t,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(r.selectionStart=e.selectionStart,r.selectionEnd=e.selectionEnd),r.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},i}function uf(t,e,n,r){if(n){var i=e;if(e.type==="click"){i=_x(e,t,""),n(i);return}if(t.type!=="file"&&r!==void 0){i=_x(e,t,r),n(i);return}n(i)}}function yp(t,e){if(t){t.focus(e);var n=e||{},r=n.cursor;if(r){var i=t.value.length;switch(r){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(i,i);break;default:t.setSelectionRange(0,i)}}}}var bp=ue.forwardRef(function(t,e){var n,r,i,o=t.inputElement,a=t.children,l=t.prefixCls,s=t.prefix,u=t.suffix,c=t.addonBefore,f=t.addonAfter,v=t.className,g=t.style,m=t.disabled,y=t.readOnly,p=t.focused,C=t.triggerFocus,x=t.allowClear,S=t.value,E=t.handleReset,P=t.hidden,$=t.classes,_=t.classNames,M=t.dataAttrs,B=t.styles,H=t.components,k=t.onClear,T=a??o,O=(H==null?void 0:H.affixWrapper)||"span",L=(H==null?void 0:H.groupWrapper)||"span",K=(H==null?void 0:H.wrapper)||"span",q=(H==null?void 0:H.groupAddon)||"span",J=b.useRef(null),V=function(ae){var de;(de=J.current)!==null&&de!==void 0&&de.contains(ae.target)&&(C==null||C())},z=F3(t),D=b.cloneElement(T,{value:S,className:me((n=T.props)===null||n===void 0?void 0:n.className,!z&&(_==null?void 0:_.variant))||null}),U=b.useRef(null);if(ue.useImperativeHandle(e,function(){return{nativeElement:U.current||J.current}}),z){var W=null;if(x){var X=!m&&!y&&S,Y="".concat(l,"-clear-icon"),Q=ht(x)==="object"&&x!==null&&x!==void 0&&x.clearIcon?x.clearIcon:"✖";W=ue.createElement("button",{type:"button",tabIndex:-1,onClick:function(ae){E==null||E(ae),k==null||k()},onMouseDown:function(ae){return ae.preventDefault()},className:me(Y,oe(oe({},"".concat(Y,"-hidden"),!X),"".concat(Y,"-has-suffix"),!!u))},Q)}var ne="".concat(l,"-affix-wrapper"),ie=me(ne,oe(oe(oe(oe(oe({},"".concat(l,"-disabled"),m),"".concat(ne,"-disabled"),m),"".concat(ne,"-focused"),p),"".concat(ne,"-readonly"),y),"".concat(ne,"-input-with-clear-btn"),u&&x&&S),$==null?void 0:$.affixWrapper,_==null?void 0:_.affixWrapper,_==null?void 0:_.variant),re=(u||x)&&ue.createElement("span",{className:me("".concat(l,"-suffix"),_==null?void 0:_.suffix),style:B==null?void 0:B.suffix},W,u);D=ue.createElement(O,Ne({className:ie,style:B==null?void 0:B.affixWrapper,onClick:V},M==null?void 0:M.affixWrapper,{ref:J}),s&&ue.createElement("span",{className:me("".concat(l,"-prefix"),_==null?void 0:_.prefix),style:B==null?void 0:B.prefix},s),D,re)}if(D3(t)){var I="".concat(l,"-group"),A="".concat(I,"-addon"),F="".concat(I,"-wrapper"),G=me("".concat(l,"-wrapper"),I,$==null?void 0:$.wrapper,_==null?void 0:_.wrapper),ee=me(F,oe({},"".concat(F,"-disabled"),m),$==null?void 0:$.group,_==null?void 0:_.groupWrapper);D=ue.createElement(L,{className:ee,ref:U},ue.createElement(K,{className:G},c&&ue.createElement(q,{className:A},c),D,f&&ue.createElement(q,{className:A},f)))}return ue.cloneElement(D,{className:me((r=D.props)===null||r===void 0?void 0:r.className,v)||null,style:le(le({},(i=D.props)===null||i===void 0?void 0:i.style),g),hidden:P})}),B3=["show"];function z2(t,e){return b.useMemo(function(){var n={};e&&(n.show=ht(e)==="object"&&e.formatter?e.formatter:!!e),n=le(le({},n),t);var r=n,i=r.show,o=_t(r,B3);return le(le({},o),{},{show:!!i,showFormatter:typeof i=="function"?i:void 0,strategy:o.strategy||function(a){return a.length}})},[t,e])}var j3=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],z3=b.forwardRef(function(t,e){var n=t.autoComplete,r=t.onChange,i=t.onFocus,o=t.onBlur,a=t.onPressEnter,l=t.onKeyDown,s=t.onKeyUp,u=t.prefixCls,c=u===void 0?"rc-input":u,f=t.disabled,v=t.htmlSize,g=t.className,m=t.maxLength,y=t.suffix,p=t.showCount,C=t.count,x=t.type,S=x===void 0?"text":x,E=t.classes,P=t.classNames,$=t.styles,_=t.onCompositionStart,M=t.onCompositionEnd,B=_t(t,j3),H=b.useState(!1),k=fe(H,2),T=k[0],O=k[1],L=b.useRef(!1),K=b.useRef(!1),q=b.useRef(null),J=b.useRef(null),V=function(be){q.current&&yp(q.current,be)},z=Mn(t.defaultValue,{value:t.value}),D=fe(z,2),U=D[0],W=D[1],X=U==null?"":String(U),Y=b.useState(null),Q=fe(Y,2),ne=Q[0],ie=Q[1],re=z2(C,p),I=re.max||m,A=re.strategy(X),F=!!I&&A>I;b.useImperativeHandle(e,function(){var Re;return{focus:V,blur:function(){var Le;(Le=q.current)===null||Le===void 0||Le.blur()},setSelectionRange:function(Le,He,it){var qe;(qe=q.current)===null||qe===void 0||qe.setSelectionRange(Le,He,it)},select:function(){var Le;(Le=q.current)===null||Le===void 0||Le.select()},input:q.current,nativeElement:((Re=J.current)===null||Re===void 0?void 0:Re.nativeElement)||q.current}}),b.useEffect(function(){K.current&&(K.current=!1),O(function(Re){return Re&&f?!1:Re})},[f]);var G=function(be,Le,He){var it=Le;if(!L.current&&re.exceedFormatter&&re.max&&re.strategy(Le)>re.max){if(it=re.exceedFormatter(Le,{max:re.max}),Le!==it){var qe,De;ie([((qe=q.current)===null||qe===void 0?void 0:qe.selectionStart)||0,((De=q.current)===null||De===void 0?void 0:De.selectionEnd)||0])}}else if(He.source==="compositionEnd")return;W(it),q.current&&uf(q.current,be,r,it)};b.useEffect(function(){if(ne){var Re;(Re=q.current)===null||Re===void 0||Re.setSelectionRange.apply(Re,Ae(ne))}},[ne]);var ee=function(be){G(be,be.target.value,{source:"change"})},te=function(be){L.current=!1,G(be,be.currentTarget.value,{source:"compositionEnd"}),M==null||M(be)},ae=function(be){a&&be.key==="Enter"&&!K.current&&(K.current=!0,a(be)),l==null||l(be)},de=function(be){be.key==="Enter"&&(K.current=!1),s==null||s(be)},he=function(be){O(!0),i==null||i(be)},pe=function(be){K.current&&(K.current=!1),O(!1),o==null||o(be)},we=function(be){W(""),V(),q.current&&uf(q.current,be,r)},_e=F&&"".concat(c,"-out-of-range"),$e=function(){var be=yi(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return ue.createElement("input",Ne({autoComplete:n},be,{onChange:ee,onFocus:he,onBlur:pe,onKeyDown:ae,onKeyUp:de,className:me(c,oe({},"".concat(c,"-disabled"),f),P==null?void 0:P.input),style:$==null?void 0:$.input,ref:q,size:v,type:S,onCompositionStart:function(He){L.current=!0,_==null||_(He)},onCompositionEnd:te}))},Me=function(){var be=Number(I)>0;if(y||re.show){var Le=re.showFormatter?re.showFormatter({value:X,count:A,maxLength:I}):"".concat(A).concat(be?" / ".concat(I):"");return ue.createElement(ue.Fragment,null,re.show&&ue.createElement("span",{className:me("".concat(c,"-show-count-suffix"),oe({},"".concat(c,"-show-count-has-suffix"),!!y),P==null?void 0:P.count),style:le({},$==null?void 0:$.count)},Le),y)}return null};return ue.createElement(bp,Ne({},B,{prefixCls:c,className:me(g,_e),handleReset:we,value:X,focused:T,triggerFocus:V,suffix:Me(),disabled:f,classes:E,classNames:P,styles:$,ref:J}),$e())});const H2=b.createContext(null),rs=(t,e)=>{const n=b.useContext(H2),r=b.useMemo(()=>{if(!n)return"";const{compactDirection:i,isFirstItem:o,isLastItem:a}=n,l=i==="vertical"?"-vertical-":"-";return me(`${t}-compact${l}item`,{[`${t}-compact${l}first-item`]:o,[`${t}-compact${l}last-item`]:a,[`${t}-compact${l}item-rtl`]:e==="rtl"})},[t,e,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},H3=t=>{const{children:e}=t;return b.createElement(H2.Provider,{value:null},e)},yl=t=>{const{space:e,form:n,children:r}=t;if(r==null)return null;let i=r;return n&&(i=ue.createElement(R3,{override:!0,status:!0},i)),e&&(i=ue.createElement(H3,null,i)),i},V2=t=>{let e;return typeof t=="object"&&(t!=null&&t.clearIcon)?e=t:t&&(e={clearIcon:ue.createElement(Rf,null)}),e};function Ja(t,e,n){return me({[`${t}-status-success`]:e==="success",[`${t}-status-warning`]:e==="warning",[`${t}-status-error`]:e==="error",[`${t}-status-validating`]:e==="validating",[`${t}-has-feedback`]:n})}const Jc=(t,e)=>e||t,Df=(t,e,n=void 0)=>{var r,i;const{variant:o,[t]:a}=b.useContext(un),l=b.useContext(I3),s=a==null?void 0:a.variant;let u;typeof e<"u"?u=e:n===!1?u="borderless":u=(i=(r=l??s)!==null&&r!==void 0?r:o)!==null&&i!==void 0?i:"outlined";const c=Y_.includes(u);return[u,c]};function W2(t,e){const n=b.useRef([]),r=()=>{n.current.push(setTimeout(()=>{var i,o,a,l;!((i=t.current)===null||i===void 0)&&i.input&&((o=t.current)===null||o===void 0?void 0:o.input.getAttribute("type"))==="password"&&(!((a=t.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((l=t.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return b.useEffect(()=>(e&&r(),()=>n.current.forEach(i=>{i&&clearTimeout(i)})),[]),r}function V3(t){return!!(t.prefix||t.suffix||t.allowClear||t.showCount)}var W3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Zc=b.forwardRef((t,e)=>{const{prefixCls:n,bordered:r=!0,status:i,size:o,disabled:a,onBlur:l,onFocus:s,suffix:u,allowClear:c,addonAfter:f,addonBefore:v,className:g,style:m,styles:y,rootClassName:p,onChange:C,classNames:x,variant:S}=t,E=W3(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:P,direction:$,allowClear:_,autoComplete:M,className:B,style:H,classNames:k,styles:T}=eo("input"),O=P("input",n),L=b.useRef(null),K=ma(O),[q,J,V]=B2(O,p),[z]=j2(O,K),{compactSize:D,compactItemClassnames:U}=rs(O,$),W=bi(pe=>{var we;return(we=o??D)!==null&&we!==void 0?we:pe}),X=ue.useContext(pi),Y=a??X,{status:Q,hasFeedback:ne,feedbackIcon:ie}=b.useContext(Yi),re=Jc(Q,i),I=V3(t)||!!ne;b.useRef(I);const A=W2(L,!0),F=pe=>{A(),l==null||l(pe)},G=pe=>{A(),s==null||s(pe)},ee=pe=>{A(),C==null||C(pe)},te=(ne||u)&&ue.createElement(ue.Fragment,null,u,ne&&ie),ae=V2(c??_),[de,he]=Df("input",S,r);return q(z(ue.createElement(z3,Object.assign({ref:ti(e,L),prefixCls:O,autoComplete:M},E,{disabled:Y,onBlur:F,onFocus:G,style:Object.assign(Object.assign({},H),m),styles:Object.assign(Object.assign({},T),y),suffix:te,allowClear:ae,className:me(g,p,V,K,U,B),onChange:ee,addonBefore:v&&ue.createElement(yl,{form:!0,space:!0},v),addonAfter:f&&ue.createElement(yl,{form:!0,space:!0},f),classNames:Object.assign(Object.assign(Object.assign({},x),k),{input:me({[`${O}-sm`]:W==="small",[`${O}-lg`]:W==="large",[`${O}-rtl`]:$==="rtl"},x==null?void 0:x.input,k.input,J),variant:me({[`${O}-${de}`]:he},Ja(O,re)),affixWrapper:me({[`${O}-affix-wrapper-sm`]:W==="small",[`${O}-affix-wrapper-lg`]:W==="large",[`${O}-affix-wrapper-rtl`]:$==="rtl"},J),wrapper:me({[`${O}-group-rtl`]:$==="rtl"},J),groupWrapper:me({[`${O}-group-wrapper-sm`]:W==="small",[`${O}-group-wrapper-lg`]:W==="large",[`${O}-group-wrapper-rtl`]:$==="rtl",[`${O}-group-wrapper-${de}`]:he},Ja(`${O}-group-wrapper`,re,ne),J)})}))))}),U3=t=>{const{componentCls:e,paddingXS:n}=t;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,[`${e}-input-wrapper`]:{position:"relative",[`${e}-mask-icon`]:{position:"absolute",zIndex:"1",top:"50%",right:"50%",transform:"translate(50%, -50%)",pointerEvents:"none"},[`${e}-mask-input`]:{color:"transparent",caretColor:"var(--ant-color-text)"},[`${e}-mask-input[type=number]::-webkit-inner-spin-button`]:{"-webkit-appearance":"none",margin:0},[`${e}-mask-input[type=number]`]:{"-moz-appearance":"textfield"}},"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:t.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:t.calc(t.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:t.paddingXS}}}},q3=lr(["Input","OTP"],t=>{const e=bn(t,Yc(t));return[U3(e)]},Qc);var K3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const G3=b.forwardRef((t,e)=>{const{className:n,value:r,onChange:i,onActiveChange:o,index:a,mask:l}=t,s=K3(t,["className","value","onChange","onActiveChange","index","mask"]),{getPrefixCls:u}=b.useContext(un),c=u("otp"),f=typeof l=="string"?l:r,v=b.useRef(null);b.useImperativeHandle(e,()=>v.current);const g=C=>{i(a,C.target.value)},m=()=>{Qt(()=>{var C;const x=(C=v.current)===null||C===void 0?void 0:C.input;document.activeElement===x&&x&&x.select()})},y=C=>{const{key:x,ctrlKey:S,metaKey:E}=C;x==="ArrowLeft"?o(a-1):x==="ArrowRight"?o(a+1):x==="z"&&(S||E)&&C.preventDefault(),m()},p=C=>{C.key==="Backspace"&&!r&&o(a-1),m()};return b.createElement("span",{className:`${c}-input-wrapper`,role:"presentation"},l&&r!==""&&r!==void 0&&b.createElement("span",{className:`${c}-mask-icon`,"aria-hidden":"true"},f),b.createElement(Zc,Object.assign({"aria-label":`OTP Input ${a+1}`,type:l===!0?"password":"text"},s,{ref:v,value:r,onInput:g,onFocus:m,onKeyDown:y,onKeyUp:p,onMouseDown:m,onMouseUp:m,className:me(n,{[`${c}-mask-input`]:l})})))});var X3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function xd(t){return(t||"").split("")}const Y3=t=>{const{index:e,prefixCls:n,separator:r}=t,i=typeof r=="function"?r(e):r;return i?b.createElement("span",{className:`${n}-separator`},i):null},Q3=b.forwardRef((t,e)=>{const{prefixCls:n,length:r=6,size:i,defaultValue:o,value:a,onChange:l,formatter:s,separator:u,variant:c,disabled:f,status:v,autoFocus:g,mask:m,type:y,onInput:p,inputMode:C}=t,x=X3(t,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:S,direction:E}=b.useContext(un),P=S("otp",n),$=Lo(x,{aria:!0,data:!0,attr:!0}),[_,M,B]=q3(P),H=bi(Y=>i??Y),k=b.useContext(Yi),T=Jc(k.status,v),O=b.useMemo(()=>Object.assign(Object.assign({},k),{status:T,hasFeedback:!1,feedbackIcon:null}),[k,T]),L=b.useRef(null),K=b.useRef({});b.useImperativeHandle(e,()=>({focus:()=>{var Y;(Y=K.current[0])===null||Y===void 0||Y.focus()},blur:()=>{var Y;for(let Q=0;Q<r;Q+=1)(Y=K.current[Q])===null||Y===void 0||Y.blur()},nativeElement:L.current}));const q=Y=>s?s(Y):Y,[J,V]=b.useState(()=>xd(q(o||"")));b.useEffect(()=>{a!==void 0&&V(xd(a))},[a]);const z=In(Y=>{V(Y),p&&p(Y),l&&Y.length===r&&Y.every(Q=>Q)&&Y.some((Q,ne)=>J[ne]!==Q)&&l(Y.join(""))}),D=In((Y,Q)=>{let ne=Ae(J);for(let re=0;re<Y;re+=1)ne[re]||(ne[re]="");Q.length<=1?ne[Y]=Q:ne=ne.slice(0,Y).concat(xd(Q)),ne=ne.slice(0,r);for(let re=ne.length-1;re>=0&&!ne[re];re-=1)ne.pop();const ie=q(ne.map(re=>re||" ").join(""));return ne=xd(ie).map((re,I)=>re===" "&&!ne[I]?ne[I]:re),ne}),U=(Y,Q)=>{var ne;const ie=D(Y,Q),re=Math.min(Y+Q.length,r-1);re!==Y&&ie[Y]!==void 0&&((ne=K.current[re])===null||ne===void 0||ne.focus()),z(ie)},W=Y=>{var Q;(Q=K.current[Y])===null||Q===void 0||Q.focus()},X={variant:c,disabled:f,status:T,mask:m,type:y,inputMode:C};return _(b.createElement("div",Object.assign({},$,{ref:L,className:me(P,{[`${P}-sm`]:H==="small",[`${P}-lg`]:H==="large",[`${P}-rtl`]:E==="rtl"},B,M),role:"group"}),b.createElement(Yi.Provider,{value:O},Array.from({length:r}).map((Y,Q)=>{const ne=`otp-${Q}`,ie=J[Q]||"";return b.createElement(b.Fragment,{key:ne},b.createElement(G3,Object.assign({ref:re=>{K.current[Q]=re},index:Q,size:H,htmlSize:1,className:`${P}-input`,onChange:U,value:ie,onActiveChange:W,autoFocus:Q===0&&g},X)),Q<r-1&&b.createElement(Y3,{separator:u,index:Q,prefixCls:P}))}))))});var J3={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Z3=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:J3}))},eF=b.forwardRef(Z3),tF={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},nF=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:tF}))},U2=b.forwardRef(nF),rF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const iF=t=>t?b.createElement(U2,null):b.createElement(eF,null),oF={click:"onClick",hover:"onMouseOver"},aF=b.forwardRef((t,e)=>{const{disabled:n,action:r="click",visibilityToggle:i=!0,iconRender:o=iF}=t,a=b.useContext(pi),l=n??a,s=typeof i=="object"&&i.visible!==void 0,[u,c]=b.useState(()=>s?i.visible:!1),f=b.useRef(null);b.useEffect(()=>{s&&c(i.visible)},[s,i]);const v=W2(f),g=()=>{var H;if(l)return;u&&v();const k=!u;c(k),typeof i=="object"&&((H=i.onVisibleChange)===null||H===void 0||H.call(i,k))},m=H=>{const k=oF[r]||"",T=o(u),O={[k]:g,className:`${H}-icon`,key:"passwordIcon",onMouseDown:L=>{L.preventDefault()},onMouseUp:L=>{L.preventDefault()}};return b.cloneElement(b.isValidElement(T)?T:b.createElement("span",null,T),O)},{className:y,prefixCls:p,inputPrefixCls:C,size:x}=t,S=rF(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:E}=b.useContext(un),P=E("input",C),$=E("input-password",p),_=i&&m($),M=me($,y,{[`${$}-${x}`]:!!x}),B=Object.assign(Object.assign({},yi(S,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:M,prefixCls:P,suffix:_});return x&&(B.size=x),b.createElement(Zc,Object.assign({ref:ti(e,f)},B))});var sF={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},lF=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:sF}))},q2=b.forwardRef(lF);const cF=t=>{const{componentCls:e,colorPrimary:n}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},uF=kA("Wave",t=>[cF(t)]),K2=`${Ac}-wave-target`;function Zv(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function dF(t){const{borderTopColor:e,borderColor:n,backgroundColor:r}=getComputedStyle(t);return Zv(e)?e:Zv(n)?n:Zv(r)?r:null}function eg(t){return Number.isNaN(t)?0:t}const fF=t=>{const{className:e,target:n,component:r,registerUnmount:i}=t,o=b.useRef(null),a=b.useRef(null);b.useEffect(()=>{a.current=i()},[]);const[l,s]=b.useState(null),[u,c]=b.useState([]),[f,v]=b.useState(0),[g,m]=b.useState(0),[y,p]=b.useState(0),[C,x]=b.useState(0),[S,E]=b.useState(!1),P={left:f,top:g,width:y,height:C,borderRadius:u.map(M=>`${M}px`).join(" ")};l&&(P["--wave-color"]=l);function $(){const M=getComputedStyle(n);s(dF(n));const B=M.position==="static",{borderLeftWidth:H,borderTopWidth:k}=M;v(B?n.offsetLeft:eg(-parseFloat(H))),m(B?n.offsetTop:eg(-parseFloat(k))),p(n.offsetWidth),x(n.offsetHeight);const{borderTopLeftRadius:T,borderTopRightRadius:O,borderBottomLeftRadius:L,borderBottomRightRadius:K}=M;c([T,O,K,L].map(q=>eg(parseFloat(q))))}if(b.useEffect(()=>{if(n){const M=Qt(()=>{$(),E(!0)});let B;return typeof ResizeObserver<"u"&&(B=new ResizeObserver($),B.observe(n)),()=>{Qt.cancel(M),B==null||B.disconnect()}}},[]),!S)return null;const _=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(K2));return b.createElement(to,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(M,B)=>{var H,k;if(B.deadline||B.propertyName==="opacity"){const T=(H=o.current)===null||H===void 0?void 0:H.parentElement;(k=a.current)===null||k===void 0||k.call(a).then(()=>{T==null||T.remove()})}return!1}},({className:M},B)=>b.createElement("div",{ref:ti(o,B),className:me(e,M,{"wave-quick":_}),style:P}))},hF=(t,e)=>{var n;const{component:r}=e;if(r==="Checkbox"&&!(!((n=t.querySelector("input"))===null||n===void 0)&&n.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",t==null||t.insertBefore(i,t==null?void 0:t.firstChild);const o=wS();let a=null;function l(){return a}a=o(b.createElement(fF,Object.assign({},e,{target:t,registerUnmount:l})),i)},vF=(t,e,n)=>{const{wave:r}=b.useContext(un),[,i,o]=Mi(),a=In(u=>{const c=t.current;if(r!=null&&r.disabled||!c)return;const f=c.querySelector(`.${K2}`)||c,{showEffect:v}=r||{};(v||hF)(f,{className:e,token:i,component:n,event:u,hashId:o})}),l=b.useRef(null);return u=>{Qt.cancel(l.current),l.current=Qt(()=>{a(u)})}},G2=t=>{const{children:e,disabled:n,component:r}=t,{getPrefixCls:i}=b.useContext(un),o=b.useRef(null),a=i("wave"),[,l]=uF(a),s=vF(o,me(a,l),r);if(ue.useEffect(()=>{const c=o.current;if(!c||c.nodeType!==1||n)return;const f=v=>{!cp(v.target)||!c.getAttribute||c.getAttribute("disabled")||c.disabled||c.className.includes("disabled")||c.className.includes("-leave")||s(v)};return c.addEventListener("click",f,!0),()=>{c.removeEventListener("click",f,!0)}},[n]),!ue.isValidElement(e))return e??null;const u=ns(e)?ti(wl(e),o):o;return vo(e,{ref:u})};var gF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const X2=b.createContext(void 0),mF=t=>{const{getPrefixCls:e,direction:n}=b.useContext(un),{prefixCls:r,size:i,className:o}=t,a=gF(t,["prefixCls","size","className"]),l=e("btn-group",r),[,,s]=Mi(),u=b.useMemo(()=>{switch(i){case"large":return"lg";case"small":return"sm";default:return""}},[i]),c=me(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:n==="rtl"},o,s);return b.createElement(X2.Provider,{value:i},b.createElement("div",Object.assign({},a,{className:c})))},Ax=/^[\u4E00-\u9FA5]{2}$/,Sm=Ax.test.bind(Ax);function Ox(t){return typeof t=="string"}function tg(t){return t==="text"||t==="link"}function pF(t,e){if(t==null)return;const n=e?" ":"";return typeof t!="string"&&typeof t!="number"&&Ox(t.type)&&Sm(t.props.children)?vo(t,{children:t.props.children.split("").join(n)}):Ox(t)?Sm(t)?ue.createElement("span",null,t.split("").join(n)):ue.createElement("span",null,t):DS(t)?ue.createElement("span",null,t):t}function yF(t,e){let n=!1;const r=[];return ue.Children.forEach(t,i=>{const o=typeof i,a=o==="string"||o==="number";if(n&&a){const l=r.length-1,s=r[l];r[l]=`${s}${i}`}else r.push(i);n=a}),ue.Children.map(r,i=>pF(i,e))}["default","primary","danger"].concat(Ae(va));const Em=b.forwardRef((t,e)=>{const{className:n,style:r,children:i,prefixCls:o}=t,a=me(`${o}-icon`,n);return ue.createElement("span",{ref:e,className:a,style:r},i)}),Mx=b.forwardRef((t,e)=>{const{prefixCls:n,className:r,style:i,iconClassName:o}=t,a=me(`${n}-loading-icon`,r);return ue.createElement(Em,{prefixCls:n,className:a,style:i,ref:e},ue.createElement(Qa,{className:o}))}),ng=()=>({width:0,opacity:0,transform:"scale(0)"}),rg=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),bF=t=>{const{prefixCls:e,loading:n,existIcon:r,className:i,style:o,mount:a}=t,l=!!n;return r?ue.createElement(Mx,{prefixCls:e,className:i,style:o}):ue.createElement(to,{visible:l,motionName:`${e}-loading-icon-motion`,motionAppear:!a,motionEnter:!a,motionLeave:!a,removeOnLeave:!0,onAppearStart:ng,onAppearActive:rg,onEnterStart:ng,onEnterActive:rg,onLeaveStart:rg,onLeaveActive:ng},({className:s,style:u},c)=>{const f=Object.assign(Object.assign({},o),u);return ue.createElement(Mx,{prefixCls:e,className:me(i,s),style:f,ref:c})})},Nx=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),wF=t=>{const{componentCls:e,fontSize:n,lineWidth:r,groupBorderColor:i,colorErrorHover:o}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(r).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:n}},Nx(`${e}-primary`,i),Nx(`${e}-danger`,o)]}};var xF=["b"],CF=["v"],ig=function(e){return Math.round(Number(e||0))},SF=function(e){if(e instanceof yn)return e;if(e&&ht(e)==="object"&&"h"in e&&"b"in e){var n=e,r=n.b,i=_t(n,xF);return le(le({},i),{},{v:r})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},Qi=function(t){Ji(n,t);var e=Zi(n);function n(r){return Hn(this,n),e.call(this,SF(r))}return Vn(n,[{key:"toHsbString",value:function(){var i=this.toHsb(),o=ig(i.s*100),a=ig(i.b*100),l=ig(i.h),s=i.a,u="hsb(".concat(l,", ").concat(o,"%, ").concat(a,"%)"),c="hsba(".concat(l,", ").concat(o,"%, ").concat(a,"%, ").concat(s.toFixed(s===0?0:2),")");return s===1?u:c}},{key:"toHsb",value:function(){var i=this.toHsv(),o=i.v,a=_t(i,CF);return le(le({},a),{},{b:o,a:this.a})}}]),n}(yn),EF="rc-color-picker",al=function(e){return e instanceof Qi?e:new Qi(e)},RF=al("#1677ff"),Y2=function(e){var n=e.offset,r=e.targetRef,i=e.containerRef,o=e.color,a=e.type,l=i.current.getBoundingClientRect(),s=l.width,u=l.height,c=r.current.getBoundingClientRect(),f=c.width,v=c.height,g=f/2,m=v/2,y=(n.x+g)/s,p=1-(n.y+m)/u,C=o.toHsb(),x=y,S=(n.x+g)/s*360;if(a)switch(a){case"hue":return al(le(le({},C),{},{h:S<=0?0:S}));case"alpha":return al(le(le({},C),{},{a:x<=0?0:x}))}return al({h:C.h,s:y<=0?0:y,b:p>=1?1:p,a:C.a})},Q2=function(e,n){var r=e.toHsb();switch(n){case"hue":return{x:r.h/360*100,y:50};case"alpha":return{x:e.a*100,y:50};default:return{x:r.s*100,y:(1-r.b)*100}}},wp=function(e){var n=e.color,r=e.prefixCls,i=e.className,o=e.style,a=e.onClick,l="".concat(r,"-color-block");return ue.createElement("div",{className:me(l,i),style:o,onClick:a},ue.createElement("div",{className:"".concat(l,"-inner"),style:{background:n}}))};function IF(t){var e="touches"in t?t.touches[0]:t,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:e.pageX-n,pageY:e.pageY-r}}function J2(t){var e=t.targetRef,n=t.containerRef,r=t.direction,i=t.onDragChange,o=t.onDragChangeComplete,a=t.calculate,l=t.color,s=t.disabledDrag,u=b.useState({x:0,y:0}),c=fe(u,2),f=c[0],v=c[1],g=b.useRef(null),m=b.useRef(null);b.useEffect(function(){v(a())},[l]),b.useEffect(function(){return function(){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",m.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",m.current),g.current=null,m.current=null}},[]);var y=function(E){var P=IF(E),$=P.pageX,_=P.pageY,M=n.current.getBoundingClientRect(),B=M.x,H=M.y,k=M.width,T=M.height,O=e.current.getBoundingClientRect(),L=O.width,K=O.height,q=L/2,J=K/2,V=Math.max(0,Math.min($-B,k))-q,z=Math.max(0,Math.min(_-H,T))-J,D={x:V,y:r==="x"?f.y:z};if(L===0&&K===0||L!==K)return!1;i==null||i(D)},p=function(E){E.preventDefault(),y(E)},C=function(E){E.preventDefault(),document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",m.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",m.current),g.current=null,m.current=null,o==null||o()},x=function(E){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",m.current),!s&&(y(E),document.addEventListener("mousemove",p),document.addEventListener("mouseup",C),document.addEventListener("touchmove",p),document.addEventListener("touchend",C),g.current=p,m.current=C)};return[f,x]}var Z2=function(e){var n=e.size,r=n===void 0?"default":n,i=e.color,o=e.prefixCls;return ue.createElement("div",{className:me("".concat(o,"-handler"),oe({},"".concat(o,"-handler-sm"),r==="small")),style:{backgroundColor:i}})},eE=function(e){var n=e.children,r=e.style,i=e.prefixCls;return ue.createElement("div",{className:"".concat(i,"-palette"),style:le({position:"relative"},r)},n)},tE=b.forwardRef(function(t,e){var n=t.children,r=t.x,i=t.y;return ue.createElement("div",{ref:e,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(i,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},n)}),PF=function(e){var n=e.color,r=e.onChange,i=e.prefixCls,o=e.onChangeComplete,a=e.disabled,l=b.useRef(),s=b.useRef(),u=b.useRef(n),c=In(function(y){var p=Y2({offset:y,targetRef:s,containerRef:l,color:n});u.current=p,r(p)}),f=J2({color:n,containerRef:l,targetRef:s,calculate:function(){return Q2(n)},onDragChange:c,onDragChangeComplete:function(){return o==null?void 0:o(u.current)},disabledDrag:a}),v=fe(f,2),g=v[0],m=v[1];return ue.createElement("div",{ref:l,className:"".concat(i,"-select"),onMouseDown:m,onTouchStart:m},ue.createElement(eE,{prefixCls:i},ue.createElement(tE,{x:g.x,y:g.y,ref:s},ue.createElement(Z2,{color:n.toRgbString(),prefixCls:i})),ue.createElement("div",{className:"".concat(i,"-saturation"),style:{backgroundColor:"hsl(".concat(n.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},kF=function(e,n){var r=Mn(e,{value:n}),i=fe(r,2),o=i[0],a=i[1],l=b.useMemo(function(){return al(o)},[o]);return[l,a]},$F=function(e){var n=e.colors,r=e.children,i=e.direction,o=i===void 0?"to right":i,a=e.type,l=e.prefixCls,s=b.useMemo(function(){return n.map(function(u,c){var f=al(u);return a==="alpha"&&c===n.length-1&&(f=new Qi(f.setA(1))),f.toRgbString()}).join(",")},[n,a]);return ue.createElement("div",{className:"".concat(l,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(o,", ").concat(s,")")}},r)},TF=function(e){var n=e.prefixCls,r=e.colors,i=e.disabled,o=e.onChange,a=e.onChangeComplete,l=e.color,s=e.type,u=b.useRef(),c=b.useRef(),f=b.useRef(l),v=function(P){return s==="hue"?P.getHue():P.a*100},g=In(function(E){var P=Y2({offset:E,targetRef:c,containerRef:u,color:l,type:s});f.current=P,o(v(P))}),m=J2({color:l,targetRef:c,containerRef:u,calculate:function(){return Q2(l,s)},onDragChange:g,onDragChangeComplete:function(){a(v(f.current))},direction:"x",disabledDrag:i}),y=fe(m,2),p=y[0],C=y[1],x=ue.useMemo(function(){if(s==="hue"){var E=l.toHsb();E.s=1,E.b=1,E.a=1;var P=new Qi(E);return P}return l},[l,s]),S=ue.useMemo(function(){return r.map(function(E){return"".concat(E.color," ").concat(E.percent,"%")})},[r]);return ue.createElement("div",{ref:u,className:me("".concat(n,"-slider"),"".concat(n,"-slider-").concat(s)),onMouseDown:C,onTouchStart:C},ue.createElement(eE,{prefixCls:n},ue.createElement(tE,{x:p.x,y:p.y,ref:c},ue.createElement(Z2,{size:"small",color:x.toHexString(),prefixCls:n})),ue.createElement($F,{colors:S,type:s,prefixCls:n})))};function _F(t){return b.useMemo(function(){var e=t||{},n=e.slider;return[n||TF]},[t])}var AF=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],OF=b.forwardRef(function(t,e){var n=t.value,r=t.defaultValue,i=t.prefixCls,o=i===void 0?EF:i,a=t.onChange,l=t.onChangeComplete,s=t.className,u=t.style,c=t.panelRender,f=t.disabledAlpha,v=f===void 0?!1:f,g=t.disabled,m=g===void 0?!1:g,y=t.components,p=_F(y),C=fe(p,1),x=C[0],S=kF(r||RF,n),E=fe(S,2),P=E[0],$=E[1],_=b.useMemo(function(){return P.setA(1).toRgbString()},[P]),M=function(z,D){n||$(z),a==null||a(z,D)},B=function(z){return new Qi(P.setHue(z))},H=function(z){return new Qi(P.setA(z/100))},k=function(z){M(B(z),{type:"hue",value:z})},T=function(z){M(H(z),{type:"alpha",value:z})},O=function(z){l&&l(B(z))},L=function(z){l&&l(H(z))},K=me("".concat(o,"-panel"),s,oe({},"".concat(o,"-panel-disabled"),m)),q={prefixCls:o,disabled:m,color:P},J=ue.createElement(ue.Fragment,null,ue.createElement(PF,Ne({onChange:M},q,{onChangeComplete:l})),ue.createElement("div",{className:"".concat(o,"-slider-container")},ue.createElement("div",{className:me("".concat(o,"-slider-group"),oe({},"".concat(o,"-slider-group-disabled-alpha"),v))},ue.createElement(x,Ne({},q,{type:"hue",colors:AF,min:0,max:359,value:P.getHue(),onChange:k,onChangeComplete:O})),!v&&ue.createElement(x,Ne({},q,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:_}],min:0,max:100,value:P.a*100,onChange:T,onChangeComplete:L}))),ue.createElement(wp,{color:P.toRgbString(),prefixCls:o})));return ue.createElement("div",{className:K,style:u,ref:e},typeof c=="function"?c(J):J)});const fc=(t,e)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",MF=(t,e)=>t?fc(t,e):"";let gi=function(){function t(e){Hn(this,t);var n;if(this.cleared=!1,e instanceof t){this.metaColor=e.metaColor.clone(),this.colors=(n=e.colors)===null||n===void 0?void 0:n.map(i=>({color:new t(i.color),percent:i.percent})),this.cleared=e.cleared;return}const r=Array.isArray(e);r&&e.length?(this.colors=e.map(({color:i,percent:o})=>({color:new t(i),percent:o})),this.metaColor=new Qi(this.colors[0].color.metaColor)):this.metaColor=new Qi(r?"":e),(!e||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Vn(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return MF(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((r,i)=>{const o=n.colors[i];return r.percent===o.percent&&r.color.equals(o.color)}):this.toHexString()===n.toHexString()}}])}();const Lr=t=>t instanceof gi?t:new gi(t),zd=t=>Math.round(Number(t||0)),xp=t=>zd(t.toHsb().a*100),Hd=(t,e)=>{const n=t.toRgb();if(!n.r&&!n.g&&!n.b){const r=t.toHsb();return r.a=1,Lr(r)}return n.a=1,Lr(n)},nE=(t,e)=>{const n=[{percent:0,color:t[0].color}].concat(Ae(t),[{percent:100,color:t[t.length-1].color}]);for(let r=0;r<n.length-1;r+=1){const i=n[r].percent,o=n[r+1].percent,a=n[r].color,l=n[r+1].color;if(i<=e&&e<=o){const s=o-i;if(s===0)return a;const u=(e-i)/s*100,c=new Qi(a),f=new Qi(l);return c.mix(f,u).toRgbString()}}return""},og=t=>t.map(e=>(e.colors=e.colors.map(Lr),e)),rE=(t,e)=>{const{r:n,g:r,b:i,a:o}=t.toRgb(),a=new Qi(t.toRgbString()).onBackground(e).toHsv();return o<=.5?a.v>.5:n*.299+r*.587+i*.114>192},Lx=(t,e)=>{var n;return`panel-${(n=t.key)!==null&&n!==void 0?n:e}`},NF=({prefixCls:t,presets:e,value:n,onChange:r})=>{const[i]=es("ColorPicker"),[,o]=Mi(),[a]=Mn(og(e),{value:og(e),postState:og}),l=`${t}-presets`,s=b.useMemo(()=>a.reduce((f,v,g)=>{const{defaultOpen:m=!0}=v;return m&&f.push(Lx(v,g)),f},[]),[a]),u=f=>{r==null||r(f)},c=a.map((f,v)=>{var g;return{key:Lx(f,v),label:ue.createElement("div",{className:`${l}-label`},f==null?void 0:f.label),children:ue.createElement("div",{className:`${l}-items`},Array.isArray(f==null?void 0:f.colors)&&((g=f.colors)===null||g===void 0?void 0:g.length)>0?f.colors.map((m,y)=>ue.createElement(wp,{key:`preset-${y}-${m.toHexString()}`,color:Lr(m).toRgbString(),prefixCls:t,className:me(`${l}-color`,{[`${l}-color-checked`]:m.toHexString()===(n==null?void 0:n.toHexString()),[`${l}-color-bright`]:rE(m,o.colorBgElevated)}),onClick:()=>u(m)})):ue.createElement("span",{className:`${l}-empty`},i.presetEmpty))}});return ue.createElement("div",{className:l},ue.createElement(ap,{defaultActiveKey:s,ghost:!0,items:c}))},iE=t=>{const{paddingInline:e,onlyIconSize:n}=t;return bn(t,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:n})},oE=t=>{var e,n,r,i,o,a;const l=(e=t.contentFontSize)!==null&&e!==void 0?e:t.fontSize,s=(n=t.contentFontSizeSM)!==null&&n!==void 0?n:t.fontSize,u=(r=t.contentFontSizeLG)!==null&&r!==void 0?r:t.fontSizeLG,c=(i=t.contentLineHeight)!==null&&i!==void 0?i:Nd(l),f=(o=t.contentLineHeightSM)!==null&&o!==void 0?o:Nd(s),v=(a=t.contentLineHeightLG)!==null&&a!==void 0?a:Nd(u),g=rE(new gi(t.colorBgSolid),"#fff")?"#000":"#fff",m=va.reduce((y,p)=>Object.assign(Object.assign({},y),{[`${p}ShadowColor`]:`0 ${ye(t.controlOutlineWidth)} 0 ${cc(t[`${p}1`],t.colorBgContainer)}`}),{});return Object.assign(Object.assign({},m),{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:g,contentFontSize:l,contentFontSizeSM:s,contentFontSizeLG:u,contentLineHeight:c,contentLineHeightSM:f,contentLineHeightLG:v,paddingBlock:Math.max((t.controlHeight-l*c)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-s*f)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-u*v)/2-t.lineWidth,0)})},LF=t=>{const{componentCls:e,iconCls:n,fontWeight:r,opacityLoading:i,motionDurationSlow:o,motionEaseInOut:a,marginXS:l,calc:s}=t;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${ye(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:xl(),"> a":{color:"currentColor"},"&:not(:disabled)":Ya(t),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:i,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${o} ${a}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:s(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:s(l).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:s(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:s(l).mul(-1).equal()}}}}}},aE=(t,e,n)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":e,"&:active":n}}),DF=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),FF=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),BF=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),Ff=(t,e,n,r,i,o,a,l)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:e,borderColor:r||void 0,boxShadow:"none"},aE(t,Object.assign({background:e},a),Object.assign({background:e},l))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:o||void 0}})}),jF=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},BF(t))}),zF=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),Bf=(t,e,n,r)=>{const o=r&&["link","text"].includes(r)?zF:jF;return Object.assign(Object.assign({},o(t)),aE(t.componentCls,e,n))},jf=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:e,background:n},Bf(t,r,i))}),zf=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:n},Bf(t,r,i))}),Hf=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),Vf=(t,e,n,r)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},Bf(t,n,r))}),go=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-${n}`]:Object.assign({color:e,boxShadow:"none"},Bf(t,r,i,n))}),HF=t=>{const{componentCls:e}=t;return va.reduce((n,r)=>{const i=t[`${r}6`],o=t[`${r}1`],a=t[`${r}5`],l=t[`${r}2`],s=t[`${r}3`],u=t[`${r}7`];return Object.assign(Object.assign({},n),{[`&${e}-color-${r}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:i,boxShadow:t[`${r}ShadowColor`]},jf(t,t.colorTextLightSolid,i,{background:a},{background:u})),zf(t,i,t.colorBgContainer,{color:a,borderColor:a,background:t.colorBgContainer},{color:u,borderColor:u,background:t.colorBgContainer})),Hf(t)),Vf(t,o,{background:l},{background:s})),go(t,i,"link",{color:a},{color:u})),go(t,i,"text",{color:a,background:o},{color:u,background:s}))})},{})},VF=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},jf(t,t.solidTextColor,t.colorBgSolid,{color:t.solidTextColor,background:t.colorBgSolidHover},{color:t.solidTextColor,background:t.colorBgSolidActive})),Hf(t)),Vf(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),Ff(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),go(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),WF=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},zf(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),Hf(t)),Vf(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),go(t,t.colorPrimaryText,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),go(t,t.colorPrimaryText,"link",{color:t.colorPrimaryTextHover,background:t.linkHoverBg},{color:t.colorPrimaryTextActive})),Ff(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),UF=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},jf(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),zf(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),Hf(t)),Vf(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),go(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),go(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),Ff(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),qF=t=>Object.assign(Object.assign({},go(t,t.colorLink,"link",{color:t.colorLinkHover},{color:t.colorLinkActive})),Ff(t.componentCls,t.ghostBg,t.colorInfo,t.colorInfo,t.colorTextDisabled,t.colorBorder,{color:t.colorInfoHover,borderColor:t.colorInfoHover},{color:t.colorInfoActive,borderColor:t.colorInfoActive})),KF=t=>{const{componentCls:e}=t;return Object.assign({[`${e}-color-default`]:VF(t),[`${e}-color-primary`]:WF(t),[`${e}-color-dangerous`]:UF(t),[`${e}-color-link`]:qF(t)},HF(t))},GF=t=>Object.assign(Object.assign(Object.assign(Object.assign({},zf(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),go(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),jf(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),go(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),Cp=(t,e="")=>{const{componentCls:n,controlHeight:r,fontSize:i,borderRadius:o,buttonPaddingHorizontal:a,iconCls:l,buttonPaddingVertical:s,buttonIconOnlyFontSize:u}=t;return[{[e]:{fontSize:i,height:r,padding:`${ye(s)} ${ye(a)}`,borderRadius:o,[`&${n}-icon-only`]:{width:r,[l]:{fontSize:u}}}},{[`${n}${n}-circle${e}`]:DF(t)},{[`${n}${n}-round${e}`]:FF(t)}]},XF=t=>{const e=bn(t,{fontSize:t.contentFontSize});return Cp(e,t.componentCls)},YF=t=>{const e=bn(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:0,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return Cp(e,`${t.componentCls}-sm`)},QF=t=>{const e=bn(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:0,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return Cp(e,`${t.componentCls}-lg`)},JF=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},ZF=lr("Button",t=>{const e=iE(t);return[LF(e),XF(e),YF(e),QF(e),JF(e),KF(e),GF(e),wF(e)]},oE,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function e4(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function t4(t,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function n4(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},e4(t,e)),t4(t.componentCls,e))}}const r4=t=>{const{componentCls:e,colorPrimaryHover:n,lineWidth:r,calc:i}=t,o=i(r).mul(-1).equal(),a=l=>{const s=`${e}-compact${l?"-vertical":""}-item${e}-primary:not([disabled])`;return{[`${s} + ${s}::before`]:{position:"absolute",top:l?o:0,insetInlineStart:l?0:o,backgroundColor:n,content:'""',width:l?"100%":r,height:l?r:"100%"}}};return Object.assign(Object.assign({},a()),a(!0))},i4=$A(["Button","compact"],t=>{const e=iE(t);return[Xc(e),n4(e),r4(e)]},oE);var o4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function a4(t){if(typeof t=="object"&&t){let e=t==null?void 0:t.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!t,delay:0}}const s4={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},l4=ue.forwardRef((t,e)=>{var n,r;const{loading:i=!1,prefixCls:o,color:a,variant:l,type:s,danger:u=!1,shape:c="default",size:f,styles:v,disabled:g,className:m,rootClassName:y,children:p,icon:C,iconPosition:x="start",ghost:S=!1,block:E=!1,htmlType:P="button",classNames:$,style:_={},autoInsertSpace:M,autoFocus:B}=t,H=o4(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),k=s||"default",{button:T}=ue.useContext(un),[O,L]=b.useMemo(()=>{if(a&&l)return[a,l];if(s||u){const je=s4[k]||[];return u?["danger",je[1]]:je}return T!=null&&T.color&&(T!=null&&T.variant)?[T.color,T.variant]:["default","outlined"]},[s,a,l,u,T==null?void 0:T.variant,T==null?void 0:T.color]),q=O==="danger"?"dangerous":O,{getPrefixCls:J,direction:V,autoInsertSpace:z,className:D,style:U,classNames:W,styles:X}=eo("button"),Y=(n=M??z)!==null&&n!==void 0?n:!0,Q=J("btn",o),[ne,ie,re]=ZF(Q),I=b.useContext(pi),A=g??I,F=b.useContext(X2),G=b.useMemo(()=>a4(i),[i]),[ee,te]=b.useState(G.loading),[ae,de]=b.useState(!1),he=b.useRef(null),pe=ts(e,he),we=b.Children.count(p)===1&&!C&&!tg(L),_e=b.useRef(!0);ue.useEffect(()=>(_e.current=!1,()=>{_e.current=!0}),[]),b.useLayoutEffect(()=>{let je=null;G.delay>0?je=setTimeout(()=>{je=null,te(!0)},G.delay):te(G.loading);function ke(){je&&(clearTimeout(je),je=null)}return ke},[G.delay,G.loading]),b.useEffect(()=>{if(!he.current||!Y)return;const je=he.current.textContent||"";we&&Sm(je)?ae||de(!0):ae&&de(!1)}),b.useEffect(()=>{B&&he.current&&he.current.focus()},[]);const $e=ue.useCallback(je=>{var ke;if(ee||A){je.preventDefault();return}(ke=t.onClick)===null||ke===void 0||ke.call(t,("href"in t,je))},[t.onClick,ee,A]),{compactSize:Me,compactItemClassnames:Re}=rs(Q,V),be={large:"lg",small:"sm",middle:void 0},Le=bi(je=>{var ke,et;return(et=(ke=f??Me)!==null&&ke!==void 0?ke:F)!==null&&et!==void 0?et:je}),He=Le&&(r=be[Le])!==null&&r!==void 0?r:"",it=ee?"loading":C,qe=yi(H,["navigate"]),De=me(Q,ie,re,{[`${Q}-${c}`]:c!=="default"&&c,[`${Q}-${k}`]:k,[`${Q}-dangerous`]:u,[`${Q}-color-${q}`]:q,[`${Q}-variant-${L}`]:L,[`${Q}-${He}`]:He,[`${Q}-icon-only`]:!p&&p!==0&&!!it,[`${Q}-background-ghost`]:S&&!tg(L),[`${Q}-loading`]:ee,[`${Q}-two-chinese-chars`]:ae&&Y&&!ee,[`${Q}-block`]:E,[`${Q}-rtl`]:V==="rtl",[`${Q}-icon-end`]:x==="end"},Re,m,y,D),nt=Object.assign(Object.assign({},U),_),Je=me($==null?void 0:$.icon,W.icon),st=Object.assign(Object.assign({},(v==null?void 0:v.icon)||{}),X.icon||{}),Ve=C&&!ee?ue.createElement(Em,{prefixCls:Q,className:Je,style:st},C):i&&typeof i=="object"&&i.icon?ue.createElement(Em,{prefixCls:Q,className:Je,style:st},i.icon):ue.createElement(bF,{existIcon:!!C,prefixCls:Q,loading:ee,mount:_e.current}),Ie=p||p===0?yF(p,we&&Y):null;if(qe.href!==void 0)return ne(ue.createElement("a",Object.assign({},qe,{className:me(De,{[`${Q}-disabled`]:A}),href:A?void 0:qe.href,style:nt,onClick:$e,ref:pe,tabIndex:A?-1:0}),Ve,Ie));let Te=ue.createElement("button",Object.assign({},H,{type:P,className:De,style:nt,onClick:$e,disabled:A,ref:pe}),Ve,Ie,Re&&ue.createElement(i4,{prefixCls:Q}));return tg(L)||(Te=ue.createElement(G2,{component:"Button",disabled:ee},Te)),ne(Te)}),Bc=l4;Bc.Group=mF;Bc.__ANT_BUTTON=!0;var c4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const u4=b.forwardRef((t,e)=>{const{prefixCls:n,inputPrefixCls:r,className:i,size:o,suffix:a,enterButton:l=!1,addonAfter:s,loading:u,disabled:c,onSearch:f,onChange:v,onCompositionStart:g,onCompositionEnd:m,variant:y,onPressEnter:p}=t,C=c4(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd","variant","onPressEnter"]),{getPrefixCls:x,direction:S}=b.useContext(un),E=b.useRef(!1),P=x("input-search",n),$=x("input",r),{compactSize:_}=rs(P,S),M=bi(X=>{var Y;return(Y=o??_)!==null&&Y!==void 0?Y:X}),B=b.useRef(null),H=X=>{X!=null&&X.target&&X.type==="click"&&f&&f(X.target.value,X,{source:"clear"}),v==null||v(X)},k=X=>{var Y;document.activeElement===((Y=B.current)===null||Y===void 0?void 0:Y.input)&&X.preventDefault()},T=X=>{var Y,Q;f&&f((Q=(Y=B.current)===null||Y===void 0?void 0:Y.input)===null||Q===void 0?void 0:Q.value,X,{source:"input"})},O=X=>{E.current||u||(p==null||p(X),T(X))},L=typeof l=="boolean"?b.createElement(q2,null):null,K=`${P}-button`;let q;const J=l||{},V=J.type&&J.type.__ANT_BUTTON===!0;V||J.type==="button"?q=vo(J,Object.assign({onMouseDown:k,onClick:X=>{var Y,Q;(Q=(Y=J==null?void 0:J.props)===null||Y===void 0?void 0:Y.onClick)===null||Q===void 0||Q.call(Y,X),T(X)},key:"enterButton"},V?{className:K,size:M}:{})):q=b.createElement(Bc,{className:K,color:l?"primary":"default",size:M,disabled:c,key:"enterButton",onMouseDown:k,onClick:T,loading:u,icon:L,variant:y==="borderless"||y==="filled"||y==="underlined"?"text":l?"solid":void 0},l),s&&(q=[q,vo(s,{key:"addonAfter"})]);const z=me(P,{[`${P}-rtl`]:S==="rtl",[`${P}-${M}`]:!!M,[`${P}-with-button`]:!!l},i),D=X=>{E.current=!0,g==null||g(X)},U=X=>{E.current=!1,m==null||m(X)},W=Object.assign(Object.assign({},C),{className:z,prefixCls:$,type:"search",size:M,variant:y,onPressEnter:O,onCompositionStart:D,onCompositionEnd:U,addonAfter:q,suffix:a,onChange:H,disabled:c});return b.createElement(Zc,Object.assign({ref:ti(B,e)},W))});var d4=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,f4=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ag={},ui;function h4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&ag[n])return ag[n];var r=window.getComputedStyle(t),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),l=f4.map(function(u){return"".concat(u,":").concat(r.getPropertyValue(u))}).join(";"),s={sizingStyle:l,paddingSize:o,borderSize:a,boxSizing:i};return e&&n&&(ag[n]=s),s}function v4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;ui||(ui=document.createElement("textarea"),ui.setAttribute("tab-index","-1"),ui.setAttribute("aria-hidden","true"),ui.setAttribute("name","hiddenTextarea"),document.body.appendChild(ui)),t.getAttribute("wrap")?ui.setAttribute("wrap",t.getAttribute("wrap")):ui.removeAttribute("wrap");var i=h4(t,e),o=i.paddingSize,a=i.borderSize,l=i.boxSizing,s=i.sizingStyle;ui.setAttribute("style","".concat(s,";").concat(d4)),ui.value=t.value||t.placeholder||"";var u=void 0,c=void 0,f,v=ui.scrollHeight;if(l==="border-box"?v+=a:l==="content-box"&&(v-=o),n!==null||r!==null){ui.value=" ";var g=ui.scrollHeight-o;n!==null&&(u=g*n,l==="border-box"&&(u=u+o+a),v=Math.max(u,v)),r!==null&&(c=g*r,l==="border-box"&&(c=c+o+a),f=v>c?"":"hidden",v=Math.min(c,v))}var m={height:v,overflowY:f,resize:"none"};return u&&(m.minHeight=u),c&&(m.maxHeight=c),m}var g4=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],sg=0,lg=1,cg=2,m4=b.forwardRef(function(t,e){var n=t,r=n.prefixCls,i=n.defaultValue,o=n.value,a=n.autoSize,l=n.onResize,s=n.className,u=n.style,c=n.disabled,f=n.onChange;n.onInternalAutoSize;var v=_t(n,g4),g=Mn(i,{value:o,postState:function(Y){return Y??""}}),m=fe(g,2),y=m[0],p=m[1],C=function(Y){p(Y.target.value),f==null||f(Y)},x=b.useRef();b.useImperativeHandle(e,function(){return{textArea:x.current}});var S=b.useMemo(function(){return a&&ht(a)==="object"?[a.minRows,a.maxRows]:[]},[a]),E=fe(S,2),P=E[0],$=E[1],_=!!a,M=function(){try{if(document.activeElement===x.current){var Y=x.current,Q=Y.selectionStart,ne=Y.selectionEnd,ie=Y.scrollTop;x.current.setSelectionRange(Q,ne),x.current.scrollTop=ie}}catch{}},B=b.useState(cg),H=fe(B,2),k=H[0],T=H[1],O=b.useState(),L=fe(O,2),K=L[0],q=L[1],J=function(){T(sg)};$n(function(){_&&J()},[o,P,$,_]),$n(function(){if(k===sg)T(lg);else if(k===lg){var X=v4(x.current,!1,P,$);T(cg),q(X)}else M()},[k]);var V=b.useRef(),z=function(){Qt.cancel(V.current)},D=function(Y){k===cg&&(l==null||l(Y),a&&(z(),V.current=Qt(function(){J()})))};b.useEffect(function(){return z},[]);var U=_?K:null,W=le(le({},u),U);return(k===sg||k===lg)&&(W.overflowY="hidden",W.overflowX="hidden"),b.createElement(Ki,{onResize:D,disabled:!(a||l)},b.createElement("textarea",Ne({},v,{ref:x,style:W,className:me(r,s,oe({},"".concat(r,"-disabled"),c)),disabled:c,value:y,onChange:C})))}),p4=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],y4=ue.forwardRef(function(t,e){var n,r=t.defaultValue,i=t.value,o=t.onFocus,a=t.onBlur,l=t.onChange,s=t.allowClear,u=t.maxLength,c=t.onCompositionStart,f=t.onCompositionEnd,v=t.suffix,g=t.prefixCls,m=g===void 0?"rc-textarea":g,y=t.showCount,p=t.count,C=t.className,x=t.style,S=t.disabled,E=t.hidden,P=t.classNames,$=t.styles,_=t.onResize,M=t.onClear,B=t.onPressEnter,H=t.readOnly,k=t.autoSize,T=t.onKeyDown,O=_t(t,p4),L=Mn(r,{value:i,defaultValue:r}),K=fe(L,2),q=K[0],J=K[1],V=q==null?"":String(q),z=ue.useState(!1),D=fe(z,2),U=D[0],W=D[1],X=ue.useRef(!1),Y=ue.useState(null),Q=fe(Y,2),ne=Q[0],ie=Q[1],re=b.useRef(null),I=b.useRef(null),A=function(){var Ie;return(Ie=I.current)===null||Ie===void 0?void 0:Ie.textArea},F=function(){A().focus()};b.useImperativeHandle(e,function(){var Ve;return{resizableTextArea:I.current,focus:F,blur:function(){A().blur()},nativeElement:((Ve=re.current)===null||Ve===void 0?void 0:Ve.nativeElement)||A()}}),b.useEffect(function(){W(function(Ve){return!S&&Ve})},[S]);var G=ue.useState(null),ee=fe(G,2),te=ee[0],ae=ee[1];ue.useEffect(function(){if(te){var Ve;(Ve=A()).setSelectionRange.apply(Ve,Ae(te))}},[te]);var de=z2(p,y),he=(n=de.max)!==null&&n!==void 0?n:u,pe=Number(he)>0,we=de.strategy(V),_e=!!he&&we>he,$e=function(Ie,Te){var je=Te;!X.current&&de.exceedFormatter&&de.max&&de.strategy(Te)>de.max&&(je=de.exceedFormatter(Te,{max:de.max}),Te!==je&&ae([A().selectionStart||0,A().selectionEnd||0])),J(je),uf(Ie.currentTarget,Ie,l,je)},Me=function(Ie){X.current=!0,c==null||c(Ie)},Re=function(Ie){X.current=!1,$e(Ie,Ie.currentTarget.value),f==null||f(Ie)},be=function(Ie){$e(Ie,Ie.target.value)},Le=function(Ie){Ie.key==="Enter"&&B&&B(Ie),T==null||T(Ie)},He=function(Ie){W(!0),o==null||o(Ie)},it=function(Ie){W(!1),a==null||a(Ie)},qe=function(Ie){J(""),F(),uf(A(),Ie,l)},De=v,nt;de.show&&(de.showFormatter?nt=de.showFormatter({value:V,count:we,maxLength:he}):nt="".concat(we).concat(pe?" / ".concat(he):""),De=ue.createElement(ue.Fragment,null,De,ue.createElement("span",{className:me("".concat(m,"-data-count"),P==null?void 0:P.count),style:$==null?void 0:$.count},nt)));var Je=function(Ie){var Te;_==null||_(Ie),(Te=A())!==null&&Te!==void 0&&Te.style.height&&ie(!0)},st=!k&&!y&&!s;return ue.createElement(bp,{ref:re,value:V,allowClear:s,handleReset:qe,suffix:De,prefixCls:m,classNames:le(le({},P),{},{affixWrapper:me(P==null?void 0:P.affixWrapper,oe(oe({},"".concat(m,"-show-count"),y),"".concat(m,"-textarea-allow-clear"),s))}),disabled:S,focused:U,className:me(C,_e&&"".concat(m,"-out-of-range")),style:le(le({},x),ne&&!st?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof nt=="string"?nt:void 0}},hidden:E,readOnly:H,onClear:M},ue.createElement(m4,Ne({},O,{autoSize:k,maxLength:u,onKeyDown:Le,onChange:be,onFocus:He,onBlur:it,onCompositionStart:Me,onCompositionEnd:Re,className:me(P==null?void 0:P.textarea),style:le(le({},$==null?void 0:$.textarea),{},{resize:x==null?void 0:x.resize}),disabled:S,prefixCls:m,onResize:Je,ref:I,readOnly:H})))});const b4=t=>{const{componentCls:e,paddingLG:n}=t,r=`${e}-textarea`;return{[`textarea${e}`]:{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}`,resize:"vertical",[`&${e}-mouse-active`]:{transition:`all ${t.motionDurationSlow}, height 0s, width 0s`}},[`${e}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[r]:{position:"relative","&-show-count":{[`${e}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${r}-has-feedback ${e}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingInline,insetBlockStart:t.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-rtl`]:{[`${e}-suffix`]:{[`${e}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:t.paddingInlineSM}}}}}},w4=lr(["Input","TextArea"],t=>{const e=bn(t,Yc(t));return[b4(e)]},Qc,{resetFont:!1});var x4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const C4=b.forwardRef((t,e)=>{var n;const{prefixCls:r,bordered:i=!0,size:o,disabled:a,status:l,allowClear:s,classNames:u,rootClassName:c,className:f,style:v,styles:g,variant:m,showCount:y,onMouseDown:p,onResize:C}=t,x=x4(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:S,direction:E,allowClear:P,autoComplete:$,className:_,style:M,classNames:B,styles:H}=eo("textArea"),k=b.useContext(pi),T=a??k,{status:O,hasFeedback:L,feedbackIcon:K}=b.useContext(Yi),q=Jc(O,l),J=b.useRef(null);b.useImperativeHandle(e,()=>{var de;return{resizableTextArea:(de=J.current)===null||de===void 0?void 0:de.resizableTextArea,focus:he=>{var pe,we;yp((we=(pe=J.current)===null||pe===void 0?void 0:pe.resizableTextArea)===null||we===void 0?void 0:we.textArea,he)},blur:()=>{var he;return(he=J.current)===null||he===void 0?void 0:he.blur()}}});const V=S("input",r),z=ma(V),[D,U,W]=B2(V,c),[X]=w4(V,z),{compactSize:Y,compactItemClassnames:Q}=rs(V,E),ne=bi(de=>{var he;return(he=o??Y)!==null&&he!==void 0?he:de}),[ie,re]=Df("textArea",m,i),I=V2(s??P),[A,F]=b.useState(!1),[G,ee]=b.useState(!1),te=de=>{F(!0),p==null||p(de);const he=()=>{F(!1),document.removeEventListener("mouseup",he)};document.addEventListener("mouseup",he)},ae=de=>{var he,pe;if(C==null||C(de),A&&typeof getComputedStyle=="function"){const we=(pe=(he=J.current)===null||he===void 0?void 0:he.nativeElement)===null||pe===void 0?void 0:pe.querySelector("textarea");we&&getComputedStyle(we).resize==="both"&&ee(!0)}};return D(X(b.createElement(y4,Object.assign({autoComplete:$},x,{style:Object.assign(Object.assign({},M),v),styles:Object.assign(Object.assign({},H),g),disabled:T,allowClear:I,className:me(W,z,f,c,Q,_,G&&`${V}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},u),B),{textarea:me({[`${V}-sm`]:ne==="small",[`${V}-lg`]:ne==="large"},U,u==null?void 0:u.textarea,B.textarea,A&&`${V}-mouse-active`),variant:me({[`${V}-${ie}`]:re},Ja(V,q)),affixWrapper:me(`${V}-textarea-affix-wrapper`,{[`${V}-affix-wrapper-rtl`]:E==="rtl",[`${V}-affix-wrapper-sm`]:ne==="small",[`${V}-affix-wrapper-lg`]:ne==="large",[`${V}-textarea-show-count`]:y||((n=t.count)===null||n===void 0?void 0:n.show)},U)}),prefixCls:V,suffix:L&&b.createElement("span",{className:`${V}-textarea-suffix`},K),showCount:y,ref:J,onResize:ae,onMouseDown:te}))))}),Sl=Zc;Sl.Group=L3;Sl.Search=u4;Sl.TextArea=C4;Sl.Password=aF;Sl.OTP=Q3;var Wf=function(e){var n=e.className,r=e.customizeIcon,i=e.customizeIconProps,o=e.children,a=e.onMouseDown,l=e.onClick,s=typeof r=="function"?r(i):r;return b.createElement("span",{className:n,onMouseDown:function(c){c.preventDefault(),a==null||a(c)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},s!==void 0?s:b.createElement("span",{className:me(n.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},o))},S4=function(e,n,r,i,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,u=ue.useMemo(function(){if(ht(i)==="object")return i.clearIcon;if(o)return o},[i,o]),c=ue.useMemo(function(){return!!(!a&&i&&(r.length||l)&&!(s==="combobox"&&l===""))},[i,a,r.length,l,s]);return{allowClear:c,clearIcon:ue.createElement(Wf,{className:"".concat(e,"-clear"),onMouseDown:n,customizeIcon:u},"×")}},sE=b.createContext(null);function E4(){return b.useContext(sE)}function R4(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=b.useState(!1),n=fe(e,2),r=n[0],i=n[1],o=b.useRef(null),a=function(){window.clearTimeout(o.current)};b.useEffect(function(){return a},[]);var l=function(u,c){a(),o.current=window.setTimeout(function(){i(u),c&&c()},t)};return[r,l,a]}function lE(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=b.useRef(null),n=b.useRef(null);b.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(n.current),n.current=window.setTimeout(function(){e.current=null},t)}return[function(){return e.current},r]}function I4(t,e,n,r){var i=b.useRef(null);i.current={open:e,triggerOpen:n,customizedTrigger:r},b.useEffect(function(){function o(a){var l;if(!((l=i.current)!==null&&l!==void 0&&l.customizedTrigger)){var s=a.target;s.shadowRoot&&a.composed&&(s=a.composedPath()[0]||s),i.current.open&&t().filter(function(u){return u}).every(function(u){return!u.contains(s)&&u!==s})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",o),function(){return window.removeEventListener("mousedown",o)}},[])}function P4(t){return t&&![Ze.ESC,Ze.SHIFT,Ze.BACKSPACE,Ze.TAB,Ze.WIN_KEY,Ze.ALT,Ze.META,Ze.WIN_KEY_RIGHT,Ze.CTRL,Ze.SEMICOLON,Ze.EQUALS,Ze.CAPS_LOCK,Ze.CONTEXT_MENU,Ze.F1,Ze.F2,Ze.F3,Ze.F4,Ze.F5,Ze.F6,Ze.F7,Ze.F8,Ze.F9,Ze.F10,Ze.F11,Ze.F12].includes(t)}function k4(t,e,n){var r=le(le({},t),e);return Object.keys(e).forEach(function(i){var o=e[i];typeof o=="function"&&(r[i]=function(){for(var a,l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return o.apply(void 0,s),(a=t[i])===null||a===void 0?void 0:a.call.apply(a,[t].concat(s))})}),r}var $4=["prefixCls","id","inputElement","autoFocus","autoComplete","editable","activeDescendantId","value","open","attrs"],T4=function(e,n){var r=e.prefixCls,i=e.id,o=e.inputElement,a=e.autoFocus,l=e.autoComplete,s=e.editable,u=e.activeDescendantId,c=e.value,f=e.open,v=e.attrs,g=_t(e,$4),m=o||b.createElement("input",null),y=m,p=y.ref,C=y.props;return"maxLength"in m.props,m=b.cloneElement(m,le(le(le({type:"search"},k4(g,C)),{},{id:i,ref:ti(n,p),autoComplete:l||"off",autoFocus:a,className:me("".concat(r,"-selection-search-input"),C==null?void 0:C.className),role:"combobox","aria-expanded":f||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":f?u:void 0},v),{},{value:s?c:"",readOnly:!s,unselectable:s?null:"on",style:le(le({},C.style),{},{opacity:s?null:0})})),m},cE=b.forwardRef(T4);function uE(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}var _4=typeof window<"u"&&window.document&&window.document.documentElement,A4=_4;function O4(t){return t!=null}function M4(t){return!t&&t!==0}function Dx(t){return["string","number"].includes(ht(t))}function dE(t){var e=void 0;return t&&(Dx(t.title)?e=t.title.toString():Dx(t.label)&&(e=t.label.toString())),e}function N4(t,e){A4?b.useLayoutEffect(t,e):b.useEffect(t,e)}function L4(t){var e;return(e=t.key)!==null&&e!==void 0?e:t.value}var Fx=function(e){e.preventDefault(),e.stopPropagation()},D4=function(e){var n=e.id,r=e.prefixCls,i=e.values,o=e.open,a=e.searchValue,l=e.autoClearSearchValue,s=e.inputRef,u=e.placeholder,c=e.disabled,f=e.mode,v=e.showSearch,g=e.autoFocus,m=e.autoComplete,y=e.activeDescendantId,p=e.tabIndex,C=e.removeIcon,x=e.maxTagCount,S=e.maxTagTextLength,E=e.maxTagPlaceholder,P=E===void 0?function(te){return"+ ".concat(te.length," ...")}:E,$=e.tagRender,_=e.onToggleOpen,M=e.onRemove,B=e.onInputChange,H=e.onInputPaste,k=e.onInputKeyDown,T=e.onInputMouseDown,O=e.onInputCompositionStart,L=e.onInputCompositionEnd,K=e.onInputBlur,q=b.useRef(null),J=b.useState(0),V=fe(J,2),z=V[0],D=V[1],U=b.useState(!1),W=fe(U,2),X=W[0],Y=W[1],Q="".concat(r,"-selection"),ne=o||f==="multiple"&&l===!1||f==="tags"?a:"",ie=f==="tags"||f==="multiple"&&l===!1||v&&(o||X);N4(function(){D(q.current.scrollWidth)},[ne]);var re=function(ae,de,he,pe,we){return b.createElement("span",{title:dE(ae),className:me("".concat(Q,"-item"),oe({},"".concat(Q,"-item-disabled"),he))},b.createElement("span",{className:"".concat(Q,"-item-content")},de),pe&&b.createElement(Wf,{className:"".concat(Q,"-item-remove"),onMouseDown:Fx,onClick:we,customizeIcon:C},"×"))},I=function(ae,de,he,pe,we,_e){var $e=function(Re){Fx(Re),_(!o)};return b.createElement("span",{onMouseDown:$e},$({label:de,value:ae,disabled:he,closable:pe,onClose:we,isMaxTag:!!_e}))},A=function(ae){var de=ae.disabled,he=ae.label,pe=ae.value,we=!c&&!de,_e=he;if(typeof S=="number"&&(typeof he=="string"||typeof he=="number")){var $e=String(_e);$e.length>S&&(_e="".concat($e.slice(0,S),"..."))}var Me=function(be){be&&be.stopPropagation(),M(ae)};return typeof $=="function"?I(pe,_e,de,we,Me):re(ae,_e,de,we,Me)},F=function(ae){if(!i.length)return null;var de=typeof P=="function"?P(ae):P;return typeof $=="function"?I(void 0,de,!1,!1,void 0,!0):re({title:de},de,!1)},G=b.createElement("div",{className:"".concat(Q,"-search"),style:{width:z},onFocus:function(){Y(!0)},onBlur:function(){Y(!1)}},b.createElement(cE,{ref:s,open:o,prefixCls:r,id:n,inputElement:null,disabled:c,autoFocus:g,autoComplete:m,editable:ie,activeDescendantId:y,value:ne,onKeyDown:k,onMouseDown:T,onChange:B,onPaste:H,onCompositionStart:O,onCompositionEnd:L,onBlur:K,tabIndex:p,attrs:Lo(e,!0)}),b.createElement("span",{ref:q,className:"".concat(Q,"-search-mirror"),"aria-hidden":!0},ne," ")),ee=b.createElement(ho,{prefixCls:"".concat(Q,"-overflow"),data:i,renderItem:A,renderRest:F,suffix:G,itemKey:L4,maxCount:x});return b.createElement("span",{className:"".concat(Q,"-wrap")},ee,!i.length&&!ne&&b.createElement("span",{className:"".concat(Q,"-placeholder")},u))},F4=function(e){var n=e.inputElement,r=e.prefixCls,i=e.id,o=e.inputRef,a=e.disabled,l=e.autoFocus,s=e.autoComplete,u=e.activeDescendantId,c=e.mode,f=e.open,v=e.values,g=e.placeholder,m=e.tabIndex,y=e.showSearch,p=e.searchValue,C=e.activeValue,x=e.maxLength,S=e.onInputKeyDown,E=e.onInputMouseDown,P=e.onInputChange,$=e.onInputPaste,_=e.onInputCompositionStart,M=e.onInputCompositionEnd,B=e.onInputBlur,H=e.title,k=b.useState(!1),T=fe(k,2),O=T[0],L=T[1],K=c==="combobox",q=K||y,J=v[0],V=p||"";K&&C&&!O&&(V=C),b.useEffect(function(){K&&L(!1)},[K,C]);var z=c!=="combobox"&&!f&&!y?!1:!!V,D=H===void 0?dE(J):H,U=b.useMemo(function(){return J?null:b.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:z?{visibility:"hidden"}:void 0},g)},[J,z,g,r]);return b.createElement("span",{className:"".concat(r,"-selection-wrap")},b.createElement("span",{className:"".concat(r,"-selection-search")},b.createElement(cE,{ref:o,prefixCls:r,id:i,open:f,inputElement:n,disabled:a,autoFocus:l,autoComplete:s,editable:q,activeDescendantId:u,value:V,onKeyDown:S,onMouseDown:E,onChange:function(X){L(!0),P(X)},onPaste:$,onCompositionStart:_,onCompositionEnd:M,onBlur:B,tabIndex:m,attrs:Lo(e,!0),maxLength:K?x:void 0})),!K&&J?b.createElement("span",{className:"".concat(r,"-selection-item"),title:D,style:z?{visibility:"hidden"}:void 0},J.label):null,U)},B4=function(e,n){var r=b.useRef(null),i=b.useRef(!1),o=e.prefixCls,a=e.open,l=e.mode,s=e.showSearch,u=e.tokenWithEnter,c=e.disabled,f=e.prefix,v=e.autoClearSearchValue,g=e.onSearch,m=e.onSearchSubmit,y=e.onToggleOpen,p=e.onInputKeyDown,C=e.onInputBlur,x=e.domRef;b.useImperativeHandle(n,function(){return{focus:function(D){r.current.focus(D)},blur:function(){r.current.blur()}}});var S=lE(0),E=fe(S,2),P=E[0],$=E[1],_=function(D){var U=D.which,W=r.current instanceof HTMLTextAreaElement;!W&&a&&(U===Ze.UP||U===Ze.DOWN)&&D.preventDefault(),p&&p(D),U===Ze.ENTER&&l==="tags"&&!i.current&&!a&&(m==null||m(D.target.value)),!(W&&!a&&~[Ze.UP,Ze.DOWN,Ze.LEFT,Ze.RIGHT].indexOf(U))&&P4(U)&&y(!0)},M=function(){$(!0)},B=b.useRef(null),H=function(D){g(D,!0,i.current)!==!1&&y(!0)},k=function(){i.current=!0},T=function(D){i.current=!1,l!=="combobox"&&H(D.target.value)},O=function(D){var U=D.target.value;if(u&&B.current&&/[\r\n]/.test(B.current)){var W=B.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");U=U.replace(W,B.current)}B.current=null,H(U)},L=function(D){var U=D.clipboardData,W=U==null?void 0:U.getData("text");B.current=W||""},K=function(D){var U=D.target;if(U!==r.current){var W=document.body.style.msTouchAction!==void 0;W?setTimeout(function(){r.current.focus()}):r.current.focus()}},q=function(D){var U=P();D.target!==r.current&&!U&&!(l==="combobox"&&c)&&D.preventDefault(),(l!=="combobox"&&(!s||!U)||!a)&&(a&&v!==!1&&g("",!0,!1),y())},J={inputRef:r,onInputKeyDown:_,onInputMouseDown:M,onInputChange:O,onInputPaste:L,onInputCompositionStart:k,onInputCompositionEnd:T,onInputBlur:C},V=l==="multiple"||l==="tags"?b.createElement(D4,Ne({},e,J)):b.createElement(F4,Ne({},e,J));return b.createElement("div",{ref:x,className:"".concat(o,"-selector"),onClick:K,onMouseDown:q},f&&b.createElement("div",{className:"".concat(o,"-prefix")},f),V)},j4=b.forwardRef(B4),z4=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],H4=function(e){var n=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},V4=function(e,n){var r=e.prefixCls;e.disabled;var i=e.visible,o=e.children,a=e.popupElement,l=e.animation,s=e.transitionName,u=e.dropdownStyle,c=e.dropdownClassName,f=e.direction,v=f===void 0?"ltr":f,g=e.placement,m=e.builtinPlacements,y=e.dropdownMatchSelectWidth,p=e.dropdownRender,C=e.dropdownAlign,x=e.getPopupContainer,S=e.empty,E=e.getTriggerDOMNode,P=e.onPopupVisibleChange,$=e.onPopupMouseEnter,_=_t(e,z4),M="".concat(r,"-dropdown"),B=a;p&&(B=p(a));var H=b.useMemo(function(){return m||H4(y)},[m,y]),k=l?"".concat(M,"-").concat(l):s,T=typeof y=="number",O=b.useMemo(function(){return T?null:y===!1?"minWidth":"width"},[y,T]),L=u;T&&(L=le(le({},L),{},{width:y}));var K=b.useRef(null);return b.useImperativeHandle(n,function(){return{getPopupElement:function(){var J;return(J=K.current)===null||J===void 0?void 0:J.popupElement}}}),b.createElement(Of,Ne({},_,{showAction:P?["click"]:[],hideAction:P?["click"]:[],popupPlacement:g||(v==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:H,prefixCls:M,popupTransitionName:k,popup:b.createElement("div",{onMouseEnter:$},B),ref:K,stretch:O,popupAlign:C,popupVisible:i,getPopupContainer:x,popupClassName:me(c,oe({},"".concat(M,"-empty"),S)),popupStyle:L,getTriggerDOMNode:E,onPopupVisibleChange:P}),o)},W4=b.forwardRef(V4);function Bx(t,e){var n=t.key,r;return"value"in t&&(r=t.value),n??(r!==void 0?r:"rc-index-key-".concat(e))}function Rm(t){return typeof t<"u"&&!Number.isNaN(t)}function fE(t,e){var n=t||{},r=n.label,i=n.value,o=n.options,a=n.groupLabel,l=r||(e?"children":"label");return{label:l,value:i||"value",options:o||"options",groupLabel:a||l}}function U4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.fieldNames,r=e.childrenAsData,i=[],o=fE(n,!1),a=o.label,l=o.value,s=o.options,u=o.groupLabel;function c(f,v){Array.isArray(f)&&f.forEach(function(g){if(v||!(s in g)){var m=g[l];i.push({key:Bx(g,i.length),groupOption:v,data:g,label:g[a],value:m})}else{var y=g[u];y===void 0&&r&&(y=g.label),i.push({key:Bx(g,i.length),group:!0,data:g,label:y}),c(g[s],!0)}})}return c(t,!1),i}function Im(t){var e=le({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return rr(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var q4=function(e,n,r){if(!n||!n.length)return null;var i=!1,o=function l(s,u){var c=FC(u),f=c[0],v=c.slice(1);if(!f)return[s];var g=s.split(f);return i=i||g.length>1,g.reduce(function(m,y){return[].concat(Ae(m),Ae(l(y,v)))},[]).filter(Boolean)},a=o(e,n);return i?typeof r<"u"?a.slice(0,r):a:null},Sp=b.createContext(null);function K4(t){var e=t.visible,n=t.values;if(!e)return null;var r=50;return b.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(i){var o=i.label,a=i.value;return["number","string"].includes(ht(o))?o:a}).join(", ")),n.length>r?", ...":null)}var G4=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],X4=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],Pm=function(e){return e==="tags"||e==="multiple"},Y4=b.forwardRef(function(t,e){var n,r=t.id,i=t.prefixCls,o=t.className,a=t.showSearch,l=t.tagRender,s=t.direction,u=t.omitDomProps,c=t.displayValues,f=t.onDisplayValuesChange,v=t.emptyOptions,g=t.notFoundContent,m=g===void 0?"Not Found":g,y=t.onClear,p=t.mode,C=t.disabled,x=t.loading,S=t.getInputElement,E=t.getRawInputElement,P=t.open,$=t.defaultOpen,_=t.onDropdownVisibleChange,M=t.activeValue,B=t.onActiveValueChange,H=t.activeDescendantId,k=t.searchValue,T=t.autoClearSearchValue,O=t.onSearch,L=t.onSearchSplit,K=t.tokenSeparators,q=t.allowClear,J=t.prefix,V=t.suffixIcon,z=t.clearIcon,D=t.OptionList,U=t.animation,W=t.transitionName,X=t.dropdownStyle,Y=t.dropdownClassName,Q=t.dropdownMatchSelectWidth,ne=t.dropdownRender,ie=t.dropdownAlign,re=t.placement,I=t.builtinPlacements,A=t.getPopupContainer,F=t.showAction,G=F===void 0?[]:F,ee=t.onFocus,te=t.onBlur,ae=t.onKeyUp,de=t.onKeyDown,he=t.onMouseDown,pe=_t(t,G4),we=Pm(p),_e=(a!==void 0?a:we)||p==="combobox",$e=le({},pe);X4.forEach(function(pt){delete $e[pt]}),u==null||u.forEach(function(pt){delete $e[pt]});var Me=b.useState(!1),Re=fe(Me,2),be=Re[0],Le=Re[1];b.useEffect(function(){Le(Tf())},[]);var He=b.useRef(null),it=b.useRef(null),qe=b.useRef(null),De=b.useRef(null),nt=b.useRef(null),Je=b.useRef(!1),st=R4(),Ve=fe(st,3),Ie=Ve[0],Te=Ve[1],je=Ve[2];b.useImperativeHandle(e,function(){var pt,ft;return{focus:(pt=De.current)===null||pt===void 0?void 0:pt.focus,blur:(ft=De.current)===null||ft===void 0?void 0:ft.blur,scrollTo:function(ln){var hn;return(hn=nt.current)===null||hn===void 0?void 0:hn.scrollTo(ln)},nativeElement:He.current||it.current}});var ke=b.useMemo(function(){var pt;if(p!=="combobox")return k;var ft=(pt=c[0])===null||pt===void 0?void 0:pt.value;return typeof ft=="string"||typeof ft=="number"?String(ft):""},[k,p,c]),et=p==="combobox"&&typeof S=="function"&&S()||null,St=typeof E=="function"&&E(),Ht=ts(it,St==null||(n=St.props)===null||n===void 0?void 0:n.ref),Ft=b.useState(!1),We=fe(Ft,2),tt=We[0],gt=We[1];$n(function(){gt(!0)},[]);var Ge=Mn(!1,{defaultValue:$,value:P}),Rt=fe(Ge,2),dt=Rt[0],ut=Rt[1],Ue=tt?dt:!1,Ct=!m&&v;(C||Ct&&Ue&&p==="combobox")&&(Ue=!1);var Lt=Ct?!1:Ue,Ke=b.useCallback(function(pt){var ft=pt!==void 0?pt:!Ue;C||(ut(ft),Ue!==ft&&(_==null||_(ft)))},[C,Ue,ut,_]),Xe=b.useMemo(function(){return(K||[]).some(function(pt){return[`
`,`\r
`].includes(pt)})},[K]),ot=b.useContext(Sp)||{},at=ot.maxCount,lt=ot.rawValues,mt=function(ft,en,ln){if(!(we&&Rm(at)&&(lt==null?void 0:lt.size)>=at)){var hn=!0,Cn=ft;B==null||B(null);var Er=q4(ft,K,Rm(at)?at-lt.size:void 0),er=ln?null:Er;return p!=="combobox"&&er&&(Cn="",L==null||L(er),Ke(!1),hn=!1),O&&ke!==Cn&&O(Cn,{source:en?"typing":"effect"}),hn}},Jt=function(ft){!ft||!ft.trim()||O(ft,{source:"submit"})};b.useEffect(function(){!Ue&&!we&&p!=="combobox"&&mt("",!1,!1)},[Ue]),b.useEffect(function(){dt&&C&&ut(!1),C&&!Je.current&&Te(!1)},[C]);var qt=lE(),Yt=fe(qt,2),zt=Yt[0],En=Yt[1],wn=b.useRef(!1),xn=function(ft){var en=zt(),ln=ft.key,hn=ln==="Enter";if(hn&&(p!=="combobox"&&ft.preventDefault(),Ue||Ke(!0)),En(!!ke),ln==="Backspace"&&!en&&we&&!ke&&c.length){for(var Cn=Ae(c),Er=null,er=Cn.length-1;er>=0;er-=1){var jt=Cn[er];if(!jt.disabled){Cn.splice(er,1),Er=jt;break}}Er&&f(Cn,{type:"remove",values:[Er]})}for(var cr=arguments.length,gr=new Array(cr>1?cr-1:0),Hr=1;Hr<cr;Hr++)gr[Hr-1]=arguments[Hr];if(Ue&&(!hn||!wn.current)){var mr;hn&&(wn.current=!0),(mr=nt.current)===null||mr===void 0||mr.onKeyDown.apply(mr,[ft].concat(gr))}de==null||de.apply(void 0,[ft].concat(gr))},An=function(ft){for(var en=arguments.length,ln=new Array(en>1?en-1:0),hn=1;hn<en;hn++)ln[hn-1]=arguments[hn];if(Ue){var Cn;(Cn=nt.current)===null||Cn===void 0||Cn.onKeyUp.apply(Cn,[ft].concat(ln))}ft.key==="Enter"&&(wn.current=!1),ae==null||ae.apply(void 0,[ft].concat(ln))},nn=function(ft){var en=c.filter(function(ln){return ln!==ft});f(en,{type:"remove",values:[ft]})},Kt=function(){wn.current=!1},rt=b.useRef(!1),ct=function(){Te(!0),C||(ee&&!rt.current&&ee.apply(void 0,arguments),G.includes("focus")&&Ke(!0)),rt.current=!0},Oe=function(){Je.current=!0,Te(!1,function(){rt.current=!1,Je.current=!1,Ke(!1)}),!C&&(ke&&(p==="tags"?O(ke,{source:"submit"}):p==="multiple"&&O("",{source:"blur"})),te&&te.apply(void 0,arguments))},Ce=[];b.useEffect(function(){return function(){Ce.forEach(function(pt){return clearTimeout(pt)}),Ce.splice(0,Ce.length)}},[]);var Ye=function(ft){var en,ln=ft.target,hn=(en=qe.current)===null||en===void 0?void 0:en.getPopupElement();if(hn&&hn.contains(ln)){var Cn=setTimeout(function(){var cr=Ce.indexOf(Cn);if(cr!==-1&&Ce.splice(cr,1),je(),!be&&!hn.contains(document.activeElement)){var gr;(gr=De.current)===null||gr===void 0||gr.focus()}});Ce.push(Cn)}for(var Er=arguments.length,er=new Array(Er>1?Er-1:0),jt=1;jt<Er;jt++)er[jt-1]=arguments[jt];he==null||he.apply(void 0,[ft].concat(er))},wt=b.useState({}),Dt=fe(wt,2),Gt=Dt[1];function Pn(){Gt({})}var Vt;St&&(Vt=function(ft){Ke(ft)}),I4(function(){var pt;return[He.current,(pt=qe.current)===null||pt===void 0?void 0:pt.getPopupElement()]},Lt,Ke,!!St);var Zt=b.useMemo(function(){return le(le({},t),{},{notFoundContent:m,open:Ue,triggerOpen:Lt,id:r,showSearch:_e,multiple:we,toggleOpen:Ke})},[t,m,Lt,Ue,r,_e,we,Ke]),rn=!!V||x,Wn;rn&&(Wn=b.createElement(Wf,{className:me("".concat(i,"-arrow"),oe({},"".concat(i,"-arrow-loading"),x)),customizeIcon:V,customizeIconProps:{loading:x,searchValue:ke,open:Ue,focused:Ie,showSearch:_e}}));var fn=function(){var ft;y==null||y(),(ft=De.current)===null||ft===void 0||ft.focus(),f([],{type:"clear",values:c}),mt("",!1,!1)},Zn=S4(i,fn,c,q,z,C,ke,p),Yn=Zn.allowClear,zr=Zn.clearIcon,Cr=b.createElement(D,{ref:nt}),Sr=me(i,o,oe(oe(oe(oe(oe(oe(oe(oe(oe(oe({},"".concat(i,"-focused"),Ie),"".concat(i,"-multiple"),we),"".concat(i,"-single"),!we),"".concat(i,"-allow-clear"),q),"".concat(i,"-show-arrow"),rn),"".concat(i,"-disabled"),C),"".concat(i,"-loading"),x),"".concat(i,"-open"),Ue),"".concat(i,"-customize-input"),et),"".concat(i,"-show-search"),_e)),kr=b.createElement(W4,{ref:qe,disabled:C,prefixCls:i,visible:Lt,popupElement:Cr,animation:U,transitionName:W,dropdownStyle:X,dropdownClassName:Y,direction:s,dropdownMatchSelectWidth:Q,dropdownRender:ne,dropdownAlign:ie,placement:re,builtinPlacements:I,getPopupContainer:A,empty:v,getTriggerDOMNode:function(ft){return it.current||ft},onPopupVisibleChange:Vt,onPopupMouseEnter:Pn},St?b.cloneElement(St,{ref:Ht}):b.createElement(j4,Ne({},t,{domRef:it,prefixCls:i,inputElement:et,ref:De,id:r,prefix:J,showSearch:_e,autoClearSearchValue:T,mode:p,activeDescendantId:H,tagRender:l,values:c,open:Ue,onToggleOpen:Ke,activeValue:M,searchValue:ke,onSearch:mt,onSearchSubmit:Jt,onRemove:nn,tokenWithEnter:Xe,onInputBlur:Kt}))),sn;return St?sn=kr:sn=b.createElement("div",Ne({className:Sr},$e,{ref:He,onMouseDown:Ye,onKeyDown:xn,onKeyUp:An,onFocus:ct,onBlur:Oe}),b.createElement(K4,{visible:Ie&&!Ue,values:c}),kr,Wn,Yn&&zr),b.createElement(sE.Provider,{value:Zt},sn)}),Ep=function(){return null};Ep.isSelectOptGroup=!0;var Rp=function(){return null};Rp.isSelectOption=!0;var hE=b.forwardRef(function(t,e){var n=t.height,r=t.offsetY,i=t.offsetX,o=t.children,a=t.prefixCls,l=t.onInnerResize,s=t.innerProps,u=t.rtl,c=t.extra,f={},v={display:"flex",flexDirection:"column"};return r!==void 0&&(f={height:n,position:"relative",overflow:"hidden"},v=le(le({},v),{},oe(oe(oe(oe(oe({transform:"translateY(".concat(r,"px)")},u?"marginRight":"marginLeft",-i),"position","absolute"),"left",0),"right",0),"top",0))),b.createElement("div",{style:f},b.createElement(Ki,{onResize:function(m){var y=m.offsetHeight;y&&l&&l()}},b.createElement("div",Ne({style:v,className:me(oe({},"".concat(a,"-holder-inner"),a)),ref:e},s),o,c)))});hE.displayName="Filler";function Q4(t){var e=t.children,n=t.setRef,r=b.useCallback(function(i){n(i)},[]);return b.cloneElement(e,{ref:r})}function J4(t,e,n,r,i,o,a,l){var s=l.getKey;return t.slice(e,n+1).map(function(u,c){var f=e+c,v=a(u,f,{style:{width:r},offsetX:i}),g=s(u);return b.createElement(Q4,{key:g,setRef:function(y){return o(u,y)}},v)})}function Z4(t,e,n){var r=t.length,i=e.length,o,a;if(r===0&&i===0)return null;r<i?(o=t,a=e):(o=e,a=t);var l={__EMPTY_ITEM__:!0};function s(m){return m!==void 0?n(m):l}for(var u=null,c=Math.abs(r-i)!==1,f=0;f<a.length;f+=1){var v=s(o[f]),g=s(a[f]);if(v!==g){u=f,c=c||v!==s(a[f+1]);break}}return u===null?null:{index:u,multiple:c}}function e6(t,e,n){var r=b.useState(t),i=fe(r,2),o=i[0],a=i[1],l=b.useState(null),s=fe(l,2),u=s[0],c=s[1];return b.useEffect(function(){var f=Z4(o||[],t||[],e);(f==null?void 0:f.index)!==void 0&&c(t[f.index]),a(t)},[t]),[u]}var jx=(typeof navigator>"u"?"undefined":ht(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const vE=function(t,e,n,r){var i=b.useRef(!1),o=b.useRef(null);function a(){clearTimeout(o.current),i.current=!0,o.current=setTimeout(function(){i.current=!1},50)}var l=b.useRef({top:t,bottom:e,left:n,right:r});return l.current.top=t,l.current.bottom=e,l.current.left=n,l.current.right=r,function(s,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=s?u<0&&l.current.left||u>0&&l.current.right:u<0&&l.current.top||u>0&&l.current.bottom;return c&&f?(clearTimeout(o.current),i.current=!1):(!f||i.current)&&a(),!i.current&&f}};function t6(t,e,n,r,i,o,a){var l=b.useRef(0),s=b.useRef(null),u=b.useRef(null),c=b.useRef(!1),f=vE(e,n,r,i);function v(x,S){if(Qt.cancel(s.current),!f(!1,S)){var E=x;if(!E._virtualHandled)E._virtualHandled=!0;else return;l.current+=S,u.current=S,jx||E.preventDefault(),s.current=Qt(function(){var P=c.current?10:1;a(l.current*P,!1),l.current=0})}}function g(x,S){a(S,!0),jx||x.preventDefault()}var m=b.useRef(null),y=b.useRef(null);function p(x){if(t){Qt.cancel(y.current),y.current=Qt(function(){m.current=null},2);var S=x.deltaX,E=x.deltaY,P=x.shiftKey,$=S,_=E;(m.current==="sx"||!m.current&&P&&E&&!S)&&($=E,_=0,m.current="sx");var M=Math.abs($),B=Math.abs(_);m.current===null&&(m.current=o&&M>B?"x":"y"),m.current==="y"?v(x,_):g(x,$)}}function C(x){t&&(c.current=x.detail===u.current)}return[p,C]}function n6(t,e,n,r){var i=b.useMemo(function(){return[new Map,[]]},[t,n.id,r]),o=fe(i,2),a=o[0],l=o[1],s=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c,v=a.get(c),g=a.get(f);if(v===void 0||g===void 0)for(var m=t.length,y=l.length;y<m;y+=1){var p,C=t[y],x=e(C);a.set(x,y);var S=(p=n.get(x))!==null&&p!==void 0?p:r;if(l[y]=(l[y-1]||0)+S,x===c&&(v=y),x===f&&(g=y),v!==void 0&&g!==void 0)break}return{top:l[v-1]||0,bottom:l[g]}};return s}var r6=function(){function t(){Hn(this,t),oe(this,"maps",void 0),oe(this,"id",0),oe(this,"diffRecords",new Map),this.maps=Object.create(null)}return Vn(t,[{key:"set",value:function(n,r){this.diffRecords.set(n,this.maps[n]),this.maps[n]=r,this.id+=1}},{key:"get",value:function(n){return this.maps[n]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),t}();function zx(t){var e=parseFloat(t);return isNaN(e)?0:e}function i6(t,e,n){var r=b.useState(0),i=fe(r,2),o=i[0],a=i[1],l=b.useRef(new Map),s=b.useRef(new r6),u=b.useRef(0);function c(){u.current+=1}function f(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;c();var m=function(){var C=!1;l.current.forEach(function(x,S){if(x&&x.offsetParent){var E=x.offsetHeight,P=getComputedStyle(x),$=P.marginTop,_=P.marginBottom,M=zx($),B=zx(_),H=E+M+B;s.current.get(S)!==H&&(s.current.set(S,H),C=!0)}}),C&&a(function(x){return x+1})};if(g)m();else{u.current+=1;var y=u.current;Promise.resolve().then(function(){y===u.current&&m()})}}function v(g,m){var y=t(g);l.current.get(y),m?(l.current.set(y,m),f()):l.current.delete(y)}return b.useEffect(function(){return c},[]),[v,f,s.current,o]}var Hx=14/15;function o6(t,e,n){var r=b.useRef(!1),i=b.useRef(0),o=b.useRef(0),a=b.useRef(null),l=b.useRef(null),s,u=function(g){if(r.current){var m=Math.ceil(g.touches[0].pageX),y=Math.ceil(g.touches[0].pageY),p=i.current-m,C=o.current-y,x=Math.abs(p)>Math.abs(C);x?i.current=m:o.current=y;var S=n(x,x?p:C,!1,g);S&&g.preventDefault(),clearInterval(l.current),S&&(l.current=setInterval(function(){x?p*=Hx:C*=Hx;var E=Math.floor(x?p:C);(!n(x,E,!0)||Math.abs(E)<=.1)&&clearInterval(l.current)},16))}},c=function(){r.current=!1,s()},f=function(g){s(),g.touches.length===1&&!r.current&&(r.current=!0,i.current=Math.ceil(g.touches[0].pageX),o.current=Math.ceil(g.touches[0].pageY),a.current=g.target,a.current.addEventListener("touchmove",u,{passive:!1}),a.current.addEventListener("touchend",c,{passive:!0}))};s=function(){a.current&&(a.current.removeEventListener("touchmove",u),a.current.removeEventListener("touchend",c))},$n(function(){return t&&e.current.addEventListener("touchstart",f,{passive:!0}),function(){var v;(v=e.current)===null||v===void 0||v.removeEventListener("touchstart",f),s(),clearInterval(l.current)}},[t])}function Vx(t){return Math.floor(Math.pow(t,.5))}function km(t,e){var n="touches"in t?t.touches[0]:t;return n[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function a6(t,e,n){b.useEffect(function(){var r=e.current;if(t&&r){var i=!1,o,a,l=function(){Qt.cancel(o)},s=function v(){l(),o=Qt(function(){n(a),v()})},u=function(g){if(!(g.target.draggable||g.button!==0)){var m=g;m._virtualHandled||(m._virtualHandled=!0,i=!0)}},c=function(){i=!1,l()},f=function(g){if(i){var m=km(g,!1),y=r.getBoundingClientRect(),p=y.top,C=y.bottom;if(m<=p){var x=p-m;a=-Vx(x),s()}else if(m>=C){var S=m-C;a=Vx(S),s()}else l()}};return r.addEventListener("mousedown",u),r.ownerDocument.addEventListener("mouseup",c),r.ownerDocument.addEventListener("mousemove",f),function(){r.removeEventListener("mousedown",u),r.ownerDocument.removeEventListener("mouseup",c),r.ownerDocument.removeEventListener("mousemove",f),l()}}},[t])}var s6=10;function l6(t,e,n,r,i,o,a,l){var s=b.useRef(),u=b.useState(null),c=fe(u,2),f=c[0],v=c[1];return $n(function(){if(f&&f.times<s6){if(!t.current){v(function(z){return le({},z)});return}o();var g=f.targetAlign,m=f.originAlign,y=f.index,p=f.offset,C=t.current.clientHeight,x=!1,S=g,E=null;if(C){for(var P=g||m,$=0,_=0,M=0,B=Math.min(e.length-1,y),H=0;H<=B;H+=1){var k=i(e[H]);_=$;var T=n.get(k);M=_+(T===void 0?r:T),$=M}for(var O=P==="top"?p:C-p,L=B;L>=0;L-=1){var K=i(e[L]),q=n.get(K);if(q===void 0){x=!0;break}if(O-=q,O<=0)break}switch(P){case"top":E=_-p;break;case"bottom":E=M-C+p;break;default:{var J=t.current.scrollTop,V=J+C;_<J?S="top":M>V&&(S="bottom")}}E!==null&&a(E),E!==f.lastTop&&(x=!0)}x&&v(le(le({},f),{},{times:f.times+1,targetAlign:S,lastTop:E}))}},[f,t.current]),function(g){if(g==null){l();return}if(Qt.cancel(s.current),typeof g=="number")a(g);else if(g&&ht(g)==="object"){var m,y=g.align;"index"in g?m=g.index:m=e.findIndex(function(x){return i(x)===g.key});var p=g.offset,C=p===void 0?0:p;v({times:0,index:m,offset:C,originAlign:y})}}}var Wx=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.rtl,i=t.scrollOffset,o=t.scrollRange,a=t.onStartMove,l=t.onStopMove,s=t.onScroll,u=t.horizontal,c=t.spinSize,f=t.containerSize,v=t.style,g=t.thumbStyle,m=t.showScrollBar,y=b.useState(!1),p=fe(y,2),C=p[0],x=p[1],S=b.useState(null),E=fe(S,2),P=E[0],$=E[1],_=b.useState(null),M=fe(_,2),B=M[0],H=M[1],k=!r,T=b.useRef(),O=b.useRef(),L=b.useState(m),K=fe(L,2),q=K[0],J=K[1],V=b.useRef(),z=function(){m===!0||m===!1||(clearTimeout(V.current),J(!0),V.current=setTimeout(function(){J(!1)},3e3))},D=o-f||0,U=f-c||0,W=b.useMemo(function(){if(i===0||D===0)return 0;var F=i/D;return F*U},[i,D,U]),X=function(G){G.stopPropagation(),G.preventDefault()},Y=b.useRef({top:W,dragging:C,pageY:P,startTop:B});Y.current={top:W,dragging:C,pageY:P,startTop:B};var Q=function(G){x(!0),$(km(G,u)),H(Y.current.top),a(),G.stopPropagation(),G.preventDefault()};b.useEffect(function(){var F=function(ae){ae.preventDefault()},G=T.current,ee=O.current;return G.addEventListener("touchstart",F,{passive:!1}),ee.addEventListener("touchstart",Q,{passive:!1}),function(){G.removeEventListener("touchstart",F),ee.removeEventListener("touchstart",Q)}},[]);var ne=b.useRef();ne.current=D;var ie=b.useRef();ie.current=U,b.useEffect(function(){if(C){var F,G=function(ae){var de=Y.current,he=de.dragging,pe=de.pageY,we=de.startTop;Qt.cancel(F);var _e=T.current.getBoundingClientRect(),$e=f/(u?_e.width:_e.height);if(he){var Me=(km(ae,u)-pe)*$e,Re=we;!k&&u?Re-=Me:Re+=Me;var be=ne.current,Le=ie.current,He=Le?Re/Le:0,it=Math.ceil(He*be);it=Math.max(it,0),it=Math.min(it,be),F=Qt(function(){s(it,u)})}},ee=function(){x(!1),l()};return window.addEventListener("mousemove",G,{passive:!0}),window.addEventListener("touchmove",G,{passive:!0}),window.addEventListener("mouseup",ee,{passive:!0}),window.addEventListener("touchend",ee,{passive:!0}),function(){window.removeEventListener("mousemove",G),window.removeEventListener("touchmove",G),window.removeEventListener("mouseup",ee),window.removeEventListener("touchend",ee),Qt.cancel(F)}}},[C]),b.useEffect(function(){return z(),function(){clearTimeout(V.current)}},[i]),b.useImperativeHandle(e,function(){return{delayHidden:z}});var re="".concat(n,"-scrollbar"),I={position:"absolute",visibility:q?null:"hidden"},A={position:"absolute",borderRadius:99,background:"var(--rc-virtual-list-scrollbar-bg, rgba(0, 0, 0, 0.5))",cursor:"pointer",userSelect:"none"};return u?(Object.assign(I,{height:8,left:0,right:0,bottom:0}),Object.assign(A,oe({height:"100%",width:c},k?"left":"right",W))):(Object.assign(I,oe({width:8,top:0,bottom:0},k?"right":"left",0)),Object.assign(A,{width:"100%",height:c,top:W})),b.createElement("div",{ref:T,className:me(re,oe(oe(oe({},"".concat(re,"-horizontal"),u),"".concat(re,"-vertical"),!u),"".concat(re,"-visible"),q)),style:le(le({},I),v),onMouseDown:X,onMouseMove:z},b.createElement("div",{ref:O,className:me("".concat(re,"-thumb"),oe({},"".concat(re,"-thumb-moving"),C)),style:le(le({},A),g),onMouseDown:Q}))}),c6=20;function Ux(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t/e*t;return isNaN(n)&&(n=0),n=Math.max(n,c6),Math.floor(n)}var u6=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],d6=[],f6={overflowY:"auto",overflowAnchor:"none"};function h6(t,e){var n=t.prefixCls,r=n===void 0?"rc-virtual-list":n,i=t.className,o=t.height,a=t.itemHeight,l=t.fullHeight,s=l===void 0?!0:l,u=t.style,c=t.data,f=t.children,v=t.itemKey,g=t.virtual,m=t.direction,y=t.scrollWidth,p=t.component,C=p===void 0?"div":p,x=t.onScroll,S=t.onVirtualScroll,E=t.onVisibleChange,P=t.innerProps,$=t.extraRender,_=t.styles,M=t.showScrollBar,B=M===void 0?"optional":M,H=_t(t,u6),k=b.useCallback(function(rt){return typeof v=="function"?v(rt):rt==null?void 0:rt[v]},[v]),T=i6(k),O=fe(T,4),L=O[0],K=O[1],q=O[2],J=O[3],V=!!(g!==!1&&o&&a),z=b.useMemo(function(){return Object.values(q.maps).reduce(function(rt,ct){return rt+ct},0)},[q.id,q.maps]),D=V&&c&&(Math.max(a*c.length,z)>o||!!y),U=m==="rtl",W=me(r,oe({},"".concat(r,"-rtl"),U),i),X=c||d6,Y=b.useRef(),Q=b.useRef(),ne=b.useRef(),ie=b.useState(0),re=fe(ie,2),I=re[0],A=re[1],F=b.useState(0),G=fe(F,2),ee=G[0],te=G[1],ae=b.useState(!1),de=fe(ae,2),he=de[0],pe=de[1],we=function(){pe(!0)},_e=function(){pe(!1)},$e={getKey:k};function Me(rt){A(function(ct){var Oe;typeof rt=="function"?Oe=rt(ct):Oe=rt;var Ce=gt(Oe);return Y.current.scrollTop=Ce,Ce})}var Re=b.useRef({start:0,end:X.length}),be=b.useRef(),Le=e6(X,k),He=fe(Le,1),it=He[0];be.current=it;var qe=b.useMemo(function(){if(!V)return{scrollHeight:void 0,start:0,end:X.length-1,offset:void 0};if(!D){var rt;return{scrollHeight:((rt=Q.current)===null||rt===void 0?void 0:rt.offsetHeight)||0,start:0,end:X.length-1,offset:void 0}}for(var ct=0,Oe,Ce,Ye,wt=X.length,Dt=0;Dt<wt;Dt+=1){var Gt=X[Dt],Pn=k(Gt),Vt=q.get(Pn),Zt=ct+(Vt===void 0?a:Vt);Zt>=I&&Oe===void 0&&(Oe=Dt,Ce=ct),Zt>I+o&&Ye===void 0&&(Ye=Dt),ct=Zt}return Oe===void 0&&(Oe=0,Ce=0,Ye=Math.ceil(o/a)),Ye===void 0&&(Ye=X.length-1),Ye=Math.min(Ye+1,X.length-1),{scrollHeight:ct,start:Oe,end:Ye,offset:Ce}},[D,V,I,X,J,o]),De=qe.scrollHeight,nt=qe.start,Je=qe.end,st=qe.offset;Re.current.start=nt,Re.current.end=Je,b.useLayoutEffect(function(){var rt=q.getRecord();if(rt.size===1){var ct=Array.from(rt.keys())[0],Oe=rt.get(ct),Ce=X[nt];if(Ce&&Oe===void 0){var Ye=k(Ce);if(Ye===ct){var wt=q.get(ct),Dt=wt-a;Me(function(Gt){return Gt+Dt})}}}q.resetRecord()},[De]);var Ve=b.useState({width:0,height:o}),Ie=fe(Ve,2),Te=Ie[0],je=Ie[1],ke=function(ct){je({width:ct.offsetWidth,height:ct.offsetHeight})},et=b.useRef(),St=b.useRef(),Ht=b.useMemo(function(){return Ux(Te.width,y)},[Te.width,y]),Ft=b.useMemo(function(){return Ux(Te.height,De)},[Te.height,De]),We=De-o,tt=b.useRef(We);tt.current=We;function gt(rt){var ct=rt;return Number.isNaN(tt.current)||(ct=Math.min(ct,tt.current)),ct=Math.max(ct,0),ct}var Ge=I<=0,Rt=I>=We,dt=ee<=0,ut=ee>=y,Ue=vE(Ge,Rt,dt,ut),Ct=function(){return{x:U?-ee:ee,y:I}},Lt=b.useRef(Ct()),Ke=In(function(rt){if(S){var ct=le(le({},Ct()),rt);(Lt.current.x!==ct.x||Lt.current.y!==ct.y)&&(S(ct),Lt.current=ct)}});function Xe(rt,ct){var Oe=rt;ct?(Gi.flushSync(function(){te(Oe)}),Ke()):Me(Oe)}function ot(rt){var ct=rt.currentTarget.scrollTop;ct!==I&&Me(ct),x==null||x(rt),Ke()}var at=function(ct){var Oe=ct,Ce=y?y-Te.width:0;return Oe=Math.max(Oe,0),Oe=Math.min(Oe,Ce),Oe},lt=In(function(rt,ct){ct?(Gi.flushSync(function(){te(function(Oe){var Ce=Oe+(U?-rt:rt);return at(Ce)})}),Ke()):Me(function(Oe){var Ce=Oe+rt;return Ce})}),mt=t6(V,Ge,Rt,dt,ut,!!y,lt),Jt=fe(mt,2),qt=Jt[0],Yt=Jt[1];o6(V,Y,function(rt,ct,Oe,Ce){var Ye=Ce;return Ue(rt,ct,Oe)?!1:!Ye||!Ye._virtualHandled?(Ye&&(Ye._virtualHandled=!0),qt({preventDefault:function(){},deltaX:rt?ct:0,deltaY:rt?0:ct}),!0):!1}),a6(D,Y,function(rt){Me(function(ct){return ct+rt})}),$n(function(){function rt(Oe){var Ce=Ge&&Oe.detail<0,Ye=Rt&&Oe.detail>0;V&&!Ce&&!Ye&&Oe.preventDefault()}var ct=Y.current;return ct.addEventListener("wheel",qt,{passive:!1}),ct.addEventListener("DOMMouseScroll",Yt,{passive:!0}),ct.addEventListener("MozMousePixelScroll",rt,{passive:!1}),function(){ct.removeEventListener("wheel",qt),ct.removeEventListener("DOMMouseScroll",Yt),ct.removeEventListener("MozMousePixelScroll",rt)}},[V,Ge,Rt]),$n(function(){if(y){var rt=at(ee);te(rt),Ke({x:rt})}},[Te.width,y]);var zt=function(){var ct,Oe;(ct=et.current)===null||ct===void 0||ct.delayHidden(),(Oe=St.current)===null||Oe===void 0||Oe.delayHidden()},En=l6(Y,X,q,a,k,function(){return K(!0)},Me,zt);b.useImperativeHandle(e,function(){return{nativeElement:ne.current,getScrollInfo:Ct,scrollTo:function(ct){function Oe(Ce){return Ce&&ht(Ce)==="object"&&("left"in Ce||"top"in Ce)}Oe(ct)?(ct.left!==void 0&&te(at(ct.left)),En(ct.top)):En(ct)}}}),$n(function(){if(E){var rt=X.slice(nt,Je+1);E(rt,X)}},[nt,Je,X]);var wn=n6(X,k,q,a),xn=$==null?void 0:$({start:nt,end:Je,virtual:D,offsetX:ee,offsetY:st,rtl:U,getSize:wn}),An=J4(X,nt,Je,y,ee,L,f,$e),nn=null;o&&(nn=le(oe({},s?"height":"maxHeight",o),f6),V&&(nn.overflowY="hidden",y&&(nn.overflowX="hidden"),he&&(nn.pointerEvents="none")));var Kt={};return U&&(Kt.dir="rtl"),b.createElement("div",Ne({ref:ne,style:le(le({},u),{},{position:"relative"}),className:W},Kt,H),b.createElement(Ki,{onResize:ke},b.createElement(C,{className:"".concat(r,"-holder"),style:nn,ref:Y,onScroll:ot,onMouseEnter:zt},b.createElement(hE,{prefixCls:r,height:De,offsetX:ee,offsetY:st,scrollWidth:y,onInnerResize:K,ref:Q,innerProps:P,rtl:U,extra:xn},An))),D&&De>o&&b.createElement(Wx,{ref:et,prefixCls:r,scrollOffset:I,scrollRange:De,rtl:U,onScroll:Xe,onStartMove:we,onStopMove:_e,spinSize:Ft,containerSize:Te.height,style:_==null?void 0:_.verticalScrollBar,thumbStyle:_==null?void 0:_.verticalScrollBarThumb,showScrollBar:B}),D&&y>Te.width&&b.createElement(Wx,{ref:St,prefixCls:r,scrollOffset:ee,scrollRange:y,rtl:U,onScroll:Xe,onStartMove:we,onStopMove:_e,spinSize:Ht,containerSize:Te.width,horizontal:!0,style:_==null?void 0:_.horizontalScrollBar,thumbStyle:_==null?void 0:_.horizontalScrollBarThumb,showScrollBar:B}))}var gE=b.forwardRef(h6);gE.displayName="List";function v6(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var g6=["disabled","title","children","style","className"];function qx(t){return typeof t=="string"||typeof t=="number"}var m6=function(e,n){var r=E4(),i=r.prefixCls,o=r.id,a=r.open,l=r.multiple,s=r.mode,u=r.searchValue,c=r.toggleOpen,f=r.notFoundContent,v=r.onPopupScroll,g=b.useContext(Sp),m=g.maxCount,y=g.flattenOptions,p=g.onActiveValue,C=g.defaultActiveFirstOption,x=g.onSelect,S=g.menuItemSelectedIcon,E=g.rawValues,P=g.fieldNames,$=g.virtual,_=g.direction,M=g.listHeight,B=g.listItemHeight,H=g.optionRender,k="".concat(i,"-item"),T=zc(function(){return y},[a,y],function(F,G){return G[0]&&F[1]!==G[1]}),O=b.useRef(null),L=b.useMemo(function(){return l&&Rm(m)&&(E==null?void 0:E.size)>=m},[l,m,E==null?void 0:E.size]),K=function(G){G.preventDefault()},q=function(G){var ee;(ee=O.current)===null||ee===void 0||ee.scrollTo(typeof G=="number"?{index:G}:G)},J=b.useCallback(function(F){return s==="combobox"?!1:E.has(F)},[s,Ae(E).toString(),E.size]),V=function(G){for(var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,te=T.length,ae=0;ae<te;ae+=1){var de=(G+ae*ee+te)%te,he=T[de]||{},pe=he.group,we=he.data;if(!pe&&!(we!=null&&we.disabled)&&(J(we.value)||!L))return de}return-1},z=b.useState(function(){return V(0)}),D=fe(z,2),U=D[0],W=D[1],X=function(G){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;W(G);var te={source:ee?"keyboard":"mouse"},ae=T[G];if(!ae){p(null,-1,te);return}p(ae.value,G,te)};b.useEffect(function(){X(C!==!1?V(0):-1)},[T.length,u]);var Y=b.useCallback(function(F){return s==="combobox"?String(F).toLowerCase()===u.toLowerCase():E.has(F)},[s,u,Ae(E).toString(),E.size]);b.useEffect(function(){var F=setTimeout(function(){if(!l&&a&&E.size===1){var ee=Array.from(E)[0],te=T.findIndex(function(ae){var de=ae.data;return u?String(de.value).startsWith(u):de.value===ee});te!==-1&&(X(te),q(te))}});if(a){var G;(G=O.current)===null||G===void 0||G.scrollTo(void 0)}return function(){return clearTimeout(F)}},[a,u]);var Q=function(G){G!==void 0&&x(G,{selected:!E.has(G)}),l||c(!1)};if(b.useImperativeHandle(n,function(){return{onKeyDown:function(G){var ee=G.which,te=G.ctrlKey;switch(ee){case Ze.N:case Ze.P:case Ze.UP:case Ze.DOWN:{var ae=0;if(ee===Ze.UP?ae=-1:ee===Ze.DOWN?ae=1:v6()&&te&&(ee===Ze.N?ae=1:ee===Ze.P&&(ae=-1)),ae!==0){var de=V(U+ae,ae);q(de),X(de,!0)}break}case Ze.TAB:case Ze.ENTER:{var he,pe=T[U];pe&&!(pe!=null&&(he=pe.data)!==null&&he!==void 0&&he.disabled)&&!L?Q(pe.value):Q(void 0),a&&G.preventDefault();break}case Ze.ESC:c(!1),a&&G.stopPropagation()}},onKeyUp:function(){},scrollTo:function(G){q(G)}}}),T.length===0)return b.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(k,"-empty"),onMouseDown:K},f);var ne=Object.keys(P).map(function(F){return P[F]}),ie=function(G){return G.label};function re(F,G){var ee=F.group;return{role:ee?"presentation":"option",id:"".concat(o,"_list_").concat(G)}}var I=function(G){var ee=T[G];if(!ee)return null;var te=ee.data||{},ae=te.value,de=ee.group,he=Lo(te,!0),pe=ie(ee);return ee?b.createElement("div",Ne({"aria-label":typeof pe=="string"&&!de?pe:null},he,{key:G},re(ee,G),{"aria-selected":Y(ae)}),ae):null},A={role:"listbox",id:"".concat(o,"_list")};return b.createElement(b.Fragment,null,$&&b.createElement("div",Ne({},A,{style:{height:0,width:0,overflow:"hidden"}}),I(U-1),I(U),I(U+1)),b.createElement(gE,{itemKey:"key",ref:O,data:T,height:M,itemHeight:B,fullHeight:!1,onMouseDown:K,onScroll:v,virtual:$,direction:_,innerProps:$?null:A},function(F,G){var ee=F.group,te=F.groupOption,ae=F.data,de=F.label,he=F.value,pe=ae.key;if(ee){var we,_e=(we=ae.title)!==null&&we!==void 0?we:qx(de)?de.toString():void 0;return b.createElement("div",{className:me(k,"".concat(k,"-group"),ae.className),title:_e},de!==void 0?de:pe)}var $e=ae.disabled,Me=ae.title;ae.children;var Re=ae.style,be=ae.className,Le=_t(ae,g6),He=yi(Le,ne),it=J(he),qe=$e||!it&&L,De="".concat(k,"-option"),nt=me(k,De,be,oe(oe(oe(oe({},"".concat(De,"-grouped"),te),"".concat(De,"-active"),U===G&&!qe),"".concat(De,"-disabled"),qe),"".concat(De,"-selected"),it)),Je=ie(F),st=!S||typeof S=="function"||it,Ve=typeof Je=="number"?Je:Je||he,Ie=qx(Ve)?Ve.toString():void 0;return Me!==void 0&&(Ie=Me),b.createElement("div",Ne({},Lo(He),$?{}:re(F,G),{"aria-selected":Y(he),className:nt,title:Ie,onMouseMove:function(){U===G||qe||X(G)},onClick:function(){qe||Q(he)},style:Re}),b.createElement("div",{className:"".concat(De,"-content")},typeof H=="function"?H(F,{index:G}):Ve),b.isValidElement(S)||it,st&&b.createElement(Wf,{className:"".concat(k,"-option-state"),customizeIcon:S,customizeIconProps:{value:he,disabled:qe,isSelected:it}},it?"✓":null))}))},p6=b.forwardRef(m6);const y6=function(t,e){var n=b.useRef({values:new Map,options:new Map}),r=b.useMemo(function(){var o=n.current,a=o.values,l=o.options,s=t.map(function(f){if(f.label===void 0){var v;return le(le({},f),{},{label:(v=a.get(f.value))===null||v===void 0?void 0:v.label})}return f}),u=new Map,c=new Map;return s.forEach(function(f){u.set(f.value,f),c.set(f.value,e.get(f.value)||l.get(f.value))}),n.current.values=u,n.current.options=c,s},[t,e]),i=b.useCallback(function(o){return e.get(o)||n.current.options.get(o)},[e]);return[r,i]};function ug(t,e){return uE(t).join("").toUpperCase().includes(e)}const b6=function(t,e,n,r,i){return b.useMemo(function(){if(!n||r===!1)return t;var o=e.options,a=e.label,l=e.value,s=[],u=typeof r=="function",c=n.toUpperCase(),f=u?r:function(g,m){return i?ug(m[i],c):m[o]?ug(m[a!=="children"?a:"label"],c):ug(m[l],c)},v=u?function(g){return Im(g)}:function(g){return g};return t.forEach(function(g){if(g[o]){var m=f(n,v(g));if(m)s.push(g);else{var y=g[o].filter(function(p){return f(n,v(p))});y.length&&s.push(le(le({},g),{},oe({},o,y)))}return}f(n,v(g))&&s.push(g)}),s},[t,r,i,n,e])};var Kx=0,w6=jr();function x6(){var t;return w6?(t=Kx,Kx+=1):t="TEST_OR_SSR",t}function C6(t){var e=b.useState(),n=fe(e,2),r=n[0],i=n[1];return b.useEffect(function(){i("rc_select_".concat(x6()))},[]),t||r}var S6=["children","value"],E6=["children"];function R6(t){var e=t,n=e.key,r=e.props,i=r.children,o=r.value,a=_t(r,S6);return le({key:n,value:o!==void 0?o:n,children:i},a)}function mE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Do(t).map(function(n,r){if(!b.isValidElement(n)||!n.type)return null;var i=n,o=i.type.isSelectOptGroup,a=i.key,l=i.props,s=l.children,u=_t(l,E6);return e||!o?R6(n):le(le({key:"__RC_SELECT_GRP__".concat(a===null?r:a,"__"),label:a},u),{},{options:mE(s)})}).filter(function(n){return n})}var I6=function(e,n,r,i,o){return b.useMemo(function(){var a=e,l=!e;l&&(a=mE(n));var s=new Map,u=new Map,c=function(g,m,y){y&&typeof y=="string"&&g.set(m[y],m)},f=function v(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<g.length;y+=1){var p=g[y];!p[r.options]||m?(s.set(p[r.value],p),c(u,p,r.label),c(u,p,i),c(u,p,o)):v(p[r.options],!0)}};return f(a),{options:a,valueOptions:s,labelOptions:u}},[e,n,r,i,o])};function Gx(t){var e=b.useRef();e.current=t;var n=b.useCallback(function(){return e.current.apply(e,arguments)},[]);return n}var P6=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],k6=["inputValue"];function $6(t){return!t||ht(t)!=="object"}var T6=b.forwardRef(function(t,e){var n=t.id,r=t.mode,i=t.prefixCls,o=i===void 0?"rc-select":i,a=t.backfill,l=t.fieldNames,s=t.inputValue,u=t.searchValue,c=t.onSearch,f=t.autoClearSearchValue,v=f===void 0?!0:f,g=t.onSelect,m=t.onDeselect,y=t.dropdownMatchSelectWidth,p=y===void 0?!0:y,C=t.filterOption,x=t.filterSort,S=t.optionFilterProp,E=t.optionLabelProp,P=t.options,$=t.optionRender,_=t.children,M=t.defaultActiveFirstOption,B=t.menuItemSelectedIcon,H=t.virtual,k=t.direction,T=t.listHeight,O=T===void 0?200:T,L=t.listItemHeight,K=L===void 0?20:L,q=t.labelRender,J=t.value,V=t.defaultValue,z=t.labelInValue,D=t.onChange,U=t.maxCount,W=_t(t,P6),X=C6(n),Y=Pm(r),Q=!!(!P&&_),ne=b.useMemo(function(){return C===void 0&&r==="combobox"?!1:C},[C,r]),ie=b.useMemo(function(){return fE(l,Q)},[JSON.stringify(l),Q]),re=Mn("",{value:u!==void 0?u:s,postState:function(Xe){return Xe||""}}),I=fe(re,2),A=I[0],F=I[1],G=I6(P,_,ie,S,E),ee=G.valueOptions,te=G.labelOptions,ae=G.options,de=b.useCallback(function(Ke){var Xe=uE(Ke);return Xe.map(function(ot){var at,lt,mt,Jt,qt;if($6(ot))at=ot;else{var Yt;mt=ot.key,lt=ot.label,at=(Yt=ot.value)!==null&&Yt!==void 0?Yt:mt}var zt=ee.get(at);if(zt){var En;lt===void 0&&(lt=zt==null?void 0:zt[E||ie.label]),mt===void 0&&(mt=(En=zt==null?void 0:zt.key)!==null&&En!==void 0?En:at),Jt=zt==null?void 0:zt.disabled,qt=zt==null?void 0:zt.title}return{label:lt,value:at,key:mt,disabled:Jt,title:qt}})},[ie,E,ee]),he=Mn(V,{value:J}),pe=fe(he,2),we=pe[0],_e=pe[1],$e=b.useMemo(function(){var Ke,Xe=Y&&we===null?[]:we,ot=de(Xe);return r==="combobox"&&M4((Ke=ot[0])===null||Ke===void 0?void 0:Ke.value)?[]:ot},[we,de,r,Y]),Me=y6($e,ee),Re=fe(Me,2),be=Re[0],Le=Re[1],He=b.useMemo(function(){if(!r&&be.length===1){var Ke=be[0];if(Ke.value===null&&(Ke.label===null||Ke.label===void 0))return[]}return be.map(function(Xe){var ot;return le(le({},Xe),{},{label:(ot=typeof q=="function"?q(Xe):Xe.label)!==null&&ot!==void 0?ot:Xe.value})})},[r,be,q]),it=b.useMemo(function(){return new Set(be.map(function(Ke){return Ke.value}))},[be]);b.useEffect(function(){if(r==="combobox"){var Ke,Xe=(Ke=be[0])===null||Ke===void 0?void 0:Ke.value;F(O4(Xe)?String(Xe):"")}},[be]);var qe=Gx(function(Ke,Xe){var ot=Xe??Ke;return oe(oe({},ie.value,Ke),ie.label,ot)}),De=b.useMemo(function(){if(r!=="tags")return ae;var Ke=Ae(ae),Xe=function(at){return ee.has(at)};return Ae(be).sort(function(ot,at){return ot.value<at.value?-1:1}).forEach(function(ot){var at=ot.value;Xe(at)||Ke.push(qe(at,ot.label))}),Ke},[qe,ae,ee,be,r]),nt=b6(De,ie,A,ne,S),Je=b.useMemo(function(){return r!=="tags"||!A||nt.some(function(Ke){return Ke[S||"value"]===A})||nt.some(function(Ke){return Ke[ie.value]===A})?nt:[qe(A)].concat(Ae(nt))},[qe,S,r,nt,A,ie]),st=function Ke(Xe){var ot=Ae(Xe).sort(function(at,lt){return x(at,lt,{searchValue:A})});return ot.map(function(at){return Array.isArray(at.options)?le(le({},at),{},{options:at.options.length>0?Ke(at.options):at.options}):at})},Ve=b.useMemo(function(){return x?st(Je):Je},[Je,x,A]),Ie=b.useMemo(function(){return U4(Ve,{fieldNames:ie,childrenAsData:Q})},[Ve,ie,Q]),Te=function(Xe){var ot=de(Xe);if(_e(ot),D&&(ot.length!==be.length||ot.some(function(mt,Jt){var qt;return((qt=be[Jt])===null||qt===void 0?void 0:qt.value)!==(mt==null?void 0:mt.value)}))){var at=z?ot:ot.map(function(mt){return mt.value}),lt=ot.map(function(mt){return Im(Le(mt.value))});D(Y?at:at[0],Y?lt:lt[0])}},je=b.useState(null),ke=fe(je,2),et=ke[0],St=ke[1],Ht=b.useState(0),Ft=fe(Ht,2),We=Ft[0],tt=Ft[1],gt=M!==void 0?M:r!=="combobox",Ge=b.useCallback(function(Ke,Xe){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},at=ot.source,lt=at===void 0?"keyboard":at;tt(Xe),a&&r==="combobox"&&Ke!==null&&lt==="keyboard"&&St(String(Ke))},[a,r]),Rt=function(Xe,ot,at){var lt=function(){var nn,Kt=Le(Xe);return[z?{label:Kt==null?void 0:Kt[ie.label],value:Xe,key:(nn=Kt==null?void 0:Kt.key)!==null&&nn!==void 0?nn:Xe}:Xe,Im(Kt)]};if(ot&&g){var mt=lt(),Jt=fe(mt,2),qt=Jt[0],Yt=Jt[1];g(qt,Yt)}else if(!ot&&m&&at!=="clear"){var zt=lt(),En=fe(zt,2),wn=En[0],xn=En[1];m(wn,xn)}},dt=Gx(function(Ke,Xe){var ot,at=Y?Xe.selected:!0;at?ot=Y?[].concat(Ae(be),[Ke]):[Ke]:ot=be.filter(function(lt){return lt.value!==Ke}),Te(ot),Rt(Ke,at),r==="combobox"?St(""):(!Pm||v)&&(F(""),St(""))}),ut=function(Xe,ot){Te(Xe);var at=ot.type,lt=ot.values;(at==="remove"||at==="clear")&&lt.forEach(function(mt){Rt(mt.value,!1,at)})},Ue=function(Xe,ot){if(F(Xe),St(null),ot.source==="submit"){var at=(Xe||"").trim();if(at){var lt=Array.from(new Set([].concat(Ae(it),[at])));Te(lt),Rt(at,!0),F("")}return}ot.source!=="blur"&&(r==="combobox"&&Te(Xe),c==null||c(Xe))},Ct=function(Xe){var ot=Xe;r!=="tags"&&(ot=Xe.map(function(lt){var mt=te.get(lt);return mt==null?void 0:mt.value}).filter(function(lt){return lt!==void 0}));var at=Array.from(new Set([].concat(Ae(it),Ae(ot))));Te(at),at.forEach(function(lt){Rt(lt,!0)})},Lt=b.useMemo(function(){var Ke=H!==!1&&p!==!1;return le(le({},G),{},{flattenOptions:Ie,onActiveValue:Ge,defaultActiveFirstOption:gt,onSelect:dt,menuItemSelectedIcon:B,rawValues:it,fieldNames:ie,virtual:Ke,direction:k,listHeight:O,listItemHeight:K,childrenAsData:Q,maxCount:U,optionRender:$})},[U,G,Ie,Ge,gt,dt,B,it,ie,H,p,k,O,K,Q,$]);return b.createElement(Sp.Provider,{value:Lt},b.createElement(Y4,Ne({},W,{id:X,prefixCls:o,ref:e,omitDomProps:k6,mode:r,displayValues:He,onDisplayValuesChange:ut,direction:k,searchValue:A,onSearch:Ue,autoClearSearchValue:v,onSearchSplit:Ct,dropdownMatchSelectWidth:p,OptionList:p6,emptyOptions:!Ie.length,activeValue:et,activeDescendantId:"".concat(X,"_list_").concat(We)})))}),Ip=T6;Ip.Option=Rp;Ip.OptGroup=Ep;function _6(t){return e=>b.createElement(ga,{theme:{token:{motion:!1,zIndexPopupBase:0}}},b.createElement(t,Object.assign({},e)))}const pE=(t,e,n,r,i)=>_6(a=>{const{prefixCls:l,style:s}=a,u=b.useRef(null),[c,f]=b.useState(0),[v,g]=b.useState(0),[m,y]=Mn(!1,{value:a.open}),{getPrefixCls:p}=b.useContext(un),C=p(r||"select",l);b.useEffect(()=>{if(y(!0),typeof ResizeObserver<"u"){const E=new ResizeObserver($=>{const _=$[0].target;f(_.offsetHeight+8),g(_.offsetWidth)}),P=setInterval(()=>{var $;const _=i?`.${i(C)}`:`.${C}-dropdown`,M=($=u.current)===null||$===void 0?void 0:$.querySelector(_);M&&(clearInterval(P),E.observe(M))},10);return()=>{clearInterval(P),E.disconnect()}}},[]);let x=Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},s),{margin:0}),open:m,visible:m,getPopupContainer:()=>u.current});n&&(x=n(x)),e&&Object.assign(x,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const S={paddingBottom:c,position:"relative",minWidth:v};return b.createElement("div",{ref:u,style:S},b.createElement(t,Object.assign({},x)))}),A6=()=>{const[,t]=Mi(),[e]=es("Empty"),r=new yn(t.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return b.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},b.createElement("title",null,(e==null?void 0:e.description)||"Empty"),b.createElement("g",{fill:"none",fillRule:"evenodd"},b.createElement("g",{transform:"translate(24 31.67)"},b.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),b.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),b.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),b.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),b.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),b.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),b.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},b.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),b.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},O6=()=>{const[,t]=Mi(),[e]=es("Empty"),{colorFill:n,colorFillTertiary:r,colorFillQuaternary:i,colorBgContainer:o}=t,{borderColor:a,shadowColor:l,contentColor:s}=b.useMemo(()=>({borderColor:new yn(n).onBackground(o).toHexString(),shadowColor:new yn(r).onBackground(o).toHexString(),contentColor:new yn(i).onBackground(o).toHexString()}),[n,r,i,o]);return b.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},b.createElement("title",null,(e==null?void 0:e.description)||"Empty"),b.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},b.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),b.createElement("g",{fillRule:"nonzero",stroke:a},b.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),b.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:s}))))},M6=t=>{const{componentCls:e,margin:n,marginXS:r,marginXL:i,fontSize:o,lineHeight:a}=t;return{[e]:{marginInline:r,fontSize:o,lineHeight:a,textAlign:"center",[`${e}-image`]:{height:t.emptyImgHeight,marginBottom:r,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:t.colorTextDescription},[`${e}-footer`]:{marginTop:n},"&-normal":{marginBlock:i,color:t.colorTextDescription,[`${e}-description`]:{color:t.colorTextDescription},[`${e}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:r,color:t.colorTextDescription,[`${e}-image`]:{height:t.emptyImgHeightSM}}}}},N6=lr("Empty",t=>{const{componentCls:e,controlHeightLG:n,calc:r}=t,i=bn(t,{emptyImgCls:`${e}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[M6(i)]});var L6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const yE=b.createElement(A6,null),bE=b.createElement(O6,null),Oa=t=>{const{className:e,rootClassName:n,prefixCls:r,image:i=yE,description:o,children:a,imageStyle:l,style:s,classNames:u,styles:c}=t,f=L6(t,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:v,direction:g,className:m,style:y,classNames:p,styles:C}=eo("empty"),x=v("empty",r),[S,E,P]=N6(x),[$]=es("Empty"),_=typeof o<"u"?o:$==null?void 0:$.description,M=typeof _=="string"?_:"empty";let B=null;return typeof i=="string"?B=b.createElement("img",{alt:M,src:i}):B=i,S(b.createElement("div",Object.assign({className:me(E,P,x,m,{[`${x}-normal`]:i===bE,[`${x}-rtl`]:g==="rtl"},e,n,p.root,u==null?void 0:u.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},C.root),y),c==null?void 0:c.root),s)},f),b.createElement("div",{className:me(`${x}-image`,p.image,u==null?void 0:u.image),style:Object.assign(Object.assign(Object.assign({},l),C.image),c==null?void 0:c.image)},B),_&&b.createElement("div",{className:me(`${x}-description`,p.description,u==null?void 0:u.description),style:Object.assign(Object.assign({},C.description),c==null?void 0:c.description)},_),a&&b.createElement("div",{className:me(`${x}-footer`,p.footer,u==null?void 0:u.footer),style:Object.assign(Object.assign({},C.footer),c==null?void 0:c.footer)},a)))};Oa.PRESENTED_IMAGE_DEFAULT=yE;Oa.PRESENTED_IMAGE_SIMPLE=bE;const D6=t=>{const{componentName:e}=t,{getPrefixCls:n}=b.useContext(un),r=n("empty");switch(e){case"Table":case"List":return ue.createElement(Oa,{image:Oa.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return ue.createElement(Oa,{image:Oa.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return ue.createElement(Oa,null)}},F6=t=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:t==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function B6(t,e){return t||F6(e)}const Xx=t=>{const{optionHeight:e,optionFontSize:n,optionLineHeight:r,optionPadding:i}=t;return{position:"relative",display:"block",minHeight:e,padding:i,color:t.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},j6=t=>{const{antCls:e,componentCls:n}=t,r=`${n}-item`,i=`&${e}-slide-up-enter${e}-slide-up-enter-active`,o=`&${e}-slide-up-appear${e}-slide-up-appear-active`,a=`&${e}-slide-up-leave${e}-slide-up-leave-active`,l=`${n}-dropdown-placement-`,s=`${r}-option-selected`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},sr(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`
          ${i}${l}bottomLeft,
          ${o}${l}bottomLeft
        `]:{animationName:BS},[`
          ${i}${l}topLeft,
          ${o}${l}topLeft,
          ${i}${l}topRight,
          ${o}${l}topRight
        `]:{animationName:zS},[`${a}${l}bottomLeft`]:{animationName:jS},[`
          ${a}${l}topLeft,
          ${a}${l}topRight
        `]:{animationName:HS},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},Xx(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Xa),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:t.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:t.optionSelectedColor,fontWeight:t.optionSelectedFontWeight,backgroundColor:t.optionSelectedBg,[`${r}-option-state`]:{color:t.colorPrimary}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:t.calc(t.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Xx(t)),{color:t.colorTextDisabled})}),[`${s}:has(+ ${s})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${s}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},rf(t,"slide-up"),rf(t,"slide-down"),Dw(t,"move-up"),Dw(t,"move-down")]},z6=t=>{const{multipleSelectItemHeight:e,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:i}=t,o=t.max(t.calc(n).sub(r).equal(),0),a=t.max(t.calc(o).sub(i).equal(),0);return{basePadding:o,containerPadding:a,itemHeight:ye(e),itemLineHeight:ye(t.calc(e).sub(t.calc(t.lineWidth).mul(2)).equal())}},H6=t=>{const{multipleSelectItemHeight:e,selectHeight:n,lineWidth:r}=t;return t.calc(n).sub(e).div(2).sub(r).equal()},V6=t=>{const{componentCls:e,iconCls:n,borderRadiusSM:r,motionDurationSlow:i,paddingXS:o,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:l,colorIcon:s,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:c}=t;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:c,borderRadius:r,cursor:"default",transition:`font-size ${i}, line-height ${i}, height ${i}`,marginInlineEnd:t.calc(c).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:t.calc(o).div(2).equal(),[`${e}-disabled&`]:{color:a,borderColor:l,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},xl()),{display:"inline-flex",alignItems:"center",color:s,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},W6=(t,e)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=t,i=`${n}-selection-overflow`,o=t.multipleSelectItemHeight,a=H6(t),l=e?`${n}-${e}`:"",s=z6(t);return{[`${n}-multiple${l}`]:Object.assign(Object.assign({},V6(t)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:s.basePadding,paddingBlock:s.containerPadding,borderRadius:t.borderRadius,[`${n}-disabled&`]:{background:t.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${ye(r)} 0`,lineHeight:ye(o),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:s.itemHeight,lineHeight:ye(s.itemLineHeight)},[`${n}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:ye(o),marginBlock:r}},[`${n}-prefix`]:{marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(s.basePadding).equal()},[`${i}-item + ${i}-item,
        ${n}-prefix + ${n}-selection-wrap
      `]:{[`${n}-selection-search`]:{marginInlineStart:0},[`${n}-selection-placeholder`]:{insetInlineStart:0}},[`${i}-item-suffix`]:{minHeight:s.itemHeight,marginBlock:r},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:t.fontFamily,lineHeight:ye(o),transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(s.basePadding).equal(),insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}})}};function dg(t,e){const{componentCls:n}=t,r=e?`${n}-${e}`:"",i={[`${n}-multiple${r}`]:{fontSize:t.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:t.calc(t.fontSizeIcon).add(t.controlPaddingHorizontal).equal()}}};return[W6(t,e),i]}const U6=t=>{const{componentCls:e}=t,n=bn(t,{selectHeight:t.controlHeightSM,multipleSelectItemHeight:t.multipleItemHeightSM,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),r=bn(t,{fontSize:t.fontSizeLG,selectHeight:t.controlHeightLG,multipleSelectItemHeight:t.multipleItemHeightLG,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius});return[dg(t),dg(n,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},dg(r,"lg")]};function fg(t,e){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:i}=t,o=t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),a=e?`${n}-${e}`:"";return{[`${n}-single${a}`]:{fontSize:t.fontSize,height:t.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},sr(t,!0)),{display:"flex",borderRadius:i,flex:"1 1 auto",[`${n}-selection-wrap:after`]:{lineHeight:ye(o)},[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:ye(o),transition:`all ${t.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-search,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:t.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${ye(r)}`,[`${n}-selection-search-input`]:{height:o,fontSize:t.fontSize},"&:after":{lineHeight:ye(o)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${ye(r)}`,"&:after":{display:"none"}}}}}}}function q6(t){const{componentCls:e}=t,n=t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal();return[fg(t),fg(bn(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${ye(n)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:t.calc(n).add(t.calc(t.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:t.calc(t.fontSize).mul(1.5).equal()}}}},fg(bn(t,{controlHeight:t.singleItemHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const K6=t=>{const{fontSize:e,lineHeight:n,lineWidth:r,controlHeight:i,controlHeightSM:o,controlHeightLG:a,paddingXXS:l,controlPaddingHorizontal:s,zIndexPopupBase:u,colorText:c,fontWeightStrong:f,controlItemBgActive:v,controlItemBgHover:g,colorBgContainer:m,colorFillSecondary:y,colorBgContainerDisabled:p,colorTextDisabled:C,colorPrimaryHover:x,colorPrimary:S,controlOutline:E}=t,P=l*2,$=r*2,_=Math.min(i-P,i-$),M=Math.min(o-P,o-$),B=Math.min(a-P,a-$);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(l/2),zIndexPopup:u+50,optionSelectedColor:c,optionSelectedFontWeight:f,optionSelectedBg:v,optionActiveBg:g,optionPadding:`${(i-e*n)/2}px ${s}px`,optionFontSize:e,optionLineHeight:n,optionHeight:i,selectorBg:m,clearBg:m,singleItemHeightLG:a,multipleItemBg:y,multipleItemBorderColor:"transparent",multipleItemHeight:_,multipleItemHeightSM:M,multipleItemHeightLG:B,multipleSelectorBgDisabled:p,multipleItemColorDisabled:C,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(t.fontSize*1.25),hoverBorderColor:x,activeBorderColor:S,activeOutlineColor:E,selectAffixPadding:l}},wE=(t,e)=>{const{componentCls:n,antCls:r,controlOutlineWidth:i}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${ye(t.lineWidth)} ${t.lineType} ${e.borderColor}`,background:t.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${ye(i)} ${e.activeOutlineColor}`,outline:0},[`${n}-prefix`]:{color:e.color}}}},Yx=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},wE(t,e))}),G6=t=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},wE(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Yx(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Yx(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${ye(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),xE=(t,e)=>{const{componentCls:n,antCls:r}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:e.bg,border:`${ye(t.lineWidth)} ${t.lineType} transparent`,color:e.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:e.hoverBg},[`${n}-focused& ${n}-selector`]:{background:t.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},Qx=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},xE(t,e))}),X6=t=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},xE(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor,color:t.colorText})),Qx(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,color:t.colorError})),Qx(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{borderColor:t.colorBorder,background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.colorBgContainer,border:`${ye(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}})}),Y6=t=>({"&-borderless":{[`${t.componentCls}-selector`]:{background:"transparent",border:`${ye(t.lineWidth)} ${t.lineType} transparent`},[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${ye(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`},[`&${t.componentCls}-status-error`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorError}},[`&${t.componentCls}-status-warning`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorWarning}}}}),CE=(t,e)=>{const{componentCls:n,antCls:r}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{borderWidth:`0 0 ${ye(t.lineWidth)} 0`,borderStyle:`none none ${t.lineType} none`,borderColor:e.borderColor,background:t.selectorBg,borderRadius:0},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,outline:0},[`${n}-prefix`]:{color:e.color}}}},Jx=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},CE(t,e))}),Q6=t=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},CE(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Jx(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Jx(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${ye(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),J6=t=>({[t.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},G6(t)),X6(t)),Y6(t)),Q6(t))}),Z6=t=>{const{componentCls:e}=t;return{position:"relative",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},eB=t=>{const{componentCls:e}=t;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none",appearance:"none"}}}},tB=t=>{const{antCls:e,componentCls:n,inputPaddingHorizontalBase:r,iconCls:i}=t,o={[`${n}-clear`]:{opacity:1,background:t.colorBgBase,borderRadius:"50%"}};return{[n]:Object.assign(Object.assign({},sr(t)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},Z6(t)),eB(t)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Xa),{[`> ${e}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},Xa),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},xl()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${t.motionDurationSlow} ease`,[i]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${n}-prefix`]:{flex:"none",marginInlineEnd:t.selectAffixPadding},[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorIcon}},"@media(hover:none)":o,"&:hover":o}),[`${n}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:t.calc(r).add(t.fontSize).add(t.paddingXS).equal()}}}}}},nB=t=>{const{componentCls:e}=t;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},tB(t),q6(t),U6(t),j6(t),{[`${e}-rtl`]:{direction:"rtl"}},Xc(t,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},rB=lr("Select",(t,{rootPrefixCls:e})=>{const n=bn(t,{rootPrefixCls:e,inputPaddingHorizontalBase:t.calc(t.paddingSM).sub(1).equal(),multipleSelectItemHeight:t.multipleItemHeight,selectHeight:t.controlHeight});return[nB(n),J6(n)]},K6,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var iB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},oB=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:iB}))},SE=b.forwardRef(oB),aB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},sB=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:aB}))},EE=b.forwardRef(sB);function lB({suffixIcon:t,clearIcon:e,menuItemSelectedIcon:n,removeIcon:r,loading:i,multiple:o,hasFeedback:a,prefixCls:l,showSuffixIcon:s,feedbackIcon:u,showArrow:c,componentName:f}){const v=e??b.createElement(Rf,null),g=C=>t===null&&!a&&!c?null:b.createElement(b.Fragment,null,s!==!1&&C,a&&u);let m=null;if(t!==void 0)m=g(t);else if(i)m=g(b.createElement(Qa,{spin:!0}));else{const C=`${l}-suffix`;m=({open:x,showSearch:S})=>g(x&&S?b.createElement(q2,{className:C}):b.createElement(EE,{className:C}))}let y=null;n!==void 0?y=n:o?y=b.createElement(SE,null):y=null;let p=null;return r!==void 0?p=r:p=b.createElement(If,null),{clearIcon:v,suffixIcon:m,itemIcon:y,removeIcon:p}}function cB(t,e){return e!==void 0?e:t!==null}var uB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const RE="SECRET_COMBOBOX_MODE_DO_NOT_USE",dB=(t,e)=>{var n,r,i,o,a;const{prefixCls:l,bordered:s,className:u,rootClassName:c,getPopupContainer:f,popupClassName:v,dropdownClassName:g,listHeight:m=256,placement:y,listItemHeight:p,size:C,disabled:x,notFoundContent:S,status:E,builtinPlacements:P,dropdownMatchSelectWidth:$,popupMatchSelectWidth:_,direction:M,style:B,allowClear:H,variant:k,dropdownStyle:T,transitionName:O,tagRender:L,maxCount:K,prefix:q,dropdownRender:J,popupRender:V,onDropdownVisibleChange:z,onOpenChange:D,styles:U,classNames:W}=t,X=uB(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix","dropdownRender","popupRender","onDropdownVisibleChange","onOpenChange","styles","classNames"]),{getPopupContainer:Y,getPrefixCls:Q,renderEmpty:ne,direction:ie,virtual:re,popupMatchSelectWidth:I,popupOverflow:A}=b.useContext(un),{showSearch:F,style:G,styles:ee,className:te,classNames:ae}=eo("select"),[,de]=Mi(),he=p??(de==null?void 0:de.controlHeight),pe=Q("select",l),we=Q(),_e=M??ie,{compactSize:$e,compactItemClassnames:Me}=rs(pe,_e),[Re,be]=Df("select",k,s),Le=ma(pe),[He,it,qe]=rB(pe,Le),De=b.useMemo(()=>{const{mode:at}=t;if(at!=="combobox")return at===RE?"combobox":at},[t.mode]),nt=De==="multiple"||De==="tags",Je=cB(t.suffixIcon,t.showArrow),st=(n=_??$)!==null&&n!==void 0?n:I,Ve=((r=U==null?void 0:U.popup)===null||r===void 0?void 0:r.root)||((i=ee.popup)===null||i===void 0?void 0:i.root)||T,Ie=V||J,Te=D||z,{status:je,hasFeedback:ke,isFormItemInput:et,feedbackIcon:St}=b.useContext(Yi),Ht=Jc(je,E);let Ft;S!==void 0?Ft=S:De==="combobox"?Ft=null:Ft=(ne==null?void 0:ne("Select"))||b.createElement(D6,{componentName:"Select"});const{suffixIcon:We,itemIcon:tt,removeIcon:gt,clearIcon:Ge}=lB(Object.assign(Object.assign({},X),{multiple:nt,hasFeedback:ke,feedbackIcon:St,showSuffixIcon:Je,prefixCls:pe,componentName:"Select"})),Rt=H===!0?{clearIcon:Ge}:H,dt=yi(X,["suffixIcon","itemIcon"]),ut=me(((o=W==null?void 0:W.popup)===null||o===void 0?void 0:o.root)||((a=ae==null?void 0:ae.popup)===null||a===void 0?void 0:a.root)||v||g,{[`${pe}-dropdown-${_e}`]:_e==="rtl"},c,ae.root,W==null?void 0:W.root,qe,Le,it),Ue=bi(at=>{var lt;return(lt=C??$e)!==null&&lt!==void 0?lt:at}),Ct=b.useContext(pi),Lt=x??Ct,Ke=me({[`${pe}-lg`]:Ue==="large",[`${pe}-sm`]:Ue==="small",[`${pe}-rtl`]:_e==="rtl",[`${pe}-${Re}`]:be,[`${pe}-in-form-item`]:et},Ja(pe,Ht,ke),Me,te,u,ae.root,W==null?void 0:W.root,c,qe,Le,it),Xe=b.useMemo(()=>y!==void 0?y:_e==="rtl"?"bottomRight":"bottomLeft",[y,_e]),[ot]=TS("SelectLike",Ve==null?void 0:Ve.zIndex);return He(b.createElement(Ip,Object.assign({ref:e,virtual:re,showSearch:F},dt,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee.root),U==null?void 0:U.root),G),B),dropdownMatchSelectWidth:st,transitionName:kf(we,"slide-up",O),builtinPlacements:B6(P,A),listHeight:m,listItemHeight:he,mode:De,prefixCls:pe,placement:Xe,direction:_e,prefix:q,suffixIcon:We,menuItemSelectedIcon:tt,removeIcon:gt,allowClear:Rt,notFoundContent:Ft,className:Ke,getPopupContainer:f||Y,dropdownClassName:ut,disabled:Lt,dropdownStyle:Object.assign(Object.assign({},Ve),{zIndex:ot}),maxCount:nt?K:void 0,tagRender:nt?L:void 0,dropdownRender:Ie,onDropdownVisibleChange:Te})))},is=b.forwardRef(dB),fB=pE(is,"dropdownAlign");is.SECRET_COMBOBOX_MODE_DO_NOT_USE=RE;is.Option=Rp;is.OptGroup=Ep;is._InternalPanelDoNotUseOrYouWillBeFired=fB;const df=t=>t?typeof t=="function"?t():t:null;function Pp(t){var e=t.children,n=t.prefixCls,r=t.id,i=t.overlayInnerStyle,o=t.bodyClassName,a=t.className,l=t.style;return b.createElement("div",{className:me("".concat(n,"-content"),a),style:l},b.createElement("div",{className:me("".concat(n,"-inner"),o),id:r,role:"tooltip",style:i},typeof e=="function"?e():e))}var Hs={shiftX:64,adjustY:1},Vs={adjustX:1,shiftY:!0},Ti=[0,0],hB={left:{points:["cr","cl"],overflow:Vs,offset:[-4,0],targetOffset:Ti},right:{points:["cl","cr"],overflow:Vs,offset:[4,0],targetOffset:Ti},top:{points:["bc","tc"],overflow:Hs,offset:[0,-4],targetOffset:Ti},bottom:{points:["tc","bc"],overflow:Hs,offset:[0,4],targetOffset:Ti},topLeft:{points:["bl","tl"],overflow:Hs,offset:[0,-4],targetOffset:Ti},leftTop:{points:["tr","tl"],overflow:Vs,offset:[-4,0],targetOffset:Ti},topRight:{points:["br","tr"],overflow:Hs,offset:[0,-4],targetOffset:Ti},rightTop:{points:["tl","tr"],overflow:Vs,offset:[4,0],targetOffset:Ti},bottomRight:{points:["tr","br"],overflow:Hs,offset:[0,4],targetOffset:Ti},rightBottom:{points:["bl","br"],overflow:Vs,offset:[4,0],targetOffset:Ti},bottomLeft:{points:["tl","bl"],overflow:Hs,offset:[0,4],targetOffset:Ti},leftBottom:{points:["br","bl"],overflow:Vs,offset:[-4,0],targetOffset:Ti}},vB=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],gB=function(e,n){var r=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,a=e.mouseEnterDelay,l=a===void 0?0:a,s=e.mouseLeaveDelay,u=s===void 0?.1:s,c=e.overlayStyle,f=e.prefixCls,v=f===void 0?"rc-tooltip":f,g=e.children,m=e.onVisibleChange,y=e.afterVisibleChange,p=e.transitionName,C=e.animation,x=e.motion,S=e.placement,E=S===void 0?"right":S,P=e.align,$=P===void 0?{}:P,_=e.destroyTooltipOnHide,M=_===void 0?!1:_,B=e.defaultVisible,H=e.getTooltipContainer,k=e.overlayInnerStyle;e.arrowContent;var T=e.overlay,O=e.id,L=e.showArrow,K=L===void 0?!0:L,q=e.classNames,J=e.styles,V=_t(e,vB),z=lp(O),D=b.useRef(null);b.useImperativeHandle(n,function(){return D.current});var U=le({},V);"visible"in e&&(U.popupVisible=e.visible);var W=function(){return b.createElement(Pp,{key:"content",prefixCls:v,id:z,bodyClassName:q==null?void 0:q.body,overlayInnerStyle:le(le({},k),J==null?void 0:J.body)},T)},X=function(){var Q=b.Children.only(g),ne=(Q==null?void 0:Q.props)||{},ie=le(le({},ne),{},{"aria-describedby":T?z:null});return b.cloneElement(g,ie)};return b.createElement(Of,Ne({popupClassName:me(r,q==null?void 0:q.root),prefixCls:v,popup:W,action:o,builtinPlacements:hB,popupPlacement:E,ref:D,popupAlign:$,getPopupContainer:H,onPopupVisibleChange:m,afterPopupVisibleChange:y,popupTransitionName:p,popupAnimation:C,popupMotion:x,defaultPopupVisible:B,autoDestroy:M,mouseLeaveDelay:u,popupStyle:le(le({},c),J==null?void 0:J.root),mouseEnterDelay:l,arrow:K},U),X())};const mB=b.forwardRef(gB);function IE(t){const{sizePopupArrow:e,borderRadiusXS:n,borderRadiusOuter:r}=t,i=e/2,o=0,a=i,l=r*1/Math.sqrt(2),s=i-r*(1-1/Math.sqrt(2)),u=i-n*(1/Math.sqrt(2)),c=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),f=2*i-u,v=c,g=2*i-l,m=s,y=2*i-o,p=a,C=i*Math.sqrt(2)+r*(Math.sqrt(2)-2),x=r*(Math.sqrt(2)-1),S=`polygon(${x}px 100%, 50% ${x}px, ${2*i-x}px 100%, ${x}px 100%)`,E=`path('M ${o} ${a} A ${r} ${r} 0 0 0 ${l} ${s} L ${u} ${c} A ${n} ${n} 0 0 1 ${f} ${v} L ${g} ${m} A ${r} ${r} 0 0 0 ${y} ${p} Z')`;return{arrowShadowWidth:C,arrowPath:E,arrowPolygon:S}}const pB=(t,e,n)=>{const{sizePopupArrow:r,arrowPolygon:i,arrowPath:o,arrowShadowWidth:a,borderRadiusXS:l,calc:s}=t;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:s(r).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[i,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${ye(l)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},PE=8;function kp(t){const{contentRadius:e,limitVerticalRadius:n}=t,r=e>12?e+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?PE:r}}function Cd(t,e){return t?e:{}}function kE(t,e,n){const{componentCls:r,boxShadowPopoverArrow:i,arrowOffsetVertical:o,arrowOffsetHorizontal:a}=t,{arrowDistance:l=0,arrowPlacement:s={left:!0,right:!0,top:!0,bottom:!0}}={};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},pB(t,e,i)),{"&:before":{background:e}})]},Cd(!!s.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:l,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":a,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${ye(a)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),Cd(!!s.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:l,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":a,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${ye(a)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),Cd(!!s.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:l},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:o},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:o}})),Cd(!!s.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:l},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:o},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:o}}))}}function yB(t,e,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const i=r&&typeof r=="object"?r:{},o={};switch(t){case"top":case"bottom":o.shiftX=e.arrowOffsetHorizontal*2+n,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=e.arrowOffsetVertical*2+n,o.shiftX=!0,o.adjustX=!0;break}const a=Object.assign(Object.assign({},o),i);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}const Zx={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},bB={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},wB=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function xB(t){const{arrowWidth:e,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:o}=t,a=e/2,l={};return Object.keys(Zx).forEach(s=>{const u=r&&bB[s]||Zx[s],c=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(l[s]=c,wB.has(s)&&(c.autoArrow=!1),s){case"top":case"topLeft":case"topRight":c.offset[1]=-a-i;break;case"bottom":case"bottomLeft":case"bottomRight":c.offset[1]=a+i;break;case"left":case"leftTop":case"leftBottom":c.offset[0]=-a-i;break;case"right":case"rightTop":case"rightBottom":c.offset[0]=a+i;break}const f=kp({contentRadius:o,limitVerticalRadius:!0});if(r)switch(s){case"topLeft":case"bottomLeft":c.offset[0]=-f.arrowOffsetHorizontal-a;break;case"topRight":case"bottomRight":c.offset[0]=f.arrowOffsetHorizontal+a;break;case"leftTop":case"rightTop":c.offset[1]=-f.arrowOffsetHorizontal*2+a;break;case"leftBottom":case"rightBottom":c.offset[1]=f.arrowOffsetHorizontal*2-a;break}c.overflow=yB(s,f,e,n),c.htmlRegion="visibleFirst"}),l}const CB=t=>{const{calc:e,componentCls:n,tooltipMaxWidth:r,tooltipColor:i,tooltipBg:o,tooltipBorderRadius:a,zIndexPopup:l,controlHeight:s,boxShadowSecondary:u,paddingSM:c,paddingXS:f,arrowOffsetHorizontal:v,sizePopupArrow:g}=t,m=e(a).add(g).add(v).equal(),y=e(a).mul(2).add(g).equal();return[{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:r,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":o,[`${n}-inner`]:{minWidth:y,minHeight:s,padding:`${ye(t.calc(c).div(2).equal())} ${ye(f)}`,color:i,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:a,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:m},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:t.min(a,PE)}},[`${n}-content`]:{position:"relative"}}),TA(t,(p,{darkColor:C})=>({[`&${n}-${p}`]:{[`${n}-inner`]:{backgroundColor:C},[`${n}-arrow`]:{"--antd-arrow-background-color":C}}}))),{"&-rtl":{direction:"rtl"}})},kE(t,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},SB=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},kp({contentRadius:t.borderRadius,limitVerticalRadius:!0})),IE(bn(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),$E=(t,e=!0)=>lr("Tooltip",r=>{const{borderRadius:i,colorTextLightSolid:o,colorBgSpotlight:a}=r,l=bn(r,{tooltipMaxWidth:250,tooltipColor:o,tooltipBorderRadius:i,tooltipBg:a});return[CB(l),VS(r,"zoom-big-fast")]},SB,{resetStyle:!1,injectStyle:e})(t),EB=va.map(t=>`${t}-inverse`);function RB(t,e=!0){return e?[].concat(Ae(EB),Ae(va)).includes(t):va.includes(t)}function TE(t,e){const n=RB(e),r=me({[`${t}-${e}`]:e&&n}),i={},o={};return e&&!n&&(i.background=e,o["--antd-arrow-background-color"]=e),{className:r,overlayStyle:i,arrowStyle:o}}const IB=t=>{const{prefixCls:e,className:n,placement:r="top",title:i,color:o,overlayInnerStyle:a}=t,{getPrefixCls:l}=b.useContext(un),s=l("tooltip",e),[u,c,f]=$E(s),v=TE(s,o),g=v.arrowStyle,m=Object.assign(Object.assign({},a),v.overlayStyle),y=me(c,f,s,`${s}-pure`,`${s}-placement-${r}`,n,v.className);return u(b.createElement("div",{className:y,style:g},b.createElement("div",{className:`${s}-arrow`}),b.createElement(Pp,Object.assign({},t,{className:c,prefixCls:s,overlayInnerStyle:m}),i)))};var PB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const kB=b.forwardRef((t,e)=>{var n,r;const{prefixCls:i,openClassName:o,getTooltipContainer:a,color:l,overlayInnerStyle:s,children:u,afterOpenChange:c,afterVisibleChange:f,destroyTooltipOnHide:v,destroyOnHidden:g,arrow:m=!0,title:y,overlay:p,builtinPlacements:C,arrowPointAtCenter:x=!1,autoAdjustOverflow:S=!0,motion:E,getPopupContainer:P,placement:$="top",mouseEnterDelay:_=.1,mouseLeaveDelay:M=.1,overlayStyle:B,rootClassName:H,overlayClassName:k,styles:T,classNames:O}=t,L=PB(t,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","destroyOnHidden","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),K=!!m,[,q]=Mi(),{getPopupContainer:J,getPrefixCls:V,direction:z,className:D,style:U,classNames:W,styles:X}=eo("tooltip"),Y=Qm(),Q=b.useRef(null),ne=()=>{var Je;(Je=Q.current)===null||Je===void 0||Je.forceAlign()};b.useImperativeHandle(e,()=>{var Je,st;return{forceAlign:ne,forcePopupAlign:()=>{Y.deprecated(!1,"forcePopupAlign","forceAlign"),ne()},nativeElement:(Je=Q.current)===null||Je===void 0?void 0:Je.nativeElement,popupElement:(st=Q.current)===null||st===void 0?void 0:st.popupElement}});const[ie,re]=Mn(!1,{value:(n=t.open)!==null&&n!==void 0?n:t.visible,defaultValue:(r=t.defaultOpen)!==null&&r!==void 0?r:t.defaultVisible}),I=!y&&!p&&y!==0,A=Je=>{var st,Ve;re(I?!1:Je),I||((st=t.onOpenChange)===null||st===void 0||st.call(t,Je),(Ve=t.onVisibleChange)===null||Ve===void 0||Ve.call(t,Je))},F=b.useMemo(()=>{var Je,st;let Ve=x;return typeof m=="object"&&(Ve=(st=(Je=m.pointAtCenter)!==null&&Je!==void 0?Je:m.arrowPointAtCenter)!==null&&st!==void 0?st:x),C||xB({arrowPointAtCenter:Ve,autoAdjustOverflow:S,arrowWidth:K?q.sizePopupArrow:0,borderRadius:q.borderRadius,offset:q.marginXXS})},[x,m,C,q]),G=b.useMemo(()=>y===0?y:p||y||"",[p,y]),ee=b.createElement(yl,{space:!0},typeof G=="function"?G():G),te=V("tooltip",i),ae=V(),de=t["data-popover-inject"];let he=ie;!("open"in t)&&!("visible"in t)&&I&&(he=!1);const pe=b.isValidElement(u)&&!DS(u)?u:b.createElement("span",null,u),we=pe.props,_e=!we.className||typeof we.className=="string"?me(we.className,o||`${te}-open`):we.className,[$e,Me,Re]=$E(te,!de),be=TE(te,l),Le=be.arrowStyle,He=me(k,{[`${te}-rtl`]:z==="rtl"},be.className,H,Me,Re,D,W.root,O==null?void 0:O.root),it=me(W.body,O==null?void 0:O.body),[qe,De]=TS("Tooltip",L.zIndex),nt=b.createElement(mB,Object.assign({},L,{zIndex:qe,showArrow:K,placement:$,mouseEnterDelay:_,mouseLeaveDelay:M,prefixCls:te,classNames:{root:He,body:it},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Le),X.root),U),B),T==null?void 0:T.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},X.body),s),T==null?void 0:T.body),be.overlayStyle)},getTooltipContainer:P||a||J,ref:Q,builtinPlacements:F,overlay:ee,visible:he,onVisibleChange:A,afterVisibleChange:c??f,arrowContent:b.createElement("span",{className:`${te}-arrow-content`}),motion:{motionName:kf(ae,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:g??!!v}),he?vo(pe,{className:_e}):pe);return $e(b.createElement(kS.Provider,{value:De},nt))}),eu=kB;eu._InternalPanelDoNotUseOrYouWillBeFired=IB;const $B=t=>{const{componentCls:e,popoverColor:n,titleMinWidth:r,fontWeightStrong:i,innerPadding:o,boxShadowSecondary:a,colorTextHeading:l,borderRadiusLG:s,zIndexPopup:u,titleMarginBottom:c,colorBgElevated:f,popoverBg:v,titleBorderBottom:g,innerContentPadding:m,titlePadding:y}=t;return[{[e]:Object.assign(Object.assign({},sr(t)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":f,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${e}-content`]:{position:"relative"},[`${e}-inner`]:{backgroundColor:v,backgroundClip:"padding-box",borderRadius:s,boxShadow:a,padding:o},[`${e}-title`]:{minWidth:r,marginBottom:c,color:l,fontWeight:i,borderBottom:g,padding:y},[`${e}-inner-content`]:{color:n,padding:m}})},kE(t,"var(--antd-arrow-background-color)"),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block",[`${e}-content`]:{display:"inline-block"}}}]},TB=t=>{const{componentCls:e}=t;return{[e]:va.map(n=>{const r=t[`${n}6`];return{[`&${e}-${n}`]:{"--antd-arrow-background-color":r,[`${e}-inner`]:{backgroundColor:r},[`${e}-arrow`]:{background:"transparent"}}}})}},_B=t=>{const{lineWidth:e,controlHeight:n,fontHeight:r,padding:i,wireframe:o,zIndexPopupBase:a,borderRadiusLG:l,marginXS:s,lineType:u,colorSplit:c,paddingSM:f}=t,v=n-r,g=v/2,m=v/2-e,y=i;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:a+30},IE(t)),kp({contentRadius:l,limitVerticalRadius:!0})),{innerPadding:o?0:12,titleMarginBottom:o?0:s,titlePadding:o?`${g}px ${y}px ${m}px`:0,titleBorderBottom:o?`${e}px ${u} ${c}`:"none",innerContentPadding:o?`${f}px ${y}px`:0})},_E=lr("Popover",t=>{const{colorBgElevated:e,colorText:n}=t,r=bn(t,{popoverBg:e,popoverColor:n});return[$B(r),TB(r),VS(r,"zoom-big")]},_B,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var AB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const AE=({title:t,content:e,prefixCls:n})=>!t&&!e?null:b.createElement(b.Fragment,null,t&&b.createElement("div",{className:`${n}-title`},t),e&&b.createElement("div",{className:`${n}-inner-content`},e)),OB=t=>{const{hashId:e,prefixCls:n,className:r,style:i,placement:o="top",title:a,content:l,children:s}=t,u=df(a),c=df(l),f=me(e,n,`${n}-pure`,`${n}-placement-${o}`,r);return b.createElement("div",{className:f,style:i},b.createElement("div",{className:`${n}-arrow`}),b.createElement(Pp,Object.assign({},t,{className:e,prefixCls:n}),s||b.createElement(AE,{prefixCls:n,title:u,content:c})))},MB=t=>{const{prefixCls:e,className:n}=t,r=AB(t,["prefixCls","className"]),{getPrefixCls:i}=b.useContext(un),o=i("popover",e),[a,l,s]=_E(o);return a(b.createElement(OB,Object.assign({},r,{prefixCls:o,hashId:l,className:me(n,s)})))};var NB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const LB=b.forwardRef((t,e)=>{var n,r;const{prefixCls:i,title:o,content:a,overlayClassName:l,placement:s="top",trigger:u="hover",children:c,mouseEnterDelay:f=.1,mouseLeaveDelay:v=.1,onOpenChange:g,overlayStyle:m={},styles:y,classNames:p}=t,C=NB(t,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:x,className:S,style:E,classNames:P,styles:$}=eo("popover"),_=x("popover",i),[M,B,H]=_E(_),k=x(),T=me(l,B,H,S,P.root,p==null?void 0:p.root),O=me(P.body,p==null?void 0:p.body),[L,K]=Mn(!1,{value:(n=t.open)!==null&&n!==void 0?n:t.visible,defaultValue:(r=t.defaultOpen)!==null&&r!==void 0?r:t.defaultVisible}),q=(U,W)=>{K(U,!0),g==null||g(U,W)},J=U=>{U.keyCode===Ze.ESC&&q(!1,U)},V=U=>{q(U)},z=df(o),D=df(a);return M(b.createElement(eu,Object.assign({placement:s,trigger:u,mouseEnterDelay:f,mouseLeaveDelay:v},C,{prefixCls:_,classNames:{root:T,body:O},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},$.root),E),m),y==null?void 0:y.root),body:Object.assign(Object.assign({},$.body),y==null?void 0:y.body)},ref:e,open:L,onOpenChange:V,overlay:z||D?b.createElement(AE,{prefixCls:_,title:z,content:D}):null,transitionName:kf(k,"zoom-big",C.transitionName),"data-popover-inject":!0}),vo(c,{onKeyDown:U=>{var W,X;b.isValidElement(c)&&((X=c==null?void 0:(W=c.props).onKeyDown)===null||X===void 0||X.call(W,U)),J(U)}})))}),OE=LB;OE._InternalPanelDoNotUseOrYouWillBeFired=MB;const DB=t=>{const{componentCls:e}=t;return{[e]:{"&-horizontal":{[`&${e}`]:{"&-sm":{marginBlock:t.marginXS},"&-md":{marginBlock:t.margin}}}}}},FB=t=>{const{componentCls:e,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i,textPaddingInline:o,orientationMargin:a,verticalMarginInline:l}=t;return{[e]:Object.assign(Object.assign({},sr(t)),{borderBlockStart:`${ye(i)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:l,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${ye(i)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${ye(t.marginLG)} 0`},[`&-horizontal${e}-with-text`]:{display:"flex",alignItems:"center",margin:`${ye(t.dividerHorizontalWithTextGutterMargin)} 0`,color:t.colorTextHeading,fontWeight:500,fontSize:t.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${ye(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${e}-with-text-start`]:{"&::before":{width:`calc(${a} * 100%)`},"&::after":{width:`calc(100% - ${a} * 100%)`}},[`&-horizontal${e}-with-text-end`]:{"&::before":{width:`calc(100% - ${a} * 100%)`},"&::after":{width:`calc(${a} * 100%)`}},[`${e}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${ye(i)} 0 0`},[`&-horizontal${e}-with-text${e}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${e}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:r,borderStyle:"dotted",borderWidth:`${ye(i)} 0 0`},[`&-horizontal${e}-with-text${e}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${e}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${e}-with-text`]:{color:t.colorText,fontWeight:"normal",fontSize:t.fontSize},[`&-horizontal${e}-with-text-start${e}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${e}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${e}-with-text-end${e}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${e}-inner-text`]:{paddingInlineEnd:n}}})}},BB=t=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:t.marginXS}),jB=lr("Divider",t=>{const e=bn(t,{dividerHorizontalWithTextGutterMargin:t.margin,sizePaddingEdgeHorizontal:0});return[FB(e),DB(e)]},BB,{unitless:{orientationMargin:!0}});var zB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const HB={small:"sm",middle:"md"},VB=t=>{const{getPrefixCls:e,direction:n,className:r,style:i}=eo("divider"),{prefixCls:o,type:a="horizontal",orientation:l="center",orientationMargin:s,className:u,rootClassName:c,children:f,dashed:v,variant:g="solid",plain:m,style:y,size:p}=t,C=zB(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),x=e("divider",o),[S,E,P]=jB(x),$=bi(p),_=HB[$],M=!!f,B=b.useMemo(()=>l==="left"?n==="rtl"?"end":"start":l==="right"?n==="rtl"?"start":"end":l,[n,l]),H=B==="start"&&s!=null,k=B==="end"&&s!=null,T=me(x,r,E,P,`${x}-${a}`,{[`${x}-with-text`]:M,[`${x}-with-text-${B}`]:M,[`${x}-dashed`]:!!v,[`${x}-${g}`]:g!=="solid",[`${x}-plain`]:!!m,[`${x}-rtl`]:n==="rtl",[`${x}-no-default-orientation-margin-start`]:H,[`${x}-no-default-orientation-margin-end`]:k,[`${x}-${_}`]:!!_},u,c),O=b.useMemo(()=>typeof s=="number"?s:/^\d+$/.test(s)?Number(s):s,[s]),L={marginInlineStart:H?O:void 0,marginInlineEnd:k?O:void 0};return S(b.createElement("div",Object.assign({className:T,style:Object.assign(Object.assign({},i),y)},C,{role:"separator"}),f&&a!=="vertical"&&b.createElement("span",{className:`${x}-inner-text`,style:L},f)))};var e1=function(e,n){if(!e)return null;var r={left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth,top:e.offsetTop,bottom:e.parentElement.clientHeight-e.clientHeight-e.offsetTop,height:e.clientHeight};return n?{left:0,right:0,width:0,top:r.top,bottom:r.bottom,height:r.height}:{left:r.left,right:r.right,width:r.width,top:0,bottom:0,height:0}},lo=function(e){return e!==void 0?"".concat(e,"px"):void 0};function WB(t){var e=t.prefixCls,n=t.containerRef,r=t.value,i=t.getValueIndex,o=t.motionName,a=t.onMotionStart,l=t.onMotionEnd,s=t.direction,u=t.vertical,c=u===void 0?!1:u,f=b.useRef(null),v=b.useState(r),g=fe(v,2),m=g[0],y=g[1],p=function(K){var q,J=i(K),V=(q=n.current)===null||q===void 0?void 0:q.querySelectorAll(".".concat(e,"-item"))[J];return(V==null?void 0:V.offsetParent)&&V},C=b.useState(null),x=fe(C,2),S=x[0],E=x[1],P=b.useState(null),$=fe(P,2),_=$[0],M=$[1];$n(function(){if(m!==r){var L=p(m),K=p(r),q=e1(L,c),J=e1(K,c);y(r),E(q),M(J),L&&K?a():l()}},[r]);var B=b.useMemo(function(){if(c){var L;return lo((L=S==null?void 0:S.top)!==null&&L!==void 0?L:0)}return lo(s==="rtl"?-(S==null?void 0:S.right):S==null?void 0:S.left)},[c,s,S]),H=b.useMemo(function(){if(c){var L;return lo((L=_==null?void 0:_.top)!==null&&L!==void 0?L:0)}return lo(s==="rtl"?-(_==null?void 0:_.right):_==null?void 0:_.left)},[c,s,_]),k=function(){return c?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},T=function(){return c?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},O=function(){E(null),M(null),l()};return!S||!_?null:b.createElement(to,{visible:!0,motionName:o,motionAppear:!0,onAppearStart:k,onAppearActive:T,onVisibleChanged:O},function(L,K){var q=L.className,J=L.style,V=le(le({},J),{},{"--thumb-start-left":B,"--thumb-start-width":lo(S==null?void 0:S.width),"--thumb-active-left":H,"--thumb-active-width":lo(_==null?void 0:_.width),"--thumb-start-top":B,"--thumb-start-height":lo(S==null?void 0:S.height),"--thumb-active-top":H,"--thumb-active-height":lo(_==null?void 0:_.height)}),z={ref:ti(f,K),style:V,className:me("".concat(e,"-thumb"),q)};return b.createElement("div",z)})}var UB=["prefixCls","direction","vertical","options","disabled","defaultValue","value","name","onChange","className","motionName"];function qB(t){if(typeof t.title<"u")return t.title;if(ht(t.label)!=="object"){var e;return(e=t.label)===null||e===void 0?void 0:e.toString()}}function KB(t){return t.map(function(e){if(ht(e)==="object"&&e!==null){var n=qB(e);return le(le({},e),{},{title:n})}return{label:e==null?void 0:e.toString(),title:e==null?void 0:e.toString(),value:e}})}var GB=function(e){var n=e.prefixCls,r=e.className,i=e.disabled,o=e.checked,a=e.label,l=e.title,s=e.value,u=e.name,c=e.onChange,f=e.onFocus,v=e.onBlur,g=e.onKeyDown,m=e.onKeyUp,y=e.onMouseDown,p=function(x){i||c(x,s)};return b.createElement("label",{className:me(r,oe({},"".concat(n,"-item-disabled"),i)),onMouseDown:y},b.createElement("input",{name:u,className:"".concat(n,"-item-input"),type:"radio",disabled:i,checked:o,onChange:p,onFocus:f,onBlur:v,onKeyDown:g,onKeyUp:m}),b.createElement("div",{className:"".concat(n,"-item-label"),title:l,"aria-selected":o},a))},XB=b.forwardRef(function(t,e){var n,r,i=t.prefixCls,o=i===void 0?"rc-segmented":i,a=t.direction,l=t.vertical,s=t.options,u=s===void 0?[]:s,c=t.disabled,f=t.defaultValue,v=t.value,g=t.name,m=t.onChange,y=t.className,p=y===void 0?"":y,C=t.motionName,x=C===void 0?"thumb-motion":C,S=_t(t,UB),E=b.useRef(null),P=b.useMemo(function(){return ti(E,e)},[E,e]),$=b.useMemo(function(){return KB(u)},[u]),_=Mn((n=$[0])===null||n===void 0?void 0:n.value,{value:v,defaultValue:f}),M=fe(_,2),B=M[0],H=M[1],k=b.useState(!1),T=fe(k,2),O=T[0],L=T[1],K=function(G,ee){H(ee),m==null||m(ee)},q=yi(S,["children"]),J=b.useState(!1),V=fe(J,2),z=V[0],D=V[1],U=b.useState(!1),W=fe(U,2),X=W[0],Y=W[1],Q=function(){Y(!0)},ne=function(){Y(!1)},ie=function(){D(!1)},re=function(G){G.key==="Tab"&&D(!0)},I=function(G){var ee=$.findIndex(function(he){return he.value===B}),te=$.length,ae=(ee+G+te)%te,de=$[ae];de&&(H(de.value),m==null||m(de.value))},A=function(G){switch(G.key){case"ArrowLeft":case"ArrowUp":I(-1);break;case"ArrowRight":case"ArrowDown":I(1);break}};return b.createElement("div",Ne({role:"radiogroup","aria-label":"segmented control",tabIndex:c?void 0:0},q,{className:me(o,(r={},oe(r,"".concat(o,"-rtl"),a==="rtl"),oe(r,"".concat(o,"-disabled"),c),oe(r,"".concat(o,"-vertical"),l),r),p),ref:P}),b.createElement("div",{className:"".concat(o,"-group")},b.createElement(WB,{vertical:l,prefixCls:o,value:B,containerRef:E,motionName:"".concat(o,"-").concat(x),direction:a,getValueIndex:function(G){return $.findIndex(function(ee){return ee.value===G})},onMotionStart:function(){L(!0)},onMotionEnd:function(){L(!1)}}),$.map(function(F){var G;return b.createElement(GB,Ne({},F,{name:g,key:F.value,prefixCls:o,className:me(F.className,"".concat(o,"-item"),(G={},oe(G,"".concat(o,"-item-selected"),F.value===B&&!O),oe(G,"".concat(o,"-item-focused"),X&&z&&F.value===B),G)),checked:F.value===B,onChange:K,onFocus:Q,onBlur:ne,onKeyDown:A,onKeyUp:re,onMouseDown:ie,disabled:!!c||!!F.disabled}))})))}),YB=XB;function t1(t,e){return{[`${t}, ${t}:hover, ${t}:focus`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}}function n1(t){return{backgroundColor:t.itemSelectedBg,boxShadow:t.boxShadowTertiary}}const QB=Object.assign({overflow:"hidden"},Xa),JB=t=>{const{componentCls:e}=t,n=t.calc(t.controlHeight).sub(t.calc(t.trackPadding).mul(2)).equal(),r=t.calc(t.controlHeightLG).sub(t.calc(t.trackPadding).mul(2)).equal(),i=t.calc(t.controlHeightSM).sub(t.calc(t.trackPadding).mul(2)).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),{display:"inline-block",padding:t.trackPadding,color:t.itemColor,background:t.trackBg,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`}),Ya(t)),{[`${e}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},[`&${e}-rtl`]:{direction:"rtl"},[`&${e}-vertical`]:{[`${e}-group`]:{flexDirection:"column"},[`${e}-thumb`]:{width:"100%",height:0,padding:`0 ${ye(t.paddingXXS)}`}},[`&${e}-block`]:{display:"flex"},[`&${e}-block ${e}-item`]:{flex:1,minWidth:0},[`${e}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${t.motionDurationMid} ${t.motionEaseInOut}`,borderRadius:t.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},n1(t)),{color:t.itemSelectedColor}),"&-focused":Object.assign({},Sf(t)),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:`opacity ${t.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${e}-item-selected):not(${e}-item-disabled)`]:{color:t.itemHoverColor,"&::after":{opacity:1,backgroundColor:t.itemHoverBg}},[`&:active:not(${e}-item-selected):not(${e}-item-disabled)`]:{color:t.itemHoverColor,"&::after":{opacity:1,backgroundColor:t.itemActiveBg}},"&-label":Object.assign({minHeight:n,lineHeight:ye(n),padding:`0 ${ye(t.segmentedPaddingHorizontal)}`},QB),"&-icon + *":{marginInlineStart:t.calc(t.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${e}-thumb`]:Object.assign(Object.assign({},n1(t)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${ye(t.paddingXXS)} 0`,borderRadius:t.borderRadiusSM,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOut}, height ${t.motionDurationSlow} ${t.motionEaseInOut}`,[`& ~ ${e}-item:not(${e}-item-selected):not(${e}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${e}-lg`]:{borderRadius:t.borderRadiusLG,[`${e}-item-label`]:{minHeight:r,lineHeight:ye(r),padding:`0 ${ye(t.segmentedPaddingHorizontal)}`,fontSize:t.fontSizeLG},[`${e}-item, ${e}-thumb`]:{borderRadius:t.borderRadius}},[`&${e}-sm`]:{borderRadius:t.borderRadiusSM,[`${e}-item-label`]:{minHeight:i,lineHeight:ye(i),padding:`0 ${ye(t.segmentedPaddingHorizontalSM)}`},[`${e}-item, ${e}-thumb`]:{borderRadius:t.borderRadiusXS}}}),t1(`&-disabled ${e}-item`,t)),t1(`${e}-item-disabled`,t)),{[`${e}-thumb-motion-appear-active`]:{transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOut}, width ${t.motionDurationSlow} ${t.motionEaseInOut}`,willChange:"transform, width"},[`&${e}-shape-round`]:{borderRadius:9999,[`${e}-item, ${e}-thumb`]:{borderRadius:9999}}})}},ZB=t=>{const{colorTextLabel:e,colorText:n,colorFillSecondary:r,colorBgElevated:i,colorFill:o,lineWidthBold:a,colorBgLayout:l}=t;return{trackPadding:a,trackBg:l,itemColor:e,itemHoverColor:n,itemHoverBg:r,itemSelectedBg:i,itemActiveBg:o,itemSelectedColor:n}},ej=lr("Segmented",t=>{const{lineWidth:e,calc:n}=t,r=bn(t,{segmentedPaddingHorizontal:n(t.controlPaddingHorizontal).sub(e).equal(),segmentedPaddingHorizontalSM:n(t.controlPaddingHorizontalSM).sub(e).equal()});return[JB(r)]},ZB);var r1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function tj(t){return typeof t=="object"&&!!(t!=null&&t.icon)}const nj=b.forwardRef((t,e)=>{const n=lp(),{prefixCls:r,className:i,rootClassName:o,block:a,options:l=[],size:s="middle",style:u,vertical:c,shape:f="default",name:v=n}=t,g=r1(t,["prefixCls","className","rootClassName","block","options","size","style","vertical","shape","name"]),{getPrefixCls:m,direction:y,className:p,style:C}=eo("segmented"),x=m("segmented",r),[S,E,P]=ej(x),$=bi(s),_=b.useMemo(()=>l.map(H=>{if(tj(H)){const{icon:k,label:T}=H,O=r1(H,["icon","label"]);return Object.assign(Object.assign({},O),{label:b.createElement(b.Fragment,null,b.createElement("span",{className:`${x}-item-icon`},k),T&&b.createElement("span",null,T))})}return H}),[l,x]),M=me(i,o,p,{[`${x}-block`]:a,[`${x}-sm`]:$==="small",[`${x}-lg`]:$==="large",[`${x}-vertical`]:c,[`${x}-shape-${f}`]:f==="round"},E,P),B=Object.assign(Object.assign({},C),u);return S(b.createElement(YB,Object.assign({},g,{name:v,className:M,style:B,options:_,ref:e,prefixCls:x,direction:y,vertical:c})))}),rj=nj,ME=ue.createContext({}),NE=ue.createContext({}),LE=({prefixCls:t,value:e,onChange:n})=>{const r=()=>{if(n&&e&&!e.cleared){const i=e.toHsb();i.a=0;const o=Lr(i);o.cleared=!0,n(o)}};return ue.createElement("div",{className:`${t}-clear`,onClick:r})},DE="hex",FE="rgb",BE="hsb";var ij={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},oj=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:ij}))},aj=b.forwardRef(oj);function $m(){return typeof BigInt=="function"}function jE(t){return!t&&t!==0&&!Number.isNaN(t)||!String(t).trim()}function Ua(t){var e=t.trim(),n=e.startsWith("-");n&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var r=e||"0",i=r.split("."),o=i[0]||"0",a=i[1]||"0";o==="0"&&a==="0"&&(n=!1);var l=n?"-":"";return{negative:n,negativeStr:l,trimStr:r,integerStr:o,decimalStr:a,fullStr:"".concat(l).concat(r)}}function $p(t){var e=String(t);return!Number.isNaN(Number(e))&&e.includes("e")}function Ba(t){var e=String(t);if($p(t)){var n=Number(e.slice(e.indexOf("e-")+2)),r=e.match(/\.(\d+)/);return r!=null&&r[1]&&(n+=r[1].length),n}return e.includes(".")&&Tp(e)?e.length-e.indexOf(".")-1:0}function Uf(t){var e=String(t);if($p(t)){if(t>Number.MAX_SAFE_INTEGER)return String($m()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String($m()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);e=t.toFixed(Ba(e))}return Ua(e).fullStr}function Tp(t){return typeof t=="number"?!Number.isNaN(t):t?/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t):!1}var sj=function(){function t(e){if(Hn(this,t),oe(this,"origin",""),oe(this,"negative",void 0),oe(this,"integer",void 0),oe(this,"decimal",void 0),oe(this,"decimalLen",void 0),oe(this,"empty",void 0),oe(this,"nan",void 0),jE(e)){this.empty=!0;return}if(this.origin=String(e),e==="-"||Number.isNaN(e)){this.nan=!0;return}var n=e;if($p(n)&&(n=Number(n)),n=typeof n=="string"?n:Uf(n),Tp(n)){var r=Ua(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var o=i[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return Vn(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(n){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0"));return BigInt(r)}},{key:"negate",value:function(){var n=new t(this.toString());return n.negative=!n.negative,n}},{key:"cal",value:function(n,r,i){var o=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),a=this.alignDecimal(o),l=n.alignDecimal(o),s=r(a,l).toString(),u=i(o),c=Ua(s),f=c.negativeStr,v=c.trimStr,g="".concat(f).concat(v.padStart(u+1,"0"));return new t("".concat(g.slice(0,-u),".").concat(g.slice(-u)))}},{key:"add",value:function(n){if(this.isInvalidate())return new t(n);var r=new t(n);return r.isInvalidate()?this:this.cal(r,function(i,o){return i+o},function(i){return i})}},{key:"multi",value:function(n){var r=new t(n);return this.isInvalidate()||r.isInvalidate()?new t(NaN):this.cal(r,function(i,o){return i*o},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toString()===(n==null?void 0:n.toString())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":Ua("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}(),lj=function(){function t(e){if(Hn(this,t),oe(this,"origin",""),oe(this,"number",void 0),oe(this,"empty",void 0),jE(e)){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return Vn(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(n){if(this.isInvalidate())return new t(n);var r=Number(n);if(Number.isNaN(r))return this;var i=this.number+r;if(i>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(Ba(this.number),Ba(r));return new t(i.toFixed(o))}},{key:"multi",value:function(n){var r=Number(n);if(this.isInvalidate()||Number.isNaN(r))return new t(NaN);var i=this.number*r;if(i>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(Ba(this.number),Ba(r));return new t(i.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toNumber()===(n==null?void 0:n.toNumber())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":Uf(this.number):this.origin}}]),t}();function zi(t){return $m()?new sj(t):new lj(t)}function Vd(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t==="")return"";var i=Ua(t),o=i.negativeStr,a=i.integerStr,l=i.decimalStr,s="".concat(e).concat(l),u="".concat(o).concat(a);if(n>=0){var c=Number(l[n]);if(c>=5&&!r){var f=zi(t).add("".concat(o,"0.").concat("0".repeat(n)).concat(10-c));return Vd(f.toString(),e,n,r)}return n===0?u:"".concat(u).concat(e).concat(l.padEnd(n,"0").slice(0,n))}return s===".0"?u:"".concat(u).concat(s)}function cj(t,e){return typeof Proxy<"u"&&t?new Proxy(t,{get:function(r,i){if(e[i])return e[i];var o=r[i];return typeof o=="function"?o.bind(r):o}}):t}function uj(t,e){var n=b.useRef(null);function r(){try{var o=t.selectionStart,a=t.selectionEnd,l=t.value,s=l.substring(0,o),u=l.substring(a);n.current={start:o,end:a,value:l,beforeTxt:s,afterTxt:u}}catch{}}function i(){if(t&&n.current&&e)try{var o=t.value,a=n.current,l=a.beforeTxt,s=a.afterTxt,u=a.start,c=o.length;if(o.startsWith(l))c=l.length;else if(o.endsWith(s))c=o.length-n.current.afterTxt.length;else{var f=l[u-1],v=o.indexOf(f,u-1);v!==-1&&(c=v+1)}t.setSelectionRange(c,c)}catch(g){rr(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(g.message))}}return[r,i]}var dj=function(){var e=b.useState(!1),n=fe(e,2),r=n[0],i=n[1];return $n(function(){i(Tf())},[]),r},fj=200,hj=600;function vj(t){var e=t.prefixCls,n=t.upNode,r=t.downNode,i=t.upDisabled,o=t.downDisabled,a=t.onStep,l=b.useRef(),s=b.useRef([]),u=b.useRef();u.current=a;var c=function(){clearTimeout(l.current)},f=function(S,E){S.preventDefault(),c(),u.current(E);function P(){u.current(E),l.current=setTimeout(P,fj)}l.current=setTimeout(P,hj)};b.useEffect(function(){return function(){c(),s.current.forEach(function(x){return Qt.cancel(x)})}},[]);var v=dj();if(v)return null;var g="".concat(e,"-handler"),m=me(g,"".concat(g,"-up"),oe({},"".concat(g,"-up-disabled"),i)),y=me(g,"".concat(g,"-down"),oe({},"".concat(g,"-down-disabled"),o)),p=function(){return s.current.push(Qt(c))},C={unselectable:"on",role:"button",onMouseUp:p,onMouseLeave:p};return b.createElement("div",{className:"".concat(g,"-wrap")},b.createElement("span",Ne({},C,{onMouseDown:function(S){f(S,!0)},"aria-label":"Increase Value","aria-disabled":i,className:m}),n||b.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),b.createElement("span",Ne({},C,{onMouseDown:function(S){f(S,!1)},"aria-label":"Decrease Value","aria-disabled":o,className:y}),r||b.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function i1(t){var e=typeof t=="number"?Uf(t):Ua(t).fullStr,n=e.includes(".");return n?Ua(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:t+"0"}const gj=function(){var t=b.useRef(0),e=function(){Qt.cancel(t.current)};return b.useEffect(function(){return e},[]),function(n){e(),t.current=Qt(function(){n()})}};var mj=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],pj=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],o1=function(e,n){return e||n.isEmpty()?n.toString():n.toNumber()},a1=function(e){var n=zi(e);return n.isInvalidate()?null:n},yj=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,i=t.style,o=t.min,a=t.max,l=t.step,s=l===void 0?1:l,u=t.defaultValue,c=t.value,f=t.disabled,v=t.readOnly,g=t.upHandler,m=t.downHandler,y=t.keyboard,p=t.changeOnWheel,C=p===void 0?!1:p,x=t.controls,S=x===void 0?!0:x;t.classNames;var E=t.stringMode,P=t.parser,$=t.formatter,_=t.precision,M=t.decimalSeparator,B=t.onChange,H=t.onInput,k=t.onPressEnter,T=t.onStep,O=t.changeOnBlur,L=O===void 0?!0:O,K=t.domRef,q=_t(t,mj),J="".concat(n,"-input"),V=b.useRef(null),z=b.useState(!1),D=fe(z,2),U=D[0],W=D[1],X=b.useRef(!1),Y=b.useRef(!1),Q=b.useRef(!1),ne=b.useState(function(){return zi(c??u)}),ie=fe(ne,2),re=ie[0],I=ie[1];function A(We){c===void 0&&I(We)}var F=b.useCallback(function(We,tt){if(!tt)return _>=0?_:Math.max(Ba(We),Ba(s))},[_,s]),G=b.useCallback(function(We){var tt=String(We);if(P)return P(tt);var gt=tt;return M&&(gt=gt.replace(M,".")),gt.replace(/[^\w.-]+/g,"")},[P,M]),ee=b.useRef(""),te=b.useCallback(function(We,tt){if($)return $(We,{userTyping:tt,input:String(ee.current)});var gt=typeof We=="number"?Uf(We):We;if(!tt){var Ge=F(gt,tt);if(Tp(gt)&&(M||Ge>=0)){var Rt=M||".";gt=Vd(gt,Rt,Ge)}}return gt},[$,F,M]),ae=b.useState(function(){var We=u??c;return re.isInvalidate()&&["string","number"].includes(ht(We))?Number.isNaN(We)?"":We:te(re.toString(),!1)}),de=fe(ae,2),he=de[0],pe=de[1];ee.current=he;function we(We,tt){pe(te(We.isInvalidate()?We.toString(!1):We.toString(!tt),tt))}var _e=b.useMemo(function(){return a1(a)},[a,_]),$e=b.useMemo(function(){return a1(o)},[o,_]),Me=b.useMemo(function(){return!_e||!re||re.isInvalidate()?!1:_e.lessEquals(re)},[_e,re]),Re=b.useMemo(function(){return!$e||!re||re.isInvalidate()?!1:re.lessEquals($e)},[$e,re]),be=uj(V.current,U),Le=fe(be,2),He=Le[0],it=Le[1],qe=function(tt){return _e&&!tt.lessEquals(_e)?_e:$e&&!$e.lessEquals(tt)?$e:null},De=function(tt){return!qe(tt)},nt=function(tt,gt){var Ge=tt,Rt=De(Ge)||Ge.isEmpty();if(!Ge.isEmpty()&&!gt&&(Ge=qe(Ge)||Ge,Rt=!0),!v&&!f&&Rt){var dt=Ge.toString(),ut=F(dt,gt);return ut>=0&&(Ge=zi(Vd(dt,".",ut)),De(Ge)||(Ge=zi(Vd(dt,".",ut,!0)))),Ge.equals(re)||(A(Ge),B==null||B(Ge.isEmpty()?null:o1(E,Ge)),c===void 0&&we(Ge,gt)),Ge}return re},Je=gj(),st=function We(tt){if(He(),ee.current=tt,pe(tt),!Y.current){var gt=G(tt),Ge=zi(gt);Ge.isNaN()||nt(Ge,!0)}H==null||H(tt),Je(function(){var Rt=tt;P||(Rt=tt.replace(/。/g,".")),Rt!==tt&&We(Rt)})},Ve=function(){Y.current=!0},Ie=function(){Y.current=!1,st(V.current.value)},Te=function(tt){st(tt.target.value)},je=function(tt){var gt;if(!(tt&&Me||!tt&&Re)){X.current=!1;var Ge=zi(Q.current?i1(s):s);tt||(Ge=Ge.negate());var Rt=(re||zi(0)).add(Ge.toString()),dt=nt(Rt,!1);T==null||T(o1(E,dt),{offset:Q.current?i1(s):s,type:tt?"up":"down"}),(gt=V.current)===null||gt===void 0||gt.focus()}},ke=function(tt){var gt=zi(G(he)),Ge;gt.isNaN()?Ge=nt(re,tt):Ge=nt(gt,tt),c!==void 0?we(re,!1):Ge.isNaN()||we(Ge,!1)},et=function(){X.current=!0},St=function(tt){var gt=tt.key,Ge=tt.shiftKey;X.current=!0,Q.current=Ge,gt==="Enter"&&(Y.current||(X.current=!1),ke(!1),k==null||k(tt)),y!==!1&&!Y.current&&["Up","ArrowUp","Down","ArrowDown"].includes(gt)&&(je(gt==="Up"||gt==="ArrowUp"),tt.preventDefault())},Ht=function(){X.current=!1,Q.current=!1};b.useEffect(function(){if(C&&U){var We=function(Ge){je(Ge.deltaY<0),Ge.preventDefault()},tt=V.current;if(tt)return tt.addEventListener("wheel",We,{passive:!1}),function(){return tt.removeEventListener("wheel",We)}}});var Ft=function(){L&&ke(!1),W(!1),X.current=!1};return nl(function(){re.isInvalidate()||we(re,!1)},[_,$]),nl(function(){var We=zi(c);I(We);var tt=zi(G(he));(!We.equals(tt)||!X.current||$)&&we(We,X.current)},[c]),nl(function(){$&&it()},[he]),b.createElement("div",{ref:K,className:me(n,r,oe(oe(oe(oe(oe({},"".concat(n,"-focused"),U),"".concat(n,"-disabled"),f),"".concat(n,"-readonly"),v),"".concat(n,"-not-a-number"),re.isNaN()),"".concat(n,"-out-of-range"),!re.isInvalidate()&&!De(re))),style:i,onFocus:function(){W(!0)},onBlur:Ft,onKeyDown:St,onKeyUp:Ht,onCompositionStart:Ve,onCompositionEnd:Ie,onBeforeInput:et},S&&b.createElement(vj,{prefixCls:n,upNode:g,downNode:m,upDisabled:Me,downDisabled:Re,onStep:je}),b.createElement("div",{className:"".concat(J,"-wrap")},b.createElement("input",Ne({autoComplete:"off",role:"spinbutton","aria-valuemin":o,"aria-valuemax":a,"aria-valuenow":re.isInvalidate()?null:re.toString(),step:s},q,{ref:ti(V,e),className:J,value:he,onChange:Te,disabled:f,readOnly:v}))))}),bj=b.forwardRef(function(t,e){var n=t.disabled,r=t.style,i=t.prefixCls,o=i===void 0?"rc-input-number":i,a=t.value,l=t.prefix,s=t.suffix,u=t.addonBefore,c=t.addonAfter,f=t.className,v=t.classNames,g=_t(t,pj),m=b.useRef(null),y=b.useRef(null),p=b.useRef(null),C=function(S){p.current&&yp(p.current,S)};return b.useImperativeHandle(e,function(){return cj(p.current,{focus:C,nativeElement:m.current.nativeElement||y.current})}),b.createElement(bp,{className:f,triggerFocus:C,prefixCls:o,value:a,disabled:n,style:r,prefix:l,suffix:s,addonAfter:c,addonBefore:u,classNames:v,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:m},b.createElement(yj,Ne({prefixCls:o,disabled:n,ref:p,domRef:y,className:v==null?void 0:v.input},g)))});const wj=t=>{var e;const n=(e=t.handleVisible)!==null&&e!==void 0?e:"auto",r=t.controlHeightSM-t.lineWidth*2;return Object.assign(Object.assign({},Qc(t)),{controlWidth:90,handleWidth:r,handleFontSize:t.fontSize/2,handleVisible:n,handleActiveBg:t.colorFillAlter,handleBg:t.colorBgContainer,filledHandleBg:new yn(t.colorFillSecondary).onBackground(t.colorBgContainer).toHexString(),handleHoverColor:t.colorPrimary,handleBorderColor:t.colorBorder,handleOpacity:n===!0?1:0,handleVisibleWidth:n===!0?r:0})},s1=({componentCls:t,borderRadiusSM:e,borderRadiusLG:n},r)=>{const i=r==="lg"?n:e;return{[`&-${r}`]:{[`${t}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}}}},xj=t=>{const{componentCls:e,lineWidth:n,lineType:r,borderRadius:i,inputFontSizeSM:o,inputFontSizeLG:a,controlHeightLG:l,controlHeightSM:s,colorError:u,paddingInlineSM:c,paddingBlockSM:f,paddingBlockLG:v,paddingInlineLG:g,colorIcon:m,motionDurationMid:y,handleHoverColor:p,handleOpacity:C,paddingInline:x,paddingBlock:S,handleBg:E,handleActiveBg:P,colorTextDisabled:$,borderRadiusSM:_,borderRadiusLG:M,controlWidth:B,handleBorderColor:H,filledHandleBg:k,lineHeightLG:T,calc:O}=t;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),Lf(t)),{display:"inline-block",width:B,margin:0,padding:0,borderRadius:i}),P2(t,{[`${e}-handler-wrap`]:{background:E,[`${e}-handler-down`]:{borderBlockStart:`${ye(n)} ${r} ${H}`}}})),_2(t,{[`${e}-handler-wrap`]:{background:k,[`${e}-handler-down`]:{borderBlockStart:`${ye(n)} ${r} ${H}`}},"&:focus-within":{[`${e}-handler-wrap`]:{background:E}}})),M2(t,{[`${e}-handler-wrap`]:{background:E,[`${e}-handler-down`]:{borderBlockStart:`${ye(n)} ${r} ${H}`}}})),$2(t)),{"&-rtl":{direction:"rtl",[`${e}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:a,lineHeight:T,borderRadius:M,[`input${e}-input`]:{height:O(l).sub(O(n).mul(2)).equal(),padding:`${ye(v)} ${ye(g)}`}},"&-sm":{padding:0,fontSize:o,borderRadius:_,[`input${e}-input`]:{height:O(s).sub(O(n).mul(2)).equal(),padding:`${ye(f)} ${ye(c)}`}},"&-out-of-range":{[`${e}-input-wrap`]:{input:{color:u}}},"&-group":Object.assign(Object.assign(Object.assign({},sr(t)),F2(t)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${e}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${e}-group-addon`]:{borderRadius:M,fontSize:t.fontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:_}}},k2(t)),A2(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${e}-input`]:{cursor:"not-allowed"},[e]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),{width:"100%",padding:`${ye(S)} ${ye(x)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${y} linear`,appearance:"textfield",fontSize:"inherit"}),N2(t.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:t.handleWidth,opacity:1}})},{[e]:Object.assign(Object.assign(Object.assign({[`${e}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:t.handleVisibleWidth,opacity:C,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${y}`,overflow:"hidden",[`${e}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:t.handleFontSize}}},[`${e}-handler`]:{height:"50%",overflow:"hidden",color:m,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${ye(n)} ${r} ${H}`,transition:`all ${y} linear`,"&:active":{background:P},"&:hover":{height:"60%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{color:p}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},xl()),{color:m,transition:`all ${y} linear`,userSelect:"none"})},[`${e}-handler-up`]:{borderStartEndRadius:i},[`${e}-handler-down`]:{borderEndEndRadius:i}},s1(t,"lg")),s1(t,"sm")),{"&-disabled, &-readonly":{[`${e}-handler-wrap`]:{display:"none"},[`${e}-input`]:{color:"inherit"}},[`
          ${e}-handler-up-disabled,
          ${e}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${e}-handler-up-disabled:hover &-handler-up-inner,
          ${e}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:$}})}]},Cj=t=>{const{componentCls:e,paddingBlock:n,paddingInline:r,inputAffixPadding:i,controlWidth:o,borderRadiusLG:a,borderRadiusSM:l,paddingInlineLG:s,paddingInlineSM:u,paddingBlockLG:c,paddingBlockSM:f,motionDurationMid:v}=t;return{[`${e}-affix-wrapper`]:Object.assign(Object.assign({[`input${e}-input`]:{padding:`${ye(n)} 0`}},Lf(t)),{position:"relative",display:"inline-flex",alignItems:"center",width:o,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:a,paddingInlineStart:s,[`input${e}-input`]:{padding:`${ye(c)} 0`}},"&-sm":{borderRadius:l,paddingInlineStart:u,[`input${e}-input`]:{padding:`${ye(f)} 0`}},[`&:not(${e}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${e}-disabled`]:{background:"transparent"},[`> div${e}`]:{width:"100%",border:"none",outline:"none",[`&${e}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${e}-handler-wrap`]:{zIndex:2},[e]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:i,transition:`margin ${v}`}},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:t.handleWidth,opacity:1},[`&:not(${e}-affix-wrapper-without-controls):hover ${e}-suffix`]:{marginInlineEnd:t.calc(t.handleWidth).add(r).equal()}})}},Sj=lr("InputNumber",t=>{const e=bn(t,Yc(t));return[xj(e),Cj(e),Xc(e)]},wj,{unitless:{handleOpacity:!0}});var Ej=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const zE=b.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r}=b.useContext(un),i=b.useRef(null);b.useImperativeHandle(e,()=>i.current);const{className:o,rootClassName:a,size:l,disabled:s,prefixCls:u,addonBefore:c,addonAfter:f,prefix:v,suffix:g,bordered:m,readOnly:y,status:p,controls:C,variant:x}=t,S=Ej(t,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),E=n("input-number",u),P=ma(E),[$,_,M]=Sj(E,P),{compactSize:B,compactItemClassnames:H}=rs(E,r);let k=b.createElement(aj,{className:`${E}-handler-up-inner`}),T=b.createElement(EE,{className:`${E}-handler-down-inner`});const O=typeof C=="boolean"?C:void 0;typeof C=="object"&&(k=typeof C.upIcon>"u"?k:b.createElement("span",{className:`${E}-handler-up-inner`},C.upIcon),T=typeof C.downIcon>"u"?T:b.createElement("span",{className:`${E}-handler-down-inner`},C.downIcon));const{hasFeedback:L,status:K,isFormItemInput:q,feedbackIcon:J}=b.useContext(Yi),V=Jc(K,p),z=bi(re=>{var I;return(I=l??B)!==null&&I!==void 0?I:re}),D=b.useContext(pi),U=s??D,[W,X]=Df("inputNumber",x,m),Y=L&&b.createElement(b.Fragment,null,J),Q=me({[`${E}-lg`]:z==="large",[`${E}-sm`]:z==="small",[`${E}-rtl`]:r==="rtl",[`${E}-in-form-item`]:q},_),ne=`${E}-group`,ie=b.createElement(bj,Object.assign({ref:i,disabled:U,className:me(M,P,o,a,H),upHandler:k,downHandler:T,prefixCls:E,readOnly:y,controls:O,prefix:v,suffix:Y||g,addonBefore:c&&b.createElement(yl,{form:!0,space:!0},c),addonAfter:f&&b.createElement(yl,{form:!0,space:!0},f),classNames:{input:Q,variant:me({[`${E}-${W}`]:X},Ja(E,V,L)),affixWrapper:me({[`${E}-affix-wrapper-sm`]:z==="small",[`${E}-affix-wrapper-lg`]:z==="large",[`${E}-affix-wrapper-rtl`]:r==="rtl",[`${E}-affix-wrapper-without-controls`]:C===!1||U},_),wrapper:me({[`${ne}-rtl`]:r==="rtl"},_),groupWrapper:me({[`${E}-group-wrapper-sm`]:z==="small",[`${E}-group-wrapper-lg`]:z==="large",[`${E}-group-wrapper-rtl`]:r==="rtl",[`${E}-group-wrapper-${W}`]:X},Ja(`${E}-group-wrapper`,V,L),_)}},S));return $(ie)}),HE=zE,Rj=t=>b.createElement(ga,{theme:{components:{InputNumber:{handleVisible:!0}}}},b.createElement(zE,Object.assign({},t)));HE._InternalPanelDoNotUseOrYouWillBeFired=Rj;const qa=({prefixCls:t,min:e=0,max:n=100,value:r,onChange:i,className:o,formatter:a})=>{const l=`${t}-steppers`,[s,u]=b.useState(0),c=Number.isNaN(r)?s:r;return ue.createElement(HE,{className:me(l,o),min:e,max:n,value:c,formatter:a,size:"small",onChange:f=>{u(f||0),i==null||i(f)}})},Ij=({prefixCls:t,value:e,onChange:n})=>{const r=`${t}-alpha-input`,[i,o]=b.useState(()=>Lr(e||"#000")),a=e||i,l=s=>{const u=a.toHsb();u.a=(s||0)/100;const c=Lr(u);o(c),n==null||n(c)};return ue.createElement(qa,{value:xp(a),prefixCls:t,formatter:s=>`${s}%`,className:r,onChange:l})},Pj=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,kj=t=>Pj.test(`#${t}`),$j=({prefixCls:t,value:e,onChange:n})=>{const r=`${t}-hex-input`,[i,o]=b.useState(()=>e?fc(e.toHexString()):void 0);b.useEffect(()=>{e&&o(fc(e.toHexString()))},[e]);const a=l=>{const s=l.target.value;o(fc(s)),kj(fc(s,!0))&&(n==null||n(Lr(s)))};return ue.createElement(Zc,{className:r,value:i,prefix:"#",onChange:a,size:"small"})},Tj=({prefixCls:t,value:e,onChange:n})=>{const r=`${t}-hsb-input`,[i,o]=b.useState(()=>Lr(e||"#000")),a=e||i,l=(s,u)=>{const c=a.toHsb();c[u]=u==="h"?s:(s||0)/100;const f=Lr(c);o(f),n==null||n(f)};return ue.createElement("div",{className:r},ue.createElement(qa,{max:360,min:0,value:Number(a.toHsb().h),prefixCls:t,className:r,formatter:s=>zd(s||0).toString(),onChange:s=>l(Number(s),"h")}),ue.createElement(qa,{max:100,min:0,value:Number(a.toHsb().s)*100,prefixCls:t,className:r,formatter:s=>`${zd(s||0)}%`,onChange:s=>l(Number(s),"s")}),ue.createElement(qa,{max:100,min:0,value:Number(a.toHsb().b)*100,prefixCls:t,className:r,formatter:s=>`${zd(s||0)}%`,onChange:s=>l(Number(s),"b")}))},_j=({prefixCls:t,value:e,onChange:n})=>{const r=`${t}-rgb-input`,[i,o]=b.useState(()=>Lr(e||"#000")),a=e||i,l=(s,u)=>{const c=a.toRgb();c[u]=s||0;const f=Lr(c);o(f),n==null||n(f)};return ue.createElement("div",{className:r},ue.createElement(qa,{max:255,min:0,value:Number(a.toRgb().r),prefixCls:t,className:r,onChange:s=>l(Number(s),"r")}),ue.createElement(qa,{max:255,min:0,value:Number(a.toRgb().g),prefixCls:t,className:r,onChange:s=>l(Number(s),"g")}),ue.createElement(qa,{max:255,min:0,value:Number(a.toRgb().b),prefixCls:t,className:r,onChange:s=>l(Number(s),"b")}))},Aj=[DE,BE,FE].map(t=>({value:t,label:t.toUpperCase()})),Oj=t=>{const{prefixCls:e,format:n,value:r,disabledAlpha:i,onFormatChange:o,onChange:a,disabledFormat:l}=t,[s,u]=Mn(DE,{value:n,onChange:o}),c=`${e}-input`,f=g=>{u(g)},v=b.useMemo(()=>{const g={value:r,prefixCls:e,onChange:a};switch(s){case BE:return ue.createElement(Tj,Object.assign({},g));case FE:return ue.createElement(_j,Object.assign({},g));default:return ue.createElement($j,Object.assign({},g))}},[s,e,r,a]);return ue.createElement("div",{className:`${c}-container`},!l&&ue.createElement(is,{value:s,variant:"borderless",getPopupContainer:g=>g,popupMatchSelectWidth:68,placement:"bottomRight",onChange:f,className:`${e}-format-select`,size:"small",options:Aj}),ue.createElement("div",{className:c},v),!i&&ue.createElement(Ij,{prefixCls:e,value:r,onChange:a}))};function Tm(t,e,n){return(t-e)/(n-e)}function _p(t,e,n,r){var i=Tm(e,n,r),o={};switch(t){case"rtl":o.right="".concat(i*100,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(i*100,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(i*100,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(i*100,"%"),o.transform="translateX(-50%)";break}return o}function Ma(t,e){return Array.isArray(t)?t[e]:t}var os=b.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),VE=b.createContext({}),Mj=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],l1=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.value,i=t.valueIndex,o=t.onStartMove,a=t.onDelete,l=t.style,s=t.render,u=t.dragging,c=t.draggingDelete,f=t.onOffsetChange,v=t.onChangeComplete,g=t.onFocus,m=t.onMouseEnter,y=_t(t,Mj),p=b.useContext(os),C=p.min,x=p.max,S=p.direction,E=p.disabled,P=p.keyboard,$=p.range,_=p.tabIndex,M=p.ariaLabelForHandle,B=p.ariaLabelledByForHandle,H=p.ariaRequired,k=p.ariaValueTextFormatterForHandle,T=p.styles,O=p.classNames,L="".concat(n,"-handle"),K=function(Q){E||o(Q,i)},q=function(Q){g==null||g(Q,i)},J=function(Q){m(Q,i)},V=function(Q){if(!E&&P){var ne=null;switch(Q.which||Q.keyCode){case Ze.LEFT:ne=S==="ltr"||S==="btt"?-1:1;break;case Ze.RIGHT:ne=S==="ltr"||S==="btt"?1:-1;break;case Ze.UP:ne=S!=="ttb"?1:-1;break;case Ze.DOWN:ne=S!=="ttb"?-1:1;break;case Ze.HOME:ne="min";break;case Ze.END:ne="max";break;case Ze.PAGE_UP:ne=2;break;case Ze.PAGE_DOWN:ne=-2;break;case Ze.BACKSPACE:case Ze.DELETE:a(i);break}ne!==null&&(Q.preventDefault(),f(ne,i))}},z=function(Q){switch(Q.which||Q.keyCode){case Ze.LEFT:case Ze.RIGHT:case Ze.UP:case Ze.DOWN:case Ze.HOME:case Ze.END:case Ze.PAGE_UP:case Ze.PAGE_DOWN:v==null||v();break}},D=_p(S,r,C,x),U={};if(i!==null){var W;U={tabIndex:E?null:Ma(_,i),role:"slider","aria-valuemin":C,"aria-valuemax":x,"aria-valuenow":r,"aria-disabled":E,"aria-label":Ma(M,i),"aria-labelledby":Ma(B,i),"aria-required":Ma(H,i),"aria-valuetext":(W=Ma(k,i))===null||W===void 0?void 0:W(r),"aria-orientation":S==="ltr"||S==="rtl"?"horizontal":"vertical",onMouseDown:K,onTouchStart:K,onFocus:q,onMouseEnter:J,onKeyDown:V,onKeyUp:z}}var X=b.createElement("div",Ne({ref:e,className:me(L,oe(oe(oe({},"".concat(L,"-").concat(i+1),i!==null&&$),"".concat(L,"-dragging"),u),"".concat(L,"-dragging-delete"),c),O.handle),style:le(le(le({},D),l),T.handle)},U,y));return s&&(X=s(X,{index:i,prefixCls:n,value:r,dragging:u,draggingDelete:c})),X}),Nj=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Lj=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.style,i=t.onStartMove,o=t.onOffsetChange,a=t.values,l=t.handleRender,s=t.activeHandleRender,u=t.draggingIndex,c=t.draggingDelete,f=t.onFocus,v=_t(t,Nj),g=b.useRef({}),m=b.useState(!1),y=fe(m,2),p=y[0],C=y[1],x=b.useState(-1),S=fe(x,2),E=S[0],P=S[1],$=function(k){P(k),C(!0)},_=function(k,T){$(T),f==null||f(k)},M=function(k,T){$(T)};b.useImperativeHandle(e,function(){return{focus:function(k){var T;(T=g.current[k])===null||T===void 0||T.focus()},hideHelp:function(){Gi.flushSync(function(){C(!1)})}}});var B=le({prefixCls:n,onStartMove:i,onOffsetChange:o,render:l,onFocus:_,onMouseEnter:M},v);return b.createElement(b.Fragment,null,a.map(function(H,k){var T=u===k;return b.createElement(l1,Ne({ref:function(L){L?g.current[k]=L:delete g.current[k]},dragging:T,draggingDelete:T&&c,style:Ma(r,k),key:k,value:H,valueIndex:k},B))}),s&&p&&b.createElement(l1,Ne({key:"a11y"},B,{value:a[E],valueIndex:null,dragging:u!==-1,draggingDelete:c,render:s,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),Dj=function(e){var n=e.prefixCls,r=e.style,i=e.children,o=e.value,a=e.onClick,l=b.useContext(os),s=l.min,u=l.max,c=l.direction,f=l.includedStart,v=l.includedEnd,g=l.included,m="".concat(n,"-text"),y=_p(c,o,s,u);return b.createElement("span",{className:me(m,oe({},"".concat(m,"-active"),g&&f<=o&&o<=v)),style:le(le({},y),r),onMouseDown:function(C){C.stopPropagation()},onClick:function(){a(o)}},i)},Fj=function(e){var n=e.prefixCls,r=e.marks,i=e.onClick,o="".concat(n,"-mark");return r.length?b.createElement("div",{className:o},r.map(function(a){var l=a.value,s=a.style,u=a.label;return b.createElement(Dj,{key:l,prefixCls:o,style:s,value:l,onClick:i},u)})):null},Bj=function(e){var n=e.prefixCls,r=e.value,i=e.style,o=e.activeStyle,a=b.useContext(os),l=a.min,s=a.max,u=a.direction,c=a.included,f=a.includedStart,v=a.includedEnd,g="".concat(n,"-dot"),m=c&&f<=r&&r<=v,y=le(le({},_p(u,r,l,s)),typeof i=="function"?i(r):i);return m&&(y=le(le({},y),typeof o=="function"?o(r):o)),b.createElement("span",{className:me(g,oe({},"".concat(g,"-active"),m)),style:y})},jj=function(e){var n=e.prefixCls,r=e.marks,i=e.dots,o=e.style,a=e.activeStyle,l=b.useContext(os),s=l.min,u=l.max,c=l.step,f=b.useMemo(function(){var v=new Set;if(r.forEach(function(m){v.add(m.value)}),i&&c!==null)for(var g=s;g<=u;)v.add(g),g+=c;return Array.from(v)},[s,u,c,i,r]);return b.createElement("div",{className:"".concat(n,"-step")},f.map(function(v){return b.createElement(Bj,{prefixCls:n,key:v,value:v,style:o,activeStyle:a})}))},c1=function(e){var n=e.prefixCls,r=e.style,i=e.start,o=e.end,a=e.index,l=e.onStartMove,s=e.replaceCls,u=b.useContext(os),c=u.direction,f=u.min,v=u.max,g=u.disabled,m=u.range,y=u.classNames,p="".concat(n,"-track"),C=Tm(i,f,v),x=Tm(o,f,v),S=function(_){!g&&l&&l(_,-1)},E={};switch(c){case"rtl":E.right="".concat(C*100,"%"),E.width="".concat(x*100-C*100,"%");break;case"btt":E.bottom="".concat(C*100,"%"),E.height="".concat(x*100-C*100,"%");break;case"ttb":E.top="".concat(C*100,"%"),E.height="".concat(x*100-C*100,"%");break;default:E.left="".concat(C*100,"%"),E.width="".concat(x*100-C*100,"%")}var P=s||me(p,oe(oe({},"".concat(p,"-").concat(a+1),a!==null&&m),"".concat(n,"-track-draggable"),l),y.track);return b.createElement("div",{className:P,style:le(le({},E),r),onMouseDown:S,onTouchStart:S})},zj=function(e){var n=e.prefixCls,r=e.style,i=e.values,o=e.startPoint,a=e.onStartMove,l=b.useContext(os),s=l.included,u=l.range,c=l.min,f=l.styles,v=l.classNames,g=b.useMemo(function(){if(!u){if(i.length===0)return[];var y=o??c,p=i[0];return[{start:Math.min(y,p),end:Math.max(y,p)}]}for(var C=[],x=0;x<i.length-1;x+=1)C.push({start:i[x],end:i[x+1]});return C},[i,u,o,c]);if(!s)return null;var m=g!=null&&g.length&&(v.tracks||f.tracks)?b.createElement(c1,{index:null,prefixCls:n,start:g[0].start,end:g[g.length-1].end,replaceCls:me(v.tracks,"".concat(n,"-tracks")),style:f.tracks}):null;return b.createElement(b.Fragment,null,m,g.map(function(y,p){var C=y.start,x=y.end;return b.createElement(c1,{index:p,prefixCls:n,style:le(le({},Ma(r,p)),f.track),start:C,end:x,key:p,onStartMove:a})}))},Hj=130;function u1(t){var e="targetTouches"in t?t.targetTouches[0]:t;return{pageX:e.pageX,pageY:e.pageY}}function Vj(t,e,n,r,i,o,a,l,s,u,c){var f=b.useState(null),v=fe(f,2),g=v[0],m=v[1],y=b.useState(-1),p=fe(y,2),C=p[0],x=p[1],S=b.useState(!1),E=fe(S,2),P=E[0],$=E[1],_=b.useState(n),M=fe(_,2),B=M[0],H=M[1],k=b.useState(n),T=fe(k,2),O=T[0],L=T[1],K=b.useRef(null),q=b.useRef(null),J=b.useRef(null),V=b.useContext(VE),z=V.onDragStart,D=V.onDragChange;$n(function(){C===-1&&H(n)},[n,C]),b.useEffect(function(){return function(){document.removeEventListener("mousemove",K.current),document.removeEventListener("mouseup",q.current),J.current&&(J.current.removeEventListener("touchmove",K.current),J.current.removeEventListener("touchend",q.current))}},[]);var U=function(ne,ie,re){ie!==void 0&&m(ie),H(ne);var I=ne;re&&(I=ne.filter(function(A,F){return F!==C})),a(I),D&&D({rawValues:ne,deleteIndex:re?C:-1,draggingIndex:C,draggingValue:ie})},W=In(function(Q,ne,ie){if(Q===-1){var re=O[0],I=O[O.length-1],A=r-re,F=i-I,G=ne*(i-r);G=Math.max(G,A),G=Math.min(G,F);var ee=o(re+G);G=ee-re;var te=O.map(function(pe){return pe+G});U(te)}else{var ae=(i-r)*ne,de=Ae(B);de[Q]=O[Q];var he=s(de,ae,Q,"dist");U(he.values,he.value,ie)}}),X=function(ne,ie,re){ne.stopPropagation();var I=re||n,A=I[ie];x(ie),m(A),L(I),H(I),$(!1);var F=u1(ne),G=F.pageX,ee=F.pageY,te=!1;z&&z({rawValues:I,draggingIndex:ie,draggingValue:A});var ae=function(pe){pe.preventDefault();var we=u1(pe),_e=we.pageX,$e=we.pageY,Me=_e-G,Re=$e-ee,be=t.current.getBoundingClientRect(),Le=be.width,He=be.height,it,qe;switch(e){case"btt":it=-Re/He,qe=Me;break;case"ttb":it=Re/He,qe=Me;break;case"rtl":it=-Me/Le,qe=Re;break;default:it=Me/Le,qe=Re}te=u?Math.abs(qe)>Hj&&c<B.length:!1,$(te),W(ie,it,te)},de=function he(pe){pe.preventDefault(),document.removeEventListener("mouseup",he),document.removeEventListener("mousemove",ae),J.current&&(J.current.removeEventListener("touchmove",K.current),J.current.removeEventListener("touchend",q.current)),K.current=null,q.current=null,J.current=null,l(te),x(-1),$(!1)};document.addEventListener("mouseup",de),document.addEventListener("mousemove",ae),ne.currentTarget.addEventListener("touchend",de),ne.currentTarget.addEventListener("touchmove",ae),K.current=ae,q.current=de,J.current=ne.currentTarget},Y=b.useMemo(function(){var Q=Ae(n).sort(function(A,F){return A-F}),ne=Ae(B).sort(function(A,F){return A-F}),ie={};ne.forEach(function(A){ie[A]=(ie[A]||0)+1}),Q.forEach(function(A){ie[A]=(ie[A]||0)-1});var re=u?1:0,I=Object.values(ie).reduce(function(A,F){return A+Math.abs(F)},0);return I<=re?B:n},[n,B,u]);return[C,g,P,Y,X]}function Wj(t,e,n,r,i,o){var a=b.useCallback(function(g){return Math.max(t,Math.min(e,g))},[t,e]),l=b.useCallback(function(g){if(n!==null){var m=t+Math.round((a(g)-t)/n)*n,y=function(S){return(String(S).split(".")[1]||"").length},p=Math.max(y(n),y(e),y(t)),C=Number(m.toFixed(p));return t<=C&&C<=e?C:null}return null},[n,t,e,a]),s=b.useCallback(function(g){var m=a(g),y=r.map(function(x){return x.value});n!==null&&y.push(l(g)),y.push(t,e);var p=y[0],C=e-t;return y.forEach(function(x){var S=Math.abs(m-x);S<=C&&(p=x,C=S)}),p},[t,e,r,n,a,l]),u=function g(m,y,p){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof y=="number"){var x,S=m[p],E=S+y,P=[];r.forEach(function(H){P.push(H.value)}),P.push(t,e),P.push(l(S));var $=y>0?1:-1;C==="unit"?P.push(l(S+$*n)):P.push(l(E)),P=P.filter(function(H){return H!==null}).filter(function(H){return y<0?H<=S:H>=S}),C==="unit"&&(P=P.filter(function(H){return H!==S}));var _=C==="unit"?S:E;x=P[0];var M=Math.abs(x-_);if(P.forEach(function(H){var k=Math.abs(H-_);k<M&&(x=H,M=k)}),x===void 0)return y<0?t:e;if(C==="dist")return x;if(Math.abs(y)>1){var B=Ae(m);return B[p]=x,g(B,y-$,p,C)}return x}else{if(y==="min")return t;if(y==="max")return e}},c=function(m,y,p){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",x=m[p],S=u(m,y,p,C);return{value:S,changed:S!==x}},f=function(m){return o===null&&m===0||typeof o=="number"&&m<o},v=function(m,y,p){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",x=m.map(s),S=x[p],E=u(x,y,p,C);if(x[p]=E,i===!1){var P=o||0;p>0&&x[p-1]!==S&&(x[p]=Math.max(x[p],x[p-1]+P)),p<x.length-1&&x[p+1]!==S&&(x[p]=Math.min(x[p],x[p+1]-P))}else if(typeof o=="number"||o===null){for(var $=p+1;$<x.length;$+=1)for(var _=!0;f(x[$]-x[$-1])&&_;){var M=c(x,1,$);x[$]=M.value,_=M.changed}for(var B=p;B>0;B-=1)for(var H=!0;f(x[B]-x[B-1])&&H;){var k=c(x,-1,B-1);x[B-1]=k.value,H=k.changed}for(var T=x.length-1;T>0;T-=1)for(var O=!0;f(x[T]-x[T-1])&&O;){var L=c(x,-1,T-1);x[T-1]=L.value,O=L.changed}for(var K=0;K<x.length-1;K+=1)for(var q=!0;f(x[K+1]-x[K])&&q;){var J=c(x,1,K+1);x[K+1]=J.value,q=J.changed}}return{value:x[p],values:x}};return[s,v]}function Uj(t){return b.useMemo(function(){if(t===!0||!t)return[!!t,!1,!1,0];var e=t.editable,n=t.draggableTrack,r=t.minCount,i=t.maxCount;return[!0,e,!e&&n,r||0,i]},[t])}var qj=b.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-slider":n,i=t.className,o=t.style,a=t.classNames,l=t.styles,s=t.id,u=t.disabled,c=u===void 0?!1:u,f=t.keyboard,v=f===void 0?!0:f,g=t.autoFocus,m=t.onFocus,y=t.onBlur,p=t.min,C=p===void 0?0:p,x=t.max,S=x===void 0?100:x,E=t.step,P=E===void 0?1:E,$=t.value,_=t.defaultValue,M=t.range,B=t.count,H=t.onChange,k=t.onBeforeChange,T=t.onAfterChange,O=t.onChangeComplete,L=t.allowCross,K=L===void 0?!0:L,q=t.pushable,J=q===void 0?!1:q,V=t.reverse,z=t.vertical,D=t.included,U=D===void 0?!0:D,W=t.startPoint,X=t.trackStyle,Y=t.handleStyle,Q=t.railStyle,ne=t.dotStyle,ie=t.activeDotStyle,re=t.marks,I=t.dots,A=t.handleRender,F=t.activeHandleRender,G=t.track,ee=t.tabIndex,te=ee===void 0?0:ee,ae=t.ariaLabelForHandle,de=t.ariaLabelledByForHandle,he=t.ariaRequired,pe=t.ariaValueTextFormatterForHandle,we=b.useRef(null),_e=b.useRef(null),$e=b.useMemo(function(){return z?V?"ttb":"btt":V?"rtl":"ltr"},[V,z]),Me=Uj(M),Re=fe(Me,5),be=Re[0],Le=Re[1],He=Re[2],it=Re[3],qe=Re[4],De=b.useMemo(function(){return isFinite(C)?C:0},[C]),nt=b.useMemo(function(){return isFinite(S)?S:100},[S]),Je=b.useMemo(function(){return P!==null&&P<=0?1:P},[P]),st=b.useMemo(function(){return typeof J=="boolean"?J?Je:!1:J>=0?J:!1},[J,Je]),Ve=b.useMemo(function(){return Object.keys(re||{}).map(function(Oe){var Ce=re[Oe],Ye={value:Number(Oe)};return Ce&&ht(Ce)==="object"&&!b.isValidElement(Ce)&&("label"in Ce||"style"in Ce)?(Ye.style=Ce.style,Ye.label=Ce.label):Ye.label=Ce,Ye}).filter(function(Oe){var Ce=Oe.label;return Ce||typeof Ce=="number"}).sort(function(Oe,Ce){return Oe.value-Ce.value})},[re]),Ie=Wj(De,nt,Je,Ve,K,st),Te=fe(Ie,2),je=Te[0],ke=Te[1],et=Mn(_,{value:$}),St=fe(et,2),Ht=St[0],Ft=St[1],We=b.useMemo(function(){var Oe=Ht==null?[]:Array.isArray(Ht)?Ht:[Ht],Ce=fe(Oe,1),Ye=Ce[0],wt=Ye===void 0?De:Ye,Dt=Ht===null?[]:[wt];if(be){if(Dt=Ae(Oe),B||Ht===void 0){var Gt=B>=0?B+1:2;for(Dt=Dt.slice(0,Gt);Dt.length<Gt;){var Pn;Dt.push((Pn=Dt[Dt.length-1])!==null&&Pn!==void 0?Pn:De)}}Dt.sort(function(Vt,Zt){return Vt-Zt})}return Dt.forEach(function(Vt,Zt){Dt[Zt]=je(Vt)}),Dt},[Ht,be,De,B,je]),tt=function(Ce){return be?Ce:Ce[0]},gt=In(function(Oe){var Ce=Ae(Oe).sort(function(Ye,wt){return Ye-wt});H&&!ul(Ce,We,!0)&&H(tt(Ce)),Ft(Ce)}),Ge=In(function(Oe){Oe&&we.current.hideHelp();var Ce=tt(We);T==null||T(Ce),rr(!T,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),O==null||O(Ce)}),Rt=function(Ce){if(!(c||!Le||We.length<=it)){var Ye=Ae(We);Ye.splice(Ce,1),k==null||k(tt(Ye)),gt(Ye);var wt=Math.max(0,Ce-1);we.current.hideHelp(),we.current.focus(wt)}},dt=Vj(_e,$e,We,De,nt,je,gt,Ge,ke,Le,it),ut=fe(dt,5),Ue=ut[0],Ct=ut[1],Lt=ut[2],Ke=ut[3],Xe=ut[4],ot=function(Ce,Ye){if(!c){var wt=Ae(We),Dt=0,Gt=0,Pn=nt-De;We.forEach(function(fn,Zn){var Yn=Math.abs(Ce-fn);Yn<=Pn&&(Pn=Yn,Dt=Zn),fn<Ce&&(Gt=Zn)});var Vt=Dt;Le&&Pn!==0&&(!qe||We.length<qe)?(wt.splice(Gt+1,0,Ce),Vt=Gt+1):wt[Dt]=Ce,be&&!We.length&&B===void 0&&wt.push(Ce);var Zt=tt(wt);if(k==null||k(Zt),gt(wt),Ye){var rn,Wn;(rn=document.activeElement)===null||rn===void 0||(Wn=rn.blur)===null||Wn===void 0||Wn.call(rn),we.current.focus(Vt),Xe(Ye,Vt,wt)}else T==null||T(Zt),rr(!T,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),O==null||O(Zt)}},at=function(Ce){Ce.preventDefault();var Ye=_e.current.getBoundingClientRect(),wt=Ye.width,Dt=Ye.height,Gt=Ye.left,Pn=Ye.top,Vt=Ye.bottom,Zt=Ye.right,rn=Ce.clientX,Wn=Ce.clientY,fn;switch($e){case"btt":fn=(Vt-Wn)/Dt;break;case"ttb":fn=(Wn-Pn)/Dt;break;case"rtl":fn=(Zt-rn)/wt;break;default:fn=(rn-Gt)/wt}var Zn=De+fn*(nt-De);ot(je(Zn),Ce)},lt=b.useState(null),mt=fe(lt,2),Jt=mt[0],qt=mt[1],Yt=function(Ce,Ye){if(!c){var wt=ke(We,Ce,Ye);k==null||k(tt(We)),gt(wt.values),qt(wt.value)}};b.useEffect(function(){if(Jt!==null){var Oe=We.indexOf(Jt);Oe>=0&&we.current.focus(Oe)}qt(null)},[Jt]);var zt=b.useMemo(function(){return He&&Je===null?!1:He},[He,Je]),En=In(function(Oe,Ce){Xe(Oe,Ce),k==null||k(tt(We))}),wn=Ue!==-1;b.useEffect(function(){if(!wn){var Oe=We.lastIndexOf(Ct);we.current.focus(Oe)}},[wn]);var xn=b.useMemo(function(){return Ae(Ke).sort(function(Oe,Ce){return Oe-Ce})},[Ke]),An=b.useMemo(function(){return be?[xn[0],xn[xn.length-1]]:[De,xn[0]]},[xn,be,De]),nn=fe(An,2),Kt=nn[0],rt=nn[1];b.useImperativeHandle(e,function(){return{focus:function(){we.current.focus(0)},blur:function(){var Ce,Ye=document,wt=Ye.activeElement;(Ce=_e.current)!==null&&Ce!==void 0&&Ce.contains(wt)&&(wt==null||wt.blur())}}}),b.useEffect(function(){g&&we.current.focus(0)},[]);var ct=b.useMemo(function(){return{min:De,max:nt,direction:$e,disabled:c,keyboard:v,step:Je,included:U,includedStart:Kt,includedEnd:rt,range:be,tabIndex:te,ariaLabelForHandle:ae,ariaLabelledByForHandle:de,ariaRequired:he,ariaValueTextFormatterForHandle:pe,styles:l||{},classNames:a||{}}},[De,nt,$e,c,v,Je,U,Kt,rt,be,te,ae,de,he,pe,l,a]);return b.createElement(os.Provider,{value:ct},b.createElement("div",{ref:_e,className:me(r,i,oe(oe(oe(oe({},"".concat(r,"-disabled"),c),"".concat(r,"-vertical"),z),"".concat(r,"-horizontal"),!z),"".concat(r,"-with-marks"),Ve.length)),style:o,onMouseDown:at,id:s},b.createElement("div",{className:me("".concat(r,"-rail"),a==null?void 0:a.rail),style:le(le({},Q),l==null?void 0:l.rail)}),G!==!1&&b.createElement(zj,{prefixCls:r,style:X,values:We,startPoint:W,onStartMove:zt?En:void 0}),b.createElement(jj,{prefixCls:r,marks:Ve,dots:I,style:ne,activeStyle:ie}),b.createElement(Lj,{ref:we,prefixCls:r,style:Y,values:Ke,draggingIndex:Ue,draggingDelete:Lt,onStartMove:En,onOffsetChange:Yt,onFocus:m,onBlur:y,handleRender:A,activeHandleRender:F,onChangeComplete:Ge,onDelete:Le?Rt:void 0}),b.createElement(Fj,{prefixCls:r,marks:Ve,onClick:ot})))});const WE=b.createContext({}),d1=b.forwardRef((t,e)=>{const{open:n,draggingDelete:r,value:i}=t,o=b.useRef(null),a=n&&!r,l=b.useRef(null);function s(){Qt.cancel(l.current),l.current=null}function u(){l.current=Qt(()=>{var c;(c=o.current)===null||c===void 0||c.forceAlign(),l.current=null})}return b.useEffect(()=>(a?u():s(),s),[a,t.title,i]),b.createElement(eu,Object.assign({ref:ti(o,e)},t,{open:a}))}),Kj=t=>{const{componentCls:e,antCls:n,controlSize:r,dotSize:i,marginFull:o,marginPart:a,colorFillContentHover:l,handleColorDisabled:s,calc:u,handleSize:c,handleSizeHover:f,handleActiveColor:v,handleActiveOutlineColor:g,handleLineWidth:m,handleLineWidthHover:y,motionDurationMid:p}=t;return{[e]:Object.assign(Object.assign({},sr(t)),{position:"relative",height:r,margin:`${ye(a)} ${ye(o)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${ye(o)} ${ye(a)}`},[`${e}-rail`]:{position:"absolute",backgroundColor:t.railBg,borderRadius:t.borderRadiusXS,transition:`background-color ${p}`},[`${e}-track,${e}-tracks`]:{position:"absolute",transition:`background-color ${p}`},[`${e}-track`]:{backgroundColor:t.trackBg,borderRadius:t.borderRadiusXS},[`${e}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${e}-rail`]:{backgroundColor:t.railHoverBg},[`${e}-track`]:{backgroundColor:t.trackHoverBg},[`${e}-dot`]:{borderColor:l},[`${e}-handle::after`]:{boxShadow:`0 0 0 ${ye(m)} ${t.colorPrimaryBorderHover}`},[`${e}-dot-active`]:{borderColor:t.dotActiveBorderColor}},[`${e}-handle`]:{position:"absolute",width:c,height:c,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:u(m).mul(-1).equal(),insetBlockStart:u(m).mul(-1).equal(),width:u(c).add(u(m).mul(2)).equal(),height:u(c).add(u(m).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:c,height:c,backgroundColor:t.colorBgElevated,boxShadow:`0 0 0 ${ye(m)} ${t.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${p},
            inset-block-start ${p},
            width ${p},
            height ${p},
            box-shadow ${p},
            outline ${p}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(f).sub(c).div(2).add(y).mul(-1).equal(),insetBlockStart:u(f).sub(c).div(2).add(y).mul(-1).equal(),width:u(f).add(u(y).mul(2)).equal(),height:u(f).add(u(y).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${ye(y)} ${v}`,outline:`6px solid ${g}`,width:f,height:f,insetInlineStart:t.calc(c).sub(f).div(2).equal(),insetBlockStart:t.calc(c).sub(f).div(2).equal()}}},[`&-lock ${e}-handle`]:{"&::before, &::after":{transition:"none"}},[`${e}-mark`]:{position:"absolute",fontSize:t.fontSize},[`${e}-mark-text`]:{position:"absolute",display:"inline-block",color:t.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:t.colorText}},[`${e}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${e}-dot`]:{position:"absolute",width:i,height:i,backgroundColor:t.colorBgElevated,border:`${ye(m)} solid ${t.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:t.dotActiveBorderColor}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-rail`]:{backgroundColor:`${t.railBg} !important`},[`${e}-track`]:{backgroundColor:`${t.trackBgDisabled} !important`},[`
          ${e}-dot
        `]:{backgroundColor:t.colorBgElevated,borderColor:t.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${e}-handle::after`]:{backgroundColor:t.colorBgElevated,cursor:"not-allowed",width:c,height:c,boxShadow:`0 0 0 ${ye(m)} ${s}`,insetInlineStart:0,insetBlockStart:0},[`
          ${e}-mark-text,
          ${e}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${n}-tooltip-inner`]:{minWidth:"unset"}})}},UE=(t,e)=>{const{componentCls:n,railSize:r,handleSize:i,dotSize:o,marginFull:a,calc:l}=t,s=e?"paddingBlock":"paddingInline",u=e?"width":"height",c=e?"height":"width",f=e?"insetBlockStart":"insetInlineStart",v=e?"top":"insetInlineStart",g=l(r).mul(3).sub(i).div(2).equal(),m=l(i).sub(r).div(2).equal(),y=e?{borderWidth:`${ye(m)} 0`,transform:`translateY(${ye(l(m).mul(-1).equal())})`}:{borderWidth:`0 ${ye(m)}`,transform:`translateX(${ye(t.calc(m).mul(-1).equal())})`};return{[s]:r,[c]:l(r).mul(3).equal(),[`${n}-rail`]:{[u]:"100%",[c]:r},[`${n}-track,${n}-tracks`]:{[c]:r},[`${n}-track-draggable`]:Object.assign({},y),[`${n}-handle`]:{[f]:g},[`${n}-mark`]:{insetInlineStart:0,top:0,[v]:l(r).mul(3).add(e?0:a).equal(),[u]:"100%"},[`${n}-step`]:{insetInlineStart:0,top:0,[v]:r,[u]:"100%",[c]:r},[`${n}-dot`]:{position:"absolute",[f]:l(r).sub(o).div(2).equal()}}},Gj=t=>{const{componentCls:e,marginPartWithMark:n}=t;return{[`${e}-horizontal`]:Object.assign(Object.assign({},UE(t,!0)),{[`&${e}-with-marks`]:{marginBottom:n}})}},Xj=t=>{const{componentCls:e}=t;return{[`${e}-vertical`]:Object.assign(Object.assign({},UE(t,!1)),{height:"100%"})}},Yj=t=>{const n=t.controlHeightLG/4,r=t.controlHeightSM/2,i=t.lineWidth+1,o=t.lineWidth+1*1.5,a=t.colorPrimary,l=new yn(a).setA(.2).toRgbString();return{controlSize:n,railSize:4,handleSize:n,handleSizeHover:r,dotSize:8,handleLineWidth:i,handleLineWidthHover:o,railBg:t.colorFillTertiary,railHoverBg:t.colorFillSecondary,trackBg:t.colorPrimaryBorder,trackHoverBg:t.colorPrimaryBorderHover,handleColor:t.colorPrimaryBorder,handleActiveColor:a,handleActiveOutlineColor:l,handleColorDisabled:new yn(t.colorTextDisabled).onBackground(t.colorBgContainer).toHexString(),dotBorderColor:t.colorBorderSecondary,dotActiveBorderColor:t.colorPrimaryBorder,trackBgDisabled:t.colorBgContainerDisabled}},Qj=lr("Slider",t=>{const e=bn(t,{marginPart:t.calc(t.controlHeight).sub(t.controlSize).div(2).equal(),marginFull:t.calc(t.controlSize).div(2).equal(),marginPartWithMark:t.calc(t.controlHeightLG).sub(t.controlSize).equal()});return[Kj(e),Gj(e),Xj(e)]},Yj);function hg(){const[t,e]=b.useState(!1),n=b.useRef(null),r=()=>{Qt.cancel(n.current)},i=o=>{r(),o?e(o):n.current=Qt(()=>{e(o)})};return b.useEffect(()=>r,[]),[t,i]}var Jj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Zj(t,e){return t||t===null?t:e||e===null?e:n=>typeof n=="number"?n.toString():""}const ez=ue.forwardRef((t,e)=>{const{prefixCls:n,range:r,className:i,rootClassName:o,style:a,disabled:l,tooltipPrefixCls:s,tipFormatter:u,tooltipVisible:c,getTooltipPopupContainer:f,tooltipPlacement:v,tooltip:g={},onChangeComplete:m,classNames:y,styles:p}=t,C=Jj(t,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:x}=t,{getPrefixCls:S,direction:E,className:P,style:$,classNames:_,styles:M,getPopupContainer:B}=eo("slider"),H=ue.useContext(pi),k=l??H,{handleRender:T,direction:O}=ue.useContext(WE),K=(O||E)==="rtl",[q,J]=hg(),[V,z]=hg(),D=Object.assign({},g),{open:U,placement:W,getPopupContainer:X,prefixCls:Y,formatter:Q}=D,ne=U??c,ie=(q||V)&&ne!==!1,re=Zj(Q,u),[I,A]=hg(),F=be=>{m==null||m(be),A(!1)},G=(be,Le)=>be||(Le?K?"left":"right":"top"),ee=S("slider",n),[te,ae,de]=Qj(ee),he=me(i,P,_.root,y==null?void 0:y.root,o,{[`${ee}-rtl`]:K,[`${ee}-lock`]:I},ae,de);K&&!C.vertical&&(C.reverse=!C.reverse),ue.useEffect(()=>{const be=()=>{Qt(()=>{z(!1)},1)};return document.addEventListener("mouseup",be),()=>{document.removeEventListener("mouseup",be)}},[]);const pe=r&&!ne,we=T||((be,Le)=>{const{index:He}=Le,it=be.props;function qe(st,Ve,Ie){var Te,je,ke,et;Ie&&((je=(Te=C)[st])===null||je===void 0||je.call(Te,Ve)),(et=(ke=it)[st])===null||et===void 0||et.call(ke,Ve)}const De=Object.assign(Object.assign({},it),{onMouseEnter:st=>{J(!0),qe("onMouseEnter",st)},onMouseLeave:st=>{J(!1),qe("onMouseLeave",st)},onMouseDown:st=>{z(!0),A(!0),qe("onMouseDown",st)},onFocus:st=>{var Ve;z(!0),(Ve=C.onFocus)===null||Ve===void 0||Ve.call(C,st),qe("onFocus",st,!0)},onBlur:st=>{var Ve;z(!1),(Ve=C.onBlur)===null||Ve===void 0||Ve.call(C,st),qe("onBlur",st,!0)}}),nt=ue.cloneElement(be,De),Je=(!!ne||ie)&&re!==null;return pe?nt:ue.createElement(d1,Object.assign({},D,{prefixCls:S("tooltip",Y??s),title:re?re(Le.value):"",value:Le.value,open:Je,placement:G(W??v,x),key:He,classNames:{root:`${ee}-tooltip`},getPopupContainer:X||f||B}),nt)}),_e=pe?(be,Le)=>{const He=ue.cloneElement(be,{style:Object.assign(Object.assign({},be.props.style),{visibility:"hidden"})});return ue.createElement(d1,Object.assign({},D,{prefixCls:S("tooltip",Y??s),title:re?re(Le.value):"",open:re!==null&&ie,placement:G(W??v,x),key:"tooltip",classNames:{root:`${ee}-tooltip`},getPopupContainer:X||f||B,draggingDelete:Le.draggingDelete}),He)}:void 0,$e=Object.assign(Object.assign(Object.assign(Object.assign({},M.root),$),p==null?void 0:p.root),a),Me=Object.assign(Object.assign({},M.tracks),p==null?void 0:p.tracks),Re=me(_.tracks,y==null?void 0:y.tracks);return te(ue.createElement(qj,Object.assign({},C,{classNames:Object.assign({handle:me(_.handle,y==null?void 0:y.handle),rail:me(_.rail,y==null?void 0:y.rail),track:me(_.track,y==null?void 0:y.track)},Re?{tracks:Re}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},M.handle),p==null?void 0:p.handle),rail:Object.assign(Object.assign({},M.rail),p==null?void 0:p.rail),track:Object.assign(Object.assign({},M.track),p==null?void 0:p.track)},Object.keys(Me).length?{tracks:Me}:{}),step:C.step,range:r,className:he,style:$e,disabled:k,ref:e,prefixCls:ee,handleRender:we,activeHandleRender:_e,onChangeComplete:F})))});var tz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const qE=t=>{const{prefixCls:e,colors:n,type:r,color:i,range:o=!1,className:a,activeIndex:l,onActive:s,onDragStart:u,onDragChange:c,onKeyDelete:f}=t,v=tz(t,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),g=Object.assign(Object.assign({},v),{track:!1}),m=b.useMemo(()=>`linear-gradient(90deg, ${n.map($=>`${$.color} ${$.percent}%`).join(", ")})`,[n]),y=b.useMemo(()=>!i||!r?null:r==="alpha"?i.toRgbString():`hsl(${i.toHsb().h}, 100%, 50%)`,[i,r]),p=In(u),C=In(c),x=b.useMemo(()=>({onDragStart:p,onDragChange:C}),[]),S=In((P,$)=>{const{onFocus:_,style:M,className:B,onKeyDown:H}=P.props,k=Object.assign({},M);return r==="gradient"&&(k.background=nE(n,$.value)),b.cloneElement(P,{onFocus:T=>{s==null||s($.index),_==null||_(T)},style:k,className:me(B,{[`${e}-slider-handle-active`]:l===$.index}),onKeyDown:T=>{(T.key==="Delete"||T.key==="Backspace")&&f&&f($.index),H==null||H(T)}})}),E=b.useMemo(()=>({direction:"ltr",handleRender:S}),[]);return b.createElement(WE.Provider,{value:E},b.createElement(VE.Provider,{value:x},b.createElement(ez,Object.assign({},g,{className:me(a,`${e}-slider`),tooltip:{open:!1},range:{editable:o,minCount:2},styles:{rail:{background:m},handle:y?{background:y}:{}},classNames:{rail:`${e}-slider-rail`,handle:`${e}-slider-handle`}}))))},nz=t=>{const{value:e,onChange:n,onChangeComplete:r}=t,i=a=>n(a[0]),o=a=>r(a[0]);return b.createElement(qE,Object.assign({},t,{value:[e],onChange:i,onChangeComplete:o}))};function f1(t){return Ae(t).sort((e,n)=>e.percent-n.percent)}const rz=t=>{const{prefixCls:e,mode:n,onChange:r,onChangeComplete:i,onActive:o,activeIndex:a,onGradientDragging:l,colors:s}=t,u=n==="gradient",c=b.useMemo(()=>s.map(C=>({percent:C.percent,color:C.color.toRgbString()})),[s]),f=b.useMemo(()=>c.map(C=>C.percent),[c]),v=b.useRef(c),g=({rawValues:C,draggingIndex:x,draggingValue:S})=>{if(C.length>c.length){const E=nE(c,S),P=Ae(c);P.splice(x,0,{percent:S,color:E}),v.current=P}else v.current=c;l(!0),r(new gi(f1(v.current)),!0)},m=({deleteIndex:C,draggingIndex:x,draggingValue:S})=>{let E=Ae(v.current);C!==-1?E.splice(C,1):(E[x]=Object.assign(Object.assign({},E[x]),{percent:S}),E=f1(E)),r(new gi(E),!0)},y=C=>{const x=Ae(c);x.splice(C,1);const S=new gi(x);r(S),i(S)},p=C=>{i(new gi(c)),a>=C.length&&o(C.length-1),l(!1)};return u?b.createElement(qE,{min:0,max:100,prefixCls:e,className:`${e}-gradient-slider`,colors:c,color:null,value:f,range:!0,onChangeComplete:p,disabled:!1,type:"gradient",activeIndex:a,onActive:o,onDragStart:g,onDragChange:m,onKeyDelete:y}):null},iz=b.memo(rz);var oz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const az={slider:nz},h1=()=>{const t=b.useContext(ME),{mode:e,onModeChange:n,modeOptions:r,prefixCls:i,allowClear:o,value:a,disabledAlpha:l,onChange:s,onClear:u,onChangeComplete:c,activeIndex:f,gradientDragging:v}=t,g=oz(t,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),m=ue.useMemo(()=>a.cleared?[{percent:0,color:new gi("")},{percent:100,color:new gi("")}]:a.getColors(),[a]),y=!a.isGradient(),[p,C]=ue.useState(a);$n(()=>{var L;y||C((L=m[f])===null||L===void 0?void 0:L.color)},[v,f]);const x=ue.useMemo(()=>{var L;return y?a:v?p:(L=m[f])===null||L===void 0?void 0:L.color},[a,f,y,p,v]),[S,E]=ue.useState(x),[P,$]=ue.useState(0),_=S!=null&&S.equals(x)?x:S;$n(()=>{E(x)},[P,x==null?void 0:x.toHexString()]);const M=(L,K)=>{let q=Lr(L);if(a.cleared){const V=q.toRgb();if(!V.r&&!V.g&&!V.b&&K){const{type:z,value:D=0}=K;q=new gi({h:z==="hue"?D:0,s:1,b:1,a:z==="alpha"?D/100:1})}else q=Hd(q)}if(e==="single")return q;const J=Ae(m);return J[f]=Object.assign(Object.assign({},J[f]),{color:q}),new gi(J)},B=(L,K,q)=>{const J=M(L,q);E(J.isGradient()?J.getColors()[f].color:J),s(J,K)},H=(L,K)=>{c(M(L,K)),$(q=>q+1)},k=L=>{s(M(L))};let T=null;const O=r.length>1;return(o||O)&&(T=ue.createElement("div",{className:`${i}-operation`},O&&ue.createElement(rj,{size:"small",options:r,value:e,onChange:n}),ue.createElement(LE,Object.assign({prefixCls:i,value:a,onChange:L=>{s(L),u==null||u()}},g)))),ue.createElement(ue.Fragment,null,T,ue.createElement(iz,Object.assign({},t,{colors:m})),ue.createElement(OF,{prefixCls:i,value:_==null?void 0:_.toHsb(),disabledAlpha:l,onChange:(L,K)=>{B(L,!0,K)},onChangeComplete:(L,K)=>{H(L,K)},components:az}),ue.createElement(Oj,Object.assign({value:x,onChange:k,prefixCls:i,disabledAlpha:l},g)))},v1=()=>{const{prefixCls:t,value:e,presets:n,onChange:r}=b.useContext(NE);return Array.isArray(n)?ue.createElement(NF,{value:e,presets:n,prefixCls:t,onChange:r}):null},sz=t=>{const{prefixCls:e,presets:n,panelRender:r,value:i,onChange:o,onClear:a,allowClear:l,disabledAlpha:s,mode:u,onModeChange:c,modeOptions:f,onChangeComplete:v,activeIndex:g,onActive:m,format:y,onFormatChange:p,gradientDragging:C,onGradientDragging:x,disabledFormat:S}=t,E=`${e}-inner`,P=ue.useMemo(()=>({prefixCls:e,value:i,onChange:o,onClear:a,allowClear:l,disabledAlpha:s,mode:u,onModeChange:c,modeOptions:f,onChangeComplete:v,activeIndex:g,onActive:m,format:y,onFormatChange:p,gradientDragging:C,onGradientDragging:x,disabledFormat:S}),[e,i,o,a,l,s,u,c,f,v,g,m,y,p,C,x,S]),$=ue.useMemo(()=>({prefixCls:e,value:i,presets:n,onChange:o}),[e,i,n,o]),_=ue.createElement("div",{className:`${E}-content`},ue.createElement(h1,null),Array.isArray(n)&&ue.createElement(VB,null),ue.createElement(v1,null));return ue.createElement(ME.Provider,{value:P},ue.createElement(NE.Provider,{value:$},ue.createElement("div",{className:E},typeof r=="function"?r(_,{components:{Picker:h1,Presets:v1}}):_)))};var lz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const cz=b.forwardRef((t,e)=>{const{color:n,prefixCls:r,open:i,disabled:o,format:a,className:l,showText:s,activeIndex:u}=t,c=lz(t,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),f=`${r}-trigger`,v=`${f}-text`,g=`${v}-cell`,[m]=es("ColorPicker"),y=ue.useMemo(()=>{if(!s)return"";if(typeof s=="function")return s(n);if(n.cleared)return m.transparent;if(n.isGradient())return n.getColors().map((S,E)=>{const P=u!==-1&&u!==E;return ue.createElement("span",{key:E,className:me(g,P&&`${g}-inactive`)},S.color.toRgbString()," ",S.percent,"%")});const C=n.toHexString().toUpperCase(),x=xp(n);switch(a){case"rgb":return n.toRgbString();case"hsb":return n.toHsbString();default:return x<100?`${C.slice(0,7)},${x}%`:C}},[n,a,s,u]),p=b.useMemo(()=>n.cleared?ue.createElement(LE,{prefixCls:r}):ue.createElement(wp,{prefixCls:r,color:n.toCssString()}),[n,r]);return ue.createElement("div",Object.assign({ref:e,className:me(f,l,{[`${f}-active`]:i,[`${f}-disabled`]:o})},Lo(c)),p,s&&ue.createElement("div",{className:v},y))});function uz(t,e,n){const[r]=es("ColorPicker"),[i,o]=Mn(t,{value:e}),[a,l]=b.useState("single"),[s,u]=b.useMemo(()=>{const y=(Array.isArray(n)?n:[n]).filter(S=>S);y.length||y.push("single");const p=new Set(y),C=[],x=(S,E)=>{p.has(S)&&C.push({label:E,value:S})};return x("single",r.singleColor),x("gradient",r.gradientColor),[C,p]},[n]),[c,f]=b.useState(null),v=In(y=>{f(y),o(y)}),g=b.useMemo(()=>{const y=Lr(i||"");return y.equals(c)?c:y},[i,c]),m=b.useMemo(()=>{var y;return u.has(a)?a:(y=s[0])===null||y===void 0?void 0:y.value},[u,a,s]);return b.useEffect(()=>{l(g.isGradient()?"gradient":"single")},[g]),[g,v,m,l,s]}const KE=(t,e)=>({backgroundImage:`conic-gradient(${e} 25%, transparent 25% 50%, ${e} 50% 75%, transparent 75% 100%)`,backgroundSize:`${t} ${t}`}),g1=(t,e)=>{const{componentCls:n,borderRadiusSM:r,colorPickerInsetShadow:i,lineWidth:o,colorFillSecondary:a}=t;return{[`${n}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:r,width:e,height:e,boxShadow:i,flex:"none"},KE("50%",t.colorFillSecondary)),{[`${n}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${ye(o)} ${a}`,borderRadius:"inherit"}})}},dz=t=>{const{componentCls:e,antCls:n,fontSizeSM:r,lineHeightSM:i,colorPickerAlphaInputWidth:o,marginXXS:a,paddingXXS:l,controlHeightSM:s,marginXS:u,fontSizeIcon:c,paddingXS:f,colorTextPlaceholder:v,colorPickerInputNumberHandleWidth:g,lineWidth:m}=t;return{[`${e}-input-container`]:{display:"flex",[`${e}-steppers${n}-input-number`]:{fontSize:r,lineHeight:i,[`${n}-input-number-input`]:{paddingInlineStart:l,paddingInlineEnd:0},[`${n}-input-number-handler-wrap`]:{width:g}},[`${e}-steppers${e}-alpha-input`]:{flex:`0 0 ${ye(o)}`,marginInlineStart:a},[`${e}-format-select${n}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${n}-select-selector`]:{padding:0,border:0},[`${n}-select-arrow`]:{insetInlineEnd:0},[`${n}-select-selection-item`]:{paddingInlineEnd:t.calc(c).add(a).equal(),fontSize:r,lineHeight:ye(s)},[`${n}-select-item-option-content`]:{fontSize:r,lineHeight:i},[`${n}-select-dropdown`]:{[`${n}-select-item`]:{minHeight:"auto"}}}},[`${e}-input`]:{gap:a,alignItems:"center",flex:1,width:0,[`${e}-hsb-input,${e}-rgb-input`]:{display:"flex",gap:a,alignItems:"center"},[`${e}-steppers`]:{flex:1},[`${e}-hex-input${n}-input-affix-wrapper`]:{flex:1,padding:`0 ${ye(f)}`,[`${n}-input`]:{fontSize:r,textTransform:"uppercase",lineHeight:ye(t.calc(s).sub(t.calc(m).mul(2)).equal())},[`${n}-input-prefix`]:{color:v}}}}}},fz=t=>{const{componentCls:e,controlHeightLG:n,borderRadiusSM:r,colorPickerInsetShadow:i,marginSM:o,colorBgElevated:a,colorFillSecondary:l,lineWidthBold:s,colorPickerHandlerSize:u}=t;return{userSelect:"none",[`${e}-select`]:{[`${e}-palette`]:{minHeight:t.calc(n).mul(4).equal(),overflow:"hidden",borderRadius:r},[`${e}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:i,inset:0},marginBottom:o},[`${e}-handler`]:{width:u,height:u,border:`${ye(s)} solid ${a}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${i}, 0 0 0 1px ${l}`}}},hz=t=>{const{componentCls:e,antCls:n,colorTextQuaternary:r,paddingXXS:i,colorPickerPresetColorSize:o,fontSizeSM:a,colorText:l,lineHeightSM:s,lineWidth:u,borderRadius:c,colorFill:f,colorWhite:v,marginXXS:g,paddingXS:m,fontHeightSM:y}=t;return{[`${e}-presets`]:{[`${n}-collapse-item > ${n}-collapse-header`]:{padding:0,[`${n}-collapse-expand-icon`]:{height:y,color:r,paddingInlineEnd:i}},[`${n}-collapse`]:{display:"flex",flexDirection:"column",gap:g},[`${n}-collapse-item > ${n}-collapse-content > ${n}-collapse-content-box`]:{padding:`${ye(m)} 0`},"&-label":{fontSize:a,color:l,lineHeight:s},"&-items":{display:"flex",flexWrap:"wrap",gap:t.calc(g).mul(1.5).equal(),[`${e}-presets-color`]:{position:"relative",cursor:"pointer",width:o,height:o,"&::before":{content:'""',pointerEvents:"none",width:t.calc(o).add(t.calc(u).mul(4)).equal(),height:t.calc(o).add(t.calc(u).mul(4)).equal(),position:"absolute",top:t.calc(u).mul(-2).equal(),insetInlineStart:t.calc(u).mul(-2).equal(),borderRadius:c,border:`${ye(u)} solid transparent`,transition:`border-color ${t.motionDurationMid} ${t.motionEaseInBack}`},"&:hover::before":{borderColor:f},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:t.calc(o).div(13).mul(5).equal(),height:t.calc(o).div(13).mul(8).equal(),border:`${ye(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`},[`&${e}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:v,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`},[`&${e}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:a,color:r}}}},vz=t=>{const{componentCls:e,colorPickerInsetShadow:n,colorBgElevated:r,colorFillSecondary:i,lineWidthBold:o,colorPickerHandlerSizeSM:a,colorPickerSliderHeight:l,marginSM:s,marginXS:u}=t,c=t.calc(a).sub(t.calc(o).mul(2).equal()).equal(),f=t.calc(a).add(t.calc(o).mul(2).equal()).equal(),v={"&:after":{transform:"scale(1)",boxShadow:`${n}, 0 0 0 1px ${t.colorPrimaryActive}`}};return{[`${e}-slider`]:[KE(ye(l),t.colorFillSecondary),{margin:0,padding:0,height:l,borderRadius:t.calc(l).div(2).equal(),"&-rail":{height:l,borderRadius:t.calc(l).div(2).equal(),boxShadow:n},[`& ${e}-slider-handle`]:{width:c,height:c,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:f,height:f,borderRadius:"100%"},"&:after":{width:a,height:a,border:`${ye(o)} solid ${r}`,boxShadow:`${n}, 0 0 0 1px ${i}`,outline:"none",insetInlineStart:t.calc(o).mul(-1).equal(),top:t.calc(o).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":v}}],[`${e}-slider-container`]:{display:"flex",gap:s,marginBottom:s,[`${e}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${e}-gradient-slider`]:{marginBottom:u,[`& ${e}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":v}}}},_m=(t,e,n)=>({borderInlineEndWidth:t.lineWidth,borderColor:e,boxShadow:`0 0 0 ${ye(t.controlOutlineWidth)} ${n}`,outline:0}),gz=t=>{const{componentCls:e}=t;return{"&-rtl":{[`${e}-presets-color`]:{"&::after":{direction:"ltr"}},[`${e}-clear`]:{"&::after":{direction:"ltr"}}}}},m1=(t,e,n)=>{const{componentCls:r,borderRadiusSM:i,lineWidth:o,colorSplit:a,colorBorder:l,red6:s}=t;return{[`${r}-clear`]:Object.assign(Object.assign({width:e,height:e,borderRadius:i,border:`${ye(o)} solid ${a}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${t.motionDurationFast}`},n),{"&::after":{content:'""',position:"absolute",insetInlineEnd:t.calc(o).mul(-1).equal(),top:t.calc(o).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:s},"&:hover":{borderColor:l}})}},mz=t=>{const{componentCls:e,colorError:n,colorWarning:r,colorErrorHover:i,colorWarningHover:o,colorErrorOutline:a,colorWarningOutline:l}=t;return{[`&${e}-status-error`]:{borderColor:n,"&:hover":{borderColor:i},[`&${e}-trigger-active`]:Object.assign({},_m(t,n,a))},[`&${e}-status-warning`]:{borderColor:r,"&:hover":{borderColor:o},[`&${e}-trigger-active`]:Object.assign({},_m(t,r,l))}}},pz=t=>{const{componentCls:e,controlHeightLG:n,controlHeightSM:r,controlHeight:i,controlHeightXS:o,borderRadius:a,borderRadiusSM:l,borderRadiusXS:s,borderRadiusLG:u,fontSizeLG:c}=t;return{[`&${e}-lg`]:{minWidth:n,minHeight:n,borderRadius:u,[`${e}-color-block, ${e}-clear`]:{width:i,height:i,borderRadius:a},[`${e}-trigger-text`]:{fontSize:c}},[`&${e}-sm`]:{minWidth:r,minHeight:r,borderRadius:l,[`${e}-color-block, ${e}-clear`]:{width:o,height:o,borderRadius:s},[`${e}-trigger-text`]:{lineHeight:ye(o)}}}},yz=t=>{const{antCls:e,componentCls:n,colorPickerWidth:r,colorPrimary:i,motionDurationMid:o,colorBgElevated:a,colorTextDisabled:l,colorText:s,colorBgContainerDisabled:u,borderRadius:c,marginXS:f,marginSM:v,controlHeight:g,controlHeightSM:m,colorBgTextActive:y,colorPickerPresetColorSize:p,colorPickerPreviewSize:C,lineWidth:x,colorBorder:S,paddingXXS:E,fontSize:P,colorPrimaryHover:$,controlOutline:_}=t;return[{[n]:Object.assign({[`${n}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:r,[`& > ${e}-divider`]:{margin:`${ye(v)} 0 ${ye(f)}`}},[`${n}-panel`]:Object.assign({},fz(t))},vz(t)),g1(t,C)),dz(t)),hz(t)),m1(t,p,{marginInlineStart:"auto"})),{[`${n}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:f}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:g,minHeight:g,borderRadius:c,border:`${ye(x)} solid ${S}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${o}`,background:a,padding:t.calc(E).sub(x).equal(),[`${n}-trigger-text`]:{marginInlineStart:f,marginInlineEnd:t.calc(f).sub(t.calc(E).sub(x)).equal(),fontSize:P,color:s,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:l}}},"&:hover":{borderColor:$},[`&${n}-trigger-active`]:Object.assign({},_m(t,i,_)),"&-disabled":{color:l,background:u,cursor:"not-allowed","&:hover":{borderColor:y},[`${n}-trigger-text`]:{color:l}}},m1(t,m)),g1(t,m)),mz(t)),pz(t))},gz(t))},Xc(t,{focusElCls:`${n}-trigger-active`})]},bz=lr("ColorPicker",t=>{const{colorTextQuaternary:e,marginSM:n}=t,r=8,i=bn(t,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${e}`,colorPickerSliderHeight:r,colorPickerPreviewSize:t.calc(r).mul(2).add(n).equal()});return[yz(i)]});var wz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ff=t=>{const{mode:e,value:n,defaultValue:r,format:i,defaultFormat:o,allowClear:a=!1,presets:l,children:s,trigger:u="click",open:c,disabled:f,placement:v="bottomLeft",arrow:g=!0,panelRender:m,showText:y,style:p,className:C,size:x,rootClassName:S,prefixCls:E,styles:P,disabledAlpha:$=!1,onFormatChange:_,onChange:M,onClear:B,onOpenChange:H,onChangeComplete:k,getPopupContainer:T,autoAdjustOverflow:O=!0,destroyTooltipOnHide:L,destroyOnHidden:K,disabledFormat:q}=t,J=wz(t,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","destroyOnHidden","disabledFormat"]),{getPrefixCls:V,direction:z,colorPicker:D}=b.useContext(un),U=b.useContext(pi),W=f??U,[X,Y]=Mn(!1,{value:c,postState:ke=>!W&&ke,onChange:H}),[Q,ne]=Mn(i,{value:i,defaultValue:o,onChange:_}),ie=V("color-picker",E),[re,I,A,F,G]=uz(r,n,e),ee=b.useMemo(()=>xp(re)<100,[re]),[te,ae]=ue.useState(null),de=ke=>{if(k){let et=Lr(ke);$&&ee&&(et=Hd(ke)),k(et)}},he=(ke,et)=>{let St=Lr(ke);$&&ee&&(St=Hd(St)),I(St),ae(null),M&&M(St,St.toCssString()),et||de(St)},[pe,we]=ue.useState(0),[_e,$e]=ue.useState(!1),Me=ke=>{if(F(ke),ke==="single"&&re.isGradient())we(0),he(new gi(re.getColors()[0].color)),ae(re);else if(ke==="gradient"&&!re.isGradient()){const et=ee?Hd(re):re;he(new gi(te||[{percent:0,color:et},{percent:100,color:et}]))}},{status:Re}=ue.useContext(Yi),{compactSize:be,compactItemClassnames:Le}=rs(ie,z),He=bi(ke=>{var et;return(et=x??be)!==null&&et!==void 0?et:ke}),it=ma(ie),[qe,De,nt]=bz(ie,it),Je={[`${ie}-rtl`]:z},st=me(S,nt,it,Je),Ve=me(Ja(ie,Re),{[`${ie}-sm`]:He==="small",[`${ie}-lg`]:He==="large"},Le,D==null?void 0:D.className,st,C,De),Ie=me(ie,st),Te={open:X,trigger:u,placement:v,arrow:g,rootClassName:S,getPopupContainer:T,autoAdjustOverflow:O,destroyOnHidden:K??!!L},je=Object.assign(Object.assign({},D==null?void 0:D.style),p);return qe(ue.createElement(OE,Object.assign({style:P==null?void 0:P.popup,styles:{body:P==null?void 0:P.popupOverlayInner},onOpenChange:ke=>{(!ke||!W)&&Y(ke)},content:ue.createElement(yl,{form:!0},ue.createElement(sz,{mode:A,onModeChange:Me,modeOptions:G,prefixCls:ie,value:re,allowClear:a,disabled:W,disabledAlpha:$,presets:l,panelRender:m,format:Q,onFormatChange:ne,onChange:he,onChangeComplete:de,onClear:B,activeIndex:pe,onActive:we,gradientDragging:_e,onGradientDragging:$e,disabledFormat:q})),classNames:{root:Ie}},Te),s||ue.createElement(cz,Object.assign({activeIndex:X?pe:-1,open:X,className:Ve,style:je,prefixCls:ie,disabled:W,showText:y,format:Q},J,{color:re}))))},xz=pE(ff,void 0,t=>Object.assign(Object.assign({},t),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",t=>t);ff._InternalPanelDoNotUseOrYouWillBeFired=xz;const vg=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=t.type||"",o=i.replace(/\/.*$/,"");return n.some(function(a){var l=a.trim();if(/^\*(\/\*)?$/.test(a))return!0;if(l.charAt(0)==="."){var s=r.toLowerCase(),u=l.toLowerCase(),c=[u];return(u===".jpg"||u===".jpeg")&&(c=[".jpg",".jpeg"]),c.some(function(f){return s.endsWith(f)})}return/\/\*$/.test(l)?o===l.replace(/\/.*$/,""):i===l?!0:/^\w+$/.test(l)?(rr(!1,"Upload takes an invalidate 'accept' type '".concat(l,"'.Skip for check.")),!0):!1})}return!0};function Cz(t,e){var n="cannot ".concat(t.method," ").concat(t.action," ").concat(e.status,"'"),r=new Error(n);return r.status=e.status,r.method=t.method,r.url=t.action,r}function p1(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}function Sz(t){var e=new XMLHttpRequest;t.onProgress&&e.upload&&(e.upload.onprogress=function(o){o.total>0&&(o.percent=o.loaded/o.total*100),t.onProgress(o)});var n=new FormData;t.data&&Object.keys(t.data).forEach(function(i){var o=t.data[i];if(Array.isArray(o)){o.forEach(function(a){n.append("".concat(i,"[]"),a)});return}n.append(i,o)}),t.file instanceof Blob?n.append(t.filename,t.file,t.file.name):n.append(t.filename,t.file),e.onerror=function(o){t.onError(o)},e.onload=function(){return e.status<200||e.status>=300?t.onError(Cz(t,e),p1(e)):t.onSuccess(p1(e),e)},e.open(t.method,t.action,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var r=t.headers||{};return r["X-Requested-With"]!==null&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach(function(i){r[i]!==null&&e.setRequestHeader(i,r[i])}),e.send(n),{abort:function(){e.abort()}}}var Ez=function(){var t=Br(pn().mark(function e(n,r){var i,o,a,l,s,u,c,f;return pn().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u=function(){return u=Br(pn().mark(function y(p){return pn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",new Promise(function(S){p.file(function(E){r(E)?(p.fullPath&&!E.webkitRelativePath&&(Object.defineProperties(E,{webkitRelativePath:{writable:!0}}),E.webkitRelativePath=p.fullPath.replace(/^\//,""),Object.defineProperties(E,{webkitRelativePath:{writable:!1}})),S(E)):S(null)})}));case 1:case"end":return x.stop()}},y)})),u.apply(this,arguments)},s=function(y){return u.apply(this,arguments)},l=function(){return l=Br(pn().mark(function y(p){var C,x,S,E,P;return pn().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:C=p.createReader(),x=[];case 2:return _.next=5,new Promise(function(M){C.readEntries(M,function(){return M([])})});case 5:if(S=_.sent,E=S.length,E){_.next=9;break}return _.abrupt("break",12);case 9:for(P=0;P<E;P++)x.push(S[P]);_.next=2;break;case 12:return _.abrupt("return",x);case 13:case"end":return _.stop()}},y)})),l.apply(this,arguments)},a=function(y){return l.apply(this,arguments)},i=[],o=[],n.forEach(function(m){return o.push(m.webkitGetAsEntry())}),c=function(){var m=Br(pn().mark(function y(p,C){var x,S;return pn().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(p){P.next=2;break}return P.abrupt("return");case 2:if(p.path=C||"",!p.isFile){P.next=10;break}return P.next=6,s(p);case 6:x=P.sent,x&&i.push(x),P.next=15;break;case 10:if(!p.isDirectory){P.next=15;break}return P.next=13,a(p);case 13:S=P.sent,o.push.apply(o,Ae(S));case 15:case"end":return P.stop()}},y)}));return function(p,C){return m.apply(this,arguments)}}(),f=0;case 9:if(!(f<o.length)){g.next=15;break}return g.next=12,c(o[f]);case 12:f++,g.next=9;break;case 15:return g.abrupt("return",i);case 16:case"end":return g.stop()}},e)}));return function(n,r){return t.apply(this,arguments)}}(),Rz=+new Date,Iz=0;function gg(){return"rc-upload-".concat(Rz,"-").concat(++Iz)}var Pz=["component","prefixCls","className","classNames","disabled","id","name","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],kz=function(t){Ji(n,t);var e=Zi(n);function n(){var r;Hn(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),oe(At(r),"state",{uid:gg()}),oe(At(r),"reqs",{}),oe(At(r),"fileInput",void 0),oe(At(r),"_isMounted",void 0),oe(At(r),"onChange",function(l){var s=r.props,u=s.accept,c=s.directory,f=l.target.files,v=Ae(f).filter(function(g){return!c||vg(g,u)});r.uploadFiles(v),r.reset()}),oe(At(r),"onClick",function(l){var s=r.fileInput;if(s){var u=l.target,c=r.props.onClick;if(u&&u.tagName==="BUTTON"){var f=s.parentNode;f.focus(),u.blur()}s.click(),c&&c(l)}}),oe(At(r),"onKeyDown",function(l){l.key==="Enter"&&r.onClick(l)}),oe(At(r),"onDataTransferFiles",function(){var l=Br(pn().mark(function s(u,c){var f,v,g,m,y,p,C;return pn().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(f=r.props,v=f.multiple,g=f.accept,m=f.directory,y=Ae(u.items||[]),p=Ae(u.files||[]),(p.length>0||y.some(function(E){return E.kind==="file"}))&&(c==null||c()),!m){S.next=11;break}return S.next=7,Ez(Array.prototype.slice.call(y),function(E){return vg(E,r.props.accept)});case 7:p=S.sent,r.uploadFiles(p),S.next=14;break;case 11:C=Ae(p).filter(function(E){return vg(E,g)}),v===!1&&(C=p.slice(0,1)),r.uploadFiles(C);case 14:case"end":return S.stop()}},s)}));return function(s,u){return l.apply(this,arguments)}}()),oe(At(r),"onFilePaste",function(){var l=Br(pn().mark(function s(u){var c,f;return pn().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(c=r.props.pastable,c){g.next=3;break}return g.abrupt("return");case 3:if(u.type!=="paste"){g.next=6;break}return f=u.clipboardData,g.abrupt("return",r.onDataTransferFiles(f,function(){u.preventDefault()}));case 6:case"end":return g.stop()}},s)}));return function(s){return l.apply(this,arguments)}}()),oe(At(r),"onFileDragOver",function(l){l.preventDefault()}),oe(At(r),"onFileDrop",function(){var l=Br(pn().mark(function s(u){var c;return pn().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(u.preventDefault(),u.type!=="drop"){v.next=4;break}return c=u.dataTransfer,v.abrupt("return",r.onDataTransferFiles(c));case 4:case"end":return v.stop()}},s)}));return function(s){return l.apply(this,arguments)}}()),oe(At(r),"uploadFiles",function(l){var s=Ae(l),u=s.map(function(c){return c.uid=gg(),r.processFile(c,s)});Promise.all(u).then(function(c){var f=r.props.onBatchStart;f==null||f(c.map(function(v){var g=v.origin,m=v.parsedFile;return{file:g,parsedFile:m}})),c.filter(function(v){return v.parsedFile!==null}).forEach(function(v){r.post(v)})})}),oe(At(r),"processFile",function(){var l=Br(pn().mark(function s(u,c){var f,v,g,m,y,p,C,x,S;return pn().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(f=r.props.beforeUpload,v=u,!f){P.next=14;break}return P.prev=3,P.next=6,f(u,c);case 6:v=P.sent,P.next=12;break;case 9:P.prev=9,P.t0=P.catch(3),v=!1;case 12:if(v!==!1){P.next=14;break}return P.abrupt("return",{origin:u,parsedFile:null,action:null,data:null});case 14:if(g=r.props.action,typeof g!="function"){P.next=21;break}return P.next=18,g(u);case 18:m=P.sent,P.next=22;break;case 21:m=g;case 22:if(y=r.props.data,typeof y!="function"){P.next=29;break}return P.next=26,y(u);case 26:p=P.sent,P.next=30;break;case 29:p=y;case 30:return C=(ht(v)==="object"||typeof v=="string")&&v?v:u,C instanceof File?x=C:x=new File([C],u.name,{type:u.type}),S=x,S.uid=u.uid,P.abrupt("return",{origin:u,data:p,parsedFile:S,action:m});case 35:case"end":return P.stop()}},s,null,[[3,9]])}));return function(s,u){return l.apply(this,arguments)}}()),oe(At(r),"saveFileInput",function(l){r.fileInput=l}),r}return Vn(n,[{key:"componentDidMount",value:function(){this._isMounted=!0;var i=this.props.pastable;i&&document.addEventListener("paste",this.onFilePaste)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onFilePaste)}},{key:"componentDidUpdate",value:function(i){var o=this.props.pastable;o&&!i.pastable?document.addEventListener("paste",this.onFilePaste):!o&&i.pastable&&document.removeEventListener("paste",this.onFilePaste)}},{key:"post",value:function(i){var o=this,a=i.data,l=i.origin,s=i.action,u=i.parsedFile;if(this._isMounted){var c=this.props,f=c.onStart,v=c.customRequest,g=c.name,m=c.headers,y=c.withCredentials,p=c.method,C=l.uid,x=v||Sz,S={action:s,filename:g,data:a,file:u,headers:m,withCredentials:y,method:p||"post",onProgress:function(P){var $=o.props.onProgress;$==null||$(P,u)},onSuccess:function(P,$){var _=o.props.onSuccess;_==null||_(P,u,$),delete o.reqs[C]},onError:function(P,$){var _=o.props.onError;_==null||_(P,$,u),delete o.reqs[C]}};f(l),this.reqs[C]=x(S)}}},{key:"reset",value:function(){this.setState({uid:gg()})}},{key:"abort",value:function(i){var o=this.reqs;if(i){var a=i.uid?i.uid:i;o[a]&&o[a].abort&&o[a].abort(),delete o[a]}else Object.keys(o).forEach(function(l){o[l]&&o[l].abort&&o[l].abort(),delete o[l]})}},{key:"render",value:function(){var i=this.props,o=i.component,a=i.prefixCls,l=i.className,s=i.classNames,u=s===void 0?{}:s,c=i.disabled,f=i.id,v=i.name,g=i.style,m=i.styles,y=m===void 0?{}:m,p=i.multiple,C=i.accept,x=i.capture,S=i.children,E=i.directory,P=i.openFileDialogOnClick,$=i.onMouseEnter,_=i.onMouseLeave,M=i.hasControlInside,B=_t(i,Pz),H=me(oe(oe(oe({},a,!0),"".concat(a,"-disabled"),c),l,l)),k=E?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},T=c?{}:{onClick:P?this.onClick:function(){},onKeyDown:P?this.onKeyDown:function(){},onMouseEnter:$,onMouseLeave:_,onDrop:this.onFileDrop,onDragOver:this.onFileDragOver,tabIndex:M?void 0:"0"};return ue.createElement(o,Ne({},T,{className:H,role:M?void 0:"button",style:g}),ue.createElement("input",Ne({},Lo(B,{aria:!0,data:!0}),{id:f,name:v,disabled:c,type:"file",ref:this.saveFileInput,onClick:function(L){return L.stopPropagation()},key:this.state.uid,style:le({display:"none"},y.input),className:u.input,accept:C},k,{multiple:p,onChange:this.onChange},x!=null?{capture:x}:{})),S)}}]),n}(b.Component);function mg(){}var Am=function(t){Ji(n,t);var e=Zi(n);function n(){var r;Hn(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),oe(At(r),"uploader",void 0),oe(At(r),"saveUploader",function(l){r.uploader=l}),r}return Vn(n,[{key:"abort",value:function(i){this.uploader.abort(i)}},{key:"render",value:function(){return ue.createElement(kz,Ne({},this.props,{ref:this.saveUploader}))}}]),n}(b.Component);oe(Am,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:mg,onError:mg,onSuccess:mg,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});const $z=t=>{const{componentCls:e,iconCls:n}=t;return{[`${e}-wrapper`]:{[`${e}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:t.colorFillAlter,border:`${ye(t.lineWidth)} dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[e]:{padding:t.padding},[`${e}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:t.borderRadiusLG,"&:focus-visible":{outline:`${ye(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`}},[`${e}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${e}-disabled):hover,
          &-hover:not(${e}-disabled)
        `]:{borderColor:t.colorPrimaryHover},[`p${e}-drag-icon`]:{marginBottom:t.margin,[n]:{color:t.colorPrimary,fontSize:t.uploadThumbnailSize}},[`p${e}-text`]:{margin:`0 0 ${ye(t.marginXXS)}`,color:t.colorTextHeading,fontSize:t.fontSizeLG},[`p${e}-hint`]:{color:t.colorTextDescription,fontSize:t.fontSize},[`&${e}-disabled`]:{[`p${e}-drag-icon ${n},
            p${e}-text,
            p${e}-hint
          `]:{color:t.colorTextDisabled}}}}}},Tz=t=>{const{componentCls:e,iconCls:n,fontSize:r,lineHeight:i,calc:o}=t,a=`${e}-list-item`,l=`${a}-actions`,s=`${a}-action`;return{[`${e}-wrapper`]:{[`${e}-list`]:Object.assign(Object.assign({},ep()),{lineHeight:t.lineHeight,[a]:{position:"relative",height:o(t.lineHeight).mul(r).equal(),marginTop:t.marginXS,fontSize:r,display:"flex",alignItems:"center",transition:`background-color ${t.motionDurationSlow}`,borderRadius:t.borderRadiusSM,"&:hover":{backgroundColor:t.controlItemBgHover},[`${a}-name`]:Object.assign(Object.assign({},Xa),{padding:`0 ${ye(t.paddingXS)}`,lineHeight:i,flex:"auto",transition:`all ${t.motionDurationSlow}`}),[l]:{whiteSpace:"nowrap",[s]:{opacity:0},[n]:{color:t.actionsColor,transition:`all ${t.motionDurationSlow}`},[`
              ${s}:focus-visible,
              &.picture ${s}
            `]:{opacity:1}},[`${e}-icon ${n}`]:{color:t.colorIcon,fontSize:r},[`${a}-progress`]:{position:"absolute",bottom:t.calc(t.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:o(r).add(t.paddingXS).equal(),fontSize:r,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${a}:hover ${s}`]:{opacity:1},[`${a}-error`]:{color:t.colorError,[`${a}-name, ${e}-icon ${n}`]:{color:t.colorError},[l]:{[`${n}, ${n}:hover`]:{color:t.colorError},[s]:{opacity:1}}},[`${e}-list-item-container`]:{transition:`opacity ${t.motionDurationSlow}, height ${t.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},_z=t=>{const{componentCls:e}=t,n=new cn("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:t.calc(t.marginXS).div(-2).equal()}}),r=new cn("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:t.calc(t.marginXS).div(-2).equal()}}),i=`${e}-animate-inline`;return[{[`${e}-wrapper`]:{[`${i}-appear, ${i}-enter, ${i}-leave`]:{animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseInOutCirc,animationFillMode:"forwards"},[`${i}-appear, ${i}-enter`]:{animationName:n},[`${i}-leave`]:{animationName:r}}},{[`${e}-wrapper`]:lN(t)},n,r]},Az=t=>{const{componentCls:e,iconCls:n,uploadThumbnailSize:r,uploadProgressOffset:i,calc:o}=t,a=`${e}-list`,l=`${a}-item`;return{[`${e}-wrapper`]:{[`
        ${a}${a}-picture,
        ${a}${a}-picture-card,
        ${a}${a}-picture-circle
      `]:{[l]:{position:"relative",height:o(r).add(o(t.lineWidth).mul(2)).add(o(t.paddingXS).mul(2)).equal(),padding:t.paddingXS,border:`${ye(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusLG,"&:hover":{background:"transparent"},[`${l}-thumbnail`]:Object.assign(Object.assign({},Xa),{width:r,height:r,lineHeight:ye(o(r).add(t.paddingSM).equal()),textAlign:"center",flex:"none",[n]:{fontSize:t.fontSizeHeading2,color:t.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${l}-progress`]:{bottom:i,width:`calc(100% - ${ye(o(t.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:o(r).add(t.paddingXS).equal()}},[`${l}-error`]:{borderColor:t.colorError,[`${l}-thumbnail ${n}`]:{[`svg path[fill='${vl[0]}']`]:{fill:t.colorErrorBg},[`svg path[fill='${vl.primary}']`]:{fill:t.colorError}}},[`${l}-uploading`]:{borderStyle:"dashed",[`${l}-name`]:{marginBottom:i}}},[`${a}${a}-picture-circle ${l}`]:{[`&, &::before, ${l}-thumbnail`]:{borderRadius:"50%"}}}}},Oz=t=>{const{componentCls:e,iconCls:n,fontSizeLG:r,colorTextLightSolid:i,calc:o}=t,a=`${e}-list`,l=`${a}-item`,s=t.uploadPicCardSize;return{[`
      ${e}-wrapper${e}-picture-card-wrapper,
      ${e}-wrapper${e}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},ep()),{display:"block",[`${e}${e}-select`]:{width:s,height:s,textAlign:"center",verticalAlign:"top",backgroundColor:t.colorFillAlter,border:`${ye(t.lineWidth)} dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[`> ${e}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${e}-disabled):hover`]:{borderColor:t.colorPrimary}},[`${a}${a}-picture-card, ${a}${a}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:t.marginXS,marginInlineEnd:t.marginXS}},"@supports (gap: 1px)":{gap:t.marginXS},[`${a}-item-container`]:{display:"inline-block",width:s,height:s,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[l]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${ye(o(t.paddingXS).mul(2).equal())})`,height:`calc(100% - ${ye(o(t.paddingXS).mul(2).equal())})`,backgroundColor:t.colorBgMask,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'" "'}},[`${l}:hover`]:{[`&::before, ${l}-actions`]:{opacity:1}},[`${l}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${t.motionDurationSlow}`,[`
            ${n}-eye,
            ${n}-download,
            ${n}-delete
          `]:{zIndex:10,width:r,margin:`0 ${ye(t.marginXXS)}`,fontSize:r,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,color:i,"&:hover":{color:i},svg:{verticalAlign:"baseline"}}},[`${l}-thumbnail, ${l}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${l}-name`]:{display:"none",textAlign:"center"},[`${l}-file + ${l}-name`]:{position:"absolute",bottom:t.margin,display:"block",width:`calc(100% - ${ye(o(t.paddingXS).mul(2).equal())})`},[`${l}-uploading`]:{[`&${l}`]:{backgroundColor:t.colorFillAlter},[`&::before, ${n}-eye, ${n}-download, ${n}-delete`]:{display:"none"}},[`${l}-progress`]:{bottom:t.marginXL,width:`calc(100% - ${ye(o(t.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${e}-wrapper${e}-picture-circle-wrapper`]:{[`${e}${e}-select`]:{borderRadius:"50%"}}}},Mz=t=>{const{componentCls:e}=t;return{[`${e}-rtl`]:{direction:"rtl"}}},Nz=t=>{const{componentCls:e,colorTextDisabled:n}=t;return{[`${e}-wrapper`]:Object.assign(Object.assign({},sr(t)),{[e]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${e}-select`]:{display:"inline-block"},[`${e}-hidden`]:{display:"none"},[`${e}-disabled`]:{color:n,cursor:"not-allowed"}})}},Lz=t=>({actionsColor:t.colorIcon}),Dz=lr("Upload",t=>{const{fontSizeHeading3:e,fontHeight:n,lineWidth:r,controlHeightLG:i,calc:o}=t,a=bn(t,{uploadThumbnailSize:o(e).mul(2).equal(),uploadProgressOffset:o(o(n).div(2)).add(r).equal(),uploadPicCardSize:o(i).mul(2.55).equal()});return[Nz(a),$z(a),Az(a),Oz(a),Tz(a),_z(a),Mz(a),FS(a)]},Lz);var Fz={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:n}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},Bz=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:Fz}))},jz=b.forwardRef(Bz),zz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Hz=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:zz}))},Vz=b.forwardRef(Hz),Wz={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:n}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:n}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:n}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},Uz=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:Wz}))},qz=b.forwardRef(Uz);function Kz(){const[,t]=b.useReducer(e=>e+1,0);return t}function Sd(t){return Object.assign(Object.assign({},t),{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,uid:t.uid,percent:0,originFileObj:t})}function Ed(t,e){const n=Ae(e),r=n.findIndex(({uid:i})=>i===t.uid);return r===-1?n.push(t):n[r]=t,n}function pg(t,e){const n=t.uid!==void 0?"uid":"name";return e.filter(r=>r[n]===t[n])[0]}function Gz(t,e){const n=t.uid!==void 0?"uid":"name",r=e.filter(i=>i[n]!==t[n]);return r.length===e.length?null:r}const Xz=(t="")=>{const e=t.split("/"),r=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(r)||[""])[0]},GE=t=>t.indexOf("image/")===0,Yz=t=>{if(t.type&&!t.thumbUrl)return GE(t.type);const e=t.thumbUrl||t.url||"",n=Xz(e);return/^data:image\//.test(e)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n)?!0:!(/^data:/.test(e)||n)},ra=200;function Qz(t){return new Promise(e=>{if(!t.type||!GE(t.type)){e("");return}const n=document.createElement("canvas");n.width=ra,n.height=ra,n.style.cssText=`position: fixed; left: 0; top: 0; width: ${ra}px; height: ${ra}px; z-index: 9999; display: none;`,document.body.appendChild(n);const r=n.getContext("2d"),i=new Image;if(i.onload=()=>{const{width:o,height:a}=i;let l=ra,s=ra,u=0,c=0;o>a?(s=a*(ra/o),c=-(s-l)/2):(l=o*(ra/a),u=-(l-s)/2),r.drawImage(i,u,c,l,s);const f=n.toDataURL();document.body.removeChild(n),window.URL.revokeObjectURL(i.src),e(f)},i.crossOrigin="anonymous",t.type.startsWith("image/svg+xml")){const o=new FileReader;o.onload=()=>{o.result&&typeof o.result=="string"&&(i.src=o.result)},o.readAsDataURL(t)}else if(t.type.startsWith("image/gif")){const o=new FileReader;o.onload=()=>{o.result&&e(o.result)},o.readAsDataURL(t)}else i.src=window.URL.createObjectURL(t)})}var Jz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Zz=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:Jz}))},e8=b.forwardRef(Zz),t8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},n8=function(e,n){return b.createElement(Xn,Ne({},e,{ref:n,icon:t8}))},r8=b.forwardRef(n8),i8={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},o8=function(){var e=b.useRef([]),n=b.useRef(null);return b.useEffect(function(){var r=Date.now(),i=!1;e.current.forEach(function(o){if(o){i=!0;var a=o.style;a.transitionDuration=".3s, .3s, .3s, .06s",n.current&&r-n.current<100&&(a.transitionDuration="0s, 0s")}}),i&&(n.current=Date.now())}),e.current},y1=0,a8=jr();function s8(){var t;return a8?(t=y1,y1+=1):t="TEST_OR_SSR",t}const l8=function(t){var e=b.useState(),n=fe(e,2),r=n[0],i=n[1];return b.useEffect(function(){i("rc_progress_".concat(s8()))},[]),t||r};var b1=function(e){var n=e.bg,r=e.children;return b.createElement("div",{style:{width:"100%",height:"100%",background:n}},r)};function w1(t,e){return Object.keys(t).map(function(n){var r=parseFloat(n),i="".concat(Math.floor(r*e),"%");return"".concat(t[n]," ").concat(i)})}var c8=b.forwardRef(function(t,e){var n=t.prefixCls,r=t.color,i=t.gradientId,o=t.radius,a=t.style,l=t.ptg,s=t.strokeLinecap,u=t.strokeWidth,c=t.size,f=t.gapDegree,v=r&&ht(r)==="object",g=v?"#FFF":void 0,m=c/2,y=b.createElement("circle",{className:"".concat(n,"-circle-path"),r:o,cx:m,cy:m,stroke:g,strokeLinecap:s,strokeWidth:u,opacity:l===0?0:1,style:a,ref:e});if(!v)return y;var p="".concat(i,"-conic"),C=f?"".concat(180+f/2,"deg"):"0deg",x=w1(r,(360-f)/360),S=w1(r,1),E="conic-gradient(from ".concat(C,", ").concat(x.join(", "),")"),P="linear-gradient(to ".concat(f?"bottom":"top",", ").concat(S.join(", "),")");return b.createElement(b.Fragment,null,b.createElement("mask",{id:p},y),b.createElement("foreignObject",{x:0,y:0,width:c,height:c,mask:"url(#".concat(p,")")},b.createElement(b1,{bg:P},b.createElement(b1,{bg:E}))))}),hc=100,yg=function(e,n,r,i,o,a,l,s,u,c){var f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,v=r/100*360*((360-a)/360),g=a===0?0:{bottom:0,top:180,left:90,right:-90}[l],m=(100-i)/100*n;u==="round"&&i!==100&&(m+=c/2,m>=n&&(m=n-.01));var y=hc/2;return{stroke:typeof s=="string"?s:void 0,strokeDasharray:"".concat(n,"px ").concat(e),strokeDashoffset:m+f,transform:"rotate(".concat(o+v+g,"deg)"),transformOrigin:"".concat(y,"px ").concat(y,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},u8=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function x1(t){var e=t??[];return Array.isArray(e)?e:[e]}var d8=function(e){var n=le(le({},i8),e),r=n.id,i=n.prefixCls,o=n.steps,a=n.strokeWidth,l=n.trailWidth,s=n.gapDegree,u=s===void 0?0:s,c=n.gapPosition,f=n.trailColor,v=n.strokeLinecap,g=n.style,m=n.className,y=n.strokeColor,p=n.percent,C=_t(n,u8),x=hc/2,S=l8(r),E="".concat(S,"-gradient"),P=x-a/2,$=Math.PI*2*P,_=u>0?90+u/2:-90,M=$*((360-u)/360),B=ht(o)==="object"?o:{count:o,gap:2},H=B.count,k=B.gap,T=x1(p),O=x1(y),L=O.find(function(U){return U&&ht(U)==="object"}),K=L&&ht(L)==="object",q=K?"butt":v,J=yg($,M,0,100,_,u,c,f,q,a),V=o8(),z=function(){var W=0;return T.map(function(X,Y){var Q=O[Y]||O[O.length-1],ne=yg($,M,W,X,_,u,c,Q,q,a);return W+=X,b.createElement(c8,{key:Y,color:Q,ptg:X,radius:P,prefixCls:i,gradientId:E,style:ne,strokeLinecap:q,strokeWidth:a,gapDegree:u,ref:function(re){V[Y]=re},size:hc})}).reverse()},D=function(){var W=Math.round(H*(T[0]/100)),X=100/H,Y=0;return new Array(H).fill(null).map(function(Q,ne){var ie=ne<=W-1?O[0]:f,re=ie&&ht(ie)==="object"?"url(#".concat(E,")"):void 0,I=yg($,M,Y,X,_,u,c,ie,"butt",a,k);return Y+=(M-I.strokeDashoffset+k)*100/M,b.createElement("circle",{key:ne,className:"".concat(i,"-circle-path"),r:P,cx:x,cy:x,stroke:re,strokeWidth:a,opacity:1,style:I,ref:function(F){V[ne]=F}})})};return b.createElement("svg",Ne({className:me("".concat(i,"-circle"),m),viewBox:"0 0 ".concat(hc," ").concat(hc),style:g,id:r,role:"presentation"},C),!H&&b.createElement("circle",{className:"".concat(i,"-circle-trail"),r:P,cx:x,cy:x,stroke:f,strokeLinecap:q,strokeWidth:l||a,style:J}),H?D():z())};function ha(t){return!t||t<0?0:t>100?100:t}function hf({success:t,successPercent:e}){let n=e;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}const f8=({percent:t,success:e,successPercent:n})=>{const r=ha(hf({success:e,successPercent:n}));return[r,ha(ha(t)-r)]},h8=({success:t={},strokeColor:e})=>{const{strokeColor:n}=t;return[n||il.green,e||null]},qf=(t,e,n)=>{var r,i,o,a;let l=-1,s=-1;if(e==="step"){const u=n.steps,c=n.strokeWidth;typeof t=="string"||typeof t>"u"?(l=t==="small"?2:14,s=c??8):typeof t=="number"?[l,s]=[t,t]:[l=14,s=8]=Array.isArray(t)?t:[t.width,t.height],l*=u}else if(e==="line"){const u=n==null?void 0:n.strokeWidth;typeof t=="string"||typeof t>"u"?s=u||(t==="small"?6:8):typeof t=="number"?[l,s]=[t,t]:[l=-1,s=8]=Array.isArray(t)?t:[t.width,t.height]}else(e==="circle"||e==="dashboard")&&(typeof t=="string"||typeof t>"u"?[l,s]=t==="small"?[60,60]:[120,120]:typeof t=="number"?[l,s]=[t,t]:Array.isArray(t)&&(l=(i=(r=t[0])!==null&&r!==void 0?r:t[1])!==null&&i!==void 0?i:120,s=(a=(o=t[0])!==null&&o!==void 0?o:t[1])!==null&&a!==void 0?a:120));return[l,s]},v8=3,g8=t=>v8/t*100,m8=t=>{const{prefixCls:e,trailColor:n=null,strokeLinecap:r="round",gapPosition:i,gapDegree:o,width:a=120,type:l,children:s,success:u,size:c=a,steps:f}=t,[v,g]=qf(c,"circle");let{strokeWidth:m}=t;m===void 0&&(m=Math.max(g8(v),6));const y={width:v,height:g,fontSize:v*.15+6},p=b.useMemo(()=>{if(o||o===0)return o;if(l==="dashboard")return 75},[o,l]),C=f8(t),x=i||l==="dashboard"&&"bottom"||void 0,S=Object.prototype.toString.call(t.strokeColor)==="[object Object]",E=h8({success:u,strokeColor:t.strokeColor}),P=me(`${e}-inner`,{[`${e}-circle-gradient`]:S}),$=b.createElement(d8,{steps:f,percent:f?C[1]:C,strokeWidth:m,trailWidth:m,strokeColor:f?E[1]:E,strokeLinecap:r,trailColor:n,prefixCls:e,gapDegree:p,gapPosition:x}),_=v<=20,M=b.createElement("div",{className:P,style:y},$,!_&&s);return _?b.createElement(eu,{title:s},M):M},vf="--progress-line-stroke-color",XE="--progress-percent",C1=t=>{const e=t?"100%":"-100%";return new cn(`antProgress${t?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${e}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${e}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},p8=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:Object.assign(Object.assign({},sr(t)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:t.fontSize},[`${e}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${e}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:t.remainingColor,borderRadius:t.lineBorderRadius},[`${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.defaultColor}},[`${e}-success-bg, ${e}-bg`]:{position:"relative",background:t.defaultColor,borderRadius:t.lineBorderRadius,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`},[`${e}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${e}-text`]:{width:"max-content",marginInlineStart:0,marginTop:t.marginXXS}},[`${e}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${vf})`]},height:"100%",width:`calc(1 / var(${XE}) * 100%)`,display:"block"},[`&${e}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${e}-text-inner`]:{color:t.colorWhite,[`&${e}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${e}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:t.colorSuccess},[`${e}-text`]:{display:"inline-block",marginInlineStart:t.marginXS,color:t.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[n]:{fontSize:t.fontSize},[`&${e}-text-outer`]:{width:"max-content"},[`&${e}-text-outer${e}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:t.marginXS}},[`${e}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${ye(t.paddingXXS)}`,[`&${e}-text-start`]:{justifyContent:"start"},[`&${e}-text-end`]:{justifyContent:"end"}},[`&${e}-status-active`]:{[`${e}-bg::before`]:{position:"absolute",inset:0,backgroundColor:t.colorBgContainer,borderRadius:t.lineBorderRadius,opacity:0,animationName:C1(),animationDuration:t.progressActiveMotionDuration,animationTimingFunction:t.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${e}-rtl${e}-status-active`]:{[`${e}-bg::before`]:{animationName:C1(!0)}},[`&${e}-status-exception`]:{[`${e}-bg`]:{backgroundColor:t.colorError},[`${e}-text`]:{color:t.colorError}},[`&${e}-status-exception ${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorError}},[`&${e}-status-success`]:{[`${e}-bg`]:{backgroundColor:t.colorSuccess},[`${e}-text`]:{color:t.colorSuccess}},[`&${e}-status-success ${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorSuccess}}})}},y8=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:{[`${e}-circle-trail`]:{stroke:t.remainingColor},[`&${e}-circle ${e}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${e}-circle ${e}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:t.circleTextColor,fontSize:t.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[n]:{fontSize:t.circleIconFontSize}},[`${e}-circle&-status-exception`]:{[`${e}-text`]:{color:t.colorError}},[`${e}-circle&-status-success`]:{[`${e}-text`]:{color:t.colorSuccess}}},[`${e}-inline-circle`]:{lineHeight:1,[`${e}-inner`]:{verticalAlign:"bottom"}}}},b8=t=>{const{componentCls:e}=t;return{[e]:{[`${e}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:t.progressStepMinWidth,marginInlineEnd:t.progressStepMarginInlineEnd,backgroundColor:t.remainingColor,transition:`all ${t.motionDurationSlow}`,"&-active":{backgroundColor:t.defaultColor}}}}}},w8=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:{[`${e}-small&-line, ${e}-small&-line ${e}-text ${n}`]:{fontSize:t.fontSizeSM}}}},x8=t=>({circleTextColor:t.colorText,defaultColor:t.colorInfo,remainingColor:t.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${t.fontSize/t.fontSizeSM}em`}),C8=lr("Progress",t=>{const e=t.calc(t.marginXXS).div(2).equal(),n=bn(t,{progressStepMarginInlineEnd:e,progressStepMinWidth:e,progressActiveMotionDuration:"2.4s"});return[p8(n),y8(n),b8(n),w8(n)]},x8);var S8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const E8=t=>{let e=[];return Object.keys(t).forEach(n=>{const r=parseFloat(n.replace(/%/g,""));Number.isNaN(r)||e.push({key:r,value:t[n]})}),e=e.sort((n,r)=>n.key-r.key),e.map(({key:n,value:r})=>`${r} ${n}%`).join(", ")},R8=(t,e)=>{const{from:n=il.blue,to:r=il.blue,direction:i=e==="rtl"?"to left":"to right"}=t,o=S8(t,["from","to","direction"]);if(Object.keys(o).length!==0){const l=E8(o),s=`linear-gradient(${i}, ${l})`;return{background:s,[vf]:s}}const a=`linear-gradient(${i}, ${n}, ${r})`;return{background:a,[vf]:a}},I8=t=>{const{prefixCls:e,direction:n,percent:r,size:i,strokeWidth:o,strokeColor:a,strokeLinecap:l="round",children:s,trailColor:u=null,percentPosition:c,success:f}=t,{align:v,type:g}=c,m=a&&typeof a!="string"?R8(a,n):{[vf]:a,background:a},y=l==="square"||l==="butt"?0:void 0,p=i??[-1,o||(i==="small"?6:8)],[C,x]=qf(p,"line",{strokeWidth:o}),S={backgroundColor:u||void 0,borderRadius:y},E=Object.assign(Object.assign({width:`${ha(r)}%`,height:x,borderRadius:y},m),{[XE]:ha(r)/100}),P=hf(t),$={width:`${ha(P)}%`,height:x,borderRadius:y,backgroundColor:f==null?void 0:f.strokeColor},_={width:C<0?"100%":C},M=b.createElement("div",{className:`${e}-inner`,style:S},b.createElement("div",{className:me(`${e}-bg`,`${e}-bg-${g}`),style:E},g==="inner"&&s),P!==void 0&&b.createElement("div",{className:`${e}-success-bg`,style:$})),B=g==="outer"&&v==="start",H=g==="outer"&&v==="end";return g==="outer"&&v==="center"?b.createElement("div",{className:`${e}-layout-bottom`},M,s):b.createElement("div",{className:`${e}-outer`,style:_},B&&s,M,H&&s)},P8=t=>{const{size:e,steps:n,rounding:r=Math.round,percent:i=0,strokeWidth:o=8,strokeColor:a,trailColor:l=null,prefixCls:s,children:u}=t,c=r(n*(i/100)),v=e??[e==="small"?2:14,o],[g,m]=qf(v,"step",{steps:n,strokeWidth:o}),y=g/n,p=Array.from({length:n});for(let C=0;C<n;C++){const x=Array.isArray(a)?a[C]:a;p[C]=b.createElement("div",{key:C,className:me(`${s}-steps-item`,{[`${s}-steps-item-active`]:C<=c-1}),style:{backgroundColor:C<=c-1?x:l,width:y,height:m}})}return b.createElement("div",{className:`${s}-steps-outer`},p,u)};var k8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $8=["normal","exception","active","success"],T8=b.forwardRef((t,e)=>{const{prefixCls:n,className:r,rootClassName:i,steps:o,strokeColor:a,percent:l=0,size:s="default",showInfo:u=!0,type:c="line",status:f,format:v,style:g,percentPosition:m={}}=t,y=k8(t,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:p="end",type:C="outer"}=m,x=Array.isArray(a)?a[0]:a,S=typeof a=="string"||Array.isArray(a)?a:void 0,E=b.useMemo(()=>{if(x){const z=typeof x=="string"?x:Object.values(x)[0];return new yn(z).isLight()}return!1},[a]),P=b.useMemo(()=>{var z,D;const U=hf(t);return parseInt(U!==void 0?(z=U??0)===null||z===void 0?void 0:z.toString():(D=l??0)===null||D===void 0?void 0:D.toString(),10)},[l,t.success,t.successPercent]),$=b.useMemo(()=>!$8.includes(f)&&P>=100?"success":f||"normal",[f,P]),{getPrefixCls:_,direction:M,progress:B}=b.useContext(un),H=_("progress",n),[k,T,O]=C8(H),L=c==="line",K=L&&!o,q=b.useMemo(()=>{if(!u)return null;const z=hf(t);let D;const U=v||(X=>`${X}%`),W=L&&E&&C==="inner";return C==="inner"||v||$!=="exception"&&$!=="success"?D=U(ha(l),ha(z)):$==="exception"?D=L?b.createElement(Rf,null):b.createElement(If,null):$==="success"&&(D=L?b.createElement(RS,null):b.createElement(SE,null)),b.createElement("span",{className:me(`${H}-text`,{[`${H}-text-bright`]:W,[`${H}-text-${p}`]:K,[`${H}-text-${C}`]:K}),title:typeof D=="string"?D:void 0},D)},[u,l,P,$,c,H,v]);let J;c==="line"?J=o?b.createElement(P8,Object.assign({},t,{strokeColor:S,prefixCls:H,steps:typeof o=="object"?o.count:o}),q):b.createElement(I8,Object.assign({},t,{strokeColor:x,prefixCls:H,direction:M,percentPosition:{align:p,type:C}}),q):(c==="circle"||c==="dashboard")&&(J=b.createElement(m8,Object.assign({},t,{strokeColor:x,prefixCls:H,progressStatus:$}),q));const V=me(H,`${H}-status-${$}`,{[`${H}-${c==="dashboard"&&"circle"||c}`]:c!=="line",[`${H}-inline-circle`]:c==="circle"&&qf(s,"circle")[0]<=20,[`${H}-line`]:K,[`${H}-line-align-${p}`]:K,[`${H}-line-position-${C}`]:K,[`${H}-steps`]:o,[`${H}-show-info`]:u,[`${H}-${s}`]:typeof s=="string",[`${H}-rtl`]:M==="rtl"},B==null?void 0:B.className,r,i,T,O);return k(b.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},B==null?void 0:B.style),g),className:V,role:"progressbar","aria-valuenow":P,"aria-valuemin":0,"aria-valuemax":100},yi(y,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),J))}),_8=b.forwardRef(({prefixCls:t,className:e,style:n,locale:r,listType:i,file:o,items:a,progress:l,iconRender:s,actionIconRender:u,itemRender:c,isImgUrl:f,showPreviewIcon:v,showRemoveIcon:g,showDownloadIcon:m,previewIcon:y,removeIcon:p,downloadIcon:C,extra:x,onPreview:S,onDownload:E,onClose:P},$)=>{var _,M;const{status:B}=o,[H,k]=b.useState(B);b.useEffect(()=>{B!=="removed"&&k(B)},[B]);const[T,O]=b.useState(!1);b.useEffect(()=>{const G=setTimeout(()=>{O(!0)},300);return()=>{clearTimeout(G)}},[]);const L=s(o);let K=b.createElement("div",{className:`${t}-icon`},L);if(i==="picture"||i==="picture-card"||i==="picture-circle")if(H==="uploading"||!o.thumbUrl&&!o.url){const G=me(`${t}-list-item-thumbnail`,{[`${t}-list-item-file`]:H!=="uploading"});K=b.createElement("div",{className:G},L)}else{const G=f!=null&&f(o)?b.createElement("img",{src:o.thumbUrl||o.url,alt:o.name,className:`${t}-list-item-image`,crossOrigin:o.crossOrigin}):L,ee=me(`${t}-list-item-thumbnail`,{[`${t}-list-item-file`]:f&&!f(o)});K=b.createElement("a",{className:ee,onClick:te=>S(o,te),href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer"},G)}const q=me(`${t}-list-item`,`${t}-list-item-${H}`),J=typeof o.linkProps=="string"?JSON.parse(o.linkProps):o.linkProps,V=(typeof g=="function"?g(o):g)?u((typeof p=="function"?p(o):p)||b.createElement(e8,null),()=>P(o),t,r.removeFile,!0):null,z=(typeof m=="function"?m(o):m)&&H==="done"?u((typeof C=="function"?C(o):C)||b.createElement(r8,null),()=>E(o),t,r.downloadFile):null,D=i!=="picture-card"&&i!=="picture-circle"&&b.createElement("span",{key:"download-delete",className:me(`${t}-list-item-actions`,{picture:i==="picture"})},z,V),U=typeof x=="function"?x(o):x,W=U&&b.createElement("span",{className:`${t}-list-item-extra`},U),X=me(`${t}-list-item-name`),Y=o.url?b.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:X,title:o.name},J,{href:o.url,onClick:G=>S(o,G)}),o.name,W):b.createElement("span",{key:"view",className:X,onClick:G=>S(o,G),title:o.name},o.name,W),Q=(typeof v=="function"?v(o):v)&&(o.url||o.thumbUrl)?b.createElement("a",{href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:G=>S(o,G),title:r.previewFile},typeof y=="function"?y(o):y||b.createElement(U2,null)):null,ne=(i==="picture-card"||i==="picture-circle")&&H!=="uploading"&&b.createElement("span",{className:`${t}-list-item-actions`},Q,H==="done"&&z,V),{getPrefixCls:ie}=b.useContext(un),re=ie(),I=b.createElement("div",{className:q},K,Y,D,ne,T&&b.createElement(to,{motionName:`${re}-fade`,visible:H==="uploading",motionDeadline:2e3},({className:G})=>{const ee="percent"in o?b.createElement(T8,Object.assign({type:"line",percent:o.percent,"aria-label":o["aria-label"],"aria-labelledby":o["aria-labelledby"]},l)):null;return b.createElement("div",{className:me(`${t}-list-item-progress`,G)},ee)})),A=o.response&&typeof o.response=="string"?o.response:((_=o.error)===null||_===void 0?void 0:_.statusText)||((M=o.error)===null||M===void 0?void 0:M.message)||r.uploadError,F=H==="error"?b.createElement(eu,{title:A,getPopupContainer:G=>G.parentNode},I):I;return b.createElement("div",{className:me(`${t}-list-item-container`,e),style:n,ref:$},c?c(F,o,a,{download:E.bind(null,o),preview:S.bind(null,o),remove:P.bind(null,o)}):F)}),A8=(t,e)=>{const{listType:n="text",previewFile:r=Qz,onPreview:i,onDownload:o,onRemove:a,locale:l,iconRender:s,isImageUrl:u=Yz,prefixCls:c,items:f=[],showPreviewIcon:v=!0,showRemoveIcon:g=!0,showDownloadIcon:m=!1,removeIcon:y,previewIcon:p,downloadIcon:C,extra:x,progress:S={size:[-1,2],showInfo:!1},appendAction:E,appendActionVisible:P=!0,itemRender:$,disabled:_}=t,M=Kz(),[B,H]=b.useState(!1),k=["picture-card","picture-circle"].includes(n);b.useEffect(()=>{n.startsWith("picture")&&(f||[]).forEach(X=>{!(X.originFileObj instanceof File||X.originFileObj instanceof Blob)||X.thumbUrl!==void 0||(X.thumbUrl="",r==null||r(X.originFileObj).then(Y=>{X.thumbUrl=Y||"",M()}))})},[n,f,r]),b.useEffect(()=>{H(!0)},[]);const T=(X,Y)=>{if(i)return Y==null||Y.preventDefault(),i(X)},O=X=>{typeof o=="function"?o(X):X.url&&window.open(X.url)},L=X=>{a==null||a(X)},K=X=>{if(s)return s(X,n);const Y=X.status==="uploading";if(n.startsWith("picture")){const Q=n==="picture"?b.createElement(Qa,null):l.uploading,ne=u!=null&&u(X)?b.createElement(qz,null):b.createElement(jz,null);return Y?Q:ne}return Y?b.createElement(Qa,null):b.createElement(Vz,null)},q=(X,Y,Q,ne,ie)=>{const re={type:"text",size:"small",title:ne,onClick:I=>{var A,F;Y(),b.isValidElement(X)&&((F=(A=X.props).onClick)===null||F===void 0||F.call(A,I))},className:`${Q}-list-item-action`,disabled:ie?_:!1};return b.isValidElement(X)?b.createElement(Bc,Object.assign({},re,{icon:vo(X,Object.assign(Object.assign({},X.props),{onClick:()=>{}}))})):b.createElement(Bc,Object.assign({},re),b.createElement("span",null,X))};b.useImperativeHandle(e,()=>({handlePreview:T,handleDownload:O}));const{getPrefixCls:J}=b.useContext(un),V=J("upload",c),z=J(),D=me(`${V}-list`,`${V}-list-${n}`),U=b.useMemo(()=>yi(LS(z),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[z]),W=Object.assign(Object.assign({},k?{}:U),{motionDeadline:2e3,motionName:`${V}-${k?"animate-inline":"animate"}`,keys:Ae(f.map(X=>({key:X.uid,file:X}))),motionAppear:B});return b.createElement("div",{className:D},b.createElement(vS,Object.assign({},W,{component:!1}),({key:X,file:Y,className:Q,style:ne})=>b.createElement(_8,{key:X,locale:l,prefixCls:V,className:Q,style:ne,file:Y,items:f,progress:S,listType:n,isImgUrl:u,showPreviewIcon:v,showRemoveIcon:g,showDownloadIcon:m,removeIcon:y,previewIcon:p,downloadIcon:C,extra:x,iconRender:K,actionIconRender:q,itemRender:$,onPreview:T,onDownload:O,onClose:L})),E&&b.createElement(to,Object.assign({},W,{visible:P,forceRender:!0}),({className:X,style:Y})=>vo(E,Q=>({className:me(Q.className,X),style:Object.assign(Object.assign(Object.assign({},Y),{pointerEvents:X?"none":void 0}),Q.style)}))))},O8=b.forwardRef(A8);var M8=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(c){try{u(r.next(c))}catch(f){a(f)}}function s(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(l,s)}u((r=r.apply(t,[])).next())})};const vc=`__LIST_IGNORE_${Date.now()}__`,N8=(t,e)=>{const{fileList:n,defaultFileList:r,onRemove:i,showUploadList:o=!0,listType:a="text",onPreview:l,onDownload:s,onChange:u,onDrop:c,previewFile:f,disabled:v,locale:g,iconRender:m,isImageUrl:y,progress:p,prefixCls:C,className:x,type:S="select",children:E,style:P,itemRender:$,maxCount:_,data:M={},multiple:B=!1,hasControlInside:H=!0,action:k="",accept:T="",supportServerRender:O=!0,rootClassName:L}=t,K=b.useContext(pi),q=v??K,[J,V]=Mn(r||[],{value:n,postState:Ie=>Ie??[]}),[z,D]=b.useState("drop"),U=b.useRef(null),W=b.useRef(null);b.useMemo(()=>{const Ie=Date.now();(n||[]).forEach((Te,je)=>{!Te.uid&&!Object.isFrozen(Te)&&(Te.uid=`__AUTO__${Ie}_${je}__`)})},[n]);const X=(Ie,Te,je)=>{let ke=Ae(Te),et=!1;_===1?ke=ke.slice(-1):_&&(et=ke.length>_,ke=ke.slice(0,_)),Gi.flushSync(()=>{V(ke)});const St={file:Ie,fileList:ke};je&&(St.event=je),(!et||Ie.status==="removed"||ke.some(Ht=>Ht.uid===Ie.uid))&&Gi.flushSync(()=>{u==null||u(St)})},Y=(Ie,Te)=>M8(void 0,void 0,void 0,function*(){const{beforeUpload:je,transformFile:ke}=t;let et=Ie;if(je){const St=yield je(Ie,Te);if(St===!1)return!1;if(delete Ie[vc],St===vc)return Object.defineProperty(Ie,vc,{value:!0,configurable:!0}),!1;typeof St=="object"&&St&&(et=St)}return ke&&(et=yield ke(et)),et}),Q=Ie=>{const Te=Ie.filter(et=>!et.file[vc]);if(!Te.length)return;const je=Te.map(et=>Sd(et.file));let ke=Ae(J);je.forEach(et=>{ke=Ed(et,ke)}),je.forEach((et,St)=>{let Ht=et;if(Te[St].parsedFile)et.status="uploading";else{const{originFileObj:Ft}=et;let We;try{We=new File([Ft],Ft.name,{type:Ft.type})}catch{We=new Blob([Ft],{type:Ft.type}),We.name=Ft.name,We.lastModifiedDate=new Date,We.lastModified=new Date().getTime()}We.uid=et.uid,Ht=We}X(Ht,ke)})},ne=(Ie,Te,je)=>{try{typeof Ie=="string"&&(Ie=JSON.parse(Ie))}catch{}if(!pg(Te,J))return;const ke=Sd(Te);ke.status="done",ke.percent=100,ke.response=Ie,ke.xhr=je;const et=Ed(ke,J);X(ke,et)},ie=(Ie,Te)=>{if(!pg(Te,J))return;const je=Sd(Te);je.status="uploading",je.percent=Ie.percent;const ke=Ed(je,J);X(je,ke,Ie)},re=(Ie,Te,je)=>{if(!pg(je,J))return;const ke=Sd(je);ke.error=Ie,ke.response=Te,ke.status="error";const et=Ed(ke,J);X(ke,et)},I=Ie=>{let Te;Promise.resolve(typeof i=="function"?i(Ie):i).then(je=>{var ke;if(je===!1)return;const et=Gz(Ie,J);et&&(Te=Object.assign(Object.assign({},Ie),{status:"removed"}),J==null||J.forEach(St=>{const Ht=Te.uid!==void 0?"uid":"name";St[Ht]===Te[Ht]&&!Object.isFrozen(St)&&(St.status="removed")}),(ke=U.current)===null||ke===void 0||ke.abort(Te),X(Te,et))})},A=Ie=>{D(Ie.type),Ie.type==="drop"&&(c==null||c(Ie))};b.useImperativeHandle(e,()=>({onBatchStart:Q,onSuccess:ne,onProgress:ie,onError:re,fileList:J,upload:U.current,nativeElement:W.current}));const{getPrefixCls:F,direction:G,upload:ee}=b.useContext(un),te=F("upload",C),ae=Object.assign(Object.assign({onBatchStart:Q,onError:re,onProgress:ie,onSuccess:ne},t),{data:M,multiple:B,action:k,accept:T,supportServerRender:O,prefixCls:te,disabled:q,beforeUpload:Y,onChange:void 0,hasControlInside:H});delete ae.className,delete ae.style,(!E||q)&&delete ae.id;const de=`${te}-wrapper`,[he,pe,we]=Dz(te,de),[_e]=es("Upload",Ga.Upload),{showRemoveIcon:$e,showPreviewIcon:Me,showDownloadIcon:Re,removeIcon:be,previewIcon:Le,downloadIcon:He,extra:it}=typeof o=="boolean"?{}:o,qe=typeof $e>"u"?!q:$e,De=(Ie,Te)=>o?b.createElement(O8,{prefixCls:te,listType:a,items:J,previewFile:f,onPreview:l,onDownload:s,onRemove:I,showRemoveIcon:qe,showPreviewIcon:Me,showDownloadIcon:Re,removeIcon:be,previewIcon:Le,downloadIcon:He,iconRender:m,extra:it,locale:Object.assign(Object.assign({},_e),g),isImageUrl:y,progress:p,appendAction:Ie,appendActionVisible:Te,itemRender:$,disabled:q}):Ie,nt=me(de,x,L,pe,we,ee==null?void 0:ee.className,{[`${te}-rtl`]:G==="rtl",[`${te}-picture-card-wrapper`]:a==="picture-card",[`${te}-picture-circle-wrapper`]:a==="picture-circle"}),Je=Object.assign(Object.assign({},ee==null?void 0:ee.style),P);if(S==="drag"){const Ie=me(pe,te,`${te}-drag`,{[`${te}-drag-uploading`]:J.some(Te=>Te.status==="uploading"),[`${te}-drag-hover`]:z==="dragover",[`${te}-disabled`]:q,[`${te}-rtl`]:G==="rtl"});return he(b.createElement("span",{className:nt,ref:W},b.createElement("div",{className:Ie,style:Je,onDrop:A,onDragOver:A,onDragLeave:A},b.createElement(Am,Object.assign({},ae,{ref:U,className:`${te}-btn`}),b.createElement("div",{className:`${te}-drag-container`},E))),De()))}const st=me(te,`${te}-select`,{[`${te}-disabled`]:q,[`${te}-hidden`]:!E}),Ve=b.createElement("div",{className:st,style:Je},b.createElement(Am,Object.assign({},ae,{ref:U})));return he(a==="picture-card"||a==="picture-circle"?b.createElement("span",{className:nt,ref:W},De(Ve,!!E)):b.createElement("span",{className:nt,ref:W},Ve,De()))},YE=b.forwardRef(N8);var L8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const D8=b.forwardRef((t,e)=>{var{style:n,height:r,hasControlInside:i=!1}=t,o=L8(t,["style","height","hasControlInside"]);return b.createElement(YE,Object.assign({ref:e,hasControlInside:i},o,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}),Ap=YE;Ap.Dragger=D8;Ap.LIST_IGNORE=vc;var F8=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],QE=b.forwardRef(function(t,e){var n,r=t.prefixCls,i=r===void 0?"rc-switch":r,o=t.className,a=t.checked,l=t.defaultChecked,s=t.disabled,u=t.loadingIcon,c=t.checkedChildren,f=t.unCheckedChildren,v=t.onClick,g=t.onChange,m=t.onKeyDown,y=_t(t,F8),p=Mn(!1,{value:a,defaultValue:l}),C=fe(p,2),x=C[0],S=C[1];function E(M,B){var H=x;return s||(H=M,S(H),g==null||g(H,B)),H}function P(M){M.which===Ze.LEFT?E(!1,M):M.which===Ze.RIGHT&&E(!0,M),m==null||m(M)}function $(M){var B=E(!x,M);v==null||v(B,M)}var _=me(i,o,(n={},oe(n,"".concat(i,"-checked"),x),oe(n,"".concat(i,"-disabled"),s),n));return b.createElement("button",Ne({},y,{type:"button",role:"switch","aria-checked":x,disabled:s,className:_,ref:e,onKeyDown:P,onClick:$}),u,b.createElement("span",{className:"".concat(i,"-inner")},b.createElement("span",{className:"".concat(i,"-inner-checked")},c),b.createElement("span",{className:"".concat(i,"-inner-unchecked")},f)))});QE.displayName="Switch";const B8=t=>{const{componentCls:e,trackHeightSM:n,trackPadding:r,trackMinWidthSM:i,innerMinMarginSM:o,innerMaxMarginSM:a,handleSizeSM:l,calc:s}=t,u=`${e}-inner`,c=ye(s(l).add(s(r).mul(2)).equal()),f=ye(s(a).mul(2).equal());return{[e]:{[`&${e}-small`]:{minWidth:i,height:n,lineHeight:ye(n),[`${e}-inner`]:{paddingInlineStart:a,paddingInlineEnd:o,[`${u}-checked, ${u}-unchecked`]:{minHeight:n},[`${u}-checked`]:{marginInlineStart:`calc(-100% + ${c} - ${f})`,marginInlineEnd:`calc(100% - ${c} + ${f})`},[`${u}-unchecked`]:{marginTop:s(n).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${e}-handle`]:{width:l,height:l},[`${e}-loading-icon`]:{top:s(s(l).sub(t.switchLoadingIconSize)).div(2).equal(),fontSize:t.switchLoadingIconSize},[`&${e}-checked`]:{[`${e}-inner`]:{paddingInlineStart:o,paddingInlineEnd:a,[`${u}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${u}-unchecked`]:{marginInlineStart:`calc(100% - ${c} + ${f})`,marginInlineEnd:`calc(-100% + ${c} - ${f})`}},[`${e}-handle`]:{insetInlineStart:`calc(100% - ${ye(s(l).add(r).equal())})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${u}`]:{[`${u}-unchecked`]:{marginInlineStart:s(t.marginXXS).div(2).equal(),marginInlineEnd:s(t.marginXXS).mul(-1).div(2).equal()}},[`&${e}-checked ${u}`]:{[`${u}-checked`]:{marginInlineStart:s(t.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:s(t.marginXXS).div(2).equal()}}}}}}},j8=t=>{const{componentCls:e,handleSize:n,calc:r}=t;return{[e]:{[`${e}-loading-icon${t.iconCls}`]:{position:"relative",top:r(r(n).sub(t.fontSize)).div(2).equal(),color:t.switchLoadingIconColor,verticalAlign:"top"},[`&${e}-checked ${e}-loading-icon`]:{color:t.switchColor}}}},z8=t=>{const{componentCls:e,trackPadding:n,handleBg:r,handleShadow:i,handleSize:o,calc:a}=t,l=`${e}-handle`;return{[e]:{[l]:{position:"absolute",top:n,insetInlineStart:n,width:o,height:o,transition:`all ${t.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:r,borderRadius:a(o).div(2).equal(),boxShadow:i,transition:`all ${t.switchDuration} ease-in-out`,content:'""'}},[`&${e}-checked ${l}`]:{insetInlineStart:`calc(100% - ${ye(a(o).add(n).equal())})`},[`&:not(${e}-disabled):active`]:{[`${l}::before`]:{insetInlineEnd:t.switchHandleActiveInset,insetInlineStart:0},[`&${e}-checked ${l}::before`]:{insetInlineEnd:0,insetInlineStart:t.switchHandleActiveInset}}}}},H8=t=>{const{componentCls:e,trackHeight:n,trackPadding:r,innerMinMargin:i,innerMaxMargin:o,handleSize:a,calc:l}=t,s=`${e}-inner`,u=ye(l(a).add(l(r).mul(2)).equal()),c=ye(l(o).mul(2).equal());return{[e]:{[s]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:o,paddingInlineEnd:i,transition:`padding-inline-start ${t.switchDuration} ease-in-out, padding-inline-end ${t.switchDuration} ease-in-out`,[`${s}-checked, ${s}-unchecked`]:{display:"block",color:t.colorTextLightSolid,fontSize:t.fontSizeSM,transition:`margin-inline-start ${t.switchDuration} ease-in-out, margin-inline-end ${t.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:n},[`${s}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${c})`,marginInlineEnd:`calc(100% - ${u} + ${c})`},[`${s}-unchecked`]:{marginTop:l(n).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${e}-checked ${s}`]:{paddingInlineStart:i,paddingInlineEnd:o,[`${s}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${s}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${c})`,marginInlineEnd:`calc(-100% + ${u} - ${c})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${s}`]:{[`${s}-unchecked`]:{marginInlineStart:l(r).mul(2).equal(),marginInlineEnd:l(r).mul(-1).mul(2).equal()}},[`&${e}-checked ${s}`]:{[`${s}-checked`]:{marginInlineStart:l(r).mul(-1).mul(2).equal(),marginInlineEnd:l(r).mul(2).equal()}}}}}},V8=t=>{const{componentCls:e,trackHeight:n,trackMinWidth:r}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},sr(t)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:r,height:n,lineHeight:ye(n),verticalAlign:"middle",background:t.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${t.motionDurationMid}`,userSelect:"none",[`&:hover:not(${e}-disabled)`]:{background:t.colorTextTertiary}}),Ya(t)),{[`&${e}-checked`]:{background:t.switchColor,[`&:hover:not(${e}-disabled)`]:{background:t.colorPrimaryHover}},[`&${e}-loading, &${e}-disabled`]:{cursor:"not-allowed",opacity:t.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${e}-rtl`]:{direction:"rtl"}})}},W8=t=>{const{fontSize:e,lineHeight:n,controlHeight:r,colorWhite:i}=t,o=e*n,a=r/2,l=2,s=o-l*2,u=a-l*2;return{trackHeight:o,trackHeightSM:a,trackMinWidth:s*2+l*4,trackMinWidthSM:u*2+l*2,trackPadding:l,handleBg:i,handleSize:s,handleSizeSM:u,handleShadow:`0 2px 4px 0 ${new yn("#00230b").setA(.2).toRgbString()}`,innerMinMargin:s/2,innerMaxMargin:s+l+l*2,innerMinMarginSM:u/2,innerMaxMarginSM:u+l+l*2}},U8=lr("Switch",t=>{const e=bn(t,{switchDuration:t.motionDurationMid,switchColor:t.colorPrimary,switchDisabledOpacity:t.opacityLoading,switchLoadingIconSize:t.calc(t.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${t.opacityLoading})`,switchHandleActiveInset:"-30%"});return[V8(e),H8(e),z8(e),j8(e),B8(e)]},W8);var q8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const K8=b.forwardRef((t,e)=>{const{prefixCls:n,size:r,disabled:i,loading:o,className:a,rootClassName:l,style:s,checked:u,value:c,defaultChecked:f,defaultValue:v,onChange:g}=t,m=q8(t,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[y,p]=Mn(!1,{value:u??c,defaultValue:f??v}),{getPrefixCls:C,direction:x,switch:S}=b.useContext(un),E=b.useContext(pi),P=(i??E)||o,$=C("switch",n),_=b.createElement("div",{className:`${$}-handle`},o&&b.createElement(Qa,{className:`${$}-loading-icon`})),[M,B,H]=U8($),k=bi(r),T=me(S==null?void 0:S.className,{[`${$}-small`]:k==="small",[`${$}-loading`]:o,[`${$}-rtl`]:x==="rtl"},a,l,B,H),O=Object.assign(Object.assign({},S==null?void 0:S.style),s),L=(...K)=>{p(K[0]),g==null||g.apply(void 0,K)};return M(b.createElement(G2,{component:"Switch"},b.createElement(QE,Object.assign({},m,{checked:y,onChange:L,prefixCls:$,className:T,style:O,disabled:P,ref:e,loadingIcon:_}))))}),Om=K8;Om.__ANT_SWITCH=!0;const G8=()=>{var f,v,g;const[t,e]=b.useState(!1),[n,r]=b.useState(),i=(m,y)=>{const p=new FileReader;p.addEventListener("load",()=>y(p.result)),p.readAsDataURL(m)},o=m=>{if(m.file.status==="uploading"){e(!0);return}m.file.status==="done"&&i(m.file.originFileObj,y=>{e(!1),r(y)})},a=vt.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[t?vt.jsx(Qa,{}):vt.jsx(WS,{}),vt.jsx("div",{style:{marginTop:8},children:"Upload"})]}),l=(m,y)=>{window.MyEditor.setBackgroundColor(y),window.MyEditor.render()},s=(m,y)=>{window.MyEditor.setGrid({gridColor:y}),window.MyEditor.render()},u=m=>{console.log("[ value ]",m),window.MyEditor.setGrid({grid:m}),window.MyEditor.render()},c=m=>{localStorage.setItem("gridAdsorption",JSON.stringify(m))};return b.useEffect(()=>{let m=setInterval(()=>{const y=window.MyEditor.store.data;console.log("[ store ]",y)},5e3);return()=>{clearInterval(m)}},[]),vt.jsxs("div",{className:fr.fileSet,children:[vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"背景颜色"}),vt.jsx(ff,{style:{width:130},defaultValue:((f=window.MyEditor)==null?void 0:f.store.data.background)??"#fff",showText:!0,allowClear:!0,onChange:l})]}),vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"背景图片"}),vt.jsx(Ap,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:BM,onChange:o,children:n?vt.jsx("img",{src:n,alt:"avatar",style:{width:"100%"}}):a})]}),vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"背景网格"}),vt.jsx(Om,{onChange:u,defaultChecked:((v=window.MyEditor)==null?void 0:v.store.data.grid)??!1})]}),vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"网格颜色"}),vt.jsx(ff,{style:{width:130},defaultValue:((g=window.MyEditor)==null?void 0:g.store.data.gridColor)??"#ccc7c7",showText:!0,allowClear:!0,onChange:s})]}),vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"网格吸附"}),vt.jsx(Om,{onChange:c})]})]})};function X8(){const t=[{key:"1",label:"文件",children:e()},{key:"2",label:"画布",children:vt.jsx(G8,{})}];function e(){return vt.jsxs("div",{className:fr.fileSet,children:[vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"文件名"}),vt.jsx(Sl,{className:fr.value,placeholder:"file name"})]}),vt.jsxs("div",{className:fr.setItem,children:[vt.jsx("span",{className:fr.label,children:"分类"}),vt.jsx(is,{defaultValue:"1",style:{width:190},className:fr.value,options:[{value:"1",label:"项目A"},{value:"2",label:"项目B"}]})]})]})}return vt.jsx("div",{className:fr.canvasItem,children:vt.jsx(ap,{defaultActiveKey:[1,2],ghost:!0,expandIconPosition:"end",items:t})})}function Y8(){const t=o=>{console.log(o)},e=[{key:"11",label:"属性",children:"Content of Tab Pane 1"},{key:"12",label:"事件",children:"Content of Tab Pane 2"},{key:"13",label:"动效",children:"Content of Tab Pane 3"},{key:"14",label:"数据",children:"Content of Tab Pane 423"}],n=[{key:"1",label:"图纸",children:vt.jsx(X8,{})},{key:"2",label:"通信",children:"Content of Tab Pane 2"},{key:"3",label:"结构",children:"Content of Tab Pane 3"}],[r,i]=b.useState(!1);return b.useEffect(()=>{const o=()=>{var s;const l=(s=window.MyEditor)==null?void 0:s.store.active;l&&l.length>0?i(!0):i(!1)};setTimeout(()=>{var l;(l=window.MyEditor)==null||l.on("add-pel",()=>{i(!0)})},1e3);const a=document.getElementById("meta2d-container");return a==null||a.addEventListener("click",o),()=>{var l;a==null||a.removeEventListener("click",o),(l=window.MyEditor)==null||l.off("add-pel",()=>{i(!0)})}},[]),vt.jsx("div",{className:vx.rightView,children:vt.jsx("div",{className:vx.tit,children:vt.jsx(b2,{defaultActiveKey:"1",items:r?e:n,onChange:t})})})}function Q8(){return vt.jsxs(vt.Fragment,{children:[vt.jsx(jM,{}),vt.jsx(WN,{}),vt.jsx(Y8,{}),vt.jsx(oT,{})]})}LI.createRoot(document.getElementById("root")).render(vt.jsx(b.StrictMode,{children:vt.jsx(Q8,{})}));
